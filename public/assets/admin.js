/*! For license information please see admin.js.LICENSE.txt */
(()=>{var t={8492:()=>{},1859:()=>{Array.prototype.flat||(Array.prototype.flat=function t(e){return(null!=e?e:1)>0?Array.prototype.reduce.call(this,(function(n,r){return n.concat(Array.isArray(r)?t.call(r,e-1):r)}),[]):[].concat(this)})},9043:()=>{!function(t){"use strict";var e=function e(n,r){this.options=t.extend({},e.DEFAULTS,r);var i=this.options.target===e.DEFAULTS.target?t(this.options.target):t(document).find(this.options.target);this.$target=i.on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(n),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function n(n){return this.each((function(){var r=t(this),i=r.data("bs.affix"),o="object"==typeof n&&n;i||r.data("bs.affix",i=new e(this,o)),"string"==typeof n&&i[n]()}))}e.VERSION="3.4.1",e.RESET="affix affix-top affix-bottom",e.DEFAULTS={offset:0,target:window},e.prototype.getState=function(t,e,n,r){var i=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return i<n&&"top";if("bottom"==this.affixed)return null!=n?!(i+this.unpin<=o.top)&&"bottom":!(i+a<=t-r)&&"bottom";var s=null==this.affixed,u=s?i:o.top;return null!=n&&i<=n?"top":null!=r&&u+(s?a:e)>=t-r&&"bottom"},e.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(e.RESET).addClass("affix");var t=this.$target.scrollTop(),n=this.$element.offset();return this.pinnedOffset=n.top-t},e.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},e.prototype.checkPosition=function(){if(this.$element.is(":visible")){var n=this.$element.height(),r=this.options.offset,i=r.top,o=r.bottom,a=Math.max(t(document).height(),t(document.body).height());"object"!=typeof r&&(o=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof o&&(o=r.bottom(this.$element));var s=this.getState(a,n,i,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var u="affix"+(s?"-"+s:""),l=t.Event(u+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(e.RESET).addClass(u).trigger(u.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-n-o})}};var r=t.fn.affix;t.fn.affix=n,t.fn.affix.Constructor=e,t.fn.affix.noConflict=function(){return t.fn.affix=r,this},t(window).on("load",(function(){t('[data-spy="affix"]').each((function(){var e=t(this),r=e.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),n.call(e,r)}))}))}(jQuery)},6199:()=>{!function(t){"use strict";var e='[data-toggle="dropdown"]',n=function(e){t(e).on("click.bs.dropdown",this.toggle)};function r(e){var n=e.attr("data-target");n||(n=(n=e.attr("href"))&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r="#"!==n?t(document).find(n):null;return r&&r.length?r:e.parent()}function i(n){n&&3===n.which||(t(".dropdown-backdrop").remove(),t(e).each((function(){var e=t(this),i=r(e),o={relatedTarget:this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&t.contains(i[0],n.target)||(i.trigger(n=t.Event("hide.bs.dropdown",o)),n.isDefaultPrevented()||(e.attr("aria-expanded","false"),i.removeClass("open").trigger(t.Event("hidden.bs.dropdown",o)))))})))}n.VERSION="3.4.1",n.prototype.toggle=function(e){var n=t(this);if(!n.is(".disabled, :disabled")){var o=r(n),a=o.hasClass("open");if(i(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(t(this)).on("click",i);var s={relatedTarget:this};if(o.trigger(e=t.Event("show.bs.dropdown",s)),e.isDefaultPrevented())return;n.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(t.Event("shown.bs.dropdown",s))}return!1}},n.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=t(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var o=r(i),a=o.hasClass("open");if(!a&&27!=n.which||a&&27==n.which)return 27==n.which&&o.find(e).trigger("focus"),i.trigger("click");var s=o.find(".dropdown-menu li:not(.disabled):visible a");if(s.length){var u=s.index(n.target);38==n.which&&u>0&&u--,40==n.which&&u<s.length-1&&u++,~u||(u=0),s.eq(u).trigger("focus")}}}};var o=t.fn.dropdown;t.fn.dropdown=function(e){return this.each((function(){var r=t(this),i=r.data("bs.dropdown");i||r.data("bs.dropdown",i=new n(this)),"string"==typeof e&&i[e].call(r)}))},t.fn.dropdown.Constructor=n,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=o,this},t(document).on("click.bs.dropdown.data-api",i).on("click.bs.dropdown.data-api",".dropdown form",(function(t){t.stopPropagation()})).on("click.bs.dropdown.data-api",e,n.prototype.toggle).on("keydown.bs.dropdown.data-api",e,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery)},7865:()=>{!function(t){"use strict";var e=["sanitize","whiteList","sanitizeFn"],n=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],r=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,i=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function o(e,o){var a=e.nodeName.toLowerCase();if(-1!==t.inArray(a,o))return-1===t.inArray(a,n)||Boolean(e.nodeValue.match(r)||e.nodeValue.match(i));for(var s=t(o).filter((function(t,e){return e instanceof RegExp})),u=0,l=s.length;u<l;u++)if(a.match(s[u]))return!0;return!1}function a(e,n,r){if(0===e.length)return e;if(r&&"function"==typeof r)return r(e);if(!document.implementation||!document.implementation.createHTMLDocument)return e;var i=document.implementation.createHTMLDocument("sanitization");i.body.innerHTML=e;for(var a=t.map(n,(function(t,e){return e})),s=t(i.body).find("*"),u=0,l=s.length;u<l;u++){var c=s[u],d=c.nodeName.toLowerCase();if(-1!==t.inArray(d,a))for(var f=t.map(c.attributes,(function(t){return t})),p=[].concat(n["*"]||[],n[d]||[]),h=0,m=f.length;h<m;h++)o(f[h],p)||c.removeAttribute(f[h].nodeName);else c.parentNode.removeChild(c)}return i.body.innerHTML}var s=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",t,e)};s.VERSION="3.4.1",s.TRANSITION_DURATION=150,s.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0},sanitize:!0,sanitizeFn:null,whiteList:{"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]}},s.prototype.init=function(e,n,r){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&t(document).find(t.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),o=i.length;o--;){var a=i[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",u="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(u+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},s.prototype.getDefaults=function(){return s.DEFAULTS},s.prototype.getOptions=function(n){var r=this.$element.data();for(var i in r)r.hasOwnProperty(i)&&-1!==t.inArray(i,e)&&delete r[i];return(n=t.extend({},this.getDefaults(),r,n)).delay&&"number"==typeof n.delay&&(n.delay={show:n.delay,hide:n.delay}),n.sanitize&&(n.template=a(n.template,n.whiteList,n.sanitizeFn)),n},s.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,(function(t,r){n[t]!=r&&(e[t]=r)})),e},s.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusin"==e.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState)n.hoverState="in";else{if(clearTimeout(n.timeout),n.hoverState="in",!n.options.delay||!n.options.delay.show)return n.show();n.timeout=setTimeout((function(){"in"==n.hoverState&&n.show()}),n.options.delay.show)}},s.prototype.isInStateTrue=function(){for(var t in this.inState)if(this.inState[t])return!0;return!1},s.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);if(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),e instanceof t.Event&&(n.inState["focusout"==e.type?"focus":"hover"]=!1),!n.isInStateTrue()){if(clearTimeout(n.timeout),n.hoverState="out",!n.options.delay||!n.options.delay.hide)return n.hide();n.timeout=setTimeout((function(){"out"==n.hoverState&&n.hide()}),n.options.delay.hide)}},s.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var r=this,i=this.tip(),o=this.getUID(this.type);this.setContent(),i.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&i.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,u=/\s?auto?\s?/i,l=u.test(a);l&&(a=a.replace(u,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?i.appendTo(t(document).find(this.options.container)):i.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),d=i[0].offsetWidth,f=i[0].offsetHeight;if(l){var p=a,h=this.getPosition(this.$viewport);a="bottom"==a&&c.bottom+f>h.bottom?"top":"top"==a&&c.top-f<h.top?"bottom":"right"==a&&c.right+d>h.width?"left":"left"==a&&c.left-d<h.left?"right":a,i.removeClass(p).addClass(a)}var m=this.getCalculatedOffset(a,c,d,f);this.applyPlacement(m,a);var v=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==t&&r.leave(r)};t.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",v).emulateTransitionEnd(s.TRANSITION_DURATION):v()}},s.prototype.applyPlacement=function(e,n){var r=this.tip(),i=r[0].offsetWidth,o=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),e.top+=a,e.left+=s,t.offset.setOffset(r[0],t.extend({using:function(t){r.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),r.addClass("in");var u=r[0].offsetWidth,l=r[0].offsetHeight;"top"==n&&l!=o&&(e.top=e.top+o-l);var c=this.getViewportAdjustedDelta(n,e,u,l);c.left?e.left+=c.left:e.top+=c.top;var d=/top|bottom/.test(n),f=d?2*c.left-i+u:2*c.top-o+l,p=d?"offsetWidth":"offsetHeight";r.offset(e),this.replaceArrow(f,r[0][p],d)},s.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},s.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();this.options.html?(this.options.sanitize&&(e=a(e,this.options.whiteList,this.options.sanitizeFn)),t.find(".tooltip-inner").html(e)):t.find(".tooltip-inner").text(e),t.removeClass("fade in top bottom left right")},s.prototype.hide=function(e){var n=this,r=t(this.$tip),i=t.Event("hide.bs."+this.type);function o(){"in"!=n.hoverState&&r.detach(),n.$element&&n.$element.removeAttr("aria-describedby").trigger("hidden.bs."+n.type),e&&e()}if(this.$element.trigger(i),!i.isDefaultPrevented())return r.removeClass("in"),t.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",o).emulateTransitionEnd(s.TRANSITION_DURATION):o(),this.hoverState=null,this},s.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},s.prototype.hasContent=function(){return this.getTitle()},s.prototype.getPosition=function(e){var n=(e=e||this.$element)[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=t.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o=window.SVGElement&&n instanceof window.SVGElement,a=r?{top:0,left:0}:o?null:e.offset(),s={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},u=r?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},i,s,u,a)},s.prototype.getCalculatedOffset=function(t,e,n,r){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-r,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-r/2,left:e.left-n}:{top:e.top+e.height/2-r/2,left:e.left+e.width}},s.prototype.getViewportAdjustedDelta=function(t,e,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-o-a.scroll,u=e.top+o-a.scroll+r;s<a.top?i.top=a.top-s:u>a.top+a.height&&(i.top=a.top+a.height-u)}else{var l=e.left-o,c=e.left+o+n;l<a.left?i.left=a.left-l:c>a.right&&(i.left=a.left+a.width-c)}return i},s.prototype.getTitle=function(){var t=this.$element,e=this.options;return t.attr("data-original-title")||("function"==typeof e.title?e.title.call(t[0]):e.title)},s.prototype.getUID=function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},s.prototype.tip=function(){if(!this.$tip&&(this.$tip=t(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},s.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},s.prototype.enable=function(){this.enabled=!0},s.prototype.disable=function(){this.enabled=!1},s.prototype.toggleEnabled=function(){this.enabled=!this.enabled},s.prototype.toggle=function(e){var n=this;e&&((n=t(e.currentTarget).data("bs."+this.type))||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),e?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},s.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide((function(){t.$element.off("."+t.type).removeData("bs."+t.type),t.$tip&&t.$tip.detach(),t.$tip=null,t.$arrow=null,t.$viewport=null,t.$element=null}))},s.prototype.sanitizeHtml=function(t){return a(t,this.options.whiteList,this.options.sanitizeFn)};var u=t.fn.tooltip;t.fn.tooltip=function(e){return this.each((function(){var n=t(this),r=n.data("bs.tooltip"),i="object"==typeof e&&e;!r&&/destroy|hide/.test(e)||(r||n.data("bs.tooltip",r=new s(this,i)),"string"==typeof e&&r[e]())}))},t.fn.tooltip.Constructor=s,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=u,this}}(jQuery)},6935:()=>{!function(t){"use strict";t.fn.emulateTransitionEnd=function(e){var n=!1,r=this;return t(this).one("bsTransitionEnd",(function(){n=!0})),setTimeout((function(){n||t(r).trigger(t.support.transition.end)}),e),this},t((function(){t.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})}))}(jQuery)},2898:t=>{var e=function(t){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=t.width,this.height=this.canvas.height=t.height,this.context.drawImage(t,0,0,this.width,this.height)};e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.update=function(t){this.context.putImageData(t,0,0)},e.prototype.getPixelCount=function(){return this.width*this.height},e.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},e.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var n=function(){};if(n.prototype.getColor=function(t,e){return this.getPalette(t,5,e)[0]},n.prototype.getPalette=function(t,n,r){void 0===n&&(n=10),(void 0===r||1>r)&&(r=10);for(var o,a,s,u,l=new e(t),c=l.getImageData().data,d=l.getPixelCount(),f=[],p=0;d>p;p+=r)a=c[0+(o=4*p)],s=c[o+1],u=c[o+2],c[o+3]>=125&&(a>250&&s>250&&u>250||f.push([a,s,u]));var h=i.quantize(f,n),m=h?h.palette():null;return l.removeCanvas(),m},!r)var r={map:function(t,e){var n={};return e?t.map((function(t,r){return n.index=r,e.call(n,t)})):t.slice()},naturalOrder:function(t,e){return e>t?-1:t>e?1:0},sum:function(t,e){var n={};return t.reduce(e?function(t,r,i){return n.index=i,t+e.call(n,r)}:function(t,e){return t+e},0)},max:function(t,e){return Math.max.apply(null,e?r.map(t,e):t)}};var i=function(){function t(t,e,n){return(t<<2*u)+(e<<u)+n}function e(t){function e(){n.sort(t),r=!0}var n=[],r=!1;return{push:function(t){n.push(t),r=!1},peek:function(t){return r||e(),void 0===t&&(t=n.length-1),n[t]},pop:function(){return r||e(),n.pop()},size:function(){return n.length},map:function(t){return n.map(t)},debug:function(){return r||e(),n}}}function n(t,e,n,r,i,o,a){var s=this;s.r1=t,s.r2=e,s.g1=n,s.g2=r,s.b1=i,s.b2=o,s.histo=a}function i(){this.vboxes=new e((function(t,e){return r.naturalOrder(t.vbox.count()*t.vbox.volume(),e.vbox.count()*e.vbox.volume())}))}function o(e){var n,r,i,o,a=new Array(1<<3*u);return e.forEach((function(e){r=e[0]>>l,i=e[1]>>l,o=e[2]>>l,n=t(r,i,o),a[n]=(a[n]||0)+1})),a}function a(t,e){var r,i,o,a=1e6,s=0,u=1e6,c=0,d=1e6,f=0;return t.forEach((function(t){r=t[0]>>l,i=t[1]>>l,o=t[2]>>l,a>r?a=r:r>s&&(s=r),u>i?u=i:i>c&&(c=i),d>o?d=o:o>f&&(f=o)})),new n(a,s,u,c,d,f,e)}function s(e,n){if(n.count()){var i=n.r2-n.r1+1,o=n.g2-n.g1+1,a=n.b2-n.b1+1,s=r.max([i,o,a]);if(1==n.count())return[n.copy()];var u,l,c,d,f=0,p=[],h=[];if(s==i)for(u=n.r1;u<=n.r2;u++){for(d=0,l=n.g1;l<=n.g2;l++)for(c=n.b1;c<=n.b2;c++)d+=e[t(u,l,c)]||0;f+=d,p[u]=f}else if(s==o)for(u=n.g1;u<=n.g2;u++){for(d=0,l=n.r1;l<=n.r2;l++)for(c=n.b1;c<=n.b2;c++)d+=e[t(l,u,c)]||0;f+=d,p[u]=f}else for(u=n.b1;u<=n.b2;u++){for(d=0,l=n.r1;l<=n.r2;l++)for(c=n.g1;c<=n.g2;c++)d+=e[t(l,c,u)]||0;f+=d,p[u]=f}return p.forEach((function(t,e){h[e]=f-t})),function(t){var e,r,i,o,a,s=t+"1",l=t+"2",c=0;for(u=n[s];u<=n[l];u++)if(p[u]>f/2){for(i=n.copy(),o=n.copy(),e=u-n[s],a=(r=n[l]-u)>=e?Math.min(n[l]-1,~~(u+r/2)):Math.max(n[s],~~(u-1-e/2));!p[a];)a++;for(c=h[a];!c&&p[a-1];)c=h[--a];return i[l]=a,o[s]=i[l]+1,[i,o]}}(s==i?"r":s==o?"g":"b")}}var u=5,l=8-u;return n.prototype={volume:function(t){var e=this;return(!e._volume||t)&&(e._volume=(e.r2-e.r1+1)*(e.g2-e.g1+1)*(e.b2-e.b1+1)),e._volume},count:function(e){var n=this,r=n.histo;if(!n._count_set||e){var i,o,a,s=0;for(i=n.r1;i<=n.r2;i++)for(o=n.g1;o<=n.g2;o++)for(a=n.b1;a<=n.b2;a++)index=t(i,o,a),s+=r[index]||0;n._count=s,n._count_set=!0}return n._count},copy:function(){var t=this;return new n(t.r1,t.r2,t.g1,t.g2,t.b1,t.b2,t.histo)},avg:function(e){var n=this,r=n.histo;if(!n._avg||e){var i,o,a,s,l=0,c=1<<8-u,d=0,f=0,p=0;for(o=n.r1;o<=n.r2;o++)for(a=n.g1;a<=n.g2;a++)for(s=n.b1;s<=n.b2;s++)l+=i=r[t(o,a,s)]||0,d+=i*(o+.5)*c,f+=i*(a+.5)*c,p+=i*(s+.5)*c;n._avg=l?[~~(d/l),~~(f/l),~~(p/l)]:[~~(c*(n.r1+n.r2+1)/2),~~(c*(n.g1+n.g2+1)/2),~~(c*(n.b1+n.b2+1)/2)]}return n._avg},contains:function(t){var e=this,n=t[0]>>l;return gval=t[1]>>l,bval=t[2]>>l,n>=e.r1&&n<=e.r2&&gval>=e.g1&&gval<=e.g2&&bval>=e.b1&&bval<=e.b2}},i.prototype={push:function(t){this.vboxes.push({vbox:t,color:t.avg()})},palette:function(){return this.vboxes.map((function(t){return t.color}))},size:function(){return this.vboxes.size()},map:function(t){for(var e=this.vboxes,n=0;n<e.size();n++)if(e.peek(n).vbox.contains(t))return e.peek(n).color;return this.nearest(t)},nearest:function(t){for(var e,n,r,i=this.vboxes,o=0;o<i.size();o++)(e>(n=Math.sqrt(Math.pow(t[0]-i.peek(o).color[0],2)+Math.pow(t[1]-i.peek(o).color[1],2)+Math.pow(t[2]-i.peek(o).color[2],2)))||void 0===e)&&(e=n,r=i.peek(o).color);return r},forcebw:function(){var t=this.vboxes;t.sort((function(t,e){return r.naturalOrder(r.sum(t.color),r.sum(e.color))}));var e=t[0].color;e[0]<5&&e[1]<5&&e[2]<5&&(t[0].color=[0,0,0]);var n=t.length-1,i=t[n].color;i[0]>251&&i[1]>251&&i[2]>251&&(t[n].color=[255,255,255])}},{quantize:function(t,n){function u(t,e){for(var n,r=1,i=0;1e3>i;)if((n=t.pop()).count()){var o=s(l,n),a=o[0],u=o[1];if(!a)return;if(t.push(a),u&&(t.push(u),r++),r>=e)return;if(i++>1e3)return}else t.push(n),i++}if(!t.length||2>n||n>256)return!1;var l=o(t);l.forEach((function(){}));var c=a(t,l),d=new e((function(t,e){return r.naturalOrder(t.count(),e.count())}));d.push(c),u(d,.75*n);for(var f=new e((function(t,e){return r.naturalOrder(t.count()*t.volume(),e.count()*e.volume())}));d.size();)f.push(d.pop());u(f,n-f.size());for(var p=new i;f.size();)p.push(f.pop());return p}}}();t.exports=n},4757:function(t){t.exports=function(){"use strict";var t=6e4,e=36e5,n="millisecond",r="second",i="minute",o="hour",a="day",s="week",u="month",l="quarter",c="year",d="date",f="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},v=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},g={s:v,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+v(r,2,"0")+":"+v(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,u),o=n-i<0,a=e.clone().add(r+(o?-1:1),u);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:u,y:c,w:s,d:a,D:d,h:o,m:i,s:r,ms:n,Q:l}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},y="en",b={};b[y]=m;var D=function(t){return t instanceof C},w=function t(e,n,r){var i;if(!e)return y;if("string"==typeof e){var o=e.toLowerCase();b[o]&&(i=o),n&&(b[o]=n,i=o);var a=e.split("-");if(!i&&a.length>1)return t(a[0])}else{var s=e.name;b[s]=e,i=s}return!r&&i&&(y=i),i||!r&&y},x=function(t,e){if(D(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new C(n)},E=g;E.l=w,E.i=D,E.w=function(t,e){return x(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var C=function(){function m(t){this.$L=w(t.locale,null,!0),this.parse(t)}var v=m.prototype;return v.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(E.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(p);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return E},v.isValid=function(){return!(this.$d.toString()===f)},v.isSame=function(t,e){var n=x(t);return this.startOf(e)<=n&&n<=this.endOf(e)},v.isAfter=function(t,e){return x(t)<this.startOf(e)},v.isBefore=function(t,e){return this.endOf(e)<x(t)},v.$g=function(t,e,n){return E.u(t)?this[e]:this.set(n,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,e){var n=this,l=!!E.u(e)||e,f=E.p(t),p=function(t,e){var r=E.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return l?r:r.endOf(a)},h=function(t,e){return E.w(n.toDate()[t].apply(n.toDate("s"),(l?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},m=this.$W,v=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(f){case c:return l?p(1,0):p(31,11);case u:return l?p(1,v):p(0,v+1);case s:var b=this.$locale().weekStart||0,D=(m<b?m+7:m)-b;return p(l?g-D:g+(6-D),v);case a:case d:return h(y+"Hours",0);case o:return h(y+"Minutes",1);case i:return h(y+"Seconds",2);case r:return h(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,e){var s,l=E.p(t),f="set"+(this.$u?"UTC":""),p=(s={},s[a]=f+"Date",s[d]=f+"Date",s[u]=f+"Month",s[c]=f+"FullYear",s[o]=f+"Hours",s[i]=f+"Minutes",s[r]=f+"Seconds",s[n]=f+"Milliseconds",s)[l],h=l===a?this.$D+(e-this.$W):e;if(l===u||l===c){var m=this.clone().set(d,1);m.$d[p](h),m.init(),this.$d=m.set(d,Math.min(this.$D,m.daysInMonth())).$d}else p&&this.$d[p](h);return this.init(),this},v.set=function(t,e){return this.clone().$set(t,e)},v.get=function(t){return this[E.p(t)]()},v.add=function(n,l){var d,f=this;n=Number(n);var p=E.p(l),h=function(t){var e=x(f);return E.w(e.date(e.date()+Math.round(t*n)),f)};if(p===u)return this.set(u,this.$M+n);if(p===c)return this.set(c,this.$y+n);if(p===a)return h(1);if(p===s)return h(7);var m=(d={},d[i]=t,d[o]=e,d[r]=1e3,d)[p]||1,v=this.$d.getTime()+n*m;return E.w(v,this)},v.subtract=function(t,e){return this.add(-1*t,e)},v.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||f;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=E.z(this),o=this.$H,a=this.$m,s=this.$M,u=n.weekdays,l=n.months,c=function(t,n,i,o){return t&&(t[n]||t(e,r))||i[n].slice(0,o)},d=function(t){return E.s(o%12||12,t,"0")},p=n.meridiem||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:E.s(s+1,2,"0"),MMM:c(n.monthsShort,s,l,3),MMMM:c(l,s),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:c(n.weekdaysMin,this.$W,u,2),ddd:c(n.weekdaysShort,this.$W,u,3),dddd:u[this.$W],H:String(o),HH:E.s(o,2,"0"),h:d(1),hh:d(2),a:p(o,a,!0),A:p(o,a,!1),m:String(a),mm:E.s(a,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:i};return r.replace(h,(function(t,e){return e||m[t]||i.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(n,d,f){var p,h=E.p(d),m=x(n),v=(m.utcOffset()-this.utcOffset())*t,g=this-m,y=E.m(this,m);return y=(p={},p[c]=y/12,p[u]=y,p[l]=y/3,p[s]=(g-v)/6048e5,p[a]=(g-v)/864e5,p[o]=g/e,p[i]=g/t,p[r]=g/1e3,p)[h]||g,f?y:E.a(y)},v.daysInMonth=function(){return this.endOf(u).$D},v.$locale=function(){return b[this.$L]},v.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=w(t,e,!0);return r&&(n.$L=r),n},v.clone=function(){return E.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},m}(),A=C.prototype;return x.prototype=A,[["$ms",n],["$s",r],["$m",i],["$H",o],["$W",a],["$M",u],["$y",c],["$D",d]].forEach((function(t){A[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),x.extend=function(t,e){return t.$i||(t(e,C,x),t.$i=!0),x},x.locale=w,x.isDayjs=D,x.unix=function(t){return x(1e3*t)},x.en=b[y],x.Ls=b,x.p={},x}()},6982:function(t){t.exports=function(){"use strict";var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(e,n,r){var i=n.prototype,o=i.format;r.en.formats=t,i.format=function(e){void 0===e&&(e="YYYY-MM-DDTHH:mm:ssZ");var n=this.$locale().formats,r=function(e,n){return e.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(e,r,i){var o=i&&i.toUpperCase();return r||n[i]||t[i]||n[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,n){return e||n.slice(1)}))}))}(e,void 0===n?{}:n);return o.call(this,r)}}}()},5635:function(t){t.exports=function(){"use strict";return function(t,e,n){t=t||{};var r=e.prototype,i={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(t,e,n,i){return r.fromToBase(t,e,n,i)}n.en.relativeTime=i,r.fromToBase=function(e,r,o,a,s){for(var u,l,c,d=o.$locale().relativeTime||i,f=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],p=f.length,h=0;h<p;h+=1){var m=f[h];m.d&&(u=a?n(e).diff(o,m.d,!0):o.diff(e,m.d,!0));var v=(t.rounding||Math.round)(Math.abs(u));if(c=u>0,v<=m.r||!m.r){v<=1&&h>0&&(m=f[h-1]);var g=d[m.l];s&&(v=s(""+v)),l="string"==typeof g?g.replace("%d",v):g(v,r,m.l,c);break}}if(r)return l;var y=c?d.future:d.past;return"function"==typeof y?y(l):y.replace("%s",l)},r.to=function(t,e){return o(t,e,this,!0)},r.from=function(t,e){return o(t,e,this)};var a=function(t){return t.$u?n.utc():n()};r.toNow=function(t){return this.to(a(this),t)},r.fromNow=function(t){return this.from(a(this),t)}}}()},356:(t,e,n)=>{"use strict";t.exports=function(){if("object"==typeof globalThis)return globalThis;var t;try{t=this||new Function("return this")()}catch(t){if("object"==typeof window)return window;if("object"==typeof self)return self;if(void 0!==n.g)return n.g}return t}()},9411:function(){!function(t){function e(e){if("string"==typeof e.data&&(e.data={keys:e.data}),e.data&&e.data.keys&&"string"==typeof e.data.keys){var n=e.handler,r=e.data.keys.toLowerCase().split(" ");e.handler=function(e){if(this===e.target||!(t.hotkeys.options.filterInputAcceptingElements&&t.hotkeys.textInputTypes.test(e.target.nodeName)||t.hotkeys.options.filterContentEditable&&t(e.target).attr("contenteditable")||t.hotkeys.options.filterTextInputs&&t.inArray(e.target.type,t.hotkeys.textAcceptingInputTypes)>-1)){var i="keypress"!==e.type&&t.hotkeys.specialKeys[e.which],o=String.fromCharCode(e.which).toLowerCase(),a="",s={};t.each(["alt","ctrl","shift"],(function(t,n){e[n+"Key"]&&i!==n&&(a+=n+"+")})),e.metaKey&&!e.ctrlKey&&"meta"!==i&&(a+="meta+"),e.metaKey&&"meta"!==i&&a.indexOf("alt+ctrl+shift+")>-1&&(a=a.replace("alt+ctrl+shift+","hyper+")),i?s[a+i]=!0:(s[a+o]=!0,s[a+t.hotkeys.shiftNums[o]]=!0,"shift+"===a&&(s[t.hotkeys.shiftNums[o]]=!0));for(var u=0,l=r.length;u<l;u++)if(s[r[u]])return n.apply(this,arguments)}}}}t.hotkeys={version:"0.2.0",specialKeys:{8:"backspace",9:"tab",10:"return",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"},textAcceptingInputTypes:["text","password","number","email","url","range","date","month","week","time","datetime","datetime-local","search","color","tel"],textInputTypes:/textarea|input|select/i,options:{filterInputAcceptingElements:!0,filterTextInputs:!0,filterContentEditable:!0}},t.each(["keydown","keyup","keypress"],(function(){t.event.special[this]={add:e}}))}(jQuery||this.jQuery||window.jQuery)},9152:function(t,e){var n;!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(r,i){"use strict";var o=[],a=Object.getPrototypeOf,s=o.slice,u=o.flat?function(t){return o.flat.call(t)}:function(t){return o.concat.apply([],t)},l=o.push,c=o.indexOf,d={},f=d.toString,p=d.hasOwnProperty,h=p.toString,m=h.call(Object),v={},g=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},y=function(t){return null!=t&&t===t.window},b=r.document,D={type:!0,src:!0,nonce:!0,noModule:!0};function w(t,e,n){var r,i,o=(n=n||b).createElement("script");if(o.text=t,e)for(r in D)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function x(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[f.call(t)]||"object":typeof t}var E="3.6.1",C=function t(e,n){return new t.fn.init(e,n)};function A(t){var e=!!t&&"length"in t&&t.length,n=x(t);return!g(t)&&!y(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}C.fn=C.prototype={jquery:E,constructor:C,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=C.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return C.each(this,t)},map:function(t){return this.pushStack(C.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(C.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(C.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:l,sort:o.sort,splice:o.splice},C.extend=C.fn.extend=function(){var t,e,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(t=arguments[s]))for(e in t)r=t[e],"__proto__"!==e&&a!==r&&(l&&r&&(C.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[e],o=i&&!Array.isArray(n)?[]:i||C.isPlainObject(n)?n:{},i=!1,a[e]=C.extend(l,o,r)):void 0!==r&&(a[e]=r));return a},C.extend({expando:"jQuery"+(E+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==f.call(t)||(e=a(t))&&("function"!=typeof(n=p.call(e,"constructor")&&e.constructor)||h.call(n)!==m))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){w(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,r=0;if(A(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},makeArray:function(t,e){var n=e||[];return null!=t&&(A(Object(t))?C.merge(n,"string"==typeof t?[t]:t):l.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:c.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,a=!n;i<o;i++)!e(t[i],i)!==a&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,a=[];if(A(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&a.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&a.push(i);return u(a)},guid:1,support:v}),"function"==typeof Symbol&&(C.fn[Symbol.iterator]=o[Symbol.iterator]),C.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){d["[object "+e+"]"]=e.toLowerCase()}));var N=function(t){var e,n,r,i,o,a,s,u,l,c,d,f,p,h,m,v,g,y,b,D="sizzle"+1*new Date,w=t.document,x=0,E=0,C=ut(),A=ut(),N=ut(),F=ut(),_=function(t,e){return t===e&&(d=!0),0},T={}.hasOwnProperty,k=[],S=k.pop,B=k.push,P=k.push,O=k.slice,I=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",$="\\[[\\x20\\t\\r\\n\\f]*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+M+"))|)"+L+"*\\]",R=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+$+")*)|.*)\\)|)",H=new RegExp(L+"+","g"),q=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),z=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),W=new RegExp(L+"|>"),G=new RegExp(R),V=new RegExp("^"+M+"$"),Y={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M+"|[*])"),ATTR:new RegExp("^"+$),PSEUDO:new RegExp("^"+R),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},K=/HTML$/i,X=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,tt=/[+~]/,et=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),nt=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},rt=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},ot=function(){f()},at=Dt((function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{P.apply(k=O.call(w.childNodes),w.childNodes),k[w.childNodes.length].nodeType}catch(t){P={apply:k.length?function(t,e){B.apply(t,O.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function st(t,e,r,i){var o,s,l,c,d,h,g,y=e&&e.ownerDocument,w=e?e.nodeType:9;if(r=r||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return r;if(!i&&(f(e),e=e||p,m)){if(11!==w&&(d=Z.exec(t)))if(o=d[1]){if(9===w){if(!(l=e.getElementById(o)))return r;if(l.id===o)return r.push(l),r}else if(y&&(l=y.getElementById(o))&&b(e,l)&&l.id===o)return r.push(l),r}else{if(d[2])return P.apply(r,e.getElementsByTagName(t)),r;if((o=d[3])&&n.getElementsByClassName&&e.getElementsByClassName)return P.apply(r,e.getElementsByClassName(o)),r}if(n.qsa&&!F[t+" "]&&(!v||!v.test(t))&&(1!==w||"object"!==e.nodeName.toLowerCase())){if(g=t,y=e,1===w&&(W.test(t)||z.test(t))){for((y=tt.test(t)&&gt(e.parentNode)||e)===e&&n.scope||((c=e.getAttribute("id"))?c=c.replace(rt,it):e.setAttribute("id",c=D)),s=(h=a(t)).length;s--;)h[s]=(c?"#"+c:":scope")+" "+bt(h[s]);g=h.join(",")}try{return P.apply(r,y.querySelectorAll(g)),r}catch(e){F(t,!0)}finally{c===D&&e.removeAttribute("id")}}}return u(t.replace(q,"$1"),e,r,i)}function ut(){var t=[];return function e(n,i){return t.push(n+" ")>r.cacheLength&&delete e[t.shift()],e[n+" "]=i}}function lt(t){return t[D]=!0,t}function ct(t){var e=p.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function dt(t,e){for(var n=t.split("|"),i=n.length;i--;)r.attrHandle[n[i]]=e}function ft(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function pt(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ht(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function mt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&at(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function vt(t){return lt((function(e){return e=+e,lt((function(n,r){for(var i,o=t([],n.length,e),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))}))}))}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=st.support={},o=st.isXML=function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!K.test(e||n&&n.nodeName||"HTML")},f=st.setDocument=function(t){var e,i,a=t?t.ownerDocument||t:w;return a!=p&&9===a.nodeType&&a.documentElement?(h=(p=a).documentElement,m=!o(p),w!=p&&(i=p.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",ot,!1):i.attachEvent&&i.attachEvent("onunload",ot)),n.scope=ct((function(t){return h.appendChild(t).appendChild(p.createElement("div")),void 0!==t.querySelectorAll&&!t.querySelectorAll(":scope fieldset div").length})),n.attributes=ct((function(t){return t.className="i",!t.getAttribute("className")})),n.getElementsByTagName=ct((function(t){return t.appendChild(p.createComment("")),!t.getElementsByTagName("*").length})),n.getElementsByClassName=Q.test(p.getElementsByClassName),n.getById=ct((function(t){return h.appendChild(t).id=D,!p.getElementsByName||!p.getElementsByName(D).length})),n.getById?(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){return t.getAttribute("id")===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n=e.getElementById(t);return n?[n]:[]}}):(r.filter.ID=function(t){var e=t.replace(et,nt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},r.find.ID=function(t,e){if(void 0!==e.getElementById&&m){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),r.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},r.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&m)return e.getElementsByClassName(t)},g=[],v=[],(n.qsa=Q.test(p.querySelectorAll))&&(ct((function(t){var e;h.appendChild(t).innerHTML="<a id='"+D+"'></a><select id='"+D+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||v.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+j+")"),t.querySelectorAll("[id~="+D+"-]").length||v.push("~="),(e=p.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||v.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll(":checked").length||v.push(":checked"),t.querySelectorAll("a#"+D+"+*").length||v.push(".#.+[+~]"),t.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")})),ct((function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=p.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&v.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),h.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),v.push(",.*:")}))),(n.matchesSelector=Q.test(y=h.matches||h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ct((function(t){n.disconnectedMatch=y.call(t,"*"),y.call(t,"[s!='']:x"),g.push("!=",R)})),v=v.length&&new RegExp(v.join("|")),g=g.length&&new RegExp(g.join("|")),e=Q.test(h.compareDocumentPosition),b=e||Q.test(h.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},_=e?function(t,e){if(t===e)return d=!0,0;var r=!t.compareDocumentPosition-!e.compareDocumentPosition;return r||(1&(r=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===r?t==p||t.ownerDocument==w&&b(w,t)?-1:e==p||e.ownerDocument==w&&b(w,e)?1:c?I(c,t)-I(c,e):0:4&r?-1:1)}:function(t,e){if(t===e)return d=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,a=[t],s=[e];if(!i||!o)return t==p?-1:e==p?1:i?-1:o?1:c?I(c,t)-I(c,e):0;if(i===o)return ft(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)s.unshift(n);for(;a[r]===s[r];)r++;return r?ft(a[r],s[r]):a[r]==w?-1:s[r]==w?1:0},p):p},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if(f(t),n.matchesSelector&&m&&!F[e+" "]&&(!g||!g.test(e))&&(!v||!v.test(e)))try{var r=y.call(t,e);if(r||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return r}catch(t){F(e,!0)}return st(e,p,null,[t]).length>0},st.contains=function(t,e){return(t.ownerDocument||t)!=p&&f(t),b(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!=p&&f(t);var i=r.attrHandle[e.toLowerCase()],o=i&&T.call(r.attrHandle,e.toLowerCase())?i(t,e,!m):void 0;return void 0!==o?o:n.attributes||!m?t.getAttribute(e):(o=t.getAttributeNode(e))&&o.specified?o.value:null},st.escape=function(t){return(t+"").replace(rt,it)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,r=[],i=0,o=0;if(d=!n.detectDuplicates,c=!n.sortStable&&t.slice(0),t.sort(_),d){for(;e=t[o++];)e===t[o]&&(i=r.push(o));for(;i--;)t.splice(r[i],1)}return c=null,t},i=st.getText=function(t){var e,n="",r=0,o=t.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=i(t)}else if(3===o||4===o)return t.nodeValue}else for(;e=t[r++];)n+=i(e);return n},r=st.selectors={cacheLength:50,createPseudo:lt,match:Y,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(et,nt),t[3]=(t[3]||t[4]||t[5]||"").replace(et,nt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return Y.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&G.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(et,nt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=C[t+" "];return e||(e=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+t+"("+L+"|$)"))&&C(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(r){var i=st.attr(r,t);return null==i?"!="===e:!e||(i+="","="===e?i===n:"!="===e?i!==n:"^="===e?n&&0===i.indexOf(n):"*="===e?n&&i.indexOf(n)>-1:"$="===e?n&&i.slice(-n.length)===n:"~="===e?(" "+i.replace(H," ")+" ").indexOf(n)>-1:"|="===e&&(i===n||i.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,r,i){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===r&&0===i?function(t){return!!t.parentNode}:function(e,n,u){var l,c,d,f,p,h,m=o!==a?"nextSibling":"previousSibling",v=e.parentNode,g=s&&e.nodeName.toLowerCase(),y=!u&&!s,b=!1;if(v){if(o){for(;m;){for(f=e;f=f[m];)if(s?f.nodeName.toLowerCase()===g:1===f.nodeType)return!1;h=m="only"===t&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&y){for(b=(p=(l=(c=(d=(f=v)[D]||(f[D]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]||[])[0]===x&&l[1])&&l[2],f=p&&v.childNodes[p];f=++p&&f&&f[m]||(b=p=0)||h.pop();)if(1===f.nodeType&&++b&&f===e){c[t]=[x,p,b];break}}else if(y&&(b=p=(l=(c=(d=(f=e)[D]||(f[D]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]||[])[0]===x&&l[1]),!1===b)for(;(f=++p&&f&&f[m]||(b=p=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==g:1!==f.nodeType)||!++b||(y&&((c=(d=f[D]||(f[D]={}))[f.uniqueID]||(d[f.uniqueID]={}))[t]=[x,b]),f!==e)););return(b-=i)===r||b%r==0&&b/r>=0}}},PSEUDO:function(t,e){var n,i=r.pseudos[t]||r.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return i[D]?i(e):i.length>1?(n=[t,t,"",e],r.setFilters.hasOwnProperty(t.toLowerCase())?lt((function(t,n){for(var r,o=i(t,e),a=o.length;a--;)t[r=I(t,o[a])]=!(n[r]=o[a])})):function(t){return i(t,0,n)}):i}},pseudos:{not:lt((function(t){var e=[],n=[],r=s(t.replace(q,"$1"));return r[D]?lt((function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))})):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}})),has:lt((function(t){return function(e){return st(t,e).length>0}})),contains:lt((function(t){return t=t.replace(et,nt),function(e){return(e.textContent||i(e)).indexOf(t)>-1}})),lang:lt((function(t){return V.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(et,nt).toLowerCase(),function(e){var n;do{if(n=m?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===h},focus:function(t){return t===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!r.pseudos.empty(t)},header:function(t){return J.test(t.nodeName)},input:function(t){return X.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:vt((function(){return[0]})),last:vt((function(t,e){return[e-1]})),eq:vt((function(t,e,n){return[n<0?n+e:n]})),even:vt((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:vt((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:vt((function(t,e,n){for(var r=n<0?n+e:n>e?e:n;--r>=0;)t.push(r);return t})),gt:vt((function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t}))}},r.pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[e]=pt(e);for(e in{submit:!0,reset:!0})r.pseudos[e]=ht(e);function yt(){}function bt(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function Dt(t,e,n){var r=e.dir,i=e.next,o=i||r,a=n&&"parentNode"===o,s=E++;return e.first?function(e,n,i){for(;e=e[r];)if(1===e.nodeType||a)return t(e,n,i);return!1}:function(e,n,u){var l,c,d,f=[x,s];if(u){for(;e=e[r];)if((1===e.nodeType||a)&&t(e,n,u))return!0}else for(;e=e[r];)if(1===e.nodeType||a)if(c=(d=e[D]||(e[D]={}))[e.uniqueID]||(d[e.uniqueID]={}),i&&i===e.nodeName.toLowerCase())e=e[r]||e;else{if((l=c[o])&&l[0]===x&&l[1]===s)return f[2]=l[2];if(c[o]=f,f[2]=t(e,n,u))return!0}return!1}}function wt(t){return t.length>1?function(e,n,r){for(var i=t.length;i--;)if(!t[i](e,n,r))return!1;return!0}:t[0]}function xt(t,e,n,r,i){for(var o,a=[],s=0,u=t.length,l=null!=e;s<u;s++)(o=t[s])&&(n&&!n(o,r,i)||(a.push(o),l&&e.push(s)));return a}function Et(t,e,n,r,i,o){return r&&!r[D]&&(r=Et(r)),i&&!i[D]&&(i=Et(i,o)),lt((function(o,a,s,u){var l,c,d,f=[],p=[],h=a.length,m=o||function(t,e,n){for(var r=0,i=e.length;r<i;r++)st(t,e[r],n);return n}(e||"*",s.nodeType?[s]:s,[]),v=!t||!o&&e?m:xt(m,f,t,s,u),g=n?i||(o?t:h||r)?[]:a:v;if(n&&n(v,g,s,u),r)for(l=xt(g,p),r(l,[],s,u),c=l.length;c--;)(d=l[c])&&(g[p[c]]=!(v[p[c]]=d));if(o){if(i||t){if(i){for(l=[],c=g.length;c--;)(d=g[c])&&l.push(v[c]=d);i(null,g=[],l,u)}for(c=g.length;c--;)(d=g[c])&&(l=i?I(o,d):f[c])>-1&&(o[l]=!(a[l]=d))}}else g=xt(g===a?g.splice(h,g.length):g),i?i(null,a,g,u):P.apply(a,g)}))}function Ct(t){for(var e,n,i,o=t.length,a=r.relative[t[0].type],s=a||r.relative[" "],u=a?1:0,c=Dt((function(t){return t===e}),s,!0),d=Dt((function(t){return I(e,t)>-1}),s,!0),f=[function(t,n,r){var i=!a&&(r||n!==l)||((e=n).nodeType?c(t,n,r):d(t,n,r));return e=null,i}];u<o;u++)if(n=r.relative[t[u].type])f=[Dt(wt(f),n)];else{if((n=r.filter[t[u].type].apply(null,t[u].matches))[D]){for(i=++u;i<o&&!r.relative[t[i].type];i++);return Et(u>1&&wt(f),u>1&&bt(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(q,"$1"),n,u<i&&Ct(t.slice(u,i)),i<o&&Ct(t=t.slice(i)),i<o&&bt(t))}f.push(n)}return wt(f)}return yt.prototype=r.filters=r.pseudos,r.setFilters=new yt,a=st.tokenize=function(t,e){var n,i,o,a,s,u,l,c=A[t+" "];if(c)return e?0:c.slice(0);for(s=t,u=[],l=r.preFilter;s;){for(a in n&&!(i=U.exec(s))||(i&&(s=s.slice(i[0].length)||s),u.push(o=[])),n=!1,(i=z.exec(s))&&(n=i.shift(),o.push({value:n,type:i[0].replace(q," ")}),s=s.slice(n.length)),r.filter)!(i=Y[a].exec(s))||l[a]&&!(i=l[a](i))||(n=i.shift(),o.push({value:n,type:a,matches:i}),s=s.slice(n.length));if(!n)break}return e?s.length:s?st.error(t):A(t,u).slice(0)},s=st.compile=function(t,e){var n,i=[],o=[],s=N[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=Ct(e[n]))[D]?i.push(s):o.push(s);s=N(t,function(t,e){var n=e.length>0,i=t.length>0,o=function(o,a,s,u,c){var d,h,v,g=0,y="0",b=o&&[],D=[],w=l,E=o||i&&r.find.TAG("*",c),C=x+=null==w?1:Math.random()||.1,A=E.length;for(c&&(l=a==p||a||c);y!==A&&null!=(d=E[y]);y++){if(i&&d){for(h=0,a||d.ownerDocument==p||(f(d),s=!m);v=t[h++];)if(v(d,a||p,s)){u.push(d);break}c&&(x=C)}n&&((d=!v&&d)&&g--,o&&b.push(d))}if(g+=y,n&&y!==g){for(h=0;v=e[h++];)v(b,D,a,s);if(o){if(g>0)for(;y--;)b[y]||D[y]||(D[y]=S.call(u));D=xt(D)}P.apply(u,D),c&&!o&&D.length>0&&g+e.length>1&&st.uniqueSort(u)}return c&&(x=C,l=w),b};return n?lt(o):o}(o,i)),s.selector=t}return s},u=st.select=function(t,e,n,i){var o,u,l,c,d,f="function"==typeof t&&t,p=!i&&a(t=f.selector||t);if(n=n||[],1===p.length){if((u=p[0]=p[0].slice(0)).length>2&&"ID"===(l=u[0]).type&&9===e.nodeType&&m&&r.relative[u[1].type]){if(!(e=(r.find.ID(l.matches[0].replace(et,nt),e)||[])[0]))return n;f&&(e=e.parentNode),t=t.slice(u.shift().value.length)}for(o=Y.needsContext.test(t)?0:u.length;o--&&(l=u[o],!r.relative[c=l.type]);)if((d=r.find[c])&&(i=d(l.matches[0].replace(et,nt),tt.test(u[0].type)&&gt(e.parentNode)||e))){if(u.splice(o,1),!(t=i.length&&bt(u)))return P.apply(n,i),n;break}}return(f||s(t,p))(i,e,!m,n,!e||tt.test(t)&&gt(e.parentNode)||e),n},n.sortStable=D.split("").sort(_).join("")===D,n.detectDuplicates=!!d,f(),n.sortDetached=ct((function(t){return 1&t.compareDocumentPosition(p.createElement("fieldset"))})),ct((function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")}))||dt("type|href|height|width",(function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)})),n.attributes&&ct((function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")}))||dt("value",(function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue})),ct((function(t){return null==t.getAttribute("disabled")}))||dt(j,(function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null})),st}(r);C.find=N,(C.expr=N.selectors)[":"]=C.expr.pseudos,C.uniqueSort=C.unique=N.uniqueSort,C.text=N.getText,C.isXMLDoc=N.isXML,C.contains=N.contains,C.escapeSelector=N.escape;var F=function(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&C(t).is(n))break;r.push(t)}return r},_=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},T=C.expr.match.needsContext;function k(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var S=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function B(t,e,n){return g(e)?C.grep(t,(function(t,r){return!!e.call(t,r,t)!==n})):e.nodeType?C.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?C.grep(t,(function(t){return c.call(e,t)>-1!==n})):C.filter(e,t,n)}C.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?C.find.matchesSelector(r,t)?[r]:[]:C.find.matches(t,C.grep(e,(function(t){return 1===t.nodeType})))},C.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(C(t).filter((function(){for(e=0;e<r;e++)if(C.contains(i[e],this))return!0})));for(n=this.pushStack([]),e=0;e<r;e++)C.find(t,i[e],n);return r>1?C.uniqueSort(n):n},filter:function(t){return this.pushStack(B(this,t||[],!1))},not:function(t){return this.pushStack(B(this,t||[],!0))},is:function(t){return!!B(this,"string"==typeof t&&T.test(t)?C(t):t||[],!1).length}});var P,O=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(C.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||P,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:O.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof C?e[0]:e,C.merge(this,C.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:b,!0)),S.test(r[1])&&C.isPlainObject(e))for(r in e)g(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=b.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):g(t)?void 0!==n.ready?n.ready(t):t(C):C.makeArray(t,this)}).prototype=C.fn,P=C(b);var I=/^(?:parents|prev(?:Until|All))/,j={children:!0,contents:!0,next:!0,prev:!0};function L(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}C.fn.extend({has:function(t){var e=C(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(C.contains(this,e[t]))return!0}))},closest:function(t,e){var n,r=0,i=this.length,o=[],a="string"!=typeof t&&C(t);if(!T.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&C.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?C.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?c.call(C(t),this[0]):c.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(C.uniqueSort(C.merge(this.get(),C(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),C.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return F(t,"parentNode")},parentsUntil:function(t,e,n){return F(t,"parentNode",n)},next:function(t){return L(t,"nextSibling")},prev:function(t){return L(t,"previousSibling")},nextAll:function(t){return F(t,"nextSibling")},prevAll:function(t){return F(t,"previousSibling")},nextUntil:function(t,e,n){return F(t,"nextSibling",n)},prevUntil:function(t,e,n){return F(t,"previousSibling",n)},siblings:function(t){return _((t.parentNode||{}).firstChild,t)},children:function(t){return _(t.firstChild)},contents:function(t){return null!=t.contentDocument&&a(t.contentDocument)?t.contentDocument:(k(t,"template")&&(t=t.content||t),C.merge([],t.childNodes))}},(function(t,e){C.fn[t]=function(n,r){var i=C.map(this,e,n);return"Until"!==t.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=C.filter(r,i)),this.length>1&&(j[t]||C.uniqueSort(i),I.test(t)&&i.reverse()),this.pushStack(i)}}));var M=/[^\x20\t\r\n\f]+/g;function $(t){return t}function R(t){throw t}function H(t,e,n,r){var i;try{t&&g(i=t.promise)?i.call(t).done(e).fail(n):t&&g(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}C.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return C.each(t.match(M)||[],(function(t,n){e[n]=!0})),e}(t):C.extend({},t);var e,n,r,i,o=[],a=[],s=-1,u=function(){for(i=i||t.once,r=e=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&t.stopOnFalse&&(s=o.length,n=!1);t.memory||(n=!1),e=!1,i&&(o=n?[]:"")},l={add:function(){return o&&(n&&!e&&(s=o.length-1,a.push(n)),function e(n){C.each(n,(function(n,r){g(r)?t.unique&&l.has(r)||o.push(r):r&&r.length&&"string"!==x(r)&&e(r)}))}(arguments),n&&!e&&u()),this},remove:function(){return C.each(arguments,(function(t,e){for(var n;(n=C.inArray(e,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(t){return t?C.inArray(t,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return i=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return i=a=[],n||e||(o=n=""),this},locked:function(){return!!i},fireWith:function(t,n){return i||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||u()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},C.extend({Deferred:function(t){var e=[["notify","progress",C.Callbacks("memory"),C.Callbacks("memory"),2],["resolve","done",C.Callbacks("once memory"),C.Callbacks("once memory"),0,"resolved"],["reject","fail",C.Callbacks("once memory"),C.Callbacks("once memory"),1,"rejected"]],n="pending",i={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(t){return i.then(null,t)},pipe:function(){var t=arguments;return C.Deferred((function(n){C.each(e,(function(e,r){var i=g(t[r[4]])&&t[r[4]];o[r[1]]((function(){var t=i&&i.apply(this,arguments);t&&g(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[r[0]+"With"](this,i?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,i){var o=0;function a(t,e,n,i){return function(){var s=this,u=arguments,l=function(){var r,l;if(!(t<o)){if((r=n.apply(s,u))===e.promise())throw new TypeError("Thenable self-resolution");l=r&&("object"==typeof r||"function"==typeof r)&&r.then,g(l)?i?l.call(r,a(o,e,$,i),a(o,e,R,i)):(o++,l.call(r,a(o,e,$,i),a(o,e,R,i),a(o,e,$,e.notifyWith))):(n!==$&&(s=void 0,u=[r]),(i||e.resolveWith)(s,u))}},c=i?l:function(){try{l()}catch(r){C.Deferred.exceptionHook&&C.Deferred.exceptionHook(r,c.stackTrace),t+1>=o&&(n!==R&&(s=void 0,u=[r]),e.rejectWith(s,u))}};t?c():(C.Deferred.getStackHook&&(c.stackTrace=C.Deferred.getStackHook()),r.setTimeout(c))}}return C.Deferred((function(r){e[0][3].add(a(0,r,g(i)?i:$,r.notifyWith)),e[1][3].add(a(0,r,g(t)?t:$)),e[2][3].add(a(0,r,g(n)?n:R))})).promise()},promise:function(t){return null!=t?C.extend(t,i):i}},o={};return C.each(e,(function(t,r){var a=r[2],s=r[5];i[r[1]]=a.add,s&&a.add((function(){n=s}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),a.add(r[3].fire),o[r[0]]=function(){return o[r[0]+"With"](this===o?void 0:this,arguments),this},o[r[0]+"With"]=a.fireWith})),i.promise(o),t&&t.call(o,o),o},when:function(t){var e=arguments.length,n=e,r=Array(n),i=s.call(arguments),o=C.Deferred(),a=function(t){return function(n){r[t]=this,i[t]=arguments.length>1?s.call(arguments):n,--e||o.resolveWith(r,i)}};if(e<=1&&(H(t,o.done(a(n)).resolve,o.reject,!e),"pending"===o.state()||g(i[n]&&i[n].then)))return o.then();for(;n--;)H(i[n],a(n),o.reject);return o.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;C.Deferred.exceptionHook=function(t,e){r.console&&r.console.warn&&t&&q.test(t.name)&&r.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},C.readyException=function(t){r.setTimeout((function(){throw t}))};var U=C.Deferred();function z(){b.removeEventListener("DOMContentLoaded",z),r.removeEventListener("load",z),C.ready()}C.fn.ready=function(t){return U.then(t).catch((function(t){C.readyException(t)})),this},C.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--C.readyWait:C.isReady)||(C.isReady=!0,!0!==t&&--C.readyWait>0||U.resolveWith(b,[C]))}}),C.ready.then=U.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?r.setTimeout(C.ready):(b.addEventListener("DOMContentLoaded",z),r.addEventListener("load",z));var W=function t(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===x(r))for(u in o=!0,r)t(e,n,u,r[u],!0,a,s);else if(void 0!==i&&(o=!0,g(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(t,e,n){return c.call(C(t),n)})),n))for(;u<l;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},G=/^-ms-/,V=/-([a-z])/g;function Y(t,e){return e.toUpperCase()}function K(t){return t.replace(G,"ms-").replace(V,Y)}var X=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function J(){this.expando=C.expando+J.uid++}J.uid=1,J.prototype={cache:function(t){var e=t[this.expando];return e||(e={},X(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[K(e)]=n;else for(r in e)i[K(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][K(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(K):(e=K(e))in r?[e]:e.match(M)||[]).length;for(;n--;)delete r[e[n]]}(void 0===e||C.isEmptyObject(r))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!C.isEmptyObject(e)}};var Q=new J,Z=new J,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function nt(t,e,n){var r;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(n)}catch(t){}Z.set(t,e,n)}else n=void 0;return n}C.extend({hasData:function(t){return Z.hasData(t)||Q.hasData(t)},data:function(t,e,n){return Z.access(t,e,n)},removeData:function(t,e){Z.remove(t,e)},_data:function(t,e,n){return Q.access(t,e,n)},_removeData:function(t,e){Q.remove(t,e)}}),C.fn.extend({data:function(t,e){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(i=Z.get(o),1===o.nodeType&&!Q.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=K(r.slice(5)),nt(o,r,i[r]));Q.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof t?this.each((function(){Z.set(this,t)})):W(this,(function(e){var n;if(o&&void 0===e)return void 0!==(n=Z.get(o,t))||void 0!==(n=nt(o,t))?n:void 0;this.each((function(){Z.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){Z.remove(this,t)}))}}),C.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=Q.get(t,e),n&&(!r||Array.isArray(n)?r=Q.access(t,e,C.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){var n=C.queue(t,e=e||"fx"),r=n.length,i=n.shift(),o=C._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,(function(){C.dequeue(t,e)}),o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return Q.get(t,n)||Q.access(t,n,{empty:C.Callbacks("once memory").add((function(){Q.remove(t,[e+"queue",n])}))})}}),C.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?C.queue(this[0],t):void 0===e?this:this.each((function(){var n=C.queue(this,t,e);C._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&C.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){C.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,r=1,i=C.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=Q.get(o[a],t+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(e)}});var rt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,it=new RegExp("^(?:([+-])=|)("+rt+")([a-z%]*)$","i"),ot=["Top","Right","Bottom","Left"],at=b.documentElement,st=function(t){return C.contains(t.ownerDocument,t)},ut={composed:!0};at.getRootNode&&(st=function(t){return C.contains(t.ownerDocument,t)||t.getRootNode(ut)===t.ownerDocument});var lt=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&st(t)&&"none"===C.css(t,"display")};function ct(t,e,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return C.css(t,e,"")},u=s(),l=n&&n[3]||(C.cssNumber[e]?"":"px"),c=t.nodeType&&(C.cssNumber[e]||"px"!==l&&+u)&&it.exec(C.css(t,e));if(c&&c[3]!==l){for(u/=2,l=l||c[3],c=+u||1;a--;)C.style(t,e,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;C.style(t,e,(c*=2)+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var dt={};function ft(t){var e,n=t.ownerDocument,r=t.nodeName,i=dt[r];return i||(e=n.body.appendChild(n.createElement(r)),i=C.css(e,"display"),e.parentNode.removeChild(e),"none"===i&&(i="block"),dt[r]=i,i)}function pt(t,e){for(var n,r,i=[],o=0,a=t.length;o<a;o++)(r=t[o]).style&&(n=r.style.display,e?("none"===n&&(i[o]=Q.get(r,"display")||null,i[o]||(r.style.display="")),""===r.style.display&&lt(r)&&(i[o]=ft(r))):"none"!==n&&(i[o]="none",Q.set(r,"display",n)));for(o=0;o<a;o++)null!=i[o]&&(t[o].style.display=i[o]);return t}C.fn.extend({show:function(){return pt(this,!0)},hide:function(){return pt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){lt(this)?C(this).show():C(this).hide()}))}});var ht,mt,vt=/^(?:checkbox|radio)$/i,gt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,yt=/^$|^module$|\/(?:java|ecma)script/i;ht=b.createDocumentFragment().appendChild(b.createElement("div")),(mt=b.createElement("input")).setAttribute("type","radio"),mt.setAttribute("checked","checked"),mt.setAttribute("name","t"),ht.appendChild(mt),v.checkClone=ht.cloneNode(!0).cloneNode(!0).lastChild.checked,ht.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!ht.cloneNode(!0).lastChild.defaultValue,ht.innerHTML="<option></option>",v.option=!!ht.lastChild;var bt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Dt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&k(t,e)?C.merge([t],n):n}function wt(t,e){for(var n=0,r=t.length;n<r;n++)Q.set(t[n],"globalEval",!e||Q.get(e[n],"globalEval"))}bt.tbody=bt.tfoot=bt.colgroup=bt.caption=bt.thead,bt.th=bt.td,v.option||(bt.optgroup=bt.option=[1,"<select multiple='multiple'>","</select>"]);var xt=/<|&#?\w+;/;function Et(t,e,n,r,i){for(var o,a,s,u,l,c,d=e.createDocumentFragment(),f=[],p=0,h=t.length;p<h;p++)if((o=t[p])||0===o)if("object"===x(o))C.merge(f,o.nodeType?[o]:o);else if(xt.test(o)){for(a=a||d.appendChild(e.createElement("div")),s=(gt.exec(o)||["",""])[1].toLowerCase(),u=bt[s]||bt._default,a.innerHTML=u[1]+C.htmlPrefilter(o)+u[2],c=u[0];c--;)a=a.lastChild;C.merge(f,a.childNodes),(a=d.firstChild).textContent=""}else f.push(e.createTextNode(o));for(d.textContent="",p=0;o=f[p++];)if(r&&C.inArray(o,r)>-1)i&&i.push(o);else if(l=st(o),a=Dt(d.appendChild(o),"script"),l&&wt(a),n)for(c=0;o=a[c++];)yt.test(o.type||"")&&n.push(o);return d}var Ct=/^([^.]*)(?:\.(.+)|)/;function At(){return!0}function Nt(){return!1}function Ft(t,e){return t===function(){try{return b.activeElement}catch(t){}}()==("focus"===e)}function _t(t,e,n,r,i,o){var a,s;if("object"==typeof e){for(s in"string"!=typeof n&&(r=r||n,n=void 0),e)_t(t,s,n,r,e[s],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Nt;else if(!i)return t;return 1===o&&(a=i,i=function(t){return C().off(t),a.apply(this,arguments)},i.guid=a.guid||(a.guid=C.guid++)),t.each((function(){C.event.add(this,e,i,r,n)}))}function Tt(t,e,n){n?(Q.set(t,e,!1),C.event.add(t,e,{namespace:!1,handler:function(t){var r,i,o=Q.get(this,e);if(1&t.isTrigger&&this[e]){if(o.length)(C.event.special[e]||{}).delegateType&&t.stopPropagation();else if(o=s.call(arguments),Q.set(this,e,o),r=n(this,e),this[e](),o!==(i=Q.get(this,e))||r?Q.set(this,e,!1):i={},o!==i)return t.stopImmediatePropagation(),t.preventDefault(),i&&i.value}else o.length&&(Q.set(this,e,{value:C.event.trigger(C.extend(o[0],C.Event.prototype),o.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===Q.get(t,e)&&C.event.add(t,e,At)}C.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,d,f,p,h,m,v=Q.get(t);if(X(t))for(n.handler&&(n=(o=n).handler,i=o.selector),i&&C.find.matchesSelector(at,i),n.guid||(n.guid=C.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return C.event.triggered!==e.type?C.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(M)||[""]).length;l--;)p=m=(s=Ct.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),p&&(d=C.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,d=C.event.special[p]||{},c=C.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&C.expr.match.needsContext.test(i),namespace:h.join(".")},o),(f=u[p])||((f=u[p]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(p,a)),d.add&&(d.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),C.event.global[p]=!0)},remove:function(t,e,n,r,i){var o,a,s,u,l,c,d,f,p,h,m,v=Q.hasData(t)&&Q.get(t);if(v&&(u=v.events)){for(l=(e=(e||"").match(M)||[""]).length;l--;)if(p=m=(s=Ct.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),p){for(d=C.event.special[p]||{},f=u[p=(r?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!i&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,d.remove&&d.remove.call(t,c));a&&!f.length&&(d.teardown&&!1!==d.teardown.call(t,h,v.handle)||C.removeEvent(t,p,v.handle),delete u[p])}else for(p in u)C.event.remove(t,p+e[l],n,r,!0);C.isEmptyObject(u)&&Q.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,a,s=new Array(arguments.length),u=C.event.fix(t),l=(Q.get(this,"events")||Object.create(null))[u.type]||[],c=C.event.special[u.type]||{};for(s[0]=u,e=1;e<arguments.length;e++)s[e]=arguments[e];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){for(a=C.event.handlers.call(this,u,l),e=0;(i=a[e++])&&!u.isPropagationStopped();)for(u.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!u.isImmediatePropagationStopped();)u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((C.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(t,e){var n,r,i,o,a,s=[],u=e.delegateCount,l=t.target;if(u&&l.nodeType&&!("click"===t.type&&t.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==t.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=e[n]).selector+" "]&&(a[i]=r.needsContext?C(i,this).index(l)>-1:C.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<e.length&&s.push({elem:l,handlers:e.slice(u)}),s},addProp:function(t,e){Object.defineProperty(C.Event.prototype,t,{enumerable:!0,configurable:!0,get:g(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[C.expando]?t:new C.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return vt.test(e.type)&&e.click&&k(e,"input")&&Tt(e,"click",At),!1},trigger:function(t){var e=this||t;return vt.test(e.type)&&e.click&&k(e,"input")&&Tt(e,"click"),!0},_default:function(t){var e=t.target;return vt.test(e.type)&&e.click&&k(e,"input")&&Q.get(e,"click")||k(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},C.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},(C.Event=function(t,e){if(!(this instanceof C.Event))return new C.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?At:Nt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&C.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[C.expando]=!0}).prototype={constructor:C.Event,isDefaultPrevented:Nt,isPropagationStopped:Nt,isImmediatePropagationStopped:Nt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=At,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=At,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=At,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},C.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},C.event.addProp),C.each({focus:"focusin",blur:"focusout"},(function(t,e){C.event.special[t]={setup:function(){return Tt(this,t,Ft),!1},trigger:function(){return Tt(this,t),!0},_default:function(e){return Q.get(e.target,t)},delegateType:e}})),C.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){C.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,r=this,i=t.relatedTarget,o=t.handleObj;return i&&(i===r||C.contains(r,i))||(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}})),C.fn.extend({on:function(t,e,n,r){return _t(this,t,e,n,r)},one:function(t,e,n,r){return _t(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,C(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof t){for(i in t)this.off(i,e,t[i]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Nt),this.each((function(){C.event.remove(this,t,n,e)}))}});var kt=/<script|<style|<link/i,St=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Pt(t,e){return k(t,"table")&&k(11!==e.nodeType?e:e.firstChild,"tr")&&C(t).children("tbody")[0]||t}function Ot(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function It(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function jt(t,e){var n,r,i,o,a,s;if(1===e.nodeType){if(Q.hasData(t)&&(s=Q.get(t).events))for(i in Q.remove(e,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)C.event.add(e,i,s[i][n]);Z.hasData(t)&&(o=Z.access(t),a=C.extend({},o),Z.set(e,a))}}function Lt(t,e){var n=e.nodeName.toLowerCase();"input"===n&&vt.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Mt(t,e,n,r){e=u(e);var i,o,a,s,l,c,d=0,f=t.length,p=f-1,h=e[0],m=g(h);if(m||f>1&&"string"==typeof h&&!v.checkClone&&St.test(h))return t.each((function(i){var o=t.eq(i);m&&(e[0]=h.call(this,i,o.html())),Mt(o,e,n,r)}));if(f&&(o=(i=Et(e,t[0].ownerDocument,!1,t,r)).firstChild,1===i.childNodes.length&&(i=o),o||r)){for(s=(a=C.map(Dt(i,"script"),Ot)).length;d<f;d++)l=i,d!==p&&(l=C.clone(l,!0,!0),s&&C.merge(a,Dt(l,"script"))),n.call(t[d],l,d);if(s)for(c=a[a.length-1].ownerDocument,C.map(a,It),d=0;d<s;d++)l=a[d],yt.test(l.type||"")&&!Q.access(l,"globalEval")&&C.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?C._evalUrl&&!l.noModule&&C._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):w(l.textContent.replace(Bt,""),l,c))}return t}function $t(t,e,n){for(var r,i=e?C.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||C.cleanData(Dt(r)),r.parentNode&&(n&&st(r)&&wt(Dt(r,"script")),r.parentNode.removeChild(r));return t}C.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var r,i,o,a,s=t.cloneNode(!0),u=st(t);if(!(v.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||C.isXMLDoc(t)))for(a=Dt(s),r=0,i=(o=Dt(t)).length;r<i;r++)Lt(o[r],a[r]);if(e)if(n)for(o=o||Dt(t),a=a||Dt(s),r=0,i=o.length;r<i;r++)jt(o[r],a[r]);else jt(t,s);return(a=Dt(s,"script")).length>0&&wt(a,!u&&Dt(t,"script")),s},cleanData:function(t){for(var e,n,r,i=C.event.special,o=0;void 0!==(n=t[o]);o++)if(X(n)){if(e=n[Q.expando]){if(e.events)for(r in e.events)i[r]?C.event.remove(n,r):C.removeEvent(n,r,e.handle);n[Q.expando]=void 0}n[Z.expando]&&(n[Z.expando]=void 0)}}}),C.fn.extend({detach:function(t){return $t(this,t,!0)},remove:function(t){return $t(this,t)},text:function(t){return W(this,(function(t){return void 0===t?C.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Mt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pt(this,t).appendChild(t)}))},prepend:function(){return Mt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Pt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Mt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Mt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(C.cleanData(Dt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return C.clone(this,t,e)}))},html:function(t){return W(this,(function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!kt.test(t)&&!bt[(gt.exec(t)||["",""])[1].toLowerCase()]){t=C.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(C.cleanData(Dt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Mt(this,arguments,(function(e){var n=this.parentNode;C.inArray(this,t)<0&&(C.cleanData(Dt(this)),n&&n.replaceChild(e,this))}),t)}}),C.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){C.fn[t]=function(t){for(var n,r=[],i=C(t),o=i.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),C(i[a])[e](n),l.apply(r,n.get());return this.pushStack(r)}}));var Rt=new RegExp("^("+rt+")(?!px)[a-z%]+$","i"),Ht=/^--/,qt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=r),e.getComputedStyle(t)},Ut=function(t,e,n){var r,i,o={};for(i in e)o[i]=t.style[i],t.style[i]=e[i];for(i in r=n.call(t),e)t.style[i]=o[i];return r},zt=new RegExp(ot.join("|"),"i"),Wt=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g");function Gt(t,e,n){var r,i,o,a,s=Ht.test(e),u=t.style;return(n=n||qt(t))&&(a=n.getPropertyValue(e)||n[e],s&&(a=a.replace(Wt,"$1")),""!==a||st(t)||(a=C.style(t,e)),!v.pixelBoxStyles()&&Rt.test(a)&&zt.test(e)&&(r=u.width,i=u.minWidth,o=u.maxWidth,u.minWidth=u.maxWidth=u.width=a,a=n.width,u.width=r,u.minWidth=i,u.maxWidth=o)),void 0!==a?a+"":a}function Vt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",at.appendChild(l).appendChild(c);var t=r.getComputedStyle(c);n="1%"!==t.top,u=12===e(t.marginLeft),c.style.right="60%",a=36===e(t.right),i=36===e(t.width),c.style.position="absolute",o=12===e(c.offsetWidth/3),at.removeChild(l),c=null}}function e(t){return Math.round(parseFloat(t))}var n,i,o,a,s,u,l=b.createElement("div"),c=b.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===c.style.backgroundClip,C.extend(v,{boxSizingReliable:function(){return t(),i},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),u},scrollboxSize:function(){return t(),o},reliableTrDimensions:function(){var t,e,n,i;return null==s&&(t=b.createElement("table"),e=b.createElement("tr"),n=b.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",at.appendChild(t).appendChild(e).appendChild(n),i=r.getComputedStyle(e),s=parseInt(i.height,10)+parseInt(i.borderTopWidth,10)+parseInt(i.borderBottomWidth,10)===e.offsetHeight,at.removeChild(t)),s}}))}();var Yt=["Webkit","Moz","ms"],Kt=b.createElement("div").style,Xt={};function Jt(t){return C.cssProps[t]||Xt[t]||(t in Kt?t:Xt[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=Yt.length;n--;)if((t=Yt[n]+e)in Kt)return t}(t)||t)}var Qt=/^(none|table(?!-c[ea]).+)/,Zt={position:"absolute",visibility:"hidden",display:"block"},te={letterSpacing:"0",fontWeight:"400"};function ee(t,e,n){var r=it.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function ne(t,e,n,r,i,o){var a="width"===e?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=C.css(t,n+ot[a],!0,i)),r?("content"===n&&(u-=C.css(t,"padding"+ot[a],!0,i)),"margin"!==n&&(u-=C.css(t,"border"+ot[a]+"Width",!0,i))):(u+=C.css(t,"padding"+ot[a],!0,i),"padding"!==n?u+=C.css(t,"border"+ot[a]+"Width",!0,i):s+=C.css(t,"border"+ot[a]+"Width",!0,i));return!r&&o>=0&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-s-.5))||0),u}function re(t,e,n){var r=qt(t),i=(!v.boxSizingReliable()||n)&&"border-box"===C.css(t,"boxSizing",!1,r),o=i,a=Gt(t,e,r),s="offset"+e[0].toUpperCase()+e.slice(1);if(Rt.test(a)){if(!n)return a;a="auto"}return(!v.boxSizingReliable()&&i||!v.reliableTrDimensions()&&k(t,"tr")||"auto"===a||!parseFloat(a)&&"inline"===C.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===C.css(t,"boxSizing",!1,r),(o=s in t)&&(a=t[s])),(a=parseFloat(a)||0)+ne(t,e,n||(i?"border":"content"),o,r,a)+"px"}function ie(t,e,n,r,i){return new ie.prototype.init(t,e,n,r,i)}C.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Gt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,a,s=K(e),u=Ht.test(e),l=t.style;if(u||(e=Jt(s)),a=C.cssHooks[e]||C.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(t,!1,r))?i:l[e];"string"==(o=typeof n)&&(i=it.exec(n))&&i[1]&&(n=ct(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(C.cssNumber[s]?"":"px")),v.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,r))||(u?l.setProperty(e,n):l[e]=n))}},css:function(t,e,n,r){var i,o,a,s=K(e);return Ht.test(e)||(e=Jt(s)),(a=C.cssHooks[e]||C.cssHooks[s])&&"get"in a&&(i=a.get(t,!0,n)),void 0===i&&(i=Gt(t,e,r)),"normal"===i&&e in te&&(i=te[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),C.each(["height","width"],(function(t,e){C.cssHooks[e]={get:function(t,n,r){if(n)return!Qt.test(C.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?re(t,e,r):Ut(t,Zt,(function(){return re(t,e,r)}))},set:function(t,n,r){var i,o=qt(t),a=!v.scrollboxSize()&&"absolute"===o.position,s=(a||r)&&"border-box"===C.css(t,"boxSizing",!1,o),u=r?ne(t,e,r,s,o):0;return s&&a&&(u-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(o[e])-ne(t,e,"border",!1,o)-.5)),u&&(i=it.exec(n))&&"px"!==(i[3]||"px")&&(t.style[e]=n,n=C.css(t,e)),ee(0,n,u)}}})),C.cssHooks.marginLeft=Vt(v.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Gt(t,"marginLeft"))||t.getBoundingClientRect().left-Ut(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),C.each({margin:"",padding:"",border:"Width"},(function(t,e){C.cssHooks[t+e]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];r<4;r++)i[t+ot[r]+e]=o[r]||o[r-2]||o[0];return i}},"margin"!==t&&(C.cssHooks[t+e].set=ee)})),C.fn.extend({css:function(t,e){return W(this,(function(t,e,n){var r,i,o={},a=0;if(Array.isArray(e)){for(r=qt(t),i=e.length;a<i;a++)o[e[a]]=C.css(t,e[a],!1,r);return o}return void 0!==n?C.style(t,e,n):C.css(t,e)}),t,e,arguments.length>1)}}),C.Tween=ie,ie.prototype={constructor:ie,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||C.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(C.cssNumber[n]?"":"px")},cur:function(){var t=ie.propHooks[this.prop];return t&&t.get?t.get(this):ie.propHooks._default.get(this)},run:function(t){var e,n=ie.propHooks[this.prop];return this.options.duration?this.pos=e=C.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ie.propHooks._default.set(this),this}},ie.prototype.init.prototype=ie.prototype,ie.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=C.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){C.fx.step[t.prop]?C.fx.step[t.prop](t):1!==t.elem.nodeType||!C.cssHooks[t.prop]&&null==t.elem.style[Jt(t.prop)]?t.elem[t.prop]=t.now:C.style(t.elem,t.prop,t.now+t.unit)}}},ie.propHooks.scrollTop=ie.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},C.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},(C.fx=ie.prototype.init).step={};var oe,ae,se=/^(?:toggle|show|hide)$/,ue=/queueHooks$/;function le(){ae&&(!1===b.hidden&&r.requestAnimationFrame?r.requestAnimationFrame(le):r.setTimeout(le,C.fx.interval),C.fx.tick())}function ce(){return r.setTimeout((function(){oe=void 0})),oe=Date.now()}function de(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=ot[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function fe(t,e,n){for(var r,i=(pe.tweeners[e]||[]).concat(pe.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,e,t))return r}function pe(t,e,n){var r,i,o=0,a=pe.prefilters.length,s=C.Deferred().always((function(){delete u.elem})),u=function(){if(i)return!1;for(var e=oe||ce(),n=Math.max(0,l.startTime+l.duration-e),r=1-(n/l.duration||0),o=0,a=l.tweens.length;o<a;o++)l.tweens[o].run(r);return s.notifyWith(t,[l,r,n]),r<1&&a?n:(a||s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l]),!1)},l=s.promise({elem:t,props:C.extend({},e),opts:C.extend(!0,{specialEasing:{},easing:C.easing._default},n),originalProperties:e,originalOptions:n,startTime:oe||ce(),duration:n.duration,tweens:[],createTween:function(e,n){var r=C.Tween(t,l.opts,e,n,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(r),r},stop:function(e){var n=0,r=e?l.tweens.length:0;if(i)return this;for(i=!0;n<r;n++)l.tweens[n].run(1);return e?(s.notifyWith(t,[l,1,0]),s.resolveWith(t,[l,e])):s.rejectWith(t,[l,e]),this}}),c=l.props;for(function(t,e){var n,r,i,o,a;for(n in t)if(i=e[r=K(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(a=C.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(c,l.opts.specialEasing);o<a;o++)if(r=pe.prefilters[o].call(l,t,c,l.opts))return g(r.stop)&&(C._queueHooks(l.elem,l.opts.queue).stop=r.stop.bind(r)),r;return C.map(c,fe,l),g(l.opts.start)&&l.opts.start.call(t,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),C.fx.timer(C.extend(u,{elem:t,anim:l,queue:l.opts.queue})),l}C.Animation=C.extend(pe,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ct(n.elem,t,it.exec(e),n),n}]},tweener:function(t,e){g(t)?(e=t,t=["*"]):t=t.match(M);for(var n,r=0,i=t.length;r<i;r++)n=t[r],pe.tweeners[n]=pe.tweeners[n]||[],pe.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,a,s,u,l,c,d="width"in e||"height"in e,f=this,p={},h=t.style,m=t.nodeType&&lt(t),v=Q.get(t,"fxshow");for(r in n.queue||(null==(a=C._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,f.always((function(){f.always((function(){a.unqueued--,C.queue(t,"fx").length||a.empty.fire()}))}))),e)if(i=e[r],se.test(i)){if(delete e[r],o=o||"toggle"===i,i===(m?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;m=!0}p[r]=v&&v[r]||C.style(t,r)}if((u=!C.isEmptyObject(e))||!C.isEmptyObject(p))for(r in d&&1===t.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Q.get(t,"display")),"none"===(c=C.css(t,"display"))&&(l?c=l:(pt([t],!0),l=t.style.display||l,c=C.css(t,"display"),pt([t]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===C.css(t,"float")&&(u||(f.done((function(){h.display=l})),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",f.always((function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]}))),u=!1,p)u||(v?"hidden"in v&&(m=v.hidden):v=Q.access(t,"fxshow",{display:l}),o&&(v.hidden=!m),m&&pt([t],!0),f.done((function(){for(r in m||pt([t]),Q.remove(t,"fxshow"),p)C.style(t,r,p[r])}))),u=fe(m?v[r]:0,r,f),r in v||(v[r]=u.start,m&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?pe.prefilters.unshift(t):pe.prefilters.push(t)}}),C.speed=function(t,e,n){var r=t&&"object"==typeof t?C.extend({},t):{complete:n||!n&&e||g(t)&&t,duration:t,easing:n&&e||e&&!g(e)&&e};return C.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in C.fx.speeds?r.duration=C.fx.speeds[r.duration]:r.duration=C.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){g(r.old)&&r.old.call(this),r.queue&&C.dequeue(this,r.queue)},r},C.fn.extend({fadeTo:function(t,e,n,r){return this.filter(lt).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(t,e,n,r){var i=C.isEmptyObject(t),o=C.speed(e,n,r),a=function(){var e=pe(this,C.extend({},t),o);(i||Q.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var r=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,i=null!=t&&t+"queueHooks",o=C.timers,a=Q.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&ue.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=t&&o[i].queue!==t||(o[i].anim.stop(n),e=!1,o.splice(i,1));!e&&n||C.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=Q.get(this),r=n[t+"queue"],i=n[t+"queueHooks"],o=C.timers,a=r?r.length:0;for(n.finish=!0,C.queue(this,t,[]),i&&i.stop&&i.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;e<a;e++)r[e]&&r[e].finish&&r[e].finish.call(this);delete n.finish}))}}),C.each(["toggle","show","hide"],(function(t,e){var n=C.fn[e];C.fn[e]=function(t,r,i){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(de(e,!0),t,r,i)}})),C.each({slideDown:de("show"),slideUp:de("hide"),slideToggle:de("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){C.fn[t]=function(t,n,r){return this.animate(e,t,n,r)}})),C.timers=[],C.fx.tick=function(){var t,e=0,n=C.timers;for(oe=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||C.fx.stop(),oe=void 0},C.fx.timer=function(t){C.timers.push(t),C.fx.start()},C.fx.interval=13,C.fx.start=function(){ae||(ae=!0,le())},C.fx.stop=function(){ae=null},C.fx.speeds={slow:600,fast:200,_default:400},C.fn.delay=function(t,e){return t=C.fx&&C.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var i=r.setTimeout(e,t);n.stop=function(){r.clearTimeout(i)}}))},function(){var t=b.createElement("input"),e=b.createElement("select").appendChild(b.createElement("option"));t.type="checkbox",v.checkOn=""!==t.value,v.optSelected=e.selected,(t=b.createElement("input")).value="t",t.type="radio",v.radioValue="t"===t.value}();var he,me=C.expr.attrHandle;C.fn.extend({attr:function(t,e){return W(this,C.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){C.removeAttr(this,t)}))}}),C.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?C.prop(t,e,n):(1===o&&C.isXMLDoc(t)||(i=C.attrHooks[e.toLowerCase()]||(C.expr.match.bool.test(e)?he:void 0)),void 0!==n?null===n?void C.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=C.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!v.radioValue&&"radio"===e&&k(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(M);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),he={set:function(t,e,n){return!1===e?C.removeAttr(t,n):t.setAttribute(n,n),n}},C.each(C.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=me[e]||C.find.attr;me[e]=function(t,e,r){var i,o,a=e.toLowerCase();return r||(o=me[a],me[a]=i,i=null!=n(t,e,r)?a:null,me[a]=o),i}}));var ve=/^(?:input|select|textarea|button)$/i,ge=/^(?:a|area)$/i;function ye(t){return(t.match(M)||[]).join(" ")}function be(t){return t.getAttribute&&t.getAttribute("class")||""}function De(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(M)||[]}C.fn.extend({prop:function(t,e){return W(this,C.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[C.propFix[t]||t]}))}}),C.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&C.isXMLDoc(t)||(e=C.propFix[e]||e,i=C.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=C.find.attr(t,"tabindex");return e?parseInt(e,10):ve.test(t.nodeName)||ge.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(C.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),C.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){C.propFix[this.toLowerCase()]=this})),C.fn.extend({addClass:function(t){var e,n,r,i,o,a;return g(t)?this.each((function(e){C(this).addClass(t.call(this,e,be(this)))})):(e=De(t)).length?this.each((function(){if(r=be(this),n=1===this.nodeType&&" "+ye(r)+" "){for(o=0;o<e.length;o++)i=e[o],n.indexOf(" "+i+" ")<0&&(n+=i+" ");a=ye(n),r!==a&&this.setAttribute("class",a)}})):this},removeClass:function(t){var e,n,r,i,o,a;return g(t)?this.each((function(e){C(this).removeClass(t.call(this,e,be(this)))})):arguments.length?(e=De(t)).length?this.each((function(){if(r=be(this),n=1===this.nodeType&&" "+ye(r)+" "){for(o=0;o<e.length;o++)for(i=e[o];n.indexOf(" "+i+" ")>-1;)n=n.replace(" "+i+" "," ");a=ye(n),r!==a&&this.setAttribute("class",a)}})):this:this.attr("class","")},toggleClass:function(t,e){var n,r,i,o,a=typeof t,s="string"===a||Array.isArray(t);return g(t)?this.each((function(n){C(this).toggleClass(t.call(this,n,be(this),e),e)})):"boolean"==typeof e&&s?e?this.addClass(t):this.removeClass(t):(n=De(t),this.each((function(){if(s)for(o=C(this),i=0;i<n.length;i++)r=n[i],o.hasClass(r)?o.removeClass(r):o.addClass(r);else void 0!==t&&"boolean"!==a||((r=be(this))&&Q.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===t?"":Q.get(this,"__className__")||""))})))},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&(" "+ye(be(n))+" ").indexOf(e)>-1)return!0;return!1}});var we=/\r/g;C.fn.extend({val:function(t){var e,n,r,i=this[0];return arguments.length?(r=g(t),this.each((function(n){var i;1===this.nodeType&&(null==(i=r?t.call(this,n,C(this).val()):t)?i="":"number"==typeof i?i+="":Array.isArray(i)&&(i=C.map(i,(function(t){return null==t?"":t+""}))),(e=C.valHooks[this.type]||C.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,i,"value")||(this.value=i))}))):i?(e=C.valHooks[i.type]||C.valHooks[i.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(i,"value"))?n:"string"==typeof(n=i.value)?n.replace(we,""):null==n?"":n:void 0}}),C.extend({valHooks:{option:{get:function(t){var e=C.find.attr(t,"value");return null!=e?e:ye(C.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,a="select-one"===t.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!k(n.parentNode,"optgroup"))){if(e=C(n).val(),a)return e;s.push(e)}return s},set:function(t,e){for(var n,r,i=t.options,o=C.makeArray(e),a=i.length;a--;)((r=i[a]).selected=C.inArray(C.valHooks.option.get(r),o)>-1)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),C.each(["radio","checkbox"],(function(){C.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=C.inArray(C(t).val(),e)>-1}},v.checkOn||(C.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})})),v.focusin="onfocusin"in r;var xe=/^(?:focusinfocus|focusoutblur)$/,Ee=function(t){t.stopPropagation()};C.extend(C.event,{trigger:function(t,e,n,i){var o,a,s,u,l,c,d,f,h=[n||b],m=p.call(t,"type")?t.type:t,v=p.call(t,"namespace")?t.namespace.split("."):[];if(a=f=s=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!xe.test(m+C.event.triggered)&&(m.indexOf(".")>-1&&(v=m.split("."),m=v.shift(),v.sort()),l=m.indexOf(":")<0&&"on"+m,(t=t[C.expando]?t:new C.Event(m,"object"==typeof t&&t)).isTrigger=i?2:3,t.namespace=v.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:C.makeArray(e,[t]),d=C.event.special[m]||{},i||!d.trigger||!1!==d.trigger.apply(n,e))){if(!i&&!d.noBubble&&!y(n)){for(u=d.delegateType||m,xe.test(u+m)||(a=a.parentNode);a;a=a.parentNode)h.push(a),s=a;s===(n.ownerDocument||b)&&h.push(s.defaultView||s.parentWindow||r)}for(o=0;(a=h[o++])&&!t.isPropagationStopped();)f=a,t.type=o>1?u:d.bindType||m,(c=(Q.get(a,"events")||Object.create(null))[t.type]&&Q.get(a,"handle"))&&c.apply(a,e),(c=l&&a[l])&&c.apply&&X(a)&&(t.result=c.apply(a,e),!1===t.result&&t.preventDefault());return t.type=m,i||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(h.pop(),e)||!X(n)||l&&g(n[m])&&!y(n)&&((s=n[l])&&(n[l]=null),C.event.triggered=m,t.isPropagationStopped()&&f.addEventListener(m,Ee),n[m](),t.isPropagationStopped()&&f.removeEventListener(m,Ee),C.event.triggered=void 0,s&&(n[l]=s)),t.result}},simulate:function(t,e,n){var r=C.extend(new C.Event,n,{type:t,isSimulated:!0});C.event.trigger(r,null,e)}}),C.fn.extend({trigger:function(t,e){return this.each((function(){C.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return C.event.trigger(t,e,n,!0)}}),v.focusin||C.each({focus:"focusin",blur:"focusout"},(function(t,e){var n=function(t){C.event.simulate(e,t.target,C.event.fix(t))};C.event.special[e]={setup:function(){var r=this.ownerDocument||this.document||this,i=Q.access(r,e);i||r.addEventListener(t,n,!0),Q.access(r,e,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,i=Q.access(r,e)-1;i?Q.access(r,e,i):(r.removeEventListener(t,n,!0),Q.remove(r,e))}}}));var Ce=r.location,Ae={guid:Date.now()},Ne=/\?/;C.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new r.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||C.error("Invalid XML: "+(n?C.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Fe=/\[\]$/,_e=/\r?\n/g,Te=/^(?:submit|button|image|reset|file)$/i,ke=/^(?:input|select|textarea|keygen)/i;function Se(t,e,n,r){var i;if(Array.isArray(e))C.each(e,(function(e,i){n||Fe.test(t)?r(t,i):Se(t+"["+("object"==typeof i&&null!=i?e:"")+"]",i,n,r)}));else if(n||"object"!==x(e))r(t,e);else for(i in e)Se(t+"["+i+"]",e[i],n,r)}C.param=function(t,e){var n,r=[],i=function(t,e){var n=g(e)?e():e;r[r.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!C.isPlainObject(t))C.each(t,(function(){i(this.name,this.value)}));else for(n in t)Se(n,t[n],e,i);return r.join("&")},C.fn.extend({serialize:function(){return C.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=C.prop(this,"elements");return t?C.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!C(this).is(":disabled")&&ke.test(this.nodeName)&&!Te.test(t)&&(this.checked||!vt.test(t))})).map((function(t,e){var n=C(this).val();return null==n?null:Array.isArray(n)?C.map(n,(function(t){return{name:e.name,value:t.replace(_e,"\r\n")}})):{name:e.name,value:n.replace(_e,"\r\n")}})).get()}});var Be=/%20/g,Pe=/#.*$/,Oe=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,je=/^(?:GET|HEAD)$/,Le=/^\/\//,Me={},$e={},Re="*/".concat("*"),He=b.createElement("a");function qe(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var r,i=0,o=e.toLowerCase().match(M)||[];if(g(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(t[r]=t[r]||[]).unshift(n)):(t[r]=t[r]||[]).push(n)}}function Ue(t,e,n,r){var i={},o=t===$e;function a(s){var u;return i[s]=!0,C.each(t[s]||[],(function(t,s){var l=s(e,n,r);return"string"!=typeof l||o||i[l]?o?!(u=l):void 0:(e.dataTypes.unshift(l),a(l),!1)})),u}return a(e.dataTypes[0])||!i["*"]&&a("*")}function ze(t,e){var n,r,i=C.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r||(r={}))[n]=e[n]);return r&&C.extend(!0,t,r),t}He.href=Ce.href,C.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ce.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ce.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Re,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":C.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?ze(ze(t,C.ajaxSettings),e):ze(C.ajaxSettings,t)},ajaxPrefilter:qe(Me),ajaxTransport:qe($e),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0);var n,i,o,a,s,u,l,c,d,f,p=C.ajaxSetup({},e=e||{}),h=p.context||p,m=p.context&&(h.nodeType||h.jquery)?C(h):C.event,v=C.Deferred(),g=C.Callbacks("once memory"),y=p.statusCode||{},D={},w={},x="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(l){if(!a)for(a={};e=Ie.exec(o);)a[e[1].toLowerCase()+" "]=(a[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=a[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return l?o:null},setRequestHeader:function(t,e){return null==l&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,D[t]=e),this},overrideMimeType:function(t){return null==l&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(l)E.always(t[E.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||x;return n&&n.abort(e),A(0,e),this}};if(v.promise(E),p.url=((t||p.url||Ce.href)+"").replace(Le,Ce.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(M)||[""],null==p.crossDomain){u=b.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=He.protocol+"//"+He.host!=u.protocol+"//"+u.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=C.param(p.data,p.traditional)),Ue(Me,p,e,E),l)return E;for(d in(c=C.event&&p.global)&&0==C.active++&&C.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!je.test(p.type),i=p.url.replace(Pe,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Be,"+")):(f=p.url.slice(i.length),p.data&&(p.processData||"string"==typeof p.data)&&(i+=(Ne.test(i)?"&":"?")+p.data,delete p.data),!1===p.cache&&(i=i.replace(Oe,"$1"),f=(Ne.test(i)?"&":"?")+"_="+Ae.guid+++f),p.url=i+f),p.ifModified&&(C.lastModified[i]&&E.setRequestHeader("If-Modified-Since",C.lastModified[i]),C.etag[i]&&E.setRequestHeader("If-None-Match",C.etag[i])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&E.setRequestHeader("Content-Type",p.contentType),E.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Re+"; q=0.01":""):p.accepts["*"]),p.headers)E.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(h,E,p)||l))return E.abort();if(x="abort",g.add(p.complete),E.done(p.success),E.fail(p.error),n=Ue($e,p,e,E)){if(E.readyState=1,c&&m.trigger("ajaxSend",[E,p]),l)return E;p.async&&p.timeout>0&&(s=r.setTimeout((function(){E.abort("timeout")}),p.timeout));try{l=!1,n.send(D,A)}catch(t){if(l)throw t;A(-1,t)}}else A(-1,"No Transport");function A(t,e,a,u){var d,f,b,D,w,x=e;l||(l=!0,s&&r.clearTimeout(s),n=void 0,o=u||"",E.readyState=t>0?4:0,d=t>=200&&t<300||304===t,a&&(D=function(t,e,n){for(var r,i,o,a,s=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(p,E,a)),!d&&C.inArray("script",p.dataTypes)>-1&&C.inArray("json",p.dataTypes)<0&&(p.converters["text script"]=function(){}),D=function(t,e,n,r){var i,o,a,s,u,l={},c=t.dataTypes.slice();if(c[1])for(a in t.converters)l[a.toLowerCase()]=t.converters[a];for(o=c.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(p,D,E,d),d?(p.ifModified&&((w=E.getResponseHeader("Last-Modified"))&&(C.lastModified[i]=w),(w=E.getResponseHeader("etag"))&&(C.etag[i]=w)),204===t||"HEAD"===p.type?x="nocontent":304===t?x="notmodified":(x=D.state,f=D.data,d=!(b=D.error))):(b=x,!t&&x||(x="error",t<0&&(t=0))),E.status=t,E.statusText=(e||x)+"",d?v.resolveWith(h,[f,x,E]):v.rejectWith(h,[E,x,b]),E.statusCode(y),y=void 0,c&&m.trigger(d?"ajaxSuccess":"ajaxError",[E,p,d?f:b]),g.fireWith(h,[E,x]),c&&(m.trigger("ajaxComplete",[E,p]),--C.active||C.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,n){return C.get(t,e,n,"json")},getScript:function(t,e){return C.get(t,void 0,e,"script")}}),C.each(["get","post"],(function(t,e){C[e]=function(t,n,r,i){return g(n)&&(i=i||r,r=n,n=void 0),C.ajax(C.extend({url:t,type:e,dataType:i,data:n,success:r},C.isPlainObject(t)&&t))}})),C.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),C._evalUrl=function(t,e,n){return C.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){C.globalEval(t,e,n)}})},C.fn.extend({wrapAll:function(t){var e;return this[0]&&(g(t)&&(t=t.call(this[0])),e=C(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return g(t)?this.each((function(e){C(this).wrapInner(t.call(this,e))})):this.each((function(){var e=C(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=g(t);return this.each((function(n){C(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){C(this).replaceWith(this.childNodes)})),this}}),C.expr.pseudos.hidden=function(t){return!C.expr.pseudos.visible(t)},C.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},C.ajaxSettings.xhr=function(){try{return new r.XMLHttpRequest}catch(t){}};var We={0:200,1223:204},Ge=C.ajaxSettings.xhr();v.cors=!!Ge&&"withCredentials"in Ge,v.ajax=Ge=!!Ge,C.ajaxTransport((function(t){var e,n;if(v.cors||Ge&&!t.crossDomain)return{send:function(i,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];for(a in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest"),i)s.setRequestHeader(a,i[a]);e=function(t){return function(){e&&(e=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===t?s.abort():"error"===t?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(We[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=e(),n=s.onerror=s.ontimeout=e("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&r.setTimeout((function(){e&&n()}))},e=e("abort");try{s.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),C.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),C.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return C.globalEval(t),t}}}),C.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),C.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(r,i){e=C("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&i("error"===t.type?404:200,t.type)}),b.head.appendChild(e[0])},abort:function(){n&&n()}}}));var Ve,Ye=[],Ke=/(=)\?(?=&|$)|\?\?/;C.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Ye.pop()||C.expando+"_"+Ae.guid++;return this[t]=!0,t}}),C.ajaxPrefilter("json jsonp",(function(t,e,n){var i,o,a,s=!1!==t.jsonp&&(Ke.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ke.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return i=t.jsonpCallback=g(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ke,"$1"+i):!1!==t.jsonp&&(t.url+=(Ne.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||C.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=r[i],r[i]=function(){a=arguments},n.always((function(){void 0===o?C(r).removeProp(i):r[i]=o,t[i]&&(t.jsonpCallback=e.jsonpCallback,Ye.push(i)),a&&g(o)&&o(a[0]),a=o=void 0})),"script"})),v.createHTMLDocument=((Ve=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Ve.childNodes.length),C.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(v.createHTMLDocument?((r=(e=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,e.head.appendChild(r)):e=b),o=!n&&[],(i=S.exec(t))?[e.createElement(i[1])]:(i=Et([t],e,o),o&&o.length&&C(o).remove(),C.merge([],i.childNodes)));var r,i,o},C.fn.load=function(t,e,n){var r,i,o,a=this,s=t.indexOf(" ");return s>-1&&(r=ye(t.slice(s)),t=t.slice(0,s)),g(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),a.length>0&&C.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done((function(t){o=arguments,a.html(r?C("<div>").append(C.parseHTML(t)).find(r):t)})).always(n&&function(t,e){a.each((function(){n.apply(this,o||[t.responseText,e,t])}))}),this},C.expr.pseudos.animated=function(t){return C.grep(C.timers,(function(e){return t===e.elem})).length},C.offset={setOffset:function(t,e,n){var r,i,o,a,s,u,l=C.css(t,"position"),c=C(t),d={};"static"===l&&(t.style.position="relative"),s=c.offset(),o=C.css(t,"top"),u=C.css(t,"left"),("absolute"===l||"fixed"===l)&&(o+u).indexOf("auto")>-1?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),g(e)&&(e=e.call(t,n,C.extend({},s))),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+i),"using"in e?e.using.call(t,d):c.css(d)}},C.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){C.offset.setOffset(this,t,e)}));var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===C.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===C.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=C(t).offset()).top+=C.css(t,"borderTopWidth",!0),i.left+=C.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-C.css(r,"marginTop",!0),left:e.left-i.left-C.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===C.css(t,"position");)t=t.offsetParent;return t||at}))}}),C.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;C.fn[t]=function(r){return W(this,(function(t,r,i){var o;if(y(t)?o=t:9===t.nodeType&&(o=t.defaultView),void 0===i)return o?o[e]:t[r];o?o.scrollTo(n?o.pageXOffset:i,n?i:o.pageYOffset):t[r]=i}),t,r,arguments.length)}})),C.each(["top","left"],(function(t,e){C.cssHooks[e]=Vt(v.pixelPosition,(function(t,n){if(n)return n=Gt(t,e),Rt.test(n)?C(t).position()[e]+"px":n}))})),C.each({Height:"height",Width:"width"},(function(t,e){C.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,r){C.fn[r]=function(i,o){var a=arguments.length&&(n||"boolean"!=typeof i),s=n||(!0===i||!0===o?"margin":"border");return W(this,(function(e,n,i){var o;return y(e)?0===r.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(o=e.documentElement,Math.max(e.body["scroll"+t],o["scroll"+t],e.body["offset"+t],o["offset"+t],o["client"+t])):void 0===i?C.css(e,n,s):C.style(e,n,i,s)}),e,a?i:void 0,a)}}))})),C.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){C.fn[e]=function(t){return this.on(e,t)}})),C.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),C.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){C.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var Xe=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;C.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),g(t))return r=s.call(arguments,2),i=function(){return t.apply(e||this,r.concat(s.call(arguments)))},i.guid=t.guid=t.guid||C.guid++,i},C.holdReady=function(t){t?C.readyWait++:C.ready(!0)},C.isArray=Array.isArray,C.parseJSON=JSON.parse,C.nodeName=k,C.isFunction=g,C.isWindow=y,C.camelCase=K,C.type=x,C.now=Date.now,C.isNumeric=function(t){var e=C.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},C.trim=function(t){return null==t?"":(t+"").replace(Xe,"$1")},void 0===(n=function(){return C}.apply(e,[]))||(t.exports=n);var Je=r.jQuery,Qe=r.$;return C.noConflict=function(t){return r.$===C&&(r.$=Qe),t&&r.jQuery===C&&(r.jQuery=Je),C},void 0===i&&(r.jQuery=r.$=C),C}))},542:(t,e,n)=>{"use strict";var r=n(1642);t.exports=function(t,e,n){var i=[],o=!1,a=!1;function s(){if(o)throw new Error("Nested m.redraw.sync() call");o=!0;for(var e=0;e<i.length;e+=2)try{t(i[e],r(i[e+1]),u)}catch(t){n.error(t)}o=!1}function u(){a||(a=!0,e((function(){a=!1,s()})))}return u.sync=s,{mount:function(e,n){if(null!=n&&null==n.view&&"function"!=typeof n)throw new TypeError("m.mount(element, component) expects a component, not a vnode");var o=i.indexOf(e);o>=0&&(i.splice(o,2),t(e,[],u)),null!=n&&(i.push(e,n),t(e,r(n),u))},redraw:u}}},3600:(t,e,n)=>{"use strict";var r=n(1642),i=n(5334),o=n(187),a=n(3690),s=n(1490),u=n(5211),l=n(6797),c={};t.exports=function(t,e){var n;function d(e,r,i){if(e=a(e,r),null!=n){n();var o=i?i.state:null,s=i?i.title:null;i&&i.replace?t.history.replaceState(o,s,y.prefix+e):t.history.pushState(o,s,y.prefix+e)}else t.location.href=y.prefix+e}var f,p,h,m,v=c,g=y.SKIP={};function y(i,a,b){if(null==i)throw new Error("Ensure the DOM element that was passed to `m.route` is not undefined");var D,w=0,x=Object.keys(b).map((function(t){if("/"!==t[0])throw new SyntaxError("Routes must start with a `/`");if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw new SyntaxError("Route parameter names must be separated with either `/`, `.`, or `-`");return{route:t,component:b[t],check:u(t)}})),E="function"==typeof setImmediate?setImmediate:setTimeout,C=o.resolve(),A=!1;if(n=null,null!=a){var N=s(a);if(!x.some((function(t){return t.check(N)})))throw new ReferenceError("Default route doesn't match any known routes")}function F(){A=!1;var n=t.location.hash;"#"!==y.prefix[0]&&(n=t.location.search+n,"?"!==y.prefix[0]&&"/"!==(n=t.location.pathname+n)[0]&&(n="/"+n));var r=n.concat().replace(/(?:%[a-f89][a-f0-9])+/gim,decodeURIComponent).slice(y.prefix.length),i=s(r);function o(){if(r===a)throw new Error("Could not resolve default route "+a);d(a,null,{replace:!0})}l(i.params,t.history.state),function t(n){for(;n<x.length;n++)if(x[n].check(i)){var a=x[n].component,s=x[n].route,u=a,l=m=function(o){if(l===m){if(o===g)return t(n+1);f=null==o||"function"!=typeof o.view&&"function"!=typeof o?"div":o,p=i.params,h=r,m=null,v=a.render?a:null,2===w?e.redraw():(w=2,e.redraw.sync())}};return void(a.view||"function"==typeof a?(a={},l(u)):a.onmatch?C.then((function(){return a.onmatch(i.params,r,s)})).then(l,o):l("div"))}o()}(0)}return n=function(){A||(A=!0,E(F))},"function"==typeof t.history.pushState?(D=function(){t.removeEventListener("popstate",n,!1)},t.addEventListener("popstate",n,!1)):"#"===y.prefix[0]&&(n=null,D=function(){t.removeEventListener("hashchange",F,!1)},t.addEventListener("hashchange",F,!1)),e.mount(i,{onbeforeupdate:function(){return!(!(w=w?2:1)||c===v)},oncreate:F,onremove:D,view:function(){if(w&&c!==v){var t=[r(f,p.key,p)];return v&&(t=v.render(t[0])),t}}})}return y.set=function(t,e,n){null!=m&&((n=n||{}).replace=!0),m=null,d(t,e,n)},y.get=function(){return h},y.prefix="#!",y.Link={view:function(t){var e,n,r=t.attrs.options,o={};l(o,t.attrs),o.selector=o.options=o.key=o.oninit=o.oncreate=o.onbeforeupdate=o.onupdate=o.onbeforeremove=o.onremove=null;var a=i(t.attrs.selector||"a",o,t.children);return(a.attrs.disabled=Boolean(a.attrs.disabled))?(a.attrs.href=null,a.attrs["aria-disabled"]="true",a.attrs.onclick=null):(e=a.attrs.onclick,n=a.attrs.href,a.attrs.href=y.prefix+n,a.attrs.onclick=function(t){var i;"function"==typeof e?i=e.call(t.currentTarget,t):null==e||"object"!=typeof e||"function"==typeof e.handleEvent&&e.handleEvent(t),!1===i||t.defaultPrevented||0!==t.button&&0!==t.which&&1!==t.which||t.currentTarget.target&&"_self"!==t.currentTarget.target||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey||(t.preventDefault(),t.redraw=!1,y.set(n,null,r))}),a}},y.param=function(t){return p&&null!=t?p[t]:p},y}},589:(t,e,n)=>{"use strict";var r=n(5334);r.trust=n(4031),r.fragment=n(2505),t.exports=r},7945:(t,e,n)=>{"use strict";var r=n(589),i=n(8450),o=n(570),a=function(){return r.apply(this,arguments)};a.m=r,a.trust=r.trust,a.fragment=r.fragment,a.mount=o.mount,a.route=n(2092),a.render=n(2031),a.redraw=o.redraw,a.request=i.request,a.jsonp=i.jsonp,a.parseQueryString=n(5784),a.buildQueryString=n(7477),a.parsePathname=n(1490),a.buildPathname=n(3690),a.vnode=n(1642),a.PromisePolyfill=n(7068),t.exports=a},570:(t,e,n)=>{"use strict";var r=n(2031);t.exports=n(542)(r,requestAnimationFrame,console)},6797:t=>{"use strict";t.exports=Object.assign||function(t,e){e&&Object.keys(e).forEach((function(n){t[n]=e[n]}))}},3690:(t,e,n)=>{"use strict";var r=n(7477),i=n(6797);t.exports=function(t,e){if(/:([^\/\.-]+)(\.{3})?:/.test(t))throw new SyntaxError("Template parameter names *must* be separated");if(null==e)return t;var n=t.indexOf("?"),o=t.indexOf("#"),a=o<0?t.length:o,s=n<0?a:n,u=t.slice(0,s),l={};i(l,e);var c=u.replace(/:([^\/\.-]+)(\.{3})?/g,(function(t,n,r){return delete l[n],null==e[n]?t:r?e[n]:encodeURIComponent(String(e[n]))})),d=c.indexOf("?"),f=c.indexOf("#"),p=f<0?c.length:f,h=d<0?p:d,m=c.slice(0,h);n>=0&&(m+=t.slice(n,a)),d>=0&&(m+=(n<0?"?":"&")+c.slice(d,p));var v=r(l);return v&&(m+=(n<0&&d<0?"?":"&")+v),o>=0&&(m+=t.slice(o)),f>=0&&(m+=(o<0?"":"&")+c.slice(f)),m}},5211:(t,e,n)=>{"use strict";var r=n(1490);t.exports=function(t){var e=r(t),n=Object.keys(e.params),i=[],o=new RegExp("^"+e.path.replace(/:([^\/.-]+)(\.{3}|\.(?!\.)|-)?|[\\^$*+.()|\[\]{}]/g,(function(t,e,n){return null==e?"\\"+t:(i.push({k:e,r:"..."===n}),"..."===n?"(.*)":"."===n?"([^/]+)\\.":"([^/]+)"+(n||""))}))+"$");return function(t){for(var r=0;r<n.length;r++)if(e.params[n[r]]!==t.params[n[r]])return!1;if(!i.length)return o.test(t.path);var a=o.exec(t.path);if(null==a)return!1;for(r=0;r<i.length;r++)t.params[i[r].k]=i[r].r?a[r+1]:decodeURIComponent(a[r+1]);return!0}}},1490:(t,e,n)=>{"use strict";var r=n(5784);t.exports=function(t){var e=t.indexOf("?"),n=t.indexOf("#"),i=n<0?t.length:n,o=e<0?i:e,a=t.slice(0,o).replace(/\/{2,}/g,"/");return a?("/"!==a[0]&&(a="/"+a),a.length>1&&"/"===a[a.length-1]&&(a=a.slice(0,-1))):a="/",{path:a,params:e<0?{}:r(t.slice(e+1,i))}}},7068:t=>{"use strict";var e=function t(e){if(!(this instanceof t))throw new Error("Promise must be called with `new`");if("function"!=typeof e)throw new TypeError("executor must be a function");var n=this,r=[],i=[],o=l(r,!0),a=l(i,!1),s=n._instance={resolvers:r,rejectors:i},u="function"==typeof setImmediate?setImmediate:setTimeout;function l(t,e){return function o(l){var d;try{if(!e||null==l||"object"!=typeof l&&"function"!=typeof l||"function"!=typeof(d=l.then))u((function(){e||0!==t.length||console.error("Possible unhandled promise rejection:",l);for(var n=0;n<t.length;n++)t[n](l);r.length=0,i.length=0,s.state=e,s.retry=function(){o(l)}}));else{if(l===n)throw new TypeError("Promise can't be resolved w/ itself");c(d.bind(l))}}catch(t){a(t)}}}function c(t){var e=0;function n(t){return function(n){e++>0||t(n)}}var r=n(a);try{t(n(o),r)}catch(t){r(t)}}c(e)};e.prototype.then=function(t,n){var r,i,o=this._instance;function a(t,e,n,a){e.push((function(e){if("function"!=typeof t)n(e);else try{r(t(e))}catch(t){i&&i(t)}})),"function"==typeof o.retry&&a===o.state&&o.retry()}var s=new e((function(t,e){r=t,i=e}));return a(t,o.resolvers,r,!0),a(n,o.rejectors,i,!1),s},e.prototype.catch=function(t){return this.then(null,t)},e.prototype.finally=function(t){return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))},e.resolve=function(t){return t instanceof e?t:new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){return new e((function(e,n){var r=t.length,i=0,o=[];if(0===t.length)e([]);else for(var a=0;a<t.length;a++)!function(a){function s(t){i++,o[a]=t,i===r&&e(o)}null==t[a]||"object"!=typeof t[a]&&"function"!=typeof t[a]||"function"!=typeof t[a].then?s(t[a]):t[a].then(s,n)}(a)}))},e.race=function(t){return new e((function(e,n){for(var r=0;r<t.length;r++)t[r].then(e,n)}))},t.exports=e},187:(t,e,n)=>{"use strict";var r=n(7068);"undefined"!=typeof window?(void 0===window.Promise?window.Promise=r:window.Promise.prototype.finally||(window.Promise.prototype.finally=r.prototype.finally),t.exports=window.Promise):void 0!==n.g?(void 0===n.g.Promise?n.g.Promise=r:n.g.Promise.prototype.finally||(n.g.Promise.prototype.finally=r.prototype.finally),t.exports=n.g.Promise):t.exports=r},7477:t=>{"use strict";t.exports=function(t){if("[object Object]"!==Object.prototype.toString.call(t))return"";var e=[];for(var n in t)r(n,t[n]);return e.join("&");function r(t,n){if(Array.isArray(n))for(var i=0;i<n.length;i++)r(t+"["+i+"]",n[i]);else if("[object Object]"===Object.prototype.toString.call(n))for(var i in n)r(t+"["+i+"]",n[i]);else e.push(encodeURIComponent(t)+(null!=n&&""!==n?"="+encodeURIComponent(n):""))}}},5784:t=>{"use strict";t.exports=function(t){if(""===t||null==t)return{};"?"===t.charAt(0)&&(t=t.slice(1));for(var e=t.split("&"),n={},r={},i=0;i<e.length;i++){var o=e[i].split("="),a=decodeURIComponent(o[0]),s=2===o.length?decodeURIComponent(o[1]):"";"true"===s?s=!0:"false"===s&&(s=!1);var u=a.split(/\]\[?|\[/),l=r;a.indexOf("[")>-1&&u.pop();for(var c=0;c<u.length;c++){var d=u[c],f=u[c+1],p=""==f||!isNaN(parseInt(f,10));if(""===d)null==n[a=u.slice(0,c).join()]&&(n[a]=Array.isArray(l)?l.length:0),d=n[a]++;else if("__proto__"===d)break;if(c===u.length-1)l[d]=s;else{var h=Object.getOwnPropertyDescriptor(l,d);null!=h&&(h=h.value),null==h&&(l[d]=h=p?[]:{}),l=h}}}return r}},2031:(t,e,n)=>{"use strict";t.exports=n(4615)(window)},2505:(t,e,n)=>{"use strict";var r=n(1642),i=n(8239);t.exports=function(){var t=i.apply(0,arguments);return t.tag="[",t.children=r.normalizeChildren(t.children),t}},5334:(t,e,n)=>{"use strict";var r=n(1642),i=n(8239),o=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,a={},s={}.hasOwnProperty;function u(t){for(var e in t)if(s.call(t,e))return!1;return!0}function l(t){for(var e,n="div",r=[],i={};e=o.exec(t);){var s=e[1],u=e[2];if(""===s&&""!==u)n=u;else if("#"===s)i.id=u;else if("."===s)r.push(u);else if("["===e[3][0]){var l=e[6];l&&(l=l.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),"class"===e[4]?r.push(l):i[e[4]]=""===l?l:l||!0}}return r.length>0&&(i.className=r.join(" ")),a[t]={tag:n,attrs:i}}function c(t,e){var n=e.attrs,i=r.normalizeChildren(e.children),o=s.call(n,"class"),a=o?n.class:n.className;if(e.tag=t.tag,e.attrs=null,e.children=void 0,!u(t.attrs)&&!u(n)){var l={};for(var c in n)s.call(n,c)&&(l[c]=n[c]);n=l}for(var c in t.attrs)s.call(t.attrs,c)&&"className"!==c&&!s.call(n,c)&&(n[c]=t.attrs[c]);for(var c in null==a&&null==t.attrs.className||(n.className=null!=a?null!=t.attrs.className?String(t.attrs.className)+" "+String(a):a:null!=t.attrs.className?t.attrs.className:null),o&&(n.class=null),n)if(s.call(n,c)&&"key"!==c){e.attrs=n;break}return Array.isArray(i)&&1===i.length&&null!=i[0]&&"#"===i[0].tag?e.text=i[0].children:e.children=i,e}t.exports=function(t){if(null==t||"string"!=typeof t&&"function"!=typeof t&&"function"!=typeof t.view)throw Error("The selector must be either a string or a component.");var e=i.apply(1,arguments);return"string"==typeof t&&(e.children=r.normalizeChildren(e.children),"["!==t)?c(a[t]||l(t),e):(e.tag=t,e)}},8239:(t,e,n)=>{"use strict";var r=n(1642);t.exports=function(){var t,e=arguments[this],n=this+1;if(null==e?e={}:("object"!=typeof e||null!=e.tag||Array.isArray(e))&&(e={},n=this),arguments.length===n+1)t=arguments[n],Array.isArray(t)||(t=[t]);else for(t=[];n<arguments.length;)t.push(arguments[n++]);return r("",e.key,e,t)}},4615:(t,e,n)=>{"use strict";var r=n(1642);t.exports=function(t){var e,n=t&&t.document,i={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"};function o(t){return t.attrs&&t.attrs.xmlns||i[t.tag]}function a(t,e){if(t.state!==e)throw new Error("`vnode.state` must not be modified")}function s(t){var e=t.state;try{return this.apply(e,arguments)}finally{a(t,e)}}function u(){try{return n.activeElement}catch(t){return null}}function l(t,e,n,r,i,o,a){for(var s=n;s<r;s++){var u=e[s];null!=u&&c(t,u,i,a,o)}}function c(t,e,i,a,u){var d=e.tag;if("string"==typeof d)switch(e.state={},null!=e.attrs&&L(e.attrs,e,i),d){case"#":!function(t,e,r){e.dom=n.createTextNode(e.children),D(t,e.dom,r)}(t,e,u);break;case"<":f(t,e,a,u);break;case"[":!function(t,e,r,i,o){var a=n.createDocumentFragment();if(null!=e.children){var s=e.children;l(a,s,0,s.length,r,null,i)}e.dom=a.firstChild,e.domSize=a.childNodes.length,D(t,a,o)}(t,e,i,a,u);break;default:!function(t,e,i,a,s){var u=e.tag,c=e.attrs,d=c&&c.is,f=(a=o(e)||a)?d?n.createElementNS(a,u,{is:d}):n.createElementNS(a,u):d?n.createElement(u,{is:d}):n.createElement(u);if(e.dom=f,null!=c&&function(t,e,n){for(var r in e)F(t,r,null,e[r],n)}(e,c,a),D(t,f,s),!w(e)&&(null!=e.text&&(""!==e.text?f.textContent=e.text:e.children=[r("#",void 0,void 0,e.text,void 0,void 0)]),null!=e.children)){var p=e.children;l(f,p,0,p.length,i,null,a),"select"===e.tag&&null!=c&&function(t,e){if("value"in e)if(null===e.value)-1!==t.dom.selectedIndex&&(t.dom.value=null);else{var n=""+e.value;t.dom.value===n&&-1!==t.dom.selectedIndex||(t.dom.value=n)}"selectedIndex"in e&&F(t,"selectedIndex",null,e.selectedIndex,void 0)}(e,c)}}(t,e,i,a,u)}else!function(t,e,n,i,o){(function(t,e){var n;if("function"==typeof t.tag.view){if(t.state=Object.create(t.tag),null!=(n=t.state.view).$$reentrantLock$$)return;n.$$reentrantLock$$=!0}else{if(t.state=void 0,null!=(n=t.tag).$$reentrantLock$$)return;n.$$reentrantLock$$=!0,t.state=null!=t.tag.prototype&&"function"==typeof t.tag.prototype.view?new t.tag(t):t.tag(t)}if(L(t.state,t,e),null!=t.attrs&&L(t.attrs,t,e),t.instance=r.normalize(s.call(t.state.view,t)),t.instance===t)throw Error("A view cannot return the vnode it received as argument");n.$$reentrantLock$$=null})(e,n),null!=e.instance?(c(t,e.instance,n,i,o),e.dom=e.instance.dom,e.domSize=null!=e.dom?e.instance.domSize:0):e.domSize=0}(t,e,i,a,u)}var d={caption:"table",thead:"table",tbody:"table",tfoot:"table",tr:"tbody",th:"tr",td:"tr",colgroup:"table",col:"colgroup"};function f(t,e,r,i){var o=e.children.match(/^\s*?<(\w+)/im)||[],a=n.createElement(d[o[1]]||"div");"http://www.w3.org/2000/svg"===r?(a.innerHTML='<svg xmlns="http://www.w3.org/2000/svg">'+e.children+"</svg>",a=a.firstChild):a.innerHTML=e.children,e.dom=a.firstChild,e.domSize=a.childNodes.length,e.instance=[];for(var s,u=n.createDocumentFragment();s=a.firstChild;)e.instance.push(s),u.appendChild(s);D(t,u,i)}function p(t,e,n,r,i,o){if(e!==n&&(null!=e||null!=n))if(null==e||0===e.length)l(t,n,0,n.length,r,i,o);else if(null==n||0===n.length)x(t,e,0,e.length);else{var a=null!=e[0]&&null!=e[0].key,s=null!=n[0]&&null!=n[0].key,u=0,d=0;if(!a)for(;d<e.length&&null==e[d];)d++;if(!s)for(;u<n.length&&null==n[u];)u++;if(null===s&&null==a)return;if(a!==s)x(t,e,d,e.length),l(t,n,u,n.length,r,i,o);else if(s){for(var f,p,b,D,w,C=e.length-1,A=n.length-1;C>=d&&A>=u&&(b=e[C],D=n[A],b.key===D.key);)b!==D&&h(t,b,D,r,i,o),null!=D.dom&&(i=D.dom),C--,A--;for(;C>=d&&A>=u&&(f=e[d],p=n[u],f.key===p.key);)d++,u++,f!==p&&h(t,f,p,r,g(e,d,i),o);for(;C>=d&&A>=u&&u!==A&&f.key===D.key&&b.key===p.key;)y(t,b,w=g(e,d,i)),b!==p&&h(t,b,p,r,w,o),++u<=--A&&y(t,f,i),f!==D&&h(t,f,D,r,i,o),null!=D.dom&&(i=D.dom),d++,b=e[--C],D=n[A],f=e[d],p=n[u];for(;C>=d&&A>=u&&b.key===D.key;)b!==D&&h(t,b,D,r,i,o),null!=D.dom&&(i=D.dom),A--,b=e[--C],D=n[A];if(u>A)x(t,e,d,C+1);else if(d>C)l(t,n,u,A+1,r,i,o);else{var N,F,_=i,T=A-u+1,k=new Array(T),S=0,B=0,P=2147483647,O=0;for(B=0;B<T;B++)k[B]=-1;for(B=A;B>=u;B--){null==N&&(N=m(e,d,C+1));var I=N[(D=n[B]).key];null!=I&&(P=I<P?I:-1,k[B-u]=I,b=e[I],e[I]=null,b!==D&&h(t,b,D,r,i,o),null!=D.dom&&(i=D.dom),O++)}if(i=_,O!==C-d+1&&x(t,e,d,C+1),0===O)l(t,n,u,A+1,r,i,o);else if(-1===P)for(F=function(t){var e=[0],n=0,r=0,i=0,o=v.length=t.length;for(i=0;i<o;i++)v[i]=t[i];for(i=0;i<o;++i)if(-1!==t[i]){var a=e[e.length-1];if(t[a]<t[i])v[i]=a,e.push(i);else{for(n=0,r=e.length-1;n<r;){var s=(n>>>1)+(r>>>1)+(n&r&1);t[e[s]]<t[i]?n=s+1:r=s}t[i]<t[e[n]]&&(n>0&&(v[i]=e[n-1]),e[n]=i)}}for(r=e[(n=e.length)-1];n-- >0;)e[n]=r,r=v[r];return v.length=0,e}(k),S=F.length-1,B=A;B>=u;B--)p=n[B],-1===k[B-u]?c(t,p,r,o,i):F[S]===B-u?S--:y(t,p,i),null!=p.dom&&(i=n[B].dom);else for(B=A;B>=u;B--)p=n[B],-1===k[B-u]&&c(t,p,r,o,i),null!=p.dom&&(i=n[B].dom)}}else{var j=e.length<n.length?e.length:n.length;for(u=u<d?u:d;u<j;u++)(f=e[u])===(p=n[u])||null==f&&null==p||(null==f?c(t,p,r,o,g(e,u+1,i)):null==p?E(t,f):h(t,f,p,r,g(e,u+1,i),o));e.length>j&&x(t,e,u,e.length),n.length>j&&l(t,n,u,n.length,r,i,o)}}}function h(t,e,n,i,a,u){var l=e.tag;if(l===n.tag){if(n.state=e.state,n.events=e.events,function(t,e){do{var n;if(null!=t.attrs&&"function"==typeof t.attrs.onbeforeupdate&&void 0!==(n=s.call(t.attrs.onbeforeupdate,t,e))&&!n)break;if("string"!=typeof t.tag&&"function"==typeof t.state.onbeforeupdate&&void 0!==(n=s.call(t.state.onbeforeupdate,t,e))&&!n)break;return!1}while(0);return t.dom=e.dom,t.domSize=e.domSize,t.instance=e.instance,t.attrs=e.attrs,t.children=e.children,t.text=e.text,!0}(n,e))return;if("string"==typeof l)switch(null!=n.attrs&&M(n.attrs,n,i),l){case"#":!function(t,e){t.children.toString()!==e.children.toString()&&(t.dom.nodeValue=e.children),e.dom=t.dom}(e,n);break;case"<":!function(t,e,n,r,i){e.children!==n.children?(C(t,e),f(t,n,r,i)):(n.dom=e.dom,n.domSize=e.domSize,n.instance=e.instance)}(t,e,n,u,a);break;case"[":!function(t,e,n,r,i,o){p(t,e.children,n.children,r,i,o);var a=0,s=n.children;if(n.dom=null,null!=s){for(var u=0;u<s.length;u++){var l=s[u];null!=l&&null!=l.dom&&(null==n.dom&&(n.dom=l.dom),a+=l.domSize||1)}1!==a&&(n.domSize=a)}}(t,e,n,i,a,u);break;default:!function(t,e,n,i){var a=e.dom=t.dom;i=o(e)||i,"textarea"===e.tag&&(null==e.attrs&&(e.attrs={}),null!=e.text&&(e.attrs.value=e.text,e.text=void 0)),function(t,e,n,r){if(null!=n)for(var i in n)F(t,i,e&&e[i],n[i],r);var o;if(null!=e)for(var i in e)null==(o=e[i])||null!=n&&null!=n[i]||_(t,i,o,r)}(e,t.attrs,e.attrs,i),w(e)||(null!=t.text&&null!=e.text&&""!==e.text?t.text.toString()!==e.text.toString()&&(t.dom.firstChild.nodeValue=e.text):(null!=t.text&&(t.children=[r("#",void 0,void 0,t.text,void 0,t.dom.firstChild)]),null!=e.text&&(e.children=[r("#",void 0,void 0,e.text,void 0,void 0)]),p(a,t.children,e.children,n,null,i)))}(e,n,i,u)}else!function(t,e,n,i,o,a){if(n.instance=r.normalize(s.call(n.state.view,n)),n.instance===n)throw Error("A view cannot return the vnode it received as argument");M(n.state,n,i),null!=n.attrs&&M(n.attrs,n,i),null!=n.instance?(null==e.instance?c(t,n.instance,i,a,o):h(t,e.instance,n.instance,i,o,a),n.dom=n.instance.dom,n.domSize=n.instance.domSize):null!=e.instance?(E(t,e.instance),n.dom=void 0,n.domSize=0):(n.dom=e.dom,n.domSize=e.domSize)}(t,e,n,i,a,u)}else E(t,e),c(t,n,i,u,a)}function m(t,e,n){for(var r=Object.create(null);e<n;e++){var i=t[e];if(null!=i){var o=i.key;null!=o&&(r[o]=e)}}return r}var v=[];function g(t,e,n){for(;e<t.length;e++)if(null!=t[e]&&null!=t[e].dom)return t[e].dom;return n}function y(t,e,r){var i=n.createDocumentFragment();b(t,i,e),D(t,i,r)}function b(t,e,n){for(;null!=n.dom&&n.dom.parentNode===t;){if("string"!=typeof n.tag){if(null!=(n=n.instance))continue}else if("<"===n.tag)for(var r=0;r<n.instance.length;r++)e.appendChild(n.instance[r]);else if("["!==n.tag)e.appendChild(n.dom);else if(1===n.children.length){if(null!=(n=n.children[0]))continue}else for(r=0;r<n.children.length;r++){var i=n.children[r];null!=i&&b(t,e,i)}break}}function D(t,e,n){null!=n?t.insertBefore(e,n):t.appendChild(e)}function w(t){if(null==t.attrs||null==t.attrs.contenteditable&&null==t.attrs.contentEditable)return!1;var e=t.children;if(null!=e&&1===e.length&&"<"===e[0].tag){var n=e[0].children;t.dom.innerHTML!==n&&(t.dom.innerHTML=n)}else if(null!=t.text||null!=e&&0!==e.length)throw new Error("Child node of a contenteditable must be trusted");return!0}function x(t,e,n,r){for(var i=n;i<r;i++){var o=e[i];null!=o&&E(t,o)}}function E(t,e){var n,r,i,o=0,u=e.state;if("string"!=typeof e.tag&&"function"==typeof e.state.onbeforeremove&&null!=(i=s.call(e.state.onbeforeremove,e))&&"function"==typeof i.then&&(o=1,n=i),e.attrs&&"function"==typeof e.attrs.onbeforeremove&&null!=(i=s.call(e.attrs.onbeforeremove,e))&&"function"==typeof i.then&&(o|=2,r=i),a(e,u),o){if(null!=n){var l=function(){1&o&&((o&=2)||c())};n.then(l,l)}null!=r&&(l=function(){2&o&&((o&=1)||c())},r.then(l,l))}else N(e),A(t,e);function c(){a(e,u),N(e),A(t,e)}}function C(t,e){for(var n=0;n<e.instance.length;n++)t.removeChild(e.instance[n])}function A(t,e){for(;null!=e.dom&&e.dom.parentNode===t;){if("string"!=typeof e.tag){if(null!=(e=e.instance))continue}else if("<"===e.tag)C(t,e);else{if("["!==e.tag&&(t.removeChild(e.dom),!Array.isArray(e.children)))break;if(1===e.children.length){if(null!=(e=e.children[0]))continue}else for(var n=0;n<e.children.length;n++){var r=e.children[n];null!=r&&A(t,r)}}break}}function N(t){if("string"!=typeof t.tag&&"function"==typeof t.state.onremove&&s.call(t.state.onremove,t),t.attrs&&"function"==typeof t.attrs.onremove&&s.call(t.attrs.onremove,t),"string"!=typeof t.tag)null!=t.instance&&N(t.instance);else{var e=t.children;if(Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];null!=r&&N(r)}}}function F(t,e,r,i,o){if("key"!==e&&"is"!==e&&null!=i&&!T(e)&&(r!==i||function(t,e){return"value"===e||"checked"===e||"selectedIndex"===e||"selected"===e&&t.dom===u()||"option"===t.tag&&t.dom.parentNode===n.activeElement}(t,e)||"object"==typeof i)){if("o"===e[0]&&"n"===e[1])return j(t,e,i);if("xlink:"===e.slice(0,6))t.dom.setAttributeNS("http://www.w3.org/1999/xlink",e.slice(6),i);else if("style"===e)O(t.dom,r,i);else if(k(t,e,o)){if("value"===e){if(("input"===t.tag||"textarea"===t.tag)&&t.dom.value===""+i&&t.dom===u())return;if("select"===t.tag&&null!==r&&t.dom.value===""+i)return;if("option"===t.tag&&null!==r&&t.dom.value===""+i)return}"input"===t.tag&&"type"===e?t.dom.setAttribute(e,i):t.dom[e]=i}else"boolean"==typeof i?i?t.dom.setAttribute(e,""):t.dom.removeAttribute(e):t.dom.setAttribute("className"===e?"class":e,i)}}function _(t,e,n,r){if("key"!==e&&"is"!==e&&null!=n&&!T(e))if("o"!==e[0]||"n"!==e[1]||T(e))if("style"===e)O(t.dom,n,null);else if(!k(t,e,r)||"className"===e||"value"===e&&("option"===t.tag||"select"===t.tag&&-1===t.dom.selectedIndex&&t.dom===u())||"input"===t.tag&&"type"===e){var i=e.indexOf(":");-1!==i&&(e=e.slice(i+1)),!1!==n&&t.dom.removeAttribute("className"===e?"class":e)}else t.dom[e]=null;else j(t,e,void 0)}function T(t){return"oninit"===t||"oncreate"===t||"onupdate"===t||"onremove"===t||"onbeforeremove"===t||"onbeforeupdate"===t}function k(t,e,n){return void 0===n&&(t.tag.indexOf("-")>-1||null!=t.attrs&&t.attrs.is||"href"!==e&&"list"!==e&&"form"!==e&&"width"!==e&&"height"!==e)&&e in t.dom}var S=/[A-Z]/g;function B(t){return"-"+t.toLowerCase()}function P(t){return"-"===t[0]&&"-"===t[1]?t:"cssFloat"===t?"float":t.replace(S,B)}function O(t,e,n){if(e===n);else if(null==n)t.style.cssText="";else if("object"!=typeof n)t.style.cssText=n;else if(null==e||"object"!=typeof e)for(var r in t.style.cssText="",n)null!=(i=n[r])&&t.style.setProperty(P(r),String(i));else{for(var r in n){var i;null!=(i=n[r])&&(i=String(i))!==String(e[r])&&t.style.setProperty(P(r),i)}for(var r in e)null!=e[r]&&null==n[r]&&t.style.removeProperty(P(r))}}function I(){this._=e}function j(t,e,n){if(null!=t.events){if(t.events[e]===n)return;null==n||"function"!=typeof n&&"object"!=typeof n?(null!=t.events[e]&&t.dom.removeEventListener(e.slice(2),t.events,!1),t.events[e]=void 0):(null==t.events[e]&&t.dom.addEventListener(e.slice(2),t.events,!1),t.events[e]=n)}else null==n||"function"!=typeof n&&"object"!=typeof n||(t.events=new I,t.dom.addEventListener(e.slice(2),t.events,!1),t.events[e]=n)}function L(t,e,n){"function"==typeof t.oninit&&s.call(t.oninit,e),"function"==typeof t.oncreate&&n.push(s.bind(t.oncreate,e))}function M(t,e,n){"function"==typeof t.onupdate&&n.push(s.bind(t.onupdate,e))}return I.prototype=Object.create(null),I.prototype.handleEvent=function(t){var e,n=this["on"+t.type];"function"==typeof n?e=n.call(t.currentTarget,t):"function"==typeof n.handleEvent&&n.handleEvent(t),this._&&!1!==t.redraw&&(0,this._)(),!1===e&&(t.preventDefault(),t.stopPropagation())},function(t,n,i){if(!t)throw new TypeError("Ensure the DOM element being passed to m.route/m.mount/m.render is not undefined.");var o=[],a=u(),s=t.namespaceURI;null==t.vnodes&&(t.textContent=""),n=r.normalizeChildren(Array.isArray(n)?n:[n]);var l=e;try{e="function"==typeof i?i:void 0,p(t,t.vnodes,n,o,null,"http://www.w3.org/1999/xhtml"===s?void 0:s)}finally{e=l}t.vnodes=n,null!=a&&u()!==a&&"function"==typeof a.focus&&a.focus();for(var c=0;c<o.length;c++)o[c]()}}},4031:(t,e,n)=>{"use strict";var r=n(1642);t.exports=function(t){return null==t&&(t=""),r("<",void 0,void 0,t,void 0,void 0)}},1642:t=>{"use strict";function e(t,e,n,r,i,o){return{tag:t,key:e,attrs:n,children:r,text:i,dom:o,domSize:void 0,state:void 0,events:void 0,instance:void 0}}e.normalize=function(t){return Array.isArray(t)?e("[",void 0,void 0,e.normalizeChildren(t),void 0,void 0):null==t||"boolean"==typeof t?null:"object"==typeof t?t:e("#",void 0,void 0,String(t),void 0,void 0)},e.normalizeChildren=function(t){var n=[];if(t.length){for(var r=null!=t[0]&&null!=t[0].key,i=1;i<t.length;i++)if((null!=t[i]&&null!=t[i].key)!==r)throw new TypeError("Vnodes must either always have keys or never have keys!");for(i=0;i<t.length;i++)n[i]=e.normalize(t[i])}return n},t.exports=e},8450:(t,e,n)=>{"use strict";var r=n(187),i=n(570);t.exports=n(1950)(window,r,i.redraw)},1950:(t,e,n)=>{"use strict";var r=n(3690);t.exports=function(t,e,n){var i=0;function o(t){return new e(t)}function a(t){return function(i,a){"string"!=typeof i?(a=i,i=i.url):null==a&&(a={});var s=new e((function(e,n){t(r(i,a.params),a,(function(t){if("function"==typeof a.type)if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]=new a.type(t[n]);else t=new a.type(t);e(t)}),n)}));if(!0===a.background)return s;var u=0;function l(){0==--u&&"function"==typeof n&&n()}return function t(e){var n=e.then;return e.constructor=o,e.then=function(){u++;var r=n.apply(e,arguments);return r.then(l,(function(t){if(l(),0===u)throw t})),t(r)},e}(s)}}function s(t,e){for(var n in t.headers)if({}.hasOwnProperty.call(t.headers,n)&&e.test(n))return!0;return!1}return o.prototype=e.prototype,o.__proto__=e,{request:a((function(e,n,r,i){var o,a=null!=n.method?n.method.toUpperCase():"GET",u=n.body,l=!(null!=n.serialize&&n.serialize!==JSON.serialize||u instanceof t.FormData),c=n.responseType||("function"==typeof n.extract?"":"json"),d=new t.XMLHttpRequest,f=!1,p=d,h=d.abort;for(var m in d.abort=function(){f=!0,h.call(this)},d.open(a,e,!1!==n.async,"string"==typeof n.user?n.user:void 0,"string"==typeof n.password?n.password:void 0),l&&null!=u&&!s(n,/^content-type$/i)&&d.setRequestHeader("Content-Type","application/json; charset=utf-8"),"function"==typeof n.deserialize||s(n,/^accept$/i)||d.setRequestHeader("Accept","application/json, text/*"),n.withCredentials&&(d.withCredentials=n.withCredentials),n.timeout&&(d.timeout=n.timeout),d.responseType=c,n.headers)({}).hasOwnProperty.call(n.headers,m)&&d.setRequestHeader(m,n.headers[m]);d.onreadystatechange=function(t){if(!f&&4===t.target.readyState)try{var o,a=t.target.status>=200&&t.target.status<300||304===t.target.status||/^file:\/\//i.test(e),s=t.target.response;if("json"===c?t.target.responseType||"function"==typeof n.extract||(s=JSON.parse(t.target.responseText)):c&&"text"!==c||null==s&&(s=t.target.responseText),"function"==typeof n.extract?(s=n.extract(t.target,n),a=!0):"function"==typeof n.deserialize&&(s=n.deserialize(s)),a)r(s);else{try{o=t.target.responseText}catch(t){o=s}var u=new Error(o);u.code=t.target.status,u.response=s,i(u)}}catch(t){i(t)}},"function"==typeof n.config&&(d=n.config(d,n,e)||d)!==p&&(o=d.abort,d.abort=function(){f=!0,o.call(this)}),null==u?d.send():"function"==typeof n.serialize?d.send(n.serialize(u)):u instanceof t.FormData?d.send(u):d.send(JSON.stringify(u))})),jsonp:a((function(e,n,r,o){var a=n.callbackName||"_mithril_"+Math.round(1e16*Math.random())+"_"+i++,s=t.document.createElement("script");t[a]=function(e){delete t[a],s.parentNode.removeChild(s),r(e)},s.onerror=function(){delete t[a],s.parentNode.removeChild(s),o(new Error("JSONP request failed"))},s.src=e+(e.indexOf("?")<0?"?":"&")+encodeURIComponent(n.callbackKey||"callback")+"="+encodeURIComponent(a),t.document.documentElement.appendChild(s)}))}}},2092:(t,e,n)=>{"use strict";var r=n(570);t.exports=n(3600)(window,r)},30:(t,e,n)=>{"use strict";t.exports=n(6807)},6807:t=>{!function(){"use strict";n.SKIP={},n.lift=function(){var t=arguments[0],e=Array.prototype.slice.call(arguments,1);return i(e).map((function(e){return t.apply(void 0,e)}))},n.scan=function(t,e,r){var i=r.map((function(r){var i=t(e,r);return i!==n.SKIP&&(e=i),i}));return i(e),i},n.merge=i,n.combine=r,n.scanMerge=function(t,e){var n=t.map((function(t){return t[0]})),i=r((function(){var r=arguments[arguments.length-1];return n.forEach((function(n,i){r.indexOf(n)>-1&&(e=t[i][1](e,n()))})),e}),n);return i(e),i},n["fantasy-land/of"]=n;var e=!1;function n(t){var e,i=[],a=[];function s(e){return arguments.length&&e!==n.SKIP&&(t=e,o(s)&&(s._changing(),s._state="active",i.forEach((function(e,n){e(a[n](t))})))),t}function u(){return(e=n()).map((function(t){return!0===t&&(s._parents.forEach((function(t){t._unregisterChild(s)})),s._state="ended",s._parents.length=i.length=a.length=0),t})),e}return s.constructor=n,s._state=arguments.length&&t!==n.SKIP?"active":"pending",s._parents=[],s._changing=function(){o(s)&&(s._state="changing"),i.forEach((function(t){t._changing()}))},s._map=function(e,r){var o=r?n():n(e(t));return o._parents.push(s),i.push(o),a.push(e),o},s.map=function(t){return s._map(t,"active"!==s._state)},s.toJSON=function(){return null!=t&&"function"==typeof t.toJSON?t.toJSON():t},s["fantasy-land/map"]=s.map,s["fantasy-land/ap"]=function(t){return r((function(t,e){return t()(e())}),[t,s])},s._unregisterChild=function(t){var e=i.indexOf(t);-1!==e&&(i.splice(e,1),a.splice(e,1))},Object.defineProperty(s,"end",{get:function(){return e||u()}}),s}function r(t,e){var r=e.every((function(t){if(t.constructor!==n)throw new Error("Ensure that each item passed to stream.combine/stream.merge/lift is a stream");return"active"===t._state})),i=r?n(t.apply(null,e.concat([e]))):n(),o=[],a=e.map((function(n){return n._map((function(a){return o.push(n),(r||e.every((function(t){return"pending"!==t._state})))&&(r=!0,i(t.apply(null,e.concat([o]))),o=[]),a}),!0)})),s=i.end.map((function(t){!0===t&&(a.forEach((function(t){t.end(!0)})),s.end(!0))}));return i}function i(t){return r((function(){return t.map((function(t){return t()}))}),t)}function o(t){return"pending"===t._state||"active"===t._state||"changing"===t._state}Object.defineProperty(n,"HALT",{get:function(){return e||console.log("HALT is deprecated and has been renamed to SKIP"),e=!0,n.SKIP}}),t.exports=n}()},1655:t=>{!function(){var e=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing","tabSize","MozTabSize"],n="undefined"!=typeof window,r=n&&null!=window.mozInnerScreenX;function i(t,i,o){if(!n)throw new Error("textarea-caret-position#getCaretCoordinates should only be called in a browser");var a=o&&o.debug||!1;if(a){var s=document.querySelector("#input-textarea-caret-position-mirror-div");s&&s.parentNode.removeChild(s)}var u=document.createElement("div");u.id="input-textarea-caret-position-mirror-div",document.body.appendChild(u);var l=u.style,c=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,d="INPUT"===t.nodeName;l.whiteSpace="pre-wrap",d||(l.wordWrap="break-word"),l.position="absolute",a||(l.visibility="hidden"),e.forEach((function(t){d&&"lineHeight"===t?l.lineHeight=c.height:l[t]=c[t]})),r?t.scrollHeight>parseInt(c.height)&&(l.overflowY="scroll"):l.overflow="hidden",u.textContent=t.value.substring(0,i),d&&(u.textContent=u.textContent.replace(/\s/g,"Â "));var f=document.createElement("span");f.textContent=t.value.substring(i)||".",u.appendChild(f);var p={top:f.offsetTop+parseInt(c.borderTopWidth),left:f.offsetLeft+parseInt(c.borderLeftWidth),height:parseInt(c.lineHeight)};return a?f.style.backgroundColor="#aaa":document.body.removeChild(u),p}void 0!==t.exports?t.exports=i:n&&(window.getCaretCoordinates=i)}()},391:(t,e,n)=>{var r=n(9152),i=n(356);void 0===i.$&&(i.$=r),void 0===i.jQuery&&(i.jQuery=r),t.exports=r},982:(t,e,n)=>{var r=n(4757),i=n(356);void 0===i.dayjs&&(i.dayjs=r),t.exports=r},4473:(t,e,n)=>{var r=n(7945),i=n(356);void 0===i.m&&(i.m=r),t.exports=r},9882:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r},t.exports.__esModule=!0,t.exports.default=t.exports},9696:t=>{t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports},230:t=>{t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.__esModule=!0,t.exports.default=t.exports},1904:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports},8213:t=>{function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports},402:t=>{t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.__esModule=!0,t.exports.default=t.exports},9767:t=>{function e(n){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},2061:(t,e,n)=>{var r=n(480);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&r(t,e)},t.exports.__esModule=!0,t.exports.default=t.exports},1209:t=>{t.exports=function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);a=!0);}catch(t){s=!0,i=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}},t.exports.__esModule=!0,t.exports.default=t.exports},6067:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports},8974:(t,e,n)=>{var r=n(2075).default,i=n(230);t.exports=function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return i(t)},t.exports.__esModule=!0,t.exports.default=t.exports},9440:(t,e,n)=>{var r=n(2075).default;function i(){"use strict";t.exports=i=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof m?e:m,o=Object.create(i.prototype),s=new _(r||[]);return a(o,"_invoke",{value:C(t,n,s)}),o}function p(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var h={};function m(){}function v(){}function g(){}var y={};d(y,u,(function(){return this}));var b=Object.getPrototypeOf,D=b&&b(b(T([])));D&&D!==n&&o.call(D,u)&&(y=D);var w=g.prototype=m.prototype=Object.create(y);function x(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function n(i,a,s,u){var l=p(t[i],t,a);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==r(d)&&o.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,s,u)}),(function(t){n("throw",t,s,u)})):e.resolve(d).then((function(t){c.value=t,s(c)}),(function(t){return n("throw",t,s,u)}))}u(l.arg)}var i;a(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}})}function C(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return{value:void 0,done:!0}}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=A(a,n);if(s){if(s===h)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=p(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===h)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function A(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,A(t,e),"throw"===e.method))return h;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return h}var r=p(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,h;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function T(t){if(t){var e=t[u];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(o.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return r.next=r}}return{next:k}}function k(){return{value:void 0,done:!0}}return v.prototype=g,a(w,"constructor",{value:g,configurable:!0}),a(g,"constructor",{value:v,configurable:!0}),v.displayName=d(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,d(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},x(E.prototype),d(E.prototype,l,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new E(f(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},x(w),d(w,c,"Generator"),d(w,u,(function(){return this})),d(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=T,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),u=o.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&o.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),F(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;F(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:T(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},e}t.exports=i,t.exports.__esModule=!0,t.exports.default=t.exports},480:t=>{function e(n,r){return t.exports=e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n,r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},5387:(t,e,n)=>{var r=n(9696),i=n(1209),o=n(9111),a=n(6067);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports},2075:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},9111:(t,e,n)=>{var r=n(9882);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports},2507:(t,e,n)=>{var r=n(9440)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r={};(()=>{"use strict";n.r(r),n.d(r,{app:()=>v,compat:()=>Oi});var t={};n.r(t),n.d(t,{default:()=>L,fireDeprecationWarning:()=>M});var e={};n.r(e),n.d(e,{camelCaseToSnakeCase:()=>be,generateRandomString:()=>De,getPlainContent:()=>ge,slug:()=>ve,truncate:()=>me,ucfirst:()=>ye});var i={};n.r(i),n.d(i,{createFocusTrap:()=>un});var o={};n.r(o),n.d(o,{extend:()=>Er,override:()=>Cr});var a={};n.r(a),n.d(a,{debounce:()=>he,throttle:()=>pe}),n(391),n(4473),n(982),n(9043),n(6199),n(7865),n(6935),n(9411);var s=n(5635),u=n.n(s),l=n(6982),c=n.n(l);function d(t,e){var n="select"===t.tag?t.attrs.multi?"multi":"select":t.attrs.type;return t.attrs.onchange="multi"===n?function(){e([].slice.call(this.selectedOptions,(function(t){return t.value})))}:"select"===n?function(t){e(this.selectedOptions[0].value)}:"checkbox"===n?function(t){e(this.checked)}:t.attrs.oninput=function(t){e(this.value)},"select"===t.tag?t.children.forEach((function(t){t.attrs.value!==e()&&t.children[0]!==e()||(t.attrs.selected=!0)})):"checkbox"===n?t.attrs.checked=e():"radio"===n?t.attrs.checked=e()===t.attrs.value:t.attrs.value=e(),t.attrs.bidi=null,t}d.view=function(t,e,n){return d(e,e.attrs.bidi)};const f=d;function p(t){var e=t.m,n=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var o=e.apply(this,arguments);return o.attrs||(o.attrs={}),o.attrs.bidi&&f(o,o.attrs.bidi),o};Object.keys(e).forEach((function(t){return n[t]=e[t]})),t.m=n}var h=window;const v=new Proxy({},{get:function(t,e){return Reflect.get(h.app,e,h.app)},set:function(t,e,n){return Reflect.set(h.app,e,n,h.app)}});n(1859),dayjs.extend(u()),dayjs.extend(c()),p(window);var g=$.fn.tooltip;function y(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function b(t,e){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b(t,e)}function D(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,b(t,e)}function w(){return w=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w.apply(this,arguments)}$.fn.tooltip=function(t,e){["DANGEROUS_tooltip_jquery_fn_deprecation_exempt"].includes(e)||console.warn("Calling `$.tooltip` is now deprecated. Please use the `<Tooltip>` component exposed by flarum/core instead. `$.tooltip` may be removed in a future version of Flarum.\n\nIf this component doesn't meet your requirements, please open an issue: https://github.com/flarum/core/issues/new?assignees=davwheat&labels=type/bug,needs-verification&template=bug-report.md&title=Tooltip%20component%20unsuitable%20for%20use%20case"),g.bind(this)(t)};var x=function(){function t(){this.element=void 0,this.attrs=void 0,this.state=void 0}var e=t.prototype;return e.oninit=function(t){this.setAttrs(t.attrs)},e.oncreate=function(t){this.element=t.dom},e.onbeforeupdate=function(t){this.setAttrs(t.attrs)},e.onupdate=function(t){},e.onbeforeremove=function(t){},e.onremove=function(t){},e.$=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=$(this.element);return t?e.find(t):e})),t.component=function(t,e){void 0===t&&(t={}),void 0===e&&(e=null);var n=w({},t);return m(this,n,e)},e.setAttrs=function(t){if(void 0===t&&(t={}),this.constructor.initAttrs(t),t){if("children"in t)throw new Error("["+this.constructor.name+'] The "children" attribute of attrs should never be used. Either pass children in as the vnode children or rename the attribute');if("tag"in t)throw new Error("["+this.constructor.name+'] You cannot use the "tag" attribute name with Mithril 2.')}this.attrs=t},t.initAttrs=function(t){},t}();function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function C(t,e,n){return e&&E(t.prototype,e),n&&E(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function A(t){var e=typeof t;return"function"===e||"object"===e&&!!t}var N=function(t,e){this.content=void 0,this.priority=void 0,this.content=t,this.priority=e},F=function(){function t(){this._items={}}var e=t.prototype;return e.isEmpty=function(){return 0===Object.keys(this._items).length},e.has=function(t){return Object.keys(this._items).includes(t)},e.get=function(t){return this._items[t].content},e.getPriority=function(t){return this._items[t].priority},e.add=function(t,e,n){return void 0===n&&(n=0),this._items[t]=new N(e,n),this},e.replace=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),this.has(t)?(null!==e&&(this._items[t].content=e),null!==n&&(this._items[t].priority=n),this):this},e.setContent=function(t,e){if(!this.has(t))throw new Error("[ItemList] Cannot set content of Item. Key `"+t+"` is not present.");return this.replace(t,e)},e.setPriority=function(t,e){if(!this.has(t))throw new Error("[ItemList] Cannot set priority of Item. Key `"+t+"` is not present.");return this._items[t].priority=e,this},e.remove=function(t){return delete this._items[t],this},e.merge=function(t){var e=this;return Object.keys(t._items).forEach((function(n){var r=t._items[n];r instanceof N&&(e._items[n]=r)})),this},e.toArray=function(t){var e=this;return void 0===t&&(t=!1),Object.keys(this._items).map((function(n,r){var i=e._items[n];return!t||A(i.content)?w({},i,{content:e.createItemContentProxy(A(i.content)?i.content:Object(i.content),n)}):w({},i)})).sort((function(t,e){return e.priority-t.priority})).map((function(t){return t.content}))},e.toObject=function(){var t=this;return Object.keys(this._items).reduce((function(e,n){var r={content:t.get(n),itemName:n,priority:t.getPriority(n)};return e[n]=r,e}),{})},e.createItemContentProxy=function(t,e){return new Proxy(t,{get:function(t,n,r){return"itemName"===n?e:Reflect.get(t,n,r)},set:function(t,n,r,i){if(null!==e&&"itemName"===n)throw new Error("`itemName` property is read-only");return Reflect.set(t,n,r,i)}})},C(t,[{key:"items",get:function(){return new Proxy(this._items,{set:function(){return console.warn("Modifying `ItemList.items` is not allowed."),!1}})}}]),t}(),_=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.view=function(){return m("li",{className:"Dropdown-separator"})},e}(x);_.isListItem=!0;const T=_;function k(t){var e,n,r="";if("string"==typeof t||"number"==typeof t)r+=t;else if("object"==typeof t)if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=k(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}const S=function(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=k(t))&&(r&&(r+=" "),r+=e);return r};function B(t){return"object"==typeof t&&null!==t&&"tag"in t}function P(t){return B(t)&&t.tag===T}function O(t,e,n){void 0===e&&(e="li"),void 0===n&&(n={});var r,i,o,a=e;return(r=t instanceof Array?t:[t],o=[],r.filter(Boolean).forEach((function(t,e){(!P(t)||i&&!P(i)&&e!==r.length-1)&&(i=t,o.push(t))})),o).map((function(t){var e,r,i=[t.itemName&&"item-"+t.itemName];if(B(t)&&t.tag.isListItem)return t.attrs=t.attrs||{},t.attrs.key=t.attrs.key||t.itemName,t.key=t.attrs.key,t;B(t)&&(i.push((null==(r=t.attrs)?void 0:r.itemClassName)||t.itemClassName),null!=t.tag.isActive&&t.tag.isActive(t.attrs)&&i.push("active"));var o=B(t)&&(null==t||null==(e=t.attrs)?void 0:e.key)||t.itemName;return m(a,Object.assign({className:S(i),key:o},n),t)}))}var I=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.view=function(){return m("ul",{className:"Header-controls"},O(this.items().toArray()))},n.config=function(t,e){e.retain=!0},n.items=function(){return new F},e}(x);function j(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}function L(){var t;v.forum.attribute("debug")&&(t=console).warn.apply(t,arguments)}function M(t,e,n,r){void 0===n&&(n="2.0"),void 0===r&&(r="flarum/core"),L("[Flarum "+n+" Deprecation] "+t+"\n\nSee: https://github.com/"+r+"/pull/"+e)}function R(t,e){return void 0===e&&(e={}),e.className=S("icon",t,e.className),m("i",Object.assign({"aria-hidden":"true"},e))}function H(t){return t instanceof Array?t.map((function(t){return H(t)})).join(""):"object"==typeof t&&null!==t?t.children?H(t.children):String(t.text):String(t)}var q=["display","size","containerClassName","className"],U=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.view=function(){var t=this.attrs,e=t.display,n=void 0===e?"block":e,r=t.size,i=void 0===r?"medium":r,o=t.containerClassName,a=t.className,s=j(t,q),u=S("LoadingIndicator",a),l=S("LoadingIndicator-container","unset"!==n&&"LoadingIndicator-container--"+n,i&&"LoadingIndicator-container--"+i,o);return m("div",Object.assign({"aria-label":v.translator.trans("core.lib.loading_indicator.accessible_label"),role:"status"},s.containerAttrs,{"data-size":i,className:l}),m("div",Object.assign({"aria-hidden":"true",className:u},s)))},e}(x),z=["type","title","aria-label","icon","disabled","loading","className","class"],W=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.view=function(t){var e=this.attrs,n=e.type,r=e.title,i=e["aria-label"],o=e.icon,a=e.disabled,s=e.loading,u=e.className,l=e.class,c=j(e,z);n||(n="button"),i||(i=r),"object"==typeof i&&(i=H(i)),(a||s)&&delete c.onclick;var d=w({disabled:a,className:u=S(l,u,{hasIcon:o,disabled:a||s,loading:s}),type:n,"aria-label":i},c);return m("button",d,this.getButtonContent(t.children))},n.oncreate=function(n){var r;t.prototype.oncreate.call(this,n);var i=this.attrs["aria-label"];this.view!==e.prototype.view||i||H(n.children)||null!=(r=this.element)&&null!=r.getAttribute&&r.getAttribute("aria-label")||L('[Flarum Accessibility Warning] Button has no content and no accessible label. This means that screen-readers will not be able to interpret its meaning and just read "Button". Consider providing accessible text via the `aria-label` attribute. https://web.dev/button-name',this.element)},n.getButtonContent=function(t){var e=this.attrs.icon;return[e&&R(e,{className:"Button-icon"}),t&&m("span",{className:"Button-label"},t),this.attrs.loading&&m(U,{size:"small",display:"inline"})]},e}(x);function G(t,e){var n=t[e];return delete t[e],n}var V=["options"],Y=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.view=function(t){var e=t.attrs,n=e.options,r=void 0===n?{}:n,i=j(e,V);i.href||(i.href="");var o=t.children||{tag:"#",children:t.text};return i.external?m("a",i,o):(i.href===m.route.get()&&("replace"in r||(r.replace=!0)),G(i,"force")&&("state"in r||(r.state={}),"key"in r.state||(r.state.key=Date.now())),i.options=r,m(m.route.Link,i,o))},e}(x),K=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.initAttrs=function(e){t.initAttrs.call(this,e),e.active=this.isActive(e),void 0===e.force&&(e.force=!0)},e.prototype.view=function(e){var n=t.prototype.view.call(this,e);return n.tag=Y,n.attrs.active=String(n.attrs.active),delete n.attrs.type,n},e.isActive=function(t){var e,n;return void 0!==t.active?t.active:(null==(e=m.route.get())?void 0:e.split("?")[0])===(null==(n=t.href)?void 0:n.split("?")[0])},e}(W);function X(t,e){var n;void 0===e&&(e={}),e.className=S("Avatar",e.className),null!=(n=e).loading||(n.loading="lazy");var r="",i="undefined"===e.title||e.title;if(i||delete e.title,t){var o=t.displayName()||"?",a=t.avatarUrl();if(i&&(e.title=e.title||o),a)return m("img",Object.assign({},e,{src:a,alt:""}));r=o.charAt(0).toUpperCase(),e.style={"--avatar-bg":t.color()}}return m("span",e,r)}function J(t){var e=t&&t.displayName()||v.translator.trans("core.lib.username.deleted_text");return m("span",{className:"username"},e)}var Q=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).showing=!1,e}D(e,t),e.initAttrs=function(t){t.className||(t.className=""),t.buttonClassName||(t.buttonClassName=""),t.menuClassName||(t.menuClassName=""),t.label||(t.label=""),null!=t.caretIcon||(t.caretIcon="fas fa-caret-down"),t.accessibleToggleLabel||(t.accessibleToggleLabel=H(v.translator.trans("core.lib.dropdown.toggle_dropdown_accessible_label")))};var n=e.prototype;return n.view=function(t){var e=t.children?O(t.children):[],n=!this.attrs.lazyDraw||this.showing;return m("div",{className:"ButtonGroup Dropdown dropdown "+this.attrs.className+" itemCount"+e.length+(this.showing?" open":"")},this.getButton(t.children),n&&this.getMenu(e))},n.oncreate=function(e){var n=this;t.prototype.oncreate.call(this,e),this.$().on("shown.bs.dropdown",(function(){var t,e,r,i,o,a,s,u,l,c,d,f=n.attrs,p=f.lazyDraw,h=f.onshow;n.showing=!0,p&&m.redraw.sync(),"function"==typeof h&&h(),p||m.redraw();var v=n.$(".Dropdown-menu"),g=v.hasClass("Dropdown-menu--right"),y=null!=(t=null==(e=v.offset())?void 0:e.top)?t:0,b=null!=(r=v.height())?r:0,D=null!=(i=$(window).scrollTop())?i:0,w=null!=(o=$(window).height())?o:0;v.removeClass("Dropdown-menu--top Dropdown-menu--right"),v.toggleClass("Dropdown-menu--top",y+b>D+w),((null==(a=v.offset())?void 0:a.top)||0)<0&&v.removeClass("Dropdown-menu--top");var x=null!=(s=null==(u=v.offset())?void 0:u.left)?s:0,E=null!=(l=v.width())?l:0,C=null!=(c=$(window).scrollLeft())?c:0,A=null!=(d=$(window).width())?d:0;v.toggleClass("Dropdown-menu--right",g||x+E>C+A)})),this.$().on("hidden.bs.dropdown",(function(){n.showing=!1,n.attrs.onhide&&n.attrs.onhide(),m.redraw()}))},n.getButton=function(t){return m("button",{className:"Dropdown-toggle "+this.attrs.buttonClassName,"aria-haspopup":"menu","aria-label":this.attrs.accessibleToggleLabel,"data-toggle":"dropdown",onclick:this.attrs.onclick},this.getButtonContent(t))},n.getButtonContent=function(t){return[this.attrs.icon?R(this.attrs.icon,{className:"Button-icon"}):"",m("span",{className:"Button-label"},this.attrs.label),this.attrs.caretIcon?R(this.attrs.caretIcon,{className:"Button-caret"}):""]},n.getMenu=function(t){return m("ul",{className:"Dropdown-menu dropdown-menu "+this.attrs.menuClassName},t)},e}(x),Z=function(t){function e(){return t.apply(this,arguments)||this}D(e,t),e.initAttrs=function(e){t.initAttrs.call(this,e),e.className="SessionDropdown",e.buttonClassName="Button Button--user Button--flat",e.menuClassName="Dropdown-menu--right"};var n=e.prototype;return n.view=function(e){return t.prototype.view.call(this,w({},e,{children:this.items().toArray()}))},n.getButtonContent=function(){var t=Yr.session.user;return[X(t)," ",m("span",{className:"Button-label"},J(t))]},n.items=function(){var t=new F;return t.add("logOut",m(W,{icon:"fas fa-sign-out-alt",onclick:Yr.session.logout.bind(Yr.session)},Yr.translator.trans("core.admin.header.log_out_button")),-100),t},e}(Q),tt=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.view=function(){return m("ul",{className:"Header-controls"},O(this.items().toArray()))},n.items=function(){var t=new F;return t.add("help",m(K,{href:"https://docs.flarum.org/troubleshoot/",icon:"fas fa-question-circle",external:!0,target:"_blank"},Yr.translator.trans("core.admin.header.get_help"))),t.add("session",m(Z,null)),t},e}(x),et=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.view=function(t){return m("div",{className:"DashboardWidget Widget "+this.className()},this.content())},n.className=function(){return""},n.content=function(){return null},e}(x),nt=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.view=function(t){var e=Object.assign({},this.attrs),n=G(e,"type");e.className=S("Alert","Alert--"+n,e.className);var r=G(e,"title"),i=G(e,"icon"),o=G(e,"content")||t.children,a=G(e,"controls")||[],s=G(e,"dismissible"),u=G(e,"ondismiss"),l=[];return(s||void 0===s)&&l.push(m(W,{"aria-label":v.translator.trans("core.lib.alert.dismiss_a11y_label"),icon:"fas fa-times",className:"Button Button--link Button--icon Alert-dismiss",onclick:u})),m("div",e,!!r&&m("div",{className:"Alert-title"},!!i&&m("span",{className:"Alert-title-icon"},R(i)),m("span",{className:"Alert-title-text"},r)),m("span",{className:"Alert-body"},o),m("ul",{className:"Alert-controls"},O(a.concat(l))))},e}(x),rt=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).loading=!1,e.alertAttrs=null,e}D(e,t);var n=e.prototype;return n.oninit=function(e){var n=this;t.prototype.oninit.call(this,e);var r=[];["className","title","content","onsubmit"].forEach((function(t){n[t]||(n[t]=function(){},r.push(t))})),r.length>0&&L("Modal `"+this.constructor.name+"` does not implement all abstract methods of the Modal super class. Missing methods: "+r.join(", ")+".")},n.oncreate=function(e){var n=this;t.prototype.oncreate.call(this,e),this.attrs.animateShow((function(){return n.onready()}))},n.onbeforeremove=function(e){if(t.prototype.onbeforeremove.call(this,e),!this.attrs.state.modal)return new Promise((function(t){return setTimeout(t,300)}))},n.view=function(){var t=this;return this.alertAttrs&&(this.alertAttrs.dismissible=!1),m("div",{className:S("Modal modal-dialog fade",this.className())},m("div",{className:"Modal-content"},this.dismissibleOptions.viaCloseButton&&m("div",{className:"Modal-close App-backControl"},m(W,{icon:"fas fa-times",onclick:function(){return t.hide()},className:"Button Button--icon Button--link","aria-label":v.translator.trans("core.lib.modal.close")})),m("form",{onsubmit:this.onsubmit.bind(this)},m("div",{className:"Modal-header"},m("h3",{className:"App-titleControl App-titleControl--text"},this.title())),!!this.alertAttrs&&m("div",{className:"Modal-alert"},m(nt,this.alertAttrs)),this.content())))},n.onsubmit=function(t){},n.onready=function(){this.$().find("input, select, textarea").first().trigger("focus").trigger("select")},n.hide=function(){this.attrs.animateHide()},n.loaded=function(){this.loading=!1,m.redraw()},n.onerror=function(t){var e;this.alertAttrs=t.alert,m.redraw(),422===t.status&&null!=(e=t.response)&&e.errors?this.$("form [name="+t.response.errors[0].source.pointer.replace("/data/attributes/","")+"]").trigger("select"):this.onready()},C(e,[{key:"dismissibleOptions",get:function(){return this.constructor.dismissibleOptions}}],[{key:"dismissibleOptions",get:function(){return this.isDismissible?{isDismissible:!0,viaCloseButton:this.isDismissibleViaCloseButton,viaEscKey:this.isDismissibleViaEscKey,viaBackdropClick:this.isDismissibleViaBackdropClick}:{isDismissible:!1,viaCloseButton:!1,viaEscKey:!1,viaBackdropClick:!1}}}]),e}(x);rt.isDismissible=!0,rt.isDismissibleViaCloseButton=!0,rt.isDismissibleViaEscKey=!0,rt.isDismissibleViaBackdropClick=!0;var it=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.className=function(){return"LoadingModal Modal--small"},n.title=function(){return Yr.translator.trans("core.admin.loading.title")},n.content=function(){return null},n.onsubmit=function(t){throw new Error("LoadingModal should not throw errors.")},e}(rt);it.isDismissible=!1;var ot=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.className=function(){return"StatusWidget"},n.content=function(){return m("ul",null,O(this.items().toArray()))},n.items=function(){var t=new F;return t.add("tools",m(Q,{label:Yr.translator.trans("core.admin.dashboard.tools_button"),icon:"fas fa-cog",buttonClassName:"Button",menuClassName:"Dropdown-menu--right"},this.toolsItems().toArray())),t.add("version-flarum",[m("strong",null,"Flarum"),m("br",null),Yr.forum.attribute("version")],100),t.add("version-php",[m("strong",null,"PHP"),m("br",null),Yr.data.phpVersion],90),t.add("version-mysql",[m("strong",null,"MySQL"),m("br",null),Yr.data.mysqlVersion],80),Yr.data.schedulerStatus&&t.add("schedule-status",[m("span",null,m("strong",null,Yr.translator.trans("core.admin.dashboard.status.headers.scheduler-status"))," ",m(K,{href:"https://discuss.flarum.org/d/24118",external:!0,target:"_blank",icon:"fas fa-info-circle"})),m("br",null),Yr.data.schedulerStatus],70),t.add("queue-driver",[m("strong",null,Yr.translator.trans("core.admin.dashboard.status.headers.queue-driver")),m("br",null),Yr.data.queueDriver],60),t.add("session-driver",[m("strong",null,Yr.translator.trans("core.admin.dashboard.status.headers.session-driver")),m("br",null),Yr.data.sessionDriver],50),t},n.toolsItems=function(){var t=new F;return t.add("clearCache",m(W,{onclick:this.handleClearCache.bind(this)},Yr.translator.trans("core.admin.dashboard.clear_cache_button"))),t},n.handleClearCache=function(t){Yr.modal.show(it),Yr.request({method:"DELETE",url:Yr.forum.attribute("apiUrl")+"/cache"}).then((function(){return window.location.reload()})).catch((function(t){409===t.status&&(Yr.alerts.clear(),Yr.alerts.show({type:"error"},Yr.translator.trans("core.admin.dashboard.io_error_message"))),Yr.modal.close()}))},e}(et);function at(t){return JSON.parse(Yr.data.settings.extensions_enabled).includes(t)}function st(){var t={};return Object.keys(Yr.data.extensions).map((function(e){var n=Yr.data.extensions[e],r=n.extra["flarum-extension"].category;n.extra["flarum-locale"]&&(r="language"),r in Yr.extensionCategories?(t[r]=t[r]||[],t[r].push(n)):(t.feature=t.feature||[],t.feature.push(n))})),t}var ut=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.categorizedExtensions=st()},n.className=function(){return"ExtensionsWidget"},n.content=function(){var t=this,e=Yr.extensionCategories;return m("div",{className:"ExtensionsWidget-list"},Object.keys(e).map((function(e){return!!t.categorizedExtensions[e]&&t.extensionCategory(e)})))},n.extensionCategory=function(t){var e=this;return m("div",{className:"ExtensionList-Category"},m("h4",{className:"ExtensionList-Label"},Yr.translator.trans("core.admin.nav.categories."+t)),m("ul",{className:"ExtensionList"},this.categorizedExtensions[t].map((function(t){return e.extensionWidget(t)}))))},n.extensionWidget=function(t){return m("li",{className:S("ExtensionListItem",{disabled:!at(t.id)})},m(Y,{href:Yr.route("extension",{id:t.id})},m("div",{className:"ExtensionListItem-content"},m("span",{className:"ExtensionListItem-icon ExtensionIcon",style:t.icon},!!t.icon&&R(t.icon.name)),m("span",{className:"ExtensionListItem-title"},t.extra["flarum-extension"].title))))},e}(et);function lt(t,e){return t&&(t===e||t.prototype instanceof e)}var ct=function(){function t(t,e){void 0===e&&(e={}),this.type=t,this.data=e}var e=t.prototype;return e.matches=function(t,e){var n=this;return void 0===e&&(e={}),!!lt(this.type,t)&&Object.keys(e).every((function(t){return n.data[t]===e[t]}))},e.get=function(t){return this.data[t]},e.set=function(t,e){this.data[t]=e},t}(),dt=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).bodyClass="",e.scrollTopOnCreate=!0,e.useBrowserScrollRestoration=!0,e}D(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),v.previous=v.current,v.current=new ct(this.constructor,{routeName:this.attrs.routeName}),v.drawer.hide(),v.modal.close()},n.oncreate=function(e){t.prototype.oncreate.call(this,e),this.bodyClass&&$("#app").addClass(this.bodyClass),this.scrollTopOnCreate&&$(window).scrollTop(0),"scrollRestoration"in history&&(history.scrollRestoration=this.useBrowserScrollRestoration?"auto":"manual")},n.onremove=function(e){t.prototype.onremove.call(this,e),this.bodyClass&&$("#app").removeClass(this.bodyClass)},e}(x);const ft=function(t,e){return function(){e(this.getAttribute(t)||this[t])}};var pt=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.view=function(t){var e=S(["Checkbox",this.attrs.state?"on":"off",this.attrs.className,this.attrs.loading&&"loading",this.attrs.disabled&&"disabled"]);return m("label",{className:e},m("input",{type:"checkbox",checked:this.attrs.state,disabled:this.attrs.disabled,onchange:ft("checked",this.onchange.bind(this))}),m("div",{className:"Checkbox-display","aria-hidden":"true"},this.getDisplay()),t.children)},n.getDisplay=function(){return this.attrs.loading?m(U,{display:"unset",size:"small"}):R(this.attrs.state?"fas fa-check":"fas fa-times")},n.onchange=function(t){this.attrs.onchange&&this.attrs.onchange(t,this)},e}(x),ht=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.initAttrs=function(e){t.initAttrs.call(this,e),e.className=S(e.className,"Checkbox--switch")},e.prototype.getDisplay=function(){return!!this.attrs.loading&&t.prototype.getDisplay.call(this)},e}(pt),mt=["className","class"],vt=["options","onchange","value","disabled","className","class","wrapperAttrs"],gt=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.view=function(){var t=this.attrs,e=t.options,n=t.onchange,r=t.value,i=t.disabled,o=t.className,a=t.class,s=t.wrapperAttrs,u=(s=void 0===s?{}:s).className,l=s.class,c=j(s,mt),d=j(t,vt);return m("span",Object.assign({className:S("Select",u,l)},c),m("select",Object.assign({className:S("Select-input FormControl",o,a),onchange:n?ft("value",n.bind(this)):void 0,value:r,disabled:i},d),Object.keys(e).map((function(t){return m("option",{value:t},e[t])}))),R("fas fa-sort",{className:"Select-caret"}))},e}(x),yt=n(30);const bt=n.n(yt)();function Dt(t){var e=JSON.parse(JSON.stringify(Yr.data.settings));return Object.assign(Yr.data.settings,t),Yr.request({method:"POST",url:Yr.forum.attribute("apiUrl")+"/settings",body:t}).catch((function(t){throw Yr.data.settings=e,t}))}var wt=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.view=function(t){return[m("div",{className:S(["AdminHeader",this.attrs.className])},m("div",{className:"container"},m("h2",null,R(this.attrs.icon),t.children),m("div",{className:"AdminHeader-description"},this.attrs.description)))]},e}(x),xt=function(t){return void 0===t&&(t=21),crypto.getRandomValues(new Uint8Array(t)).reduce((function(t,e){return t+((e&=63)<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_")}),"")},Et=["className","id"],Ct=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.view=function(t){var e=this.attrs,n=e.className,r=e.id,i=j(e,Et);return i.type||(i.type="text"),4===i.value.length&&(i.value=i.value.replace(/#([a-f0-9])([a-f0-9])([a-f0-9])/,"#$1$1$2$2$3$3")),m("div",{className:"ColorInput"},m("input",Object.assign({className:S("FormControl",n),id:r},i)),m("span",{className:"ColorInput-icon",role:"presentation"},R("fas fa-exclamation-circle")),m("input",Object.assign({className:"ColorInput-preview"},i,{type:"color"})))},e}(x),At=["title","className"],Nt=["setting","help","type","label"],Ft=["default","options"],_t=["bool","checkbox","switch","boolean"],Tt=["select","dropdown","selectdropdown"],kt=["textarea"],St=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).settings={},e.loading=!1,e}D(e,t);var n=e.prototype;return n.view=function(t){var e=S("AdminPage",this.headerInfo().className);return m("div",{className:e},this.header(t),m("div",{className:"container"},this.content(t)))},n.submitButton=function(){return m(W,{onclick:this.saveSettings.bind(this),className:"Button Button--primary",loading:this.loading,disabled:!this.isChanged()},Yr.translator.trans("core.admin.settings.submit_button"))},n.header=function(t){var e=this.headerInfo(),n=e.title,r=e.className,i=j(e,At);return m(wt,Object.assign({className:r?r+"-header":void 0},i),n)},n.headerInfo=function(){return{className:"",icon:"",title:"",description:""}},n.customSettingComponents=function(){return new F},n.buildSettingComponent=function(t){if("function"==typeof t)return t.call(this);var e,n=this.customSettingComponents(),r=t.setting,i=t.help,o=t.type,a=t.label,s=j(t,Nt),u=this.setting(r)(),l=[xt(),xt()],c=l[0],d=l[1];if(_t.includes(o))return m("div",{className:"Form-group"},m(ht,Object.assign({state:!!u&&"0"!==u,onchange:this.settings[r]},s),a),m("div",{className:"helpText"},i));if(Tt.includes(o)){var f=s.default,p=s.options,h=j(s,Ft);e=m(gt,Object.assign({id:c,"aria-describedby":d,value:u||f,options:p,onchange:this.settings[r]},h))}else{if(n.has(o))return n.get(o)(w({setting:r,help:i,label:a},s));if(s.className=S("FormControl",s.className),kt.includes(o))e=m("textarea",Object.assign({id:c,"aria-describedby":d,bidi:this.setting(r)},s));else{var v="input";"color-preview"===o?v=Ct:s.type=o,e=m(v,Object.assign({id:c,"aria-describedby":d,bidi:this.setting(r)},s))}}return m("div",{className:"Form-group"},a&&m("label",{for:c},a),m("div",{id:d,className:"helpText"},i),e)},n.onsaved=function(){this.loading=!1,Yr.alerts.show({type:"success"},Yr.translator.trans("core.admin.settings.saved_message"))},n.onsavefailed=function(){this.loading=!1},n.setting=function(t,e){return void 0===e&&(e=""),this.settings[t]=this.settings[t]||bt(Yr.data.settings[t]||e),this.settings[t]},n.dirty=function(){var t=this,e={};return Object.keys(this.settings).forEach((function(n){var r=t.settings[n]();r!==Yr.data.settings[n]&&(e[n]=r)})),e},n.isChanged=function(){return Object.keys(this.dirty()).length},n.saveSettings=function(t){return t.preventDefault(),Yr.alerts.clear(),this.loading=!0,Dt(this.dirty()).then(this.onsaved.bind(this)).catch(this.onsavefailed.bind(this))},e}(dt),Bt=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.className=function(){return"DebugWarningWidget"},n.content=function(){return m(nt,{type:"warning",dismissible:!1,title:Yr.translator.trans("core.admin.debug-warning.label"),icon:"fas fa-exclamation-triangle"},Yr.translator.trans("core.admin.debug-warning.detail",{link:m(Y,{href:"https://docs.flarum.org/troubleshoot/#step-0-activate-debug-mode",external:!0,target:"_blank"})}))},e}(et),Pt=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.headerInfo=function(){return{className:"DashboardPage",icon:"fas fa-chart-bar",title:Yr.translator.trans("core.admin.dashboard.title"),description:Yr.translator.trans("core.admin.dashboard.description")}},n.content=function(){return this.availableWidgets().toArray()},n.availableWidgets=function(){var t=new F;return Yr.data.debugEnabled&&t.add("debug-warning",m(Bt,null),100),t.add("status",m(ot,null),30),t.add("extensions",m(ut,null),10),t},e}(St),Ot=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.view=function(t){return m("fieldset",{className:this.attrs.className},m("legend",null,this.attrs.label),m("ul",null,O(t.children)))},e}(x),It=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).localeOptions={},e.displayNameOptions={},e.slugDriverOptions={},e}D(e,t);var n=e.prototype;return n.oninit=function(e){var n=this;t.prototype.oninit.call(this,e),Object.keys(Yr.data.locales).forEach((function(t){n.localeOptions[t]=Yr.data.locales[t]+" ("+t+")"})),Yr.data.displayNameDrivers.forEach((function(t){n.displayNameOptions[t]=t})),Object.keys(Yr.data.slugDrivers).forEach((function(t){n.slugDriverOptions[t]={},Yr.data.slugDrivers[t].forEach((function(e){n.slugDriverOptions[t][e]=e}))}))},n.headerInfo=function(){return{className:"BasicsPage",icon:"fas fa-pencil-alt",title:Yr.translator.trans("core.admin.basics.title"),description:Yr.translator.trans("core.admin.basics.description")}},n.content=function(){return[m("div",{className:"Form"},this.contentItems().toArray(),this.submitButton())]},n.homePageItems=function(){var t=new F;return t.add("allDiscussions",{path:"/all",label:Yr.translator.trans("core.admin.basics.all_discussions_label")}),t},n.contentItems=function(){var t=this,e=new F;return e.add("forum-title",this.buildSettingComponent({type:"text",setting:"forum_title",label:Yr.translator.trans("core.admin.basics.forum_title_heading")}),100),e.add("forum-description",this.buildSettingComponent({type:"text",setting:"forum_description",label:Yr.translator.trans("core.admin.basics.forum_description_heading"),help:Yr.translator.trans("core.admin.basics.forum_description_text")}),90),Object.keys(this.localeOptions).length>1&&e.add("default-locale",m("[",null,this.buildSettingComponent({type:"select",setting:"default_locale",options:this.localeOptions,label:Yr.translator.trans("core.admin.basics.default_language_heading")}),this.buildSettingComponent({type:"switch",setting:"show_language_selector",label:Yr.translator.trans("core.admin.basics.show_language_selector_label")})),80),e.add("home-page",m(Ot,{className:"BasicsPage-homePage Form-group",label:Yr.translator.trans("core.admin.basics.home_page_heading")},m("div",{className:"helpText"},Yr.translator.trans("core.admin.basics.home_page_text")),this.homePageItems().toArray().map((function(e){var n=e.path,r=e.label;return m("label",{className:"checkbox"},m("input",{type:"radio",name:"homePage",value:n,bidi:t.setting("default_route")}),r)}))),70),e.add("welcome-banner",m("div",{className:"Form-group BasicsPage-welcomeBanner-input"},m("label",null,Yr.translator.trans("core.admin.basics.welcome_banner_heading")),m("div",{className:"helpText"},Yr.translator.trans("core.admin.basics.welcome_banner_text")),m("input",{type:"text",className:"FormControl",bidi:this.setting("welcome_title")}),m("textarea",{className:"FormControl",bidi:this.setting("welcome_message")})),60),Object.keys(this.displayNameOptions).length>1&&e.add("display-name-driver",this.buildSettingComponent({type:"select",setting:"display_name_driver",options:this.displayNameOptions,label:Yr.translator.trans("core.admin.basics.display_name_heading"),help:Yr.translator.trans("core.admin.basics.display_name_text")}),50),e.add("slug-driver",Object.keys(this.slugDriverOptions).map((function(e){var n=t.slugDriverOptions[e];return Object.keys(n).length>1?t.buildSettingComponent({type:"select",setting:"slug_driver_"+e,options:n,label:Yr.translator.trans("core.admin.basics.slug_driver_heading",{model:e}),help:Yr.translator.trans("core.admin.basics.slug_driver_text",{model:e})}):null})),40),e},e}(St),jt=["text","tooltipVisible","showOnFocus","position","ignoreTitleWarning","html","delay"],Lt=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).firstChild=null,e.childDomNode=null,e.oldText="",e.oldVisibility=void 0,e.shouldRecreateTooltip=!1,e.shouldChangeTooltipVisibility=!1,e}D(e,t);var n=e.prototype;return n.view=function(t){var e=t.children,n=this.attrs,r=(n.text,n.tooltipVisible),i=(n.showOnFocus,n.position,n.ignoreTitleWarning),o=void 0!==i&&i;n.html,n.delay,j(n,jt),this.attrs.title&&!o&&console.warn("`title` attribute was passed to Tooltip component. Was this intentional? Tooltip content should be passed to the `text` attr instead.");var a=this.getRealText();if(a!==this.oldText&&(this.oldText=a,this.shouldRecreateTooltip=!0),r!==this.oldVisibility&&(this.oldVisibility=this.attrs.tooltipVisible,this.shouldChangeTooltipVisibility=!0),void 0===e)throw new Error("Tooltip component was provided with no direct child DOM element. Tooltips must contain a single direct DOM node to attach to.");if(1!==e.length)throw new Error("Tooltip component was either passed more than one or no child node.\n\nPlease wrap multiple children in another element, such as a <div> or <span>.");var s=e[0];if("object"!=typeof s||Array.isArray(s)||null===s)throw new Error("Tooltip component was provided with no direct child DOM element. Tooltips must contain a single direct DOM node to attach to.");if("string"==typeof s.tag&&["#","[","<"].includes(s.tag))throw new Error('Tooltip component with provided with a vnode with tag "'+s.tag+'". This is not a DOM element, so is not a valid child element. Please wrap this vnode in another element, such as a <div> or <span>.');return this.firstChild=s,e},n.oncreate=function(e){t.prototype.oncreate.call(this,e),this.checkDomNodeChanged(),this.recreateTooltip()},n.onupdate=function(e){t.prototype.onupdate.call(this,e),this.checkDomNodeChanged(),this.recreateTooltip()},n.recreateTooltip=function(){this.shouldRecreateTooltip&&null!==this.childDomNode&&($(this.childDomNode).tooltip("destroy","DANGEROUS_tooltip_jquery_fn_deprecation_exempt"),this.createTooltip(),this.shouldRecreateTooltip=!1),this.shouldChangeTooltipVisibility&&(this.shouldChangeTooltipVisibility=!1,this.updateVisibility())},n.updateVisibility=function(){null!==this.childDomNode&&(!0===this.attrs.tooltipVisible?$(this.childDomNode).tooltip("show","DANGEROUS_tooltip_jquery_fn_deprecation_exempt"):!1===this.attrs.tooltipVisible&&$(this.childDomNode).tooltip("hide","DANGEROUS_tooltip_jquery_fn_deprecation_exempt"))},n.createTooltip=function(){if(null!==this.childDomNode){var t=this.attrs,e=t.showOnFocus,n=void 0===e||e,r=t.position,i=void 0===r?"top":r,o=t.delay,a=t.html,s=void 0!==a&&a,u=t.tooltipVisible,l=(t.text,"boolean"==typeof u?"manual":S("hover",[n&&"focus"])),c=this.getRealText();this.childDomNode.setAttribute("title",c),this.childDomNode.setAttribute("aria-label",c),$(this.childDomNode).tooltip({html:s,delay:o,placement:i,trigger:l},"DANGEROUS_tooltip_jquery_fn_deprecation_exempt")}},n.getRealText=function(){var t=this.attrs.text;return Array.isArray(t)?H(t):t},n.checkDomNodeChanged=function(){var t=this.firstChild.dom;t&&!t.isSameNode(this.childDomNode)&&(this.childDomNode=t,this.shouldRecreateTooltip=!0)},e}(x);function Mt(t){if(!t||t.length<4)return!1;var e=t.replace("#","");return 3===e.length&&(e+=e),(299*parseInt(e.slice(0,2),16)+587*parseInt(e.slice(2,4),16)+114*parseInt(e.slice(4,6),16))/1e3<(parseInt(getComputedStyle(document.body).getPropertyValue("--yiq-threshold").trim())||128)}function $t(t){return t?Mt(t)?"text-contrast--light":"text-contrast--dark":"text-contrast--unchanged"}var Rt=["type","icon","label","color","style"],Ht=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.view=function(){var t=this.attrs,e=t.type,n=t.icon,r=t.label,i=t.color,o=t.style,a=void 0===o?{}:o,s=j(t,Rt),u=S("Badge",[e&&"Badge--"+e],s.className,$t(i)),l=n?R(n,{className:"Badge-icon"}):m.trust("&nbsp;"),c=w({},a,{"--badge-bg":i}),d=w({},s,{className:u,style:c}),f=m("div",d,l);return r?m(Lt,{text:r},f):f},e}(x),qt=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.initAttrs=function(e){t.initAttrs.call(this,e),e.group&&(e.icon=e.group.icon()||"",e.color=e.group.color()||"",e.label=void 0===e.label?e.group.nameSingular():e.label,e.type="group--"+e.group.id(),delete e.group)},e}(Ht),Ut=function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=v.store),this.data={},this.freshness=new Date,this.exists=!1,this.store=void 0,this.data=t,this.store=e}var e=t.prototype;return e.id=function(){return"id"in this.data?this.data.id:void 0},e.attribute=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e,n;return null==(e=this.data)||null==(n=e.attributes)?void 0:n[t]})),e.pushData=function(e){if("id"in e&&(this.data.id=e.id),"type"in e&&(this.data.type=e.type),"attributes"in e){var n;for(var r in(n=this.data).attributes||(n.attributes={}),e.attributes){var i=e.attributes[r];i&&i instanceof t&&(M("Providing models as attributes to `Model.pushData()` or `Model.pushAttributes()` is deprecated.","3249"),delete e.attributes[r],e.relationships||(e.relationships={}),e.relationships[r]={data:t.getIdentifier(i)})}Object.assign(this.data.attributes,e.attributes)}if("relationships"in e){var o,a=null!=(o=this.data.relationships)?o:{};for(var s in e.relationships){var u=e.relationships[s];if(null!==u){var l;l=u instanceof t?{data:t.getIdentifier(u)}:u instanceof Array?{data:u.map(t.getIdentifier)}:u,e.relationships[s]=l,a[s]=l}else delete a[s],delete e.relationships[s]}this.data.relationships=a}return this.freshness=new Date,this},e.pushAttributes=function(t){this.pushData({attributes:t})},e.save=function(e,n){var r=this;void 0===n&&(n={});var i={type:this.data.type,attributes:e};if("id"in this.data&&(i.id=this.data.id),e.relationships){for(var o in i.relationships={},e.relationships){var a=e.relationships[o];null!==a&&(i.relationships[o]={data:a instanceof Array?a.map(t.getIdentifier):t.getIdentifier(a)})}delete e.relationships}var s=this.copyData();this.pushData(i);var u={data:i,meta:n.meta||void 0};return v.request(w({method:this.exists?"PATCH":"POST",url:v.forum.attribute("apiUrl")+this.apiEndpoint(),body:u},n)).then((function(t){return r.store.pushPayload(t)}),(function(t){throw r.pushData(s),m.redraw(),t}))},e.delete=function(t,e){var n=this;return void 0===t&&(t={}),void 0===e&&(e={}),this.exists?v.request(w({method:"DELETE",url:v.forum.attribute("apiUrl")+this.apiEndpoint(),body:t},e)).then((function(){n.exists=!1,n.store.remove(n)})):Promise.resolve()},e.apiEndpoint=function(){return"/"+this.data.type+("id"in this.data?"/"+this.data.id:"")},e.copyData=function(){return JSON.parse(JSON.stringify(this.data))},e.rawRelationship=function(t){var e,n;return null==(e=this.data.relationships)||null==(n=e[t])?void 0:n.data},t.attribute=function(t,e){return function(){return e?e(this.attribute(t)):this.attribute(t)}},t.hasOne=function(t){return function(){var e,n,r=null==(e=this.data.relationships)||null==(n=e[t])?void 0:n.data;if(r&&r instanceof Array)throw new Error("Relationship "+t+" on model "+this.data.type+" is plural, so the hasOne method cannot be used to access it.");return!!r&&this.store.getById(r.type,r.id)}},t.hasMany=function(t){return function(){var e,n,r=this,i=null==(e=this.data.relationships)||null==(n=e[t])?void 0:n.data;if(i&&!(i instanceof Array))throw new Error("Relationship "+t+" on model "+this.data.type+" is singular, so the hasMany method cannot be used to access it.");return!!i&&i.map((function(t){return r.store.getById(t.type,t.id)}))}},t.transformDate=function(t){return null!=t?new Date(t):t},t.getIdentifier=function(t){return t&&"id"in t.data?{type:t.data.type,id:t.data.id}:null},t}(),zt=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.nameSingular=function(){return Ut.attribute("nameSingular").call(this)},n.namePlural=function(){return Ut.attribute("namePlural").call(this)},n.color=function(){return Ut.attribute("color").call(this)},n.icon=function(){return Ut.attribute("icon").call(this)},n.isHidden=function(){return Ut.attribute("isHidden").call(this)},e}(Ut);zt.ADMINISTRATOR_ID="1",zt.GUEST_ID="2",zt.MEMBER_ID="3";var Wt=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).group=void 0,e.nameSingular=void 0,e.namePlural=void 0,e.icon=void 0,e.color=void 0,e.isHidden=void 0,e}D(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.group=this.attrs.group||Yr.store.createRecord("groups"),this.nameSingular=bt(this.group.nameSingular()||""),this.namePlural=bt(this.group.namePlural()||""),this.icon=bt(this.group.icon()||""),this.color=bt(this.group.color()||""),this.isHidden=bt(this.group.isHidden()||!1)},n.className=function(){return"EditGroupModal Modal--small"},n.title=function(){return m("[",null,!(!this.color()&&!this.icon())&&m(Ht,{icon:this.icon(),color:this.color()})," ",this.namePlural()||Yr.translator.trans("core.admin.edit_group.title"))},n.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},this.fields().toArray()))},n.fields=function(){var t=new F;return t.add("name",m("div",{className:"Form-group"},m("label",null,Yr.translator.trans("core.admin.edit_group.name_label")),m("div",{className:"EditGroupModal-name-input"},m("input",{className:"FormControl",placeholder:Yr.translator.trans("core.admin.edit_group.singular_placeholder"),bidi:this.nameSingular}),m("input",{className:"FormControl",placeholder:Yr.translator.trans("core.admin.edit_group.plural_placeholder"),bidi:this.namePlural}))),30),t.add("color",m("div",{className:"Form-group"},m("label",null,Yr.translator.trans("core.admin.edit_group.color_label")),m(Ct,{placeholder:"#aaaaaa",bidi:this.color})),20),t.add("icon",m("div",{className:"Form-group"},m("label",null,Yr.translator.trans("core.admin.edit_group.icon_label")),m("div",{className:"helpText"},Yr.translator.trans("core.admin.edit_group.icon_text",{a:m("a",{href:Yr.refs.fontawesome,tabindex:"-1"})})),m("input",{className:"FormControl",placeholder:"fas fa-bolt",bidi:this.icon})),10),t.add("hidden",m("div",{className:"Form-group"},m(ht,{state:this.isHidden(),onchange:this.isHidden},Yr.translator.trans("core.admin.edit_group.hide_label"))),10),t.add("submit",m("div",{className:"Form-group"},m(W,{type:"submit",className:"Button Button--primary EditGroupModal-save",loading:this.loading},Yr.translator.trans("core.admin.edit_group.submit_button")),this.group.exists&&this.group.id()!==zt.ADMINISTRATOR_ID&&m("button",{type:"button",className:"Button EditGroupModal-delete",onclick:this.deleteGroup.bind(this)},Yr.translator.trans("core.admin.edit_group.delete_button"))),-10),t},n.submitData=function(){return{nameSingular:this.nameSingular(),namePlural:this.namePlural(),color:this.color(),icon:this.icon(),isHidden:this.isHidden()}},n.onsubmit=function(t){var e=this;t.preventDefault(),this.loading=!0,this.group.save(this.submitData(),{errorHandler:this.onerror.bind(this)}).then(this.hide.bind(this)).catch((function(){e.loading=!1,m.redraw()}))},n.deleteGroup=function(){confirm(H(Yr.translator.trans("core.admin.edit_group.delete_confirmation")))&&(this.group.delete().then((function(){return m.redraw()})),this.hide())},e}(rt);function Gt(t){var e=Yr.store.getById("groups",t);return!!e&&m(qt,{group:e,label:null})}function Vt(t,e){return Yr.getRequiredPermissions(e).forEach((function(e){var n=Yr.data.permissions[e]||[];-1!==n.indexOf(zt.GUEST_ID)||(t=-1!==n.indexOf(zt.MEMBER_ID)?t.filter((function(t){return t!==zt.GUEST_ID})):-1!==t.indexOf(zt.MEMBER_ID)?n:n.filter((function(e){return-1!==t.indexOf(e)}))),t=Vt(t,e)})),t}var Yt=function(t){function e(){return t.apply(this,arguments)||this}D(e,t),e.initAttrs=function(e){t.initAttrs.call(this,e),e.className="PermissionDropdown",e.buttonClassName="Button Button--text"};var n=e.prototype;return n.view=function(e){var n=this,r=[],i=Yr.data.permissions[this.attrs.permission]||[],o=(i=Vt(i,this.attrs.permission)).includes(zt.GUEST_ID),a=i.includes(zt.MEMBER_ID),s=Yr.store.getById("groups",zt.ADMINISTRATOR_ID);if(this.attrs.label=o?m(Ht,{icon:"fas fa-globe"}):a?m(Ht,{icon:"fas fa-user"}):[Gt(zt.ADMINISTRATOR_ID),i.map(Gt)],this.showing){this.attrs.allowGuest&&r.push(m(W,{icon:!o||"fas fa-check",onclick:function(){return n.save([zt.GUEST_ID])},disabled:this.isGroupDisabled(zt.GUEST_ID)},m(Ht,{icon:"fas fa-globe"})," ",Yr.translator.trans("core.admin.permissions_controls.everyone_button"))),r.push(m(W,{icon:!a||"fas fa-check",onclick:function(){return n.save([zt.MEMBER_ID])},disabled:this.isGroupDisabled(zt.MEMBER_ID)},m(Ht,{icon:"fas fa-user"})," ",Yr.translator.trans("core.admin.permissions_controls.members_button")),m(T,null),m(W,{icon:!(!o&&!a)||"fas fa-check",disabled:!o&&!a,onclick:function(t){t.shiftKey&&t.stopPropagation(),n.save([])}},Gt(s.id())," ",s.namePlural()));var u=[zt.ADMINISTRATOR_ID,zt.GUEST_ID,zt.MEMBER_ID],l=Yr.store.all("groups").filter((function(t){return!u.includes(t.id())})).map((function(t){return m(W,{icon:!i.includes(t.id())||"fas fa-check",onclick:function(e){e.shiftKey&&e.stopPropagation(),n.toggle(t.id())},disabled:n.isGroupDisabled(t.id())&&n.isGroupDisabled(zt.MEMBER_ID)&&n.isGroupDisabled(zt.GUEST_ID)},Gt(t.id())," ",t.namePlural())}));r.push.apply(r,l)}return t.prototype.view.call(this,w({},e,{children:r}))},n.save=function(t){var e=this.attrs.permission;Yr.data.permissions[e]=t,Yr.request({method:"POST",url:Yr.forum.attribute("apiUrl")+"/permission",body:{permission:e,groupIds:t}})},n.toggle=function(t){var e=this.attrs.permission,n=Yr.data.permissions[e]||[],r=n.indexOf(t);-1!==r?n.splice(r,1):(n.push(t),n=n.filter((function(t){return-1===[zt.GUEST_ID,zt.MEMBER_ID].indexOf(t)}))),this.save(n)},n.isGroupDisabled=function(t){return!Vt([t],this.attrs.permission).includes(t)},e}(Q);function Kt(t){if(!t||"object"!=typeof t||t instanceof Array)return!1;var e=t.tag;return("string"!=typeof e||"a"===e||"button"===e)&&("object"!=typeof e&&"function"!=typeof e||!("initAttrs"in e)||e.initAttrs(t.attrs),"object"!=typeof e&&"function"!=typeof e||!("isActive"in e)?t.attrs.active:e.isActive(t.attrs))}var Xt=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.initAttrs=function(e){null!=e.caretIcon||(e.caretIcon="fas fa-sort"),t.initAttrs.call(this,e),e.className=S(e.className,"Dropdown--select")},e.prototype.getButtonContent=function(t){var e=t.find(Kt),n=e&&"object"==typeof e&&"children"in e&&e.children||this.attrs.defaultLabel;return Array.isArray(n)&&(n=n[0]),[m("span",{className:"Button-label"},n),this.attrs.caretIcon?R(this.attrs.caretIcon,{className:"Button-caret"}):null]},e}(Q),Jt=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.initAttrs=function(e){var n;t.initAttrs.call(this,e),e.className="SettingDropdown",e.buttonClassName="Button Button--text",e.caretIcon="fas fa-caret-down",e.defaultLabel="Custom","key"in e&&(e.setting=null==(n=e.key)?void 0:n.toString(),delete e.key)},e.prototype.view=function(e){var n=this;return t.prototype.view.call(this,w({},e,{children:this.attrs.options.map((function(t){var e,r=t.value,i=t.label,o=Yr.data.settings[n.attrs.setting]===r;return m(W,{icon:!o||"fas fa-check",onclick:Dt.bind(n,(e={},e[n.attrs.setting]=r,e)),active:o},i)}))}))},e}(Xt),Qt=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.view=function(t){var e=this.scopeItems().toArray(),n=function(t){return e.map((function(e){return"children"in t?m("td",null):m("td",null,e.render(t))}))};return m("table",{className:"PermissionGrid"},m("thead",null,m("tr",null,m("th",null),e.map((function(t){return m("th",null,t.label," ",!!t.onremove&&m(W,{icon:"fas fa-times",className:"Button Button--text PermissionGrid-removeScope","aria-label":Yr.translator.trans("core.admin.permissions.remove_scope_label",{scope:t.label}),onclick:t.onremove}))})),m("th",null,this.scopeControlItems().toArray()))),this.permissionItems().toArray().map((function(t){return m("tbody",null,m("tr",{className:"PermissionGrid-section"},m("th",null,t.label),n(t),m("td",null)),t.children.map((function(t){return m("tr",{className:"PermissionGrid-child"},m("th",null,R(t.icon),t.label),n(t),m("td",null))})))})))},n.permissionItems=function(){var t=new F;return t.add("view",{label:Yr.translator.trans("core.admin.permissions.read_heading"),children:this.viewItems().toArray()},100),t.add("start",{label:Yr.translator.trans("core.admin.permissions.create_heading"),children:this.startItems().toArray()},90),t.add("reply",{label:Yr.translator.trans("core.admin.permissions.participate_heading"),children:this.replyItems().toArray()},80),t.add("moderate",{label:Yr.translator.trans("core.admin.permissions.moderate_heading"),children:this.moderateItems().toArray()},70),t},n.viewItems=function(){var t=new F;return t.add("viewForum",{icon:"fas fa-eye",label:Yr.translator.trans("core.admin.permissions.view_forum_label"),permission:"viewForum",allowGuest:!0},100),t.add("viewHiddenGroups",{icon:"fas fa-users",label:Yr.translator.trans("core.admin.permissions.view_hidden_groups_label"),permission:"viewHiddenGroups"},100),t.add("searchUsers",{icon:"fas fa-users",label:Yr.translator.trans("core.admin.permissions.search_users_label"),permission:"searchUsers",allowGuest:!0},100),t.add("signUp",{icon:"fas fa-user-plus",label:Yr.translator.trans("core.admin.permissions.sign_up_label"),setting:function(){return m(Jt,{key:"allow_sign_up",options:[{value:"1",label:Yr.translator.trans("core.admin.permissions_controls.signup_open_button")},{value:"0",label:Yr.translator.trans("core.admin.permissions_controls.signup_closed_button")}],lazyDraw:!0})}},90),t.add("viewLastSeenAt",{icon:"far fa-clock",label:Yr.translator.trans("core.admin.permissions.view_last_seen_at_label"),permission:"user.viewLastSeenAt"}),t.merge(Yr.extensionData.getAllExtensionPermissions("view")),t},n.startItems=function(){var t=new F;return t.add("start",{icon:"fas fa-edit",label:Yr.translator.trans("core.admin.permissions.start_discussions_label"),permission:"startDiscussion"},100),t.add("allowRenaming",{icon:"fas fa-i-cursor",label:Yr.translator.trans("core.admin.permissions.allow_renaming_label"),setting:function(){var t=parseInt(Yr.data.settings.allow_renaming,10);return m(Jt,{defaultLabel:t?Yr.translator.trans("core.admin.permissions_controls.allow_some_minutes_button",{count:t}):Yr.translator.trans("core.admin.permissions_controls.allow_indefinitely_button"),key:"allow_renaming",options:[{value:"-1",label:Yr.translator.trans("core.admin.permissions_controls.allow_indefinitely_button")},{value:"10",label:Yr.translator.trans("core.admin.permissions_controls.allow_ten_minutes_button")},{value:"reply",label:Yr.translator.trans("core.admin.permissions_controls.allow_until_reply_button")}],lazyDraw:!0})}},90),t.add("createAccessToken",{icon:"fas fa-key",label:Yr.translator.trans("core.admin.permissions.create_access_token_label"),permission:"createAccessToken"},80),t.merge(Yr.extensionData.getAllExtensionPermissions("start")),t},n.replyItems=function(){var t=new F;return t.add("reply",{icon:"fas fa-reply",label:Yr.translator.trans("core.admin.permissions.reply_to_discussions_label"),permission:"discussion.reply"},100),t.add("allowPostEditing",{icon:"fas fa-pencil-alt",label:Yr.translator.trans("core.admin.permissions.allow_post_editing_label"),setting:function(){var t=parseInt(Yr.data.settings.allow_post_editing,10);return m(Jt,{defaultLabel:t?Yr.translator.trans("core.admin.permissions_controls.allow_some_minutes_button",{count:t}):Yr.translator.trans("core.admin.permissions_controls.allow_indefinitely_button"),key:"allow_post_editing",options:[{value:"-1",label:Yr.translator.trans("core.admin.permissions_controls.allow_indefinitely_button")},{value:"10",label:Yr.translator.trans("core.admin.permissions_controls.allow_ten_minutes_button")},{value:"reply",label:Yr.translator.trans("core.admin.permissions_controls.allow_until_reply_button")}]})}},90),t.add("hideOwnPosts",{icon:"far fa-trash-alt",label:Yr.translator.trans("core.admin.permissions.allow_hide_own_posts_label"),setting:function(){var t=parseInt(Yr.data.settings.allow_hide_own_posts,10);return Jt.component({defaultLabel:t?Yr.translator.trans("core.admin.permissions_controls.allow_some_minutes_button",{count:t}):Yr.translator.trans("core.admin.permissions_controls.allow_indefinitely_button"),key:"allow_hide_own_posts",options:[{value:"-1",label:Yr.translator.trans("core.admin.permissions_controls.allow_indefinitely_button")},{value:"10",label:Yr.translator.trans("core.admin.permissions_controls.allow_ten_minutes_button")},{value:"reply",label:Yr.translator.trans("core.admin.permissions_controls.allow_until_reply_button")},{value:"0",label:Yr.translator.trans("core.admin.permissions_controls.allow_never_button")}]})}},80),t.merge(Yr.extensionData.getAllExtensionPermissions("reply")),t},n.moderateItems=function(){var t=new F;return t.add("viewIpsPosts",{icon:"fas fa-bullseye",label:Yr.translator.trans("core.admin.permissions.view_post_ips_label"),permission:"discussion.viewIpsPosts"},110),t.add("renameDiscussions",{icon:"fas fa-i-cursor",label:Yr.translator.trans("core.admin.permissions.rename_discussions_label"),permission:"discussion.rename"},100),t.add("hideDiscussions",{icon:"far fa-trash-alt",label:Yr.translator.trans("core.admin.permissions.delete_discussions_label"),permission:"discussion.hide"},90),t.add("deleteDiscussions",{icon:"fas fa-times",label:Yr.translator.trans("core.admin.permissions.delete_discussions_forever_label"),permission:"discussion.delete"},80),t.add("postWithoutThrottle",{icon:"fas fa-swimmer",label:Yr.translator.trans("core.admin.permissions.post_without_throttle_label"),permission:"postWithoutThrottle"},70),t.add("editPosts",{icon:"fas fa-pencil-alt",label:Yr.translator.trans("core.admin.permissions.edit_posts_label"),permission:"discussion.editPosts"},70),t.add("hidePosts",{icon:"far fa-trash-alt",label:Yr.translator.trans("core.admin.permissions.delete_posts_label"),permission:"discussion.hidePosts"},60),t.add("deletePosts",{icon:"fas fa-times",label:Yr.translator.trans("core.admin.permissions.delete_posts_forever_label"),permission:"discussion.deletePosts"},60),t.add("userEditCredentials",{icon:"fas fa-user-cog",label:Yr.translator.trans("core.admin.permissions.edit_users_credentials_label"),permission:"user.editCredentials"},60),t.add("userEditGroups",{icon:"fas fa-users-cog",label:Yr.translator.trans("core.admin.permissions.edit_users_groups_label"),permission:"user.editGroups"},60),t.add("userEdit",{icon:"fas fa-address-card",label:Yr.translator.trans("core.admin.permissions.edit_users_label"),permission:"user.edit"},60),t.add("moderateAccessTokens",{icon:"fas fa-key",label:Yr.translator.trans("core.admin.permissions.moderate_access_tokens_label"),permission:"moderateAccessTokens"},60),t.merge(Yr.extensionData.getAllExtensionPermissions("moderate")),t},n.scopeItems=function(){var t=new F;return t.add("global",{label:Yr.translator.trans("core.admin.permissions.global_heading"),render:function(t){return"setting"in t?t.setting():"permission"in t?m(Yt,{permission:t.permission,allowGuest:t.allowGuest}):null}},100),t},n.scopeControlItems=function(){return new F},e}(x),Zt=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.headerInfo=function(){return{className:"PermissionsPage",icon:"fas fa-key",title:Yr.translator.trans("core.admin.permissions.title"),description:Yr.translator.trans("core.admin.permissions.description")}},n.content=function(){return m("[",null,m("div",{className:"PermissionsPage-groups"},Yr.store.all("groups").filter((function(t){return-1===[zt.GUEST_ID,zt.MEMBER_ID].indexOf(t.id())})).map((function(t){return m("button",{className:"Button Group",onclick:function(){return Yr.modal.show(Wt,{group:t})}},m(qt,{group:t,className:"Group-icon",label:null}),m("span",{className:"Group-name"},t.namePlural()))})),m("button",{className:"Button Group Group--add",onclick:function(){return Yr.modal.show(Wt)}},R("fas fa-plus",{className:"Group-icon"}),m("span",{className:"Group-name"},Yr.translator.trans("core.admin.permissions.new_group_button")))),m("div",{className:"PermissionsPage-permissions"},m(Qt,null)))},e}(St),te=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).settings={},e.loading=!1,e}D(e,t);var n=e.prototype;return n.form=function(){return null},n.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},this.form(),m("div",{className:"Form-group"},this.submitButton())))},n.submitButton=function(){return m(W,{type:"submit",className:"Button Button--primary",loading:this.loading,disabled:!this.changed()},Yr.translator.trans("core.admin.settings.submit_button"))},n.setting=function(t,e){return void 0===e&&(e=""),this.settings[t]=this.settings[t]||bt(Yr.data.settings[t]||e),this.settings[t]},n.dirty=function(){var t=this,e={};return Object.keys(this.settings).forEach((function(n){var r=t.settings[n]();r!==Yr.data.settings[n]&&(e[n]=r)})),e},n.changed=function(){return Object.keys(this.dirty()).length},n.onsubmit=function(t){t.preventDefault(),this.loading=!0,Dt(this.dirty()).then(this.onsaved.bind(this),this.loaded.bind(this))},n.onsaved=function(){this.hide()},e}(rt),ee=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.className=function(){return"EditCustomCssModal TextareaCodeModal Modal--large"},n.title=function(){return Yr.translator.trans("core.admin.edit_css.title")},n.form=function(){return[m("p",null,Yr.translator.trans("core.admin.edit_css.customize_text",{a:m("a",{href:"https://github.com/flarum/core/tree/master/less",target:"_blank"})})),m("div",{className:"Form-group"},m("textarea",{className:"FormControl",rows:"30",bidi:this.setting("custom_less"),spellcheck:!1}))]},n.onsaved=function(){window.location.reload()},e}(te),ne=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.className=function(){return"EditCustomHeaderModal TextareaCodeModal Modal--large"},n.title=function(){return Yr.translator.trans("core.admin.edit_header.title")},n.form=function(){return[m("p",null,Yr.translator.trans("core.admin.edit_header.customize_text")),m("div",{className:"Form-group"},m("textarea",{className:"FormControl",rows:"30",bidi:this.setting("custom_header")}))]},n.onsaved=function(){window.location.reload()},e}(te),re=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.className=function(){return"EditCustomFooterModal TextareaCodeModal Modal--large"},n.title=function(){return Yr.translator.trans("core.admin.edit_footer.title")},n.form=function(){return[m("p",null,Yr.translator.trans("core.admin.edit_footer.customize_text")),m("div",{className:"Form-group"},m("textarea",{className:"FormControl",rows:"30",bidi:this.setting("custom_footer")}))]},n.onsaved=function(){window.location.reload()},e}(te),ie=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).loading=!1,e}D(e,t);var n=e.prototype;return n.view=function(e){return this.attrs.loading=this.loading,this.attrs.className=S(this.attrs.className,"Button"),Yr.data.settings[this.attrs.name+"_path"]?(this.attrs.onclick=this.remove.bind(this),m("div",null,m("p",null,m("img",{src:Yr.forum.attribute(this.attrs.name+"Url"),alt:""})),m("p",null,t.prototype.view.call(this,w({},e,{children:Yr.translator.trans("core.admin.upload_image.remove_button")}))))):(this.attrs.onclick=this.upload.bind(this),t.prototype.view.call(this,w({},e,{children:Yr.translator.trans("core.admin.upload_image.upload_button")})))},n.upload=function(){var t=this;this.loading||$('<input type="file">').appendTo("body").hide().trigger("click").on("change",(function(e){var n=new FormData;n.append(t.attrs.name,$(e.target)[0].files[0]),t.loading=!0,m.redraw(),Yr.request({method:"POST",url:t.resourceUrl(),serialize:function(t){return t},body:n}).then(t.success.bind(t),t.failure.bind(t))}))},n.remove=function(){this.loading=!0,m.redraw(),Yr.request({method:"DELETE",url:this.resourceUrl()}).then(this.success.bind(this),this.failure.bind(this))},n.resourceUrl=function(){return Yr.forum.attribute("apiUrl")+"/"+this.attrs.name},n.success=function(t){window.location.reload()},n.failure=function(t){this.loading=!1,m.redraw()},e}(W),oe=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.headerInfo=function(){return{className:"AppearancePage",icon:"fas fa-paint-brush",title:Yr.translator.trans("core.admin.appearance.title"),description:Yr.translator.trans("core.admin.appearance.description")}},n.content=function(){return this.contentItems().toArray()},n.colorItems=function(){var t=new F;return t.add("helpText",m("div",{className:"helpText"},Yr.translator.trans("core.admin.appearance.colors_text")),80),t.add("theme-colors",m("div",{className:"AppearancePage-colors-input"},this.buildSettingComponent({type:"color-preview",setting:"theme_primary_color",placeholder:"#aaaaaa",ariaLabel:Yr.translator.trans("core.admin.appearance.colors_primary_label")}),this.buildSettingComponent({type:"color-preview",setting:"theme_secondary_color",placeholder:"#aaaaaa",ariaLabel:Yr.translator.trans("core.admin.appearance.colors_secondary_label")})),70),t.add("dark-mode",this.buildSettingComponent({type:"switch",setting:"theme_dark_mode",label:Yr.translator.trans("core.admin.appearance.dark_mode_label")}),60),t.add("colored-header",this.buildSettingComponent({type:"switch",setting:"theme_colored_header",label:Yr.translator.trans("core.admin.appearance.colored_header_label")}),50),t.add("submit",this.submitButton(),0),t},n.onsaved=function(){window.location.reload()},n.contentItems=function(){var t=new F;return t.add("colors",m("div",{className:"Form"},m("fieldset",{className:"AppearancePage-colors"},m("legend",null,Yr.translator.trans("core.admin.appearance.colors_heading")),this.colorItems().toArray())),100),t.add("logo",m("fieldset",null,m("legend",null,Yr.translator.trans("core.admin.appearance.logo_heading")),m("div",{className:"helpText"},Yr.translator.trans("core.admin.appearance.logo_text")),m(ie,{name:"logo"})),90),t.add("favicon",m("fieldset",null,m("legend",null,Yr.translator.trans("core.admin.appearance.favicon_heading")),m("div",{className:"helpText"},Yr.translator.trans("core.admin.appearance.favicon_text")),m(ie,{name:"favicon"})),80),t.add("custom-header",m("fieldset",null,m("legend",null,Yr.translator.trans("core.admin.appearance.custom_header_heading")),m("div",{className:"helpText"},Yr.translator.trans("core.admin.appearance.custom_header_text")),m(W,{className:"Button",onclick:function(){return Yr.modal.show(ne)}},Yr.translator.trans("core.admin.appearance.edit_header_button"))),70),t.add("custom-footer",m("fieldset",null,m("legend",null,Yr.translator.trans("core.admin.appearance.custom_footer_heading")),m("div",{className:"helpText"},Yr.translator.trans("core.admin.appearance.custom_footer_text")),m(W,{className:"Button",onclick:function(){return Yr.modal.show(re)}},Yr.translator.trans("core.admin.appearance.edit_footer_button"))),60),t.add("custom-css",m("fieldset",null,m("legend",null,Yr.translator.trans("core.admin.appearance.custom_styles_heading")),m("div",{className:"helpText"},Yr.translator.trans("core.admin.appearance.custom_styles_text")),m(W,{className:"Button",onclick:function(){return Yr.modal.show(ee)}},Yr.translator.trans("core.admin.appearance.edit_css_button"))),50),t},e}(St),ae=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).sendingTest=!1,e.status=void 0,e.driverFields=void 0,e.testEmailSuccessAlert=void 0,e}D(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.refresh()},n.headerInfo=function(){return{className:"MailPage",icon:"fas fa-envelope",title:Yr.translator.trans("core.admin.email.title"),description:Yr.translator.trans("core.admin.email.description")}},n.refresh=function(){var t=this;this.loading=!0,this.status={sending:!1,errors:{}},Yr.request({method:"GET",url:Yr.forum.attribute("apiUrl")+"/mail/settings"}).then((function(e){t.driverFields=e.data.attributes.fields,t.status.sending=e.data.attributes.sending,t.status.errors=e.data.attributes.errors,t.loading=!1,m.redraw()}))},n.content=function(){return this.loading?m(U,null):m("div",{className:"Form"},this.contentItems().toArray())},n.sendTestEmail=function(){var t=this;this.sendingTest||(this.sendingTest=!0,this.testEmailSuccessAlert&&Yr.alerts.dismiss(this.testEmailSuccessAlert),Yr.request({method:"POST",url:Yr.forum.attribute("apiUrl")+"/mail/test"}).then((function(e){t.sendingTest=!1,t.testEmailSuccessAlert=Yr.alerts.show({type:"success"},Yr.translator.trans("core.admin.email.send_test_mail_success"))})).catch((function(e){throw t.sendingTest=!1,m.redraw(),e})))},n.saveSettings=function(e){var n=this;return t.prototype.saveSettings.call(this,e).then((function(){return n.refresh()}))},n.contentItems=function(){var t=this,e=new F,n=this.driverFields[this.setting("mail_driver")()]||{},r=Object.keys(n);return e.add("mail-from",this.buildSettingComponent({type:"text",setting:"mail_from",label:Yr.translator.trans("core.admin.email.addresses_heading")}),100),e.add("mail-driver",this.buildSettingComponent({type:"select",setting:"mail_driver",options:Object.keys(this.driverFields).reduce((function(t,e){var n;return w({},t,((n={})[e]=e,n))}),{}),label:Yr.translator.trans("core.admin.email.driver_heading")}),90),!this.status.sending&&e.add("not-sending",m(nt,{dismissible:!1},Yr.translator.trans("core.admin.email.not_sending_message")),80),r.length&&e.add("driver-settings",m(Ot,{label:Yr.translator.trans("core.admin.email."+this.setting("mail_driver")()+"_heading"),className:"MailPage-MailSettings"},m("div",{className:"MailPage-MailSettings-input"},r.map((function(e){var r=n[e];return m("[",null,t.buildSettingComponent({type:"string"==typeof r?"text":"select",label:Yr.translator.trans("core.admin.email."+e+"_label"),setting:e,options:r}),t.status.errors[e]&&m("p",{className:"ValidationError"},t.status.errors[e]))})))),70),e.add("submit-button",this.submitButton(),60),e.add("email-test",m(Ot,{label:Yr.translator.trans("core.admin.email.send_test_mail_heading"),className:"MailPage-MailSettings"},m("div",{className:"helpText"},Yr.translator.trans("core.admin.email.send_test_mail_text",{email:Yr.session.user.email()})),m(W,{className:"Button Button--primary",disabled:this.sendingTest||this.isChanged(),onclick:function(){return t.sendTestEmail()}},Yr.translator.trans("core.admin.email.send_test_mail_button"))),0),e},e}(St);function se(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function ue(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){se(o,r,i,a,s,"next",t)}function s(t){se(o,r,i,a,s,"throw",t)}a(void 0)}))}}var le,ce=n(2507),de=n.n(ce),fe=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).username=void 0,e.email=void 0,e.isEmailConfirmed=void 0,e.setPassword=void 0,e.password=void 0,e.groups={},e}D(e,t);var n=e.prototype;return n.oninit=function(e){var n=this;t.prototype.oninit.call(this,e);var r=this.attrs.user;this.username=bt(r.username()||""),this.email=bt(r.email()||""),this.isEmailConfirmed=bt(r.isEmailConfirmed()||!1),this.setPassword=bt(!1),this.password=bt(r.password()||"");var i=r.groups()||[];v.store.all("groups").filter((function(t){return![zt.GUEST_ID,zt.MEMBER_ID].includes(t.id())})).forEach((function(t){return n.groups[t.id()]=bt(i.includes(t))}))},n.className=function(){return"EditUserModal Modal--small"},n.title=function(){return v.translator.trans("core.lib.edit_user.title")},n.content=function(){var t=this.fields().toArray();return m("div",{className:"Modal-body"},t.length>1?m("div",{className:"Form"},this.fields().toArray()):v.translator.trans("core.lib.edit_user.nothing_available"))},n.fields=function(){var t=this,e=new F;return this.attrs.user.canEditCredentials()&&(e.add("username",m("div",{className:"Form-group"},m("label",null,v.translator.trans("core.lib.edit_user.username_heading")),m("input",{className:"FormControl",placeholder:H(v.translator.trans("core.lib.edit_user.username_label")),bidi:this.username,disabled:this.nonAdminEditingAdmin()})),40),v.session.user!==this.attrs.user&&(e.add("email",m("div",{className:"Form-group"},m("label",null,v.translator.trans("core.lib.edit_user.email_heading")),m("div",null,m("input",{className:"FormControl",placeholder:H(v.translator.trans("core.lib.edit_user.email_label")),bidi:this.email,disabled:this.nonAdminEditingAdmin()})),!this.isEmailConfirmed()&&this.userIsAdmin(v.session.user)&&m("div",null,m(W,{className:"Button Button--block",loading:this.loading,onclick:this.activate.bind(this)},v.translator.trans("core.lib.edit_user.activate_button")))),30),e.add("password",m("div",{className:"Form-group"},m("label",null,v.translator.trans("core.lib.edit_user.password_heading")),m("div",null,m("label",{className:"checkbox"},m("input",{type:"checkbox",onchange:function(e){var n=e.target;t.setPassword(n.checked),m.redraw.sync(),n.checked&&t.$("[name=password]").select(),e.redraw=!1},disabled:this.nonAdminEditingAdmin()}),v.translator.trans("core.lib.edit_user.set_password_label")),this.setPassword()&&m("input",{className:"FormControl",type:"password",name:"password",placeholder:H(v.translator.trans("core.lib.edit_user.password_label")),bidi:this.password,disabled:this.nonAdminEditingAdmin()}))),20))),this.attrs.user.canEditGroups()&&e.add("groups",m("div",{className:"Form-group EditUserModal-groups"},m("label",null,v.translator.trans("core.lib.edit_user.groups_heading")),m("div",null,Object.keys(this.groups).map((function(t){return v.store.getById("groups",t)})).filter(Boolean).map((function(e){return e&&m("label",{className:"checkbox"},m("input",{type:"checkbox",bidi:t.groups[e.id()],disabled:e.id()===zt.ADMINISTRATOR_ID&&(t.attrs.user===v.session.user||!t.userIsAdmin(v.session.user))}),m(qt,{group:e,label:null})," ",e.nameSingular())})))),10),e.add("submit",m("div",{className:"Form-group"},m(W,{className:"Button Button--primary",type:"submit",loading:this.loading},v.translator.trans("core.lib.edit_user.submit_button"))),-10),e},n.activate=function(){var t=this;this.loading=!0;var e={username:this.username(),isEmailConfirmed:!0};this.attrs.user.save(e,{errorHandler:this.onerror.bind(this)}).then((function(){t.isEmailConfirmed(!0),t.loading=!1,m.redraw()})).catch((function(){t.loading=!1,m.redraw()}))},n.data=function(){var t=this,e={},n={};return this.attrs.user.canEditCredentials()&&!this.nonAdminEditingAdmin()&&(e.username=this.username(),v.session.user!==this.attrs.user&&(e.email=this.email()),this.setPassword()&&(e.password=this.password())),this.attrs.user.canEditGroups()&&(n.groups=Object.keys(this.groups).filter((function(e){return t.groups[e]()})).map((function(t){return v.store.getById("groups",t)})).filter((function(t){return t instanceof zt}))),e.relationships=n,e},n.onsubmit=function(t){var e=this;t.preventDefault(),this.loading=!0,this.attrs.user.save(this.data(),{errorHandler:this.onerror.bind(this)}).then(this.hide.bind(this)).catch((function(){e.loading=!1,m.redraw()}))},n.nonAdminEditingAdmin=function(){return this.userIsAdmin(this.attrs.user)&&!this.userIsAdmin(v.session.user)},n.userIsAdmin=function(t){return!!((null==t?void 0:t.groups())||[]).some((function(t){return(null==t?void 0:t.id())===zt.ADMINISTRATOR_ID}))},e}(rt);function pe(t,e,n,r){var i,o=!1,a=0;function s(){i&&clearTimeout(i)}function u(){for(var u=arguments.length,l=new Array(u),c=0;c<u;c++)l[c]=arguments[c];var d=this,f=Date.now()-a;function p(){a=Date.now(),n.apply(d,l)}function h(){i=void 0}o||(r&&!i&&p(),s(),void 0===r&&f>t?p():!0!==e&&(i=setTimeout(r?h:p,void 0===r?t-f:t)))}return"boolean"!=typeof e&&(r=n,n=e,e=void 0),u.cancel=function(){s(),o=!0},u}function he(t,e,n){return void 0===n?pe(t,e,!1):pe(t,n,!1!==e)}function me(t,e,n){return void 0===n&&(n=0),(n>0?"...":"")+t.substring(n,n+e)+(t.length>n+e?"...":"")}function ve(t,e){switch(void 0===e&&(e=le.ALPHANUMERIC),e){case le.UTF8:return t.toLowerCase().replace(/(?:(?![0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xBC-\xBE\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u052F\u0531-\u0556\u0559\u0560-\u0588\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05EF-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u07FD\u0800-\u082D\u0840-\u085B\u0860-\u086A\u0870-\u0887\u0889-\u088E\u0898-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09F4-\u09F9\u09FC\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BF2\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C78-\u0C7E\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D63\u0D66-\u0D78\u0D7A-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F33\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u1715\u171F-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u17F0-\u17F9\u180B-\u180D\u180F-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ACE\u1B00-\u1B4C\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CD0-\u1CD2\u1CD4-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u20D0-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2150-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2C00-\u2CE4\u2CEB-\u2CF3\u2CFD\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3192-\u3195\u31A0-\u31BF\u31F0-\u31FF\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA672\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA827\uA82C\uA830-\uA835\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0-\uDEFB\uDF00-\uDF23\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC58-\uDC76\uDC79-\uDC9E\uDCA7-\uDCAF\uDCE0-\uDCF2\uDCF4\uDCF5\uDCFB-\uDD1B\uDD20-\uDD39\uDD80-\uDDB7\uDDBC-\uDDCF\uDDD2-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE38-\uDE3A\uDE3F-\uDE48\uDE60-\uDE7E\uDE80-\uDE9F\uDEC0-\uDEC7\uDEC9-\uDEE6\uDEEB-\uDEEF\uDF00-\uDF35\uDF40-\uDF55\uDF58-\uDF72\uDF78-\uDF91\uDFA9-\uDFAF]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDCFA-\uDD27\uDD30-\uDD39\uDE60-\uDE7E\uDE80-\uDEA9\uDEAB\uDEAC\uDEB0\uDEB1\uDEFD-\uDF27\uDF30-\uDF54\uDF70-\uDF85\uDFB0-\uDFCB\uDFE0-\uDFF6]|\uD804[\uDC00-\uDC46\uDC52-\uDC75\uDC7F-\uDCBA\uDCC2\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD44-\uDD47\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDC9-\uDDCC\uDDCE-\uDDDA\uDDDC\uDDE1-\uDDF4\uDE00-\uDE11\uDE13-\uDE37\uDE3E-\uDE41\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3B-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC5E-\uDC61\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB8\uDEC0-\uDEC9\uDF00-\uDF1A\uDF1D-\uDF2B\uDF30-\uDF3B\uDF40-\uDF46]|\uD806[\uDC00-\uDC3A\uDCA0-\uDCF2\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD35\uDD37\uDD38\uDD3B-\uDD43\uDD50-\uDD59\uDDA0-\uDDA7\uDDAA-\uDDD7\uDDDA-\uDDE1\uDDE3\uDDE4\uDE00-\uDE3E\uDE47\uDE50-\uDE99\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC6C\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD8E\uDD90\uDD91\uDD93-\uDD98\uDDA0-\uDDA9\uDEE0-\uDEF6\uDF00-\uDF10\uDF12-\uDF3A\uDF3E-\uDF42\uDF50-\uDF59\uDFB0\uDFC0-\uDFD4]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC40-\uDC55]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDE70-\uDEBE\uDEC0-\uDEC9\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF5B-\uDF61\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE96\uDF00-\uDF4A\uDF4F-\uDF87\uDF8F-\uDF9F\uDFE0\uDFE1\uDFE3\uDFE4\uDFF0\uDFF1]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44\uDEC0-\uDED3\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC30-\uDC6D\uDC8F\uDD00-\uDD2C\uDD30-\uDD3D\uDD40-\uDD49\uDD4E\uDE90-\uDEAE\uDEC0-\uDEF9]|\uD839[\uDCD0-\uDCF9\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDCC7-\uDCD6\uDD00-\uDD4B\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF]|\uDB40[\uDD00-\uDDEF])[\s\S])/gi,"-").replace(/-+/g,"-").replace(/-$|^-/g,"");case le.ALPHANUMERIC:default:return t.toLowerCase().replace(/[^a-z0-9]/gi,"-").replace(/-+/g,"-").replace(/-$|^-/g,"")}}function ge(t){var e=t.replace(/(<\/p>|<br>)/g,"$1 &nbsp;").replace(/<img\b[^>]*>/gi," "),n=(new DOMParser).parseFromString(e,"text/html").documentElement;return ge.removeSelectors.forEach((function(t){n.querySelectorAll(t).forEach((function(t){t.remove()}))})),n.innerText.replace(/\s+/g," ").trim()}function ye(t){return t.substr(0,1).toUpperCase()+t.substr(1)}function be(t){return t.replace(/[A-Z]/g,(function(t){return"_"+t.toLowerCase()}))}function De(t){if(t<0)throw new Error("Cannot generate a random string with length less than 0.");if(0===t)return"";var e=new Uint8Array(t/2);return window.crypto.getRandomValues(e),Array.from(e,(function(t){return t.toString(16).padStart(2,"0")})).join("")}!function(t){t.ALPHANUMERIC="alphanum",t.UTF8="utf8"}(le||(le={})),ge.removeSelectors=["blockquote","script"];var we=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).username=void 0,e.email=void 0,e.password=void 0,e.requireEmailConfirmation=void 0,e.bulkAdd=void 0,e}D(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.username=bt(""),this.email=bt(""),this.password=bt(""),this.requireEmailConfirmation=bt(!1),this.bulkAdd=bt(!1)},n.className=function(){return"Modal--small CreateUserModal"},n.title=function(){return Yr.translator.trans("core.admin.create_user.title")},n.content=function(){return m("[",null,m("div",{className:"Modal-body"},this.body()))},n.body=function(){return m("[",null,m("div",{className:"Form Form--centered"},this.fields().toArray()))},n.fields=function(){var t=this,e=new F,n=H(Yr.translator.trans("core.admin.create_user.username_placeholder")),r=H(Yr.translator.trans("core.admin.create_user.email_placeholder")),i=H(Yr.translator.trans("core.admin.create_user.email_confirmed_label")),o=H(Yr.translator.trans("core.admin.create_user.use_random_password")),a=H(Yr.translator.trans("core.admin.create_user.password_placeholder"));return e.add("username",m("div",{className:"Form-group"},m("input",{className:"FormControl",name:"username",type:"text",placeholder:n,"aria-label":n,bidi:this.username,disabled:this.loading})),100),e.add("email",m("div",{className:"Form-group"},m("input",{className:"FormControl",name:"email",type:"email",placeholder:r,"aria-label":r,bidi:this.email,disabled:this.loading})),80),e.add("password",m("div",{className:"Form-group"},m("input",{className:"FormControl",name:"password",type:"password",autocomplete:"new-password",placeholder:a,"aria-label":a,bidi:this.password,disabled:this.loading||null===this.password()})),60),e.add("emailConfirmation",m("div",{className:"Form-group"},m(ht,{name:"emailConfirmed",state:this.requireEmailConfirmation(),onchange:function(e){return t.requireEmailConfirmation(e)},disabled:this.loading},i)),40),e.add("useRandomPassword",m("div",{className:"Form-group"},m(ht,{name:"useRandomPassword",state:null===this.password(),onchange:function(e){t.password(e?null:"")},disabled:this.loading},o)),20),e.add("submit",m("div",{className:"Form-group"},m(W,{className:"Button Button--primary Button--block",type:"submit",loading:this.loading},Yr.translator.trans("core.admin.create_user.submit_button"))),0),e.add("submitAndAdd",m("div",{className:"Form-group"},m(W,{className:"Button Button--block",onclick:function(){return t.bulkAdd(!0)&&t.onsubmit()},disabled:this.loading},Yr.translator.trans("core.admin.create_user.submit_and_create_another_button"))),-20),e},n.onready=function(){this.$("[name=username]").trigger("select")},n.onsubmit=function(t){var e,n=this;void 0===t&&(t=null),null==(e=t)||e.preventDefault(),this.loading=!0,Yr.request({url:Yr.forum.attribute("apiUrl")+"/users",method:"POST",body:{data:{attributes:this.submitData()}},errorHandler:this.onerror.bind(this)}).then((function(){n.bulkAdd()?n.resetData():n.hide()})).finally((function(){n.bulkAdd(!1),n.loaded()}))},n.submitData=function(){var t;return{username:this.username(),email:this.email(),isEmailConfirmed:!this.requireEmailConfirmation(),password:null!=(t=this.password())?t:De(32)}},n.resetData=function(){this.username(""),this.email(""),this.password("")},e}(rt),xe=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).query="",e.throttledSearch=he(250,(function(){return e.loadPage(0)})),e.numPerPage=50,e.pageNumber=0,e.loadingPageNumber=0,e.userCount=Yr.data.modelStatistics.users.total,e.pageData=void 0,e.moreData=!1,e.isLoadingPage=!1,e}D(e,t);var n=e.prototype;return n.getTotalPageCount=function(){return-1===this.userCount?0:Math.ceil(this.userCount/this.numPerPage)},n.oninit=function(e){t.prototype.oninit.call(this,e);var n=parseInt(m.route.param("page"));isNaN(n)||n<1?(this.setPageNumberInUrl(1),this.pageNumber=0):this.pageNumber=n-1,this.loadingPageNumber=this.pageNumber},n.content=function(){var t=this;if(void 0===this.pageData)return this.loadPage(this.pageNumber),[m("section",{className:"UserListPage-grid UserListPage-grid--loading"},m(U,{containerClassName:"LoadingIndicator--block",size:"large"}))];var e=this.columns().toArray();return[m("div",{className:"UserListPage-header"},this.headerItems().toArray()),m("section",{className:S(["UserListPage-grid",this.isLoadingPage?"UserListPage-grid--loadingPage":"UserListPage-grid--loaded"]),style:{"--columns":e.length},role:"table","aria-rowcount":this.pageData.length+1,"aria-colcount":e.length,"aria-live":"polite","aria-busy":this.isLoadingPage?"true":"false"},e.map((function(t,e){return m("div",{className:"UserListPage-grid-header",role:"columnheader","aria-colindex":e+1,"aria-rowindex":1},t.name)})),this.pageData.map((function(t,n){return e.map((function(e,r){var i=e.content&&e.content(t);return m("div",{className:S(["UserListPage-grid-rowItem",n%2>0&&"UserListPage-grid-rowItem--shaded"]),"data-user-id":t.id(),"data-column-name":e.itemName,"aria-colindex":r+1,"aria-rowindex":n+2,role:"cell"},i||Yr.translator.trans("core.admin.users.grid.invalid_column_content"))}))})),this.isLoadingPage&&m(U,{size:"large"})),m("nav",{className:"UserListPage-gridPagination"},m(W,{disabled:0===this.pageNumber,title:Yr.translator.trans("core.admin.users.pagination.first_page_button"),onclick:this.goToPage.bind(this,1),icon:"fas fa-step-backward",className:"Button Button--icon UserListPage-firstPageBtn"}),m(W,{disabled:0===this.pageNumber,title:Yr.translator.trans("core.admin.users.pagination.back_button"),onclick:this.previousPage.bind(this),icon:"fas fa-chevron-left",className:"Button Button--icon UserListPage-backBtn"}),m("span",{className:"UserListPage-pageNumber"},Yr.translator.trans("core.admin.users.pagination.page_counter",{current:m("input",{type:"text",inputmode:"numeric",pattern:"[0-9]*",value:this.loadingPageNumber+1,"aria-label":H(Yr.translator.trans("core.admin.users.pagination.go_to_page_textbox_a11y_label")),autocomplete:"off",className:"FormControl UserListPage-pageNumberInput",onchange:function(e){var n=e.target,r=parseInt(n.value);isNaN(r)?n.value=(t.pageNumber+1).toString():(r<1?r=1:r>t.getTotalPageCount()&&(r=t.getTotalPageCount()),n.value=r.toString(),t.goToPage(r))}}),currentNum:this.pageNumber+1,total:this.getTotalPageCount()})),m(W,{disabled:!this.moreData,title:Yr.translator.trans("core.admin.users.pagination.next_button"),onclick:this.nextPage.bind(this),icon:"fas fa-chevron-right",className:"Button Button--icon UserListPage-nextBtn"}),m(W,{disabled:!this.moreData,title:Yr.translator.trans("core.admin.users.pagination.last_page_button"),onclick:this.goToPage.bind(this,this.getTotalPageCount()),icon:"fas fa-step-forward",className:"Button Button--icon UserListPage-lastPageBtn"}))]},n.headerItems=function(){var t=this,e=new F;return e.add("search",m("div",{className:"Search-input"},m("input",{className:"FormControl SearchBar",type:"search",placeholder:Yr.translator.trans("core.admin.users.search_placeholder"),oninput:function(e){var n;t.isLoadingPage=!0,t.query=null==e||null==(n=e.target)?void 0:n.value,t.throttledSearch()}})),100),e.add("totalUsers",m("p",{class:"UserListPage-totalUsers"},Yr.translator.trans("core.admin.users.total_users",{count:this.userCount})),90),e.add("actions",m("div",{className:"UserListPage-actions"},this.actionItems().toArray()),80),e},n.actionItems=function(){var t=new F;return t.add("createUser",m(W,{className:"Button UserListPage-createUserBtn",icon:"fas fa-user-plus",onclick:function(){return Yr.modal.show(we)}},Yr.translator.trans("core.admin.users.create_user_button")),100),t},n.columns=function(){var t=this,e=new F;return e.add("id",{name:Yr.translator.trans("core.admin.users.grid.columns.user_id.title"),content:function(t){var e;return null!=(e=t.id())?e:null}},100),e.add("username",{name:Yr.translator.trans("core.admin.users.grid.columns.username.title"),content:function(t){var e=Yr.forum.attribute("baseUrl")+"/u/"+t.slug();return m("a",{target:"_blank",href:e,title:H(Yr.translator.trans("core.admin.users.grid.columns.username.profile_link_tooltip",{username:t.username()}))},t.username())}},90),e.add("displayName",{name:Yr.translator.trans("core.admin.users.grid.columns.display_name.title"),content:function(t){return t.displayName()}},85),e.add("joinDate",{name:Yr.translator.trans("core.admin.users.grid.columns.join_time.title"),content:function(t){return m("span",{className:"UserList-joinDate",title:t.joinTime()},dayjs(t.joinTime()).format("LLL"))}},80),e.add("groupBadges",{name:Yr.translator.trans("core.admin.users.grid.columns.group_badges.title"),content:function(t){var e=t.badges().toArray();return e.length?m("ul",{className:"DiscussionHero-badges badges"},O(e)):Yr.translator.trans("core.admin.users.grid.columns.group_badges.no_badges")}},70),e.add("emailAddress",{name:Yr.translator.trans("core.admin.users.grid.columns.email.title"),content:function(t){function e(e){var n=$("[data-column-name=emailAddress][data-user-id="+t.id()+"] .UserList-email"),r=n.find(".UserList-emailAddress"),i=n.find(".UserList-emailIconBtn"),o=i.find(".icon");i.attr("title",H(e?Yr.translator.trans("core.admin.users.grid.columns.email.visibility_hide"):Yr.translator.trans("core.admin.users.grid.columns.email.visibility_show"))),r.attr("aria-hidden",e?"false":"true"),e?(o.addClass("fa-eye"),o.removeClass("fa-eye-slash")):(o.removeClass("fa-eye"),o.addClass("fa-eye-slash")),n.attr("data-email-shown",""+e)}return m("div",{className:"UserList-email",key:t.id(),"data-email-shown":"false"},m("span",{className:"UserList-emailAddress","aria-hidden":"true",onclick:function(){return e(!0)}},t.email()),m("button",{onclick:function(){e(!("true"===$("[data-column-name=emailAddress][data-user-id="+t.id()+"] .UserList-email").attr("data-email-shown")))},className:"Button Button--text UserList-emailIconBtn",title:Yr.translator.trans("core.admin.users.grid.columns.email.visibility_show")},R("far fa-eye-slash fa-fw",{className:"icon"})))}},70),e.add("userActions",{name:Yr.translator.trans("core.admin.users.grid.columns.user_actions.title"),content:function(e){return m(Q,{className:"User-controls",buttonClassName:"Button Button--icon Button--flat",menuClassName:"Dropdown-menu--right",icon:"fas fa-ellipsis-h"},t.userActionItems(e).toArray())}},-90),e},n.headerInfo=function(){return{className:"UserListPage",icon:"fas fa-users",title:Yr.translator.trans("core.admin.users.title"),description:Yr.translator.trans("core.admin.users.description")}},n.userActionItems=function(t){var e=new F;return e.add("editUser",m(W,{icon:"fas fa-pencil-alt",className:"Button UserList-editModalBtn",title:Yr.translator.trans("core.admin.users.grid.columns.edit_user.tooltip",{username:t.username()}),onclick:function(){return Yr.modal.show(fe,{user:t})}},Yr.translator.trans("core.admin.users.grid.columns.edit_user.button"))),e},n.loadPage=function(){var t=ue(de().mark((function t(e){var n=this;return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e<0&&(e=0),this.loadingPageNumber=e,this.setPageNumberInUrl(e+1),Yr.store.find("users",{filter:{q:this.query},page:{limit:this.numPerPage,offset:e*this.numPerPage}}).then((function(t){var r,i;n.moreData=!(null==(r=t.payload)||null==(i=r.links)||!i.next);var o=t;delete o.payload;var a=n.getTotalPageCount();e>a?n.loadPage(a-1):(n.pageData=o,n.pageNumber=e,n.loadingPageNumber=e,n.isLoadingPage=!1),m.redraw()})).catch((function(t){console.error(t),n.pageData=[]}));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),n.nextPage=function(){this.isLoadingPage=!0,this.loadPage(this.pageNumber+1)},n.previousPage=function(){this.isLoadingPage=!0,this.loadPage(this.pageNumber-1)},n.goToPage=function(t){this.isLoadingPage=!0,this.loadPage(t-1)},n.setPageNumberInUrl=function(t){var e,n=window.location.hash.split("?",2),r=new URLSearchParams(null!=(e=null==n?void 0:n[1])?e:"");r.set("page",""+t),window.location.hash=(null==n?void 0:n[0])+"?"+r.toString()},e}(St);function Ee(t){if(2===t.length)return v.translator.trans("core.lib.series.two_text",{first:t[0],second:t[1]});if(t.length>=3){var e=t.slice(1,t.length-1).reduce((function(t,e){return t.concat([e,v.translator.trans("core.lib.series.glue_text")])}),[]).slice(0,-1);return v.translator.trans("core.lib.series.three_text",{first:t[0],second:e,third:t[t.length-1]})}return t}var Ce=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).extensionId=void 0,e}D(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.extensionId=this.attrs.extensionId},n.permissionItems=function(){var e=new F;return t.prototype.permissionItems.call(this).toArray().filter((function(t){return t.children.length>0})).forEach((function(t){e.add(t.itemName,t)})),e},n.viewItems=function(){return Yr.extensionData.getExtensionPermissions(this.extensionId,"view")||new F},n.startItems=function(){return Yr.extensionData.getExtensionPermissions(this.extensionId,"start")||new F},n.replyItems=function(){return Yr.extensionData.getExtensionPermissions(this.extensionId,"reply")||new F},n.moderateItems=function(){return Yr.extensionData.getExtensionPermissions(this.extensionId,"moderate")||new F},n.scopeControlItems=function(){var t=new F;return t.add("configureScopes",m(W,{className:"Button Button--text",onclick:function(){return m.route.set(Yr.route("permissions"))}},Yr.translator.trans("core.admin.extension.configure_scopes"))),t},e}(Qt),Ae=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.view=function(){return m("div",{className:"Placeholder"},m("p",null,this.attrs.text))},e}(x),Ne=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).content=Ut.attribute("content"),e}return D(e,t),e}(Ut),Fe=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).name=void 0,e.extName=void 0,e.readme=void 0,e}D(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),Yr.store.models["extension-readmes"]=Ne,this.name=this.attrs.extension.id,this.extName=this.attrs.extension.extra["flarum-extension"].title,this.loading=!0,this.loadReadme()},n.className=function(){return"ReadmeModal Modal--large Modal--inverted"},n.title=function(){return Yr.translator.trans("core.admin.extension.readme.title",{extName:this.extName})},n.content=function(){return m("div",{className:"Modal-body"},this.loading?m("div",{className:"ReadmeModal-loading"},m(U,null)):m("div",null,this.readme.content()?m.trust(this.readme.content()):m(Ae,{text:Yr.translator.trans("core.admin.extension.readme.no_readme")})))},n.loadReadme=function(){var t=ue(de().mark((function t(){return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Yr.store.find("extension-readmes",this.name);case 2:this.readme=t.sent,this.loading=!1,m.redraw();case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(rt),_e=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).extension=void 0,e.changingState=!1,e.infoFields={discuss:"fas fa-comment-alt",documentation:"fas fa-book",support:"fas fa-life-ring",website:"fas fa-link",donate:"fas fa-donate",source:"fas fa-code"},e}D(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e);var n=Yr.data.extensions[this.attrs.id];if(!n)return m.route.set(Yr.route("dashboard"));this.extension=n},n.className=function(){return this.extension?this.extension.id+"-Page":""},n.view=function(t){return this.extension?m("div",{className:"ExtensionPage "+this.className()},this.header(),this.isEnabled()?m("div",{className:"ExtensionPage-body"},this.sections(t).toArray()):m("div",{className:"container"},m("h3",{className:"ExtensionPage-subHeader"},Yr.translator.trans("core.admin.extension.enable_to_see")))):null},n.header=function(){var t=this.isEnabled();return[m("div",{className:"ExtensionPage-header"},m("div",{className:"container"},m("div",{className:"ExtensionTitle"},m("span",{className:"ExtensionIcon",style:this.extension.icon},!!this.extension.icon&&R(this.extension.icon.name)),m("div",{className:"ExtensionName"},m("h2",null,this.extension.extra["flarum-extension"].title)),m("div",{className:"ExtensionPage-headerTopItems"},m("ul",null,O(this.topItems().toArray())))),m("div",{className:"helpText"},this.extension.description),m("div",{className:"ExtensionPage-headerItems"},m(ht,{state:this.changingState?!t:t,loading:this.changingState,onchange:this.toggle.bind(this,this.extension.id)},t?Yr.translator.trans("core.admin.extension.enabled"):Yr.translator.trans("core.admin.extension.disabled")),m("aside",{className:"ExtensionInfo"},m("ul",null,O(this.infoItems().toArray()))))))]},n.sections=function(t){var e=new F;return e.add("content",this.content(t)),e.add("permissions",m("div",{className:"ExtensionPage-permissions"},m("div",{className:"ExtensionPage-permissions-header"},m("div",{className:"container"},m("h2",{className:"ExtensionTitle"},Yr.translator.trans("core.admin.extension.permissions_title")))),m("div",{className:"container"},Yr.extensionData.extensionHasPermissions(this.extension.id)?m(Ce,{extensionId:this.extension.id}):m("h3",{className:"ExtensionPage-subHeader"},Yr.translator.trans("core.admin.extension.no_permissions"))))),e},n.content=function(t){var e=Yr.extensionData.getSettings(this.extension.id);return m("div",{className:"ExtensionPage-settings"},m("div",{className:"container"},e?m("div",{className:"Form"},e.map(this.buildSettingComponent.bind(this)),m("div",{className:"Form-group"},this.submitButton())):m("h3",{className:"ExtensionPage-subHeader"},Yr.translator.trans("core.admin.extension.no_settings"))))},n.topItems=function(){var t=this,e=new F;return e.add("version",m("span",{className:"ExtensionVersion"},this.extension.version)),this.isEnabled()||e.add("uninstall",m(W,{icon:"fas fa-trash-alt",className:"Button Button--primary",onclick:function(){confirm(H(Yr.translator.trans("core.admin.extension.confirm_purge")))&&(Yr.request({url:Yr.forum.attribute("apiUrl")+"/extensions/"+t.extension.id,method:"DELETE"}).then((function(){return window.location.reload()})),Yr.modal.show(it))}.bind(this)},Yr.translator.trans("core.admin.extension.purge_button"))),e},n.infoItems=function(){var t,e=this,n=new F,r=this.extension.links;if(null!=(t=r.authors)&&t.length){var i=r.authors.map((function(t){return m(Y,{href:t.link,external:!0,target:"_blank"},t.name)}));n.add("authors",[R("fas fa-user"),m("span",null,Ee(i))])}Object.keys(this.infoFields).map((function(t){r[t]&&n.add(t,m(K,{href:r[t],icon:e.infoFields[t],external:!0,target:"_blank"},Yr.translator.trans("core.admin.extension.info_links."+t)))}));var o=this.extension;return n.add("readme",m(W,{icon:"fab fa-readme",className:"Button Button--text",onclick:function(){return Yr.modal.show(Fe,{extension:o})}},Yr.translator.trans("core.admin.extension.readme.button_label")),10),n},n.toggle=function(){var t=this,e=this.isEnabled();this.changingState=!0,Yr.request({url:Yr.forum.attribute("apiUrl")+"/extensions/"+this.extension.id,method:"PATCH",body:{enabled:!e},errorHandler:this.onerror.bind(this)}).then((function(){e||localStorage.setItem("enabledExtension",t.extension.id),window.location.reload()})),Yr.modal.show(it)},n.isEnabled=function(){return at(this.extension.id)},n.onerror=function(t){var e,n;if(setTimeout((function(){Yr.modal.close()}),300),this.changingState=!1,409!==t.status)throw t;var r=null==(e=t.response)||null==(n=e.errors)?void 0:n[0];r&&Yr.alerts.show({type:"error"},Yr.translator.trans("core.lib.error."+r.code+"_message",{extension:r.extension,extensions:r.extensions.join(", ")}))},e}(St),Te=function(){function t(t,e){this.component=void 0,this.routeName=void 0,this.component=t,this.routeName=e}var e=t.prototype;return e.makeKey=function(){return this.routeName+JSON.stringify(m.route.param())},e.makeAttrs=function(t){return w({},t.attrs,{routeName:this.routeName})},e.onmatch=function(t,e,n){return this.component},e.render=function(t){return[w({},t,{attrs:this.makeAttrs(t),key:this.makeKey()})]},t}(),ke=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.onmatch=function(e,n,r){return Yr.extensionData.getPage(e.id)||t.prototype.onmatch.call(this,e,n,r)},e}(Te);function Se(t){t.routes={dashboard:{path:"/",component:Pt},basics:{path:"/basics",component:It},permissions:{path:"/permissions",component:Zt},appearance:{path:"/appearance",component:oe},mail:{path:"/mail",component:ae},users:{path:"/users",component:xe},extension:{path:"/extension/:id",component:_e,resolverClass:ke}}}ke.extension=null;var Be=["input","select","textarea","a[href]","button","[tabindex]:not(slot)","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])',"details>summary:first-of-type","details"],Pe=Be.join(","),Oe="undefined"==typeof Element,Ie=Oe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,je=!Oe&&Element.prototype.getRootNode?function(t){return t.getRootNode()}:function(t){return t.ownerDocument},Le=function(t,e,n){var r=Array.prototype.slice.apply(t.querySelectorAll(Pe));return e&&Ie.call(t,Pe)&&r.unshift(t),r.filter(n)},Me=function t(e,n,r){for(var i=[],o=Array.from(e);o.length;){var a=o.shift();if("SLOT"===a.tagName){var s=a.assignedElements(),u=t(s.length?s:a.children,!0,r);r.flatten?i.push.apply(i,u):i.push({scope:a,candidates:u})}else{Ie.call(a,Pe)&&r.filter(a)&&(n||!e.includes(a))&&i.push(a);var l=a.shadowRoot||"function"==typeof r.getShadowRoot&&r.getShadowRoot(a),c=!r.shadowRootFilter||r.shadowRootFilter(a);if(l&&c){var d=t(!0===l?a.children:l.children,!0,r);r.flatten?i.push.apply(i,d):i.push({scope:a,candidates:d})}else o.unshift.apply(o,a.children)}}return i},$e=function(t,e){return t.tabIndex<0&&(e||/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||t.isContentEditable)&&isNaN(parseInt(t.getAttribute("tabindex"),10))?0:t.tabIndex},Re=function(t,e){return t.tabIndex===e.tabIndex?t.documentOrder-e.documentOrder:t.tabIndex-e.tabIndex},He=function(t){return"INPUT"===t.tagName},qe=function(t){var e=t.getBoundingClientRect(),n=e.width,r=e.height;return 0===n&&0===r},Ue=function(t,e){return!(e.disabled||function(t){return He(t)&&"hidden"===t.type}(e)||function(t,e){var n=e.displayCheck,r=e.getShadowRoot;if("hidden"===getComputedStyle(t).visibility)return!0;var i=Ie.call(t,"details>summary:first-of-type")?t.parentElement:t;if(Ie.call(i,"details:not([open]) *"))return!0;var o=je(t).host,a=(null==o?void 0:o.ownerDocument.contains(o))||t.ownerDocument.contains(t);if(n&&"full"!==n){if("non-zero-area"===n)return qe(t)}else{if("function"==typeof r){for(var s=t;t;){var u=t.parentElement,l=je(t);if(u&&!u.shadowRoot&&!0===r(u))return qe(t);t=t.assignedSlot?t.assignedSlot:u||l===t.ownerDocument?u:l.host}t=s}if(a)return!t.getClientRects().length}return!1}(e,t)||function(t){return"DETAILS"===t.tagName&&Array.prototype.slice.apply(t.children).some((function(t){return"SUMMARY"===t.tagName}))}(e)||function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var e=t.parentElement;e;){if("FIELDSET"===e.tagName&&e.disabled){for(var n=0;n<e.children.length;n++){var r=e.children.item(n);if("LEGEND"===r.tagName)return!!Ie.call(e,"fieldset[disabled] *")||!r.contains(t)}return!0}e=e.parentElement}return!1}(e))},ze=function(t,e){return!(function(t){return function(t){return He(t)&&"radio"===t.type}(t)&&!function(t){if(!t.name)return!0;var e,n=t.form||je(t),r=function(t){return n.querySelectorAll('input[type="radio"][name="'+t+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)e=r(window.CSS.escape(t.name));else try{e=r(t.name)}catch(t){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",t.message),!1}var i=function(t,e){for(var n=0;n<t.length;n++)if(t[n].checked&&t[n].form===e)return t[n]}(e,t.form);return!i||i===t}(t)}(e)||$e(e)<0||!Ue(t,e))},We=function(t){var e=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},Ge=function t(e){var n=[],r=[];return e.forEach((function(e,i){var o=!!e.scope,a=o?e.scope:e,s=$e(a,o),u=o?t(e.candidates):a;0===s?o?n.push.apply(n,u):n.push(a):r.push({documentOrder:i,tabIndex:s,item:e,isScope:o,content:u})})),r.sort(Re).reduce((function(t,e){return e.isScope?t.push.apply(t,e.content):t.push(e.content),t}),[]).concat(n)},Ve=function(t,e){var n;return n=(e=e||{}).getShadowRoot?Me([t],e.includeContainer,{filter:ze.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:We}):Le(t,e.includeContainer,ze.bind(null,e)),Ge(n)},Ye=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return!1!==Ie.call(t,Pe)&&ze(e,t)},Ke=Be.concat("iframe").join(","),Xe=function(t,e){if(e=e||{},!t)throw new Error("No node provided");return!1!==Ie.call(t,Ke)&&Ue(e,t)};function Je(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Je(Object(n),!0).forEach((function(e){Ze(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ze(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tn,en=(tn=[],{activateTrap:function(t){if(tn.length>0){var e=tn[tn.length-1];e!==t&&e.pause()}var n=tn.indexOf(t);-1===n||tn.splice(n,1),tn.push(t)},deactivateTrap:function(t){var e=tn.indexOf(t);-1!==e&&tn.splice(e,1),tn.length>0&&tn[tn.length-1].unpause()}}),nn=function(t){return setTimeout(t,0)},rn=function(t,e){var n=-1;return t.every((function(t,r){return!e(t)||(n=r,!1)})),n},on=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"function"==typeof t?t.apply(void 0,n):t},an=function(t){return t.target.shadowRoot&&"function"==typeof t.composedPath?t.composedPath()[0]:t.target},sn=function(t,e){var n,r=(null==e?void 0:e.document)||document,i=Qe({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0},e),o={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},a=function(t,e,n){return t&&void 0!==t[e]?t[e]:i[n||e]},s=function(t){return o.containerGroups.findIndex((function(e){var n=e.container,r=e.tabbableNodes;return n.contains(t)||r.find((function(e){return e===t}))}))},u=function(t){var e=i[t];if("function"==typeof e){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];e=e.apply(void 0,o)}if(!0===e&&(e=void 0),!e){if(void 0===e||!1===e)return e;throw new Error("`".concat(t,"` was specified but was not a node, or did not return a node"))}var s=e;if("string"==typeof e&&!(s=r.querySelector(e)))throw new Error("`".concat(t,"` as selector refers to no known node"));return s},l=function(){var t=u("initialFocus");if(!1===t)return!1;if(void 0===t)if(s(r.activeElement)>=0)t=r.activeElement;else{var e=o.tabbableGroups[0];t=e&&e.firstTabbableNode||u("fallbackFocus")}if(!t)throw new Error("Your focus-trap needs to have at least one focusable element");return t},c=function(){if(o.containerGroups=o.containers.map((function(t){var e,n,r=Ve(t,i.tabbableOptions),o=(e=t,(n=(n=i.tabbableOptions)||{}).getShadowRoot?Me([e],n.includeContainer,{filter:Ue.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):Le(e,n.includeContainer,Ue.bind(null,n)));return{container:t,tabbableNodes:r,focusableNodes:o,firstTabbableNode:r.length>0?r[0]:null,lastTabbableNode:r.length>0?r[r.length-1]:null,nextTabbableNode:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=o.findIndex((function(e){return e===t}));if(!(n<0))return e?o.slice(n+1).find((function(t){return Ye(t,i.tabbableOptions)})):o.slice(0,n).reverse().find((function(t){return Ye(t,i.tabbableOptions)}))}}})),o.tabbableGroups=o.containerGroups.filter((function(t){return t.tabbableNodes.length>0})),o.tabbableGroups.length<=0&&!u("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},d=function t(e){!1!==e&&e!==r.activeElement&&(e&&e.focus?(e.focus({preventScroll:!!i.preventScroll}),o.mostRecentlyFocusedNode=e,function(t){return t.tagName&&"input"===t.tagName.toLowerCase()&&"function"==typeof t.select}(e)&&e.select()):t(l()))},f=function(t){var e=u("setReturnFocus",t);return e||!1!==e&&t},p=function(t){var e=an(t);s(e)>=0||(on(i.clickOutsideDeactivates,t)?n.deactivate({returnFocus:i.returnFocusOnDeactivate&&!Xe(e,i.tabbableOptions)}):on(i.allowOutsideClick,t)||t.preventDefault())},h=function(t){var e=an(t),n=s(e)>=0;n||e instanceof Document?n&&(o.mostRecentlyFocusedNode=e):(t.stopImmediatePropagation(),d(o.mostRecentlyFocusedNode||l()))},m=function(t){if(function(t){return"Escape"===t.key||"Esc"===t.key||27===t.keyCode}(t)&&!1!==on(i.escapeDeactivates,t))return t.preventDefault(),void n.deactivate();(function(t){return"Tab"===t.key||9===t.keyCode})(t)&&function(t){var e=an(t);c();var n=null;if(o.tabbableGroups.length>0){var r=s(e),a=r>=0?o.containerGroups[r]:void 0;if(r<0)n=t.shiftKey?o.tabbableGroups[o.tabbableGroups.length-1].lastTabbableNode:o.tabbableGroups[0].firstTabbableNode;else if(t.shiftKey){var l=rn(o.tabbableGroups,(function(t){var n=t.firstTabbableNode;return e===n}));if(l<0&&(a.container===e||Xe(e,i.tabbableOptions)&&!Ye(e,i.tabbableOptions)&&!a.nextTabbableNode(e,!1))&&(l=r),l>=0){var f=0===l?o.tabbableGroups.length-1:l-1;n=o.tabbableGroups[f].lastTabbableNode}}else{var p=rn(o.tabbableGroups,(function(t){var n=t.lastTabbableNode;return e===n}));if(p<0&&(a.container===e||Xe(e,i.tabbableOptions)&&!Ye(e,i.tabbableOptions)&&!a.nextTabbableNode(e))&&(p=r),p>=0){var h=p===o.tabbableGroups.length-1?0:p+1;n=o.tabbableGroups[h].firstTabbableNode}}}else n=u("fallbackFocus");n&&(t.preventDefault(),d(n))}(t)},v=function(t){var e=an(t);s(e)>=0||on(i.clickOutsideDeactivates,t)||on(i.allowOutsideClick,t)||(t.preventDefault(),t.stopImmediatePropagation())},g=function(){if(o.active)return en.activateTrap(n),o.delayInitialFocusTimer=i.delayInitialFocus?nn((function(){d(l())})):d(l()),r.addEventListener("focusin",h,!0),r.addEventListener("mousedown",p,{capture:!0,passive:!1}),r.addEventListener("touchstart",p,{capture:!0,passive:!1}),r.addEventListener("click",v,{capture:!0,passive:!1}),r.addEventListener("keydown",m,{capture:!0,passive:!1}),n},y=function(){if(o.active)return r.removeEventListener("focusin",h,!0),r.removeEventListener("mousedown",p,!0),r.removeEventListener("touchstart",p,!0),r.removeEventListener("click",v,!0),r.removeEventListener("keydown",m,!0),n};return(n={get active(){return o.active},get paused(){return o.paused},activate:function(t){if(o.active)return this;var e=a(t,"onActivate"),n=a(t,"onPostActivate"),i=a(t,"checkCanFocusTrap");i||c(),o.active=!0,o.paused=!1,o.nodeFocusedBeforeActivation=r.activeElement,e&&e();var s=function(){i&&c(),g(),n&&n()};return i?(i(o.containers.concat()).then(s,s),this):(s(),this)},deactivate:function(t){if(!o.active)return this;var e=Qe({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},t);clearTimeout(o.delayInitialFocusTimer),o.delayInitialFocusTimer=void 0,y(),o.active=!1,o.paused=!1,en.deactivateTrap(n);var r=a(e,"onDeactivate"),s=a(e,"onPostDeactivate"),u=a(e,"checkCanReturnFocus"),l=a(e,"returnFocus","returnFocusOnDeactivate");r&&r();var c=function(){nn((function(){l&&d(f(o.nodeFocusedBeforeActivation)),s&&s()}))};return l&&u?(u(f(o.nodeFocusedBeforeActivation)).then(c,c),this):(c(),this)},pause:function(){return o.paused||!o.active||(o.paused=!0,y()),this},unpause:function(){return o.paused&&o.active?(o.paused=!1,c(),g(),this):this},updateContainerElements:function(t){var e=[].concat(t).filter(Boolean);return o.containers=e.map((function(t){return"string"==typeof t?r.querySelector(t):t})),o.active&&c(),this}}).updateContainerElements(t),n};function un(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e[1]=w({escapeDeactivates:!1},e[1]),sn.apply(void 0,e)}var ln=!1;if("undefined"!=typeof window){var cn={get passive(){ln=!0}};window.addEventListener("testPassive",null,cn),window.removeEventListener("testPassive",null,cn)}var dn,fn="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||"MacIntel"===window.navigator.platform&&window.navigator.maxTouchPoints>1),pn=[],hn=!1,mn=-1,vn=void 0,gn=void 0,yn=void 0,bn=function(t){return pn.some((function(e){return!(!e.options.allowTouchMove||!e.options.allowTouchMove(t))}))},Dn=function(t){var e=t||window.event;return!!bn(e.target)||e.touches.length>1||(e.preventDefault&&e.preventDefault(),!1)},wn=function(){fn&&(pn.forEach((function(t){t.targetElement.ontouchstart=null,t.targetElement.ontouchmove=null})),hn&&(document.removeEventListener("touchmove",Dn,ln?{passive:!1}:void 0),hn=!1),mn=-1),fn?function(){if(void 0!==gn){var t=-parseInt(document.body.style.top,10),e=-parseInt(document.body.style.left,10);document.body.style.position=gn.position,document.body.style.top=gn.top,document.body.style.left=gn.left,window.scrollTo(e,t),gn=void 0}}():(void 0!==yn&&(document.body.style.paddingRight=yn,yn=void 0),void 0!==vn&&(document.body.style.overflow=vn,vn=void 0)),pn=[]},xn=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).focusTrap=void 0,e.lastSetFocusTrap=void 0,e.modalClosing=!1,e.keyUpListener=null,e}D(e,t);var n=e.prototype;return n.view=function(t){var e=this;return m("[",null,this.attrs.state.modalList.map((function(t,n){var r=null==t?void 0:t.componentClass;return m("div",{key:t.key,className:"ModalManager modal","data-modal-key":t.key,"data-modal-number":n,role:"dialog","aria-modal":"true",style:{"--modal-number":n},"aria-hidden":e.attrs.state.modal!==t&&"true"},!!r&&[m(r,Object.assign({key:t.key},t.attrs,{animateShow:e.animateShow.bind(e),animateHide:e.animateHide.bind(e),state:e.attrs.state})),m("div",{key:t.key,className:"ModalManager-invisibleBackdrop",onclick:e.handlePossibleBackdropClick.bind(e)})])})),this.attrs.state.backdropShown&&m("div",{className:"Modal-backdrop backdrop",ontransitionend:this.onBackdropTransitionEnd.bind(this),"data-showing":!!this.attrs.state.modalList.length,style:{"--modal-count":this.attrs.state.modalList.length}}))},n.oncreate=function(e){t.prototype.oncreate.call(this,e),this.keyUpListener=this.handleEscPress.bind(this),document.body.addEventListener("keyup",this.keyUpListener)},n.onbeforeremove=function(e){t.prototype.onbeforeremove.call(this,e),this.keyUpListener&&document.body.removeEventListener("keyup",this.keyUpListener),this.keyUpListener=null},n.onupdate=function(e){var n=this;t.prototype.onupdate.call(this,e),requestAnimationFrame((function(){try{var t,e;if(!n.attrs.state.isModalOpen())return null==(e=document.getElementById("app"))||e.setAttribute("aria-hidden","false"),null==n.focusTrap.deactivate||n.focusTrap.deactivate(),void wn();null==(t=document.getElementById("app"))||t.setAttribute("aria-hidden","true");var r=n.attrs.state.modal.key;n.focusTrap&&n.lastSetFocusTrap!==r&&(null==n.focusTrap.deactivate||n.focusTrap.deactivate(),wn()),n.activeDialogElement&&n.lastSetFocusTrap!==r&&(n.focusTrap=un(n.activeDialogElement,{allowOutsideClick:!0}),null==n.focusTrap.activate||n.focusTrap.activate(),function(t,e){if(t){if(!pn.some((function(e){return e.targetElement===t}))){var n={targetElement:t,options:e||{}};pn=[].concat(function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(pn),[n]),fn?window.requestAnimationFrame((function(){if(void 0===gn){gn={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var t=window,e=t.scrollY,n=t.scrollX,r=t.innerHeight;document.body.style.position="fixed",document.body.style.top=-e,document.body.style.left=-n,setTimeout((function(){return window.requestAnimationFrame((function(){var t=r-window.innerHeight;t&&e>=r&&(document.body.style.top=-(e+t))}))}),300)}})):function(t){if(void 0===yn){var e=!!t&&!0===t.reserveScrollBarGap,n=window.innerWidth-document.documentElement.clientWidth;if(e&&n>0){var r=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);yn=document.body.style.paddingRight,document.body.style.paddingRight=r+n+"px"}}void 0===vn&&(vn=document.body.style.overflow,document.body.style.overflow="hidden")}(e),fn&&(t.ontouchstart=function(t){1===t.targetTouches.length&&(mn=t.targetTouches[0].clientY)},t.ontouchmove=function(e){1===e.targetTouches.length&&function(t,e){var n=t.targetTouches[0].clientY-mn;!bn(t.target)&&(e&&0===e.scrollTop&&n>0||function(t){return!!t&&t.scrollHeight-t.scrollTop<=t.clientHeight}(e)&&n<0?Dn(t):t.stopPropagation())}(e,t)},hn||(document.addEventListener("touchmove",Dn,ln?{passive:!1}:void 0),hn=!0))}}else console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.")}(n.activeDialogManagerElement,{reserveScrollBarGap:!0})),n.lastSetFocusTrap=r}catch(t){}}))},n.animateShow=function(t){var e=this;void 0===t&&(t=function(){}),this.attrs.state.modal&&(this.activeDialogElement.addEventListener("transitionend",(function(){t()}),{once:!0}),requestAnimationFrame((function(){e.activeDialogElement.classList.add("in")})))},n.animateHide=function(t){var e=this;void 0===t&&(t=function(){}),this.modalClosing||(this.modalClosing=!0,this.activeDialogElement.addEventListener("transitionend",(function(){e.modalClosing=!1,e.attrs.state.close(),t()}),{once:!0}),this.activeDialogElement.classList.remove("in"),this.activeDialogElement.classList.add("out"))},n.handleEscPress=function(t){if(this.attrs.state.modal){var e=this.attrs.state.modal.componentClass.dismissibleOptions;"Escape"===t.key&&e.viaEscKey&&(t.preventDefault(),this.animateHide())}},n.handlePossibleBackdropClick=function(t){this.attrs.state.modal&&this.attrs.state.modal.componentClass.dismissibleOptions.viaBackdropClick&&this.animateHide()},n.onBackdropTransitionEnd=function(t){"opacity"===t.propertyName&&null===t.currentTarget.getAttribute("data-showing")&&(this.attrs.state.backdropShown=!1,m.redraw())},C(e,[{key:"activeDialogElement",get:function(){var t;return document.body.querySelector('.ModalManager[data-modal-key="'+(null==(t=this.attrs.state.modal)?void 0:t.key)+'"] .Modal')}},{key:"activeDialogManagerElement",get:function(){var t;return document.body.querySelector('.ModalManager[data-modal-key="'+(null==(t=this.attrs.state.modal)?void 0:t.key)+'"]')}}]),e}(x),En=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.state=this.attrs.state},n.view=function(){var t=this,e=this.state.getActiveAlerts();return m("div",{className:"AlertManager"},Object.keys(e).map(Number).map((function(n){var r=e[n],i="error"===r.attrs.type;return m("div",{className:"AlertManager-alert",role:"alert","aria-live":i?"assertive":"polite"},m(r.componentClass,Object.assign({},r.attrs,{ondismiss:t.state.dismiss.bind(t.state,n)}),r.children))})))},e}(x),Cn=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.className=function(){return"RequestErrorModal Modal--large"},n.title=function(){return!!this.attrs.error.xhr&&this.attrs.error.xhr.status+" "+this.attrs.error.xhr.statusText},n.content=function(){var t,e=this.attrs,n=e.error,r=e.formattedError;return t=r.length?r.join("\n\n"):n.response?JSON.stringify(n.response,null,2):n.responseText,m("div",{className:"Modal-body"},m("pre",null,this.attrs.error.options.method," ",this.attrs.error.options.url,m("br",null),m("br",null),t))},e}(rt),An=n(5387),Nn=n.n(An),Fn=n(1904),_n=n.n(Fn),Tn=n(8213),kn=n.n(Tn),Sn=n(2061),Bn=n.n(Sn),Pn=n(8974),On=n.n(Pn),In=n(9767),jn=n.n(In),Ln=n(402),Mn=n.n(Ln);function $n(t){return t.reduce((function(t,e){return t.concat(Array.isArray(e)?$n(e):e)}),[])}function Rn(t){var e={};return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r.length?r.map((function(t){return null===t?"null":void 0===t?"undefined":"function"==typeof t?t.toString():t instanceof Date?t.toISOString():JSON.stringify(t)})).join("|"):"_(no-args)_";if(Object.prototype.hasOwnProperty.call(e,o))return e[o];var a=t.apply(void 0,r);return e[o]=a,a}}function Hn(t){for(var e=function(t){return/\s/.test(t)},n=[],r={},i=0,o=null,a=!1,s=0;s<t.length;){if(a&&(e(t[s])||"{"===t[s]))a=!1,o=t.slice(i,s),"{"===t[s]&&s--;else if(!a&&!e(t[s])){var u="{"===t[s];if(o&&u){var l=qn(t,s);if(-1===l)throw new Error('Unbalanced curly braces in string: "'.concat(t,'"'));r[o]=t.slice(s+1,l),s=l,o=null}else o&&(n.push(o),o=null),a=!0,i=s}s++}return a&&(o=t.slice(i)),o&&n.push(o),{args:n,cases:r}}function qn(t,e){for(var n=0,r=e+1;r<t.length;r++){var i=t.charAt(r);if("}"===i){if(0===n)return r;n--}else"{"===i&&n++}return-1}function Un(t){return zn(t.slice(1,-1),",",3)}function zn(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(!t)return r;if(1===n)return r.push(t),r;var i=t.indexOf(e);if(-1===i)return r.push(t),r;var o=t.substring(0,i).trim(),a=t.substring(i+e.length+1).trim();return r.push(o),zn(a,e,n-1,r)}function Wn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Wn(Object(n),!0).forEach((function(e){Mn()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Vn=0,Yn="other";function Kn(t,e){for(var n=0,r="",i=0,o={};n<t.length;){if("#"!==t[n]||i)r+=t[n];else{var a="__hashToken".concat(Vn++);r+="{".concat(a,", number}"),o[a]=e}"{"===t[n]?i++:"}"===t[n]&&i--,n++}return{caseBody:r,numberValues:o}}function Xn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=Hn(e),a=o.args,s=o.cases,u=parseInt(t);a.forEach((function(t){t.startsWith("offset:")&&(u-=parseInt(t.slice("offset:".length)))}));var l=[];if("PluralRules"in Intl){void 0!==dn&&dn.resolvedOptions().locale===n||(dn=new Intl.PluralRules(n));var c=dn.select(u);c!==Yn&&l.push(c)}1===u&&l.push("one"),l.push("=".concat(u),Yn);for(var d=0;d<l.length;d++){var f=l[d];if(f in s){var p=Kn(s[f],u),h=p.caseBody,m=p.numberValues;return i(h,Gn(Gn({},r),m))}}return t}var Jn="other";function Qn(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0,i=Hn(e),o=i.cases;return t in o?r(o[t],n):Jn in o?r(o.other,n):t}function Zn(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=[],o=function(r,o,a,s,u,l){if(o)return{break:!0};var c=tr(t,a,s,u);if(!c)return i;var d=c.segmentIndex===s,f=t[c.segmentIndex],p=[];if(d)p.push(r.slice(u+1,c.segmentStart));else{p.push(r.slice(u+1));for(var h=s+1;h<c.segmentIndex;h++)p.push(t[h]);p.push(f.slice(0,c.segmentStart))}return i.push(r.slice(0,l)),i.push(n(a,e,Zn(p.filter((function(t){return""!==t})),e,n))),t.splice(c.segmentIndex+1,0,f.slice(c.segmentEnd+1)),{processedSegment:!0,newSegmentIndex:c.segmentIndex,break:!0}};return er(t,0,0,i,o),i.filter((function(t){return""!==t})).map((function(t,e){return r.includes(e)?t:rr(t)}))}function tr(t,e,n,r){var i,o=1;return er(t,n,r,[],(function(t,n,r,a,s,u){return r===e&&(n?o--:o++,0===o)?(i={segmentIndex:a,segmentStart:u,segmentEnd:s},{exit:!0}):{exit:!1}})),i}function er(t,e,n,r,i){for(var o,a=e;a<t.length;a++){var s=t[a];if("string"==typeof s){for(var u=!1,l=null,c=!1,d=!1,f=a===e?n:0;f<s.length;f++)if(c||"<"!==s[f])if(c&&">"===s[f]){var p=s.slice(l+1+u,f),h=i(s,u,p,a,f,l);if(h.exit)return;if(h.newSegmentIndex&&(a=h.newSegmentIndex),h.processedSegment&&(d=!0),h.break)break;u=!1,l=null,c=!1}else c&&(o=s[f],!/[a-zA-Z-_]/.test(o))&&(u=!1,l=null,c=!1);else l=f,c=!0,"/"===s[f+1]&&(u=!0,f++);d||r.push(s)}else r.push(s)}}function nr(t){return Object.keys(t).reduce((function(e,n){return e[n]=ir(t[n]),e}),{})}function rr(t){return"string"!=typeof t?t:t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#039;/g,"'").replace(/&amp;/g,"&")}function ir(t){return"string"==typeof t||t instanceof String?t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"):Array.isArray(t)?t.map(ir):t}function or(t,e,n){return"<".concat(t,">").concat(rr(n),"</").concat(t,">")}var ar=function(t){Bn()(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=jn()(e);if(n){var i=jn()(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return On()(this,t)});function i(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return _n()(this,i),(e=r.call(this,t,n)).richHandler=o||or,e}return kn()(i,[{key:"rich",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=nr(e),r=$n(this.process(t,n)),i=Math.random().toString(36)+Math.random().toString(36)+Math.random().toString(36),o=Object.fromEntries(Object.entries(e).map((function(t){var e=Nn()(t,2),n=e[0];return e[1],[n,i]}))),a=$n(this.process(t,o)),s=Zn(a,o,(function(){return i})),u=s.map((function(t,e){return t===i?null:e})).filter((function(t){return null!==t}));return Zn(r,n,this.richHandler,u)}}]),i}(function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_n()(this,t),Mn()(this,"format",Rn((function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return $n(n.process(t,e)).join("")}))),this.locale=e,this.typeHandlers=r}return kn()(t,[{key:"process",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return[];var n=t.indexOf("{");if(-1!==n){var r=qn(t,n);if(-1===r)throw new Error('Unbalanced curly braces in string: "'.concat(t,'"'));var i=t.substring(n,r+1);if(i){var o=[],a=t.substring(0,n);a&&o.push(a);var s=Un(i),u=Nn()(s,3),l=u[0],c=u[1],d=u[2],f=e[l];null==f&&(f="");var p=c&&this.typeHandlers[c];o.push(p?p(f,d,this.locale,e,this.process.bind(this)):f);var h=t.substring(r+1);return h&&o.push(this.process(h,e)),o}}return[t]}}]),t}());function sr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ur(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?sr(Object(n),!0).forEach((function(e){Mn()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lr(t,e,n){var r=e[t]||m(t),i=rr(m.fragment(n).children);return ur(ur({},r),{},{children:i})}var cr=function(){function t(){this.translations={},this.formatter=new ar(null,this.formatterTypeHandlers(),lr)}var e=t.prototype;return e.setLocale=function(t){this.formatter.locale=t},e.getLocale=function(){return this.formatter.locale},e.addTranslations=function(t){Object.assign(this.translations,t)},e.formatterTypeHandlers=function(){return{plural:Xn,select:Qn}},e.preprocessParameters=function(t){if("user"in t){var e=G(t,"user");t.username||(t.username=J(e))}return t},e.trans=function(t,e){void 0===e&&(e={});var n=this.translations[t];return n?(e=this.preprocessParameters(e),this.formatter.rich(n,e)):t},t}();function dr(t){return Array.isArray(t.data)}var fr=function(){function t(t){this.data={},this.models=void 0,this.models=t}var e=t.prototype;return e.pushPayload=function(t){var e=this;t.included&&t.included.map(this.pushObject.bind(this));var n=t.data instanceof Array?t.data.map((function(t){return e.pushObject(t,!1)})):this.pushObject(t.data,!1);return n.payload=t,n},e.pushObject=function(t,e){if(void 0===e&&(e=!0),!this.models[t.type])return e||setTimeout((function(){return M("Pushing object of type `"+t.type+"` not allowed, as type not yet registered in the store.","3206")})),null;var n=this.data[t.type]=this.data[t.type]||{},r=n[t.id],i=r?r.pushData(t):this.createRecord(t.type,t);return n[t.id]=i,i.exists=!0,i},e.find=function(){var t=ue(de().mark((function t(e,n,r,i){var o,a,s=this;return de().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===r&&(r={}),void 0===i&&(i={}),o=r,a=v.forum.attribute("apiUrl")+"/"+e,n instanceof Array?a+="?filter[id]="+n.join(","):"object"==typeof n?o=n:n&&(a+="/"+n),t.abrupt("return",v.request(w({method:"GET",url:a,params:o},i)).then((function(t){return dr(t),s.pushPayload(t)})));case 6:case"end":return t.stop()}}),t)})));return function(e,n,r,i){return t.apply(this,arguments)}}(),e.getById=function(t,e){var n,r;return null==(n=this.data)||null==(r=n[t])?void 0:r[e]},e.getBy=function(t,e,n){return this.all(t).filter((function(t){return t[e]()===n}))[0]},e.all=function(t){var e=this.data[t];return e?Object.values(e):[]},e.remove=function(t){delete this.data[t.data.type][t.id()]},e.createRecord=function(t,e){return void 0===e&&(e={}),e.type=e.type||t,new this.models[t](e,this)},t}(),pr=function(){function t(t,e){this.user=void 0,this.csrfToken=void 0,this.user=t,this.csrfToken=e}var e=t.prototype;return e.login=function(t,e){return void 0===e&&(e={}),v.request(w({method:"POST",url:v.forum.attribute("baseUrl")+"/login",body:t},e))},e.logout=function(){window.location.href=v.forum.attribute("baseUrl")+"/logout?token="+this.csrfToken},t}(),hr=function(){function t(){var t=this;this.focusTrap=void 0,this.appElement=void 0,this.resizeHandler=function(e){!e.matches&&t.isOpen()&&t.hide()}.bind(this),this.drawerAvailableMediaQuery=void 0,document.getElementById("content").addEventListener("click",(function(e){t.isOpen()&&(e.preventDefault(),t.hide())})),this.appElement=document.getElementById("app"),this.focusTrap=un("#drawer",{allowOutsideClick:!0,clickOutsideDeactivates:!0}),this.drawerAvailableMediaQuery=window.matchMedia("(max-width: "+getComputedStyle(document.documentElement).getPropertyValue("--screen-phone-max")+")")}var e=t.prototype;return e.isOpen=function(){return this.appElement.classList.contains("drawerOpen")},e.hide=function(){var t;if(this.focusTrap.deactivate(),this.drawerAvailableMediaQuery.removeListener(this.resizeHandler),this.isOpen()){var e=$("#drawer");e.css("visibility","visible").one("transitionend",(function(){return e.css("visibility","")})),this.appElement.classList.remove("drawerOpen"),null==(t=this.$backdrop)||null==t.remove||t.remove()}},e.show=function(){var t=this;this.appElement.classList.add("drawerOpen"),this.drawerAvailableMediaQuery.addListener(this.resizeHandler),this.$backdrop=$("<div/>").addClass("drawer-backdrop fade").appendTo("body").on("click",this.hide.bind(this)),requestAnimationFrame((function(){t.$backdrop.addClass("in"),t.focusTrap.activate()}))},t}();function mr(t,e){void 0===e&&(e="");var n={};for(var r in t){var i=t[r];if("resolver"in i)n[e+i.path]=i.resolver;else{if(!("component"in i))throw new Error("Either a resolver or a component must be provided for the route ["+r+"]");var o="resolverClass"in i?i.resolverClass:Te;n[e+i.path]=new o(i.component,r)}}return n}var vr=function(t,e,n,r){this.status=void 0,this.options=void 0,this.xhr=void 0,this.responseText=void 0,this.response=void 0,this.alert=void 0,this.status=t,this.responseText=e,this.options=n,this.xhr=r;try{this.response=JSON.parse(null!=e?e:"null")}catch(t){this.response=null}this.alert=null},gr=function(){function t(t){this.callback=t,this.ticking=!1}var e=t.prototype;return e.loop=function(){var t=this;this.ticking||(requestAnimationFrame((function(){t.update(),t.ticking=!1})),this.ticking=!0)},e.update=function(){this.callback(window.pageYOffset)},e.start=function(){this.active||window.addEventListener("scroll",this.active=this.loop.bind(this),{passive:!0})},e.stop=function(){window.removeEventListener("scroll",this.active),this.active=null},t}(),yr=n(4757),br=n.n(yr);function Dr(t){var e=br()(t),n=br()();return e.isAfter(n)&&(e=n),e.diff(br()())<-2592e6?e.year()===br()().year()?e.format(H(v.translator.trans("core.lib.datetime_formats.humanTimeShort"))):e.format(H(v.translator.trans("core.lib.datetime_formats.humanTimeLong"))):e.fromNow()}function wr(){$("[data-humantime]").each((function(){var t=$(this),e=Dr(t.attr("datetime"));t.html(e)}))}function xr(){setInterval(wr,1e4)}function Er(t,e,n){(Array.isArray(e)?e:[e]).forEach((function(e){var r=t[e];t[e]=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var o=r?r.apply(this,e):void 0;return n.apply(this,[o].concat(e)),o},Object.assign(t[e],r)}))}function Cr(t,e,n){(Array.isArray(e)?e:[e]).forEach((function(e){var r=t[e];t[e]=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return n.apply(this,[r.bind(this)].concat(e))},Object.assign(t[e],r)}))}var Ar=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.apiEndpoint=function(){return"/"},e}(Ut),Nr=n(2898),Fr=n.n(Nr);function _r(t){for(var e=0,n=0;n<t.length;n++)e+=t.charCodeAt(n);var r=function(t,e,n){var r,i,o,a=Math.floor(6*t),s=6*t-a,u=.63,l=n*(1-.3*s),c=n*(1-.3*(1-s));switch(a%6){case 0:r=n,i=c,o=u;break;case 1:r=l,i=n,o=u;break;case 2:r=u,i=n,o=c;break;case 3:r=u,i=l,o=n;break;case 4:r=c,i=u,o=n;break;case 5:r=n,i=u,o=l}return{r:Math.floor(255*r),g:Math.floor(255*i),b:Math.floor(255*o)}}(e%360/360,0,.9);return""+r.r.toString(16)+r.g.toString(16)+r.b.toString(16)}function Tr(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r,i=e.slice(0,-1),o=e.slice(-1)[0],a={};return function(){var t=this,e=!1;return i.forEach((function(n){var r=t[n],i="function"==typeof r?r.call(t):r;a[n]!==i&&(e=!0,a[n]=i)})),e&&(r=o.apply(this,i.map((function(t){return a[t]})))),r}}var kr=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).avatarColor=null,e}D(e,t);var n=e.prototype;return n.username=function(){return Ut.attribute("username").call(this)},n.slug=function(){return Ut.attribute("slug").call(this)},n.displayName=function(){return Ut.attribute("displayName").call(this)},n.email=function(){return Ut.attribute("email").call(this)},n.isEmailConfirmed=function(){return Ut.attribute("isEmailConfirmed").call(this)},n.password=function(){return Ut.attribute("password").call(this)},n.avatarUrl=function(){return Ut.attribute("avatarUrl").call(this)},n.preferences=function(){return Ut.attribute("preferences").call(this)},n.groups=function(){return Ut.hasMany("groups").call(this)},n.isAdmin=function(){return Ut.attribute("isAdmin").call(this)},n.joinTime=function(){return Ut.attribute("joinTime",Ut.transformDate).call(this)},n.lastSeenAt=function(){return Ut.attribute("lastSeenAt",Ut.transformDate).call(this)},n.markedAllAsReadAt=function(){return Ut.attribute("markedAllAsReadAt",Ut.transformDate).call(this)},n.unreadNotificationCount=function(){return Ut.attribute("unreadNotificationCount").call(this)},n.newNotificationCount=function(){return Ut.attribute("newNotificationCount").call(this)},n.discussionCount=function(){return Ut.attribute("discussionCount").call(this)},n.commentCount=function(){return Ut.attribute("commentCount").call(this)},n.canEdit=function(){return Ut.attribute("canEdit").call(this)},n.canEditCredentials=function(){return Ut.attribute("canEditCredentials").call(this)},n.canEditGroups=function(){return Ut.attribute("canEditGroups").call(this)},n.canDelete=function(){return Ut.attribute("canDelete").call(this)},n.color=function(){var t=this;return Tr("displayName","avatarUrl","avatarColor",(function(e,n,r){return r?"rgb("+r.join(", ")+")":n?(t.calculateAvatarColor(),""):"#"+_r(e)})).call(this)},n.isOnline=function(){return dayjs().subtract(5,"minutes").isBefore(this.lastSeenAt())},n.badges=function(){var t=new F,e=this.groups();return e&&e.forEach((function(e){t.add("group"+(null==e?void 0:e.id()),m(qt,{group:e}))})),t},n.calculateAvatarColor=function(){var t,e=new Image,n=this;e.addEventListener("load",(function(){try{var t=new(Fr());n.avatarColor=t.getColor(this)}catch(t){if(!(t instanceof TypeError))throw t;n.avatarColor=[255,255,255]}n.freshness=new Date,m.redraw()})),e.crossOrigin="anonymous",e.src=null!=(t=this.avatarUrl())?t:""},n.savePreferences=function(t){var e=this.preferences();return Object.assign(null!=e?e:{},t),this.save({preferences:e})},e}(Ut),Sr=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.title=function(){return Ut.attribute("title").call(this)},n.slug=function(){return Ut.attribute("slug").call(this)},n.createdAt=function(){return Ut.attribute("createdAt",Ut.transformDate).call(this)},n.user=function(){return Ut.hasOne("user").call(this)},n.firstPost=function(){return Ut.hasOne("firstPost").call(this)},n.lastPostedAt=function(){return Ut.attribute("lastPostedAt",Ut.transformDate).call(this)},n.lastPostedUser=function(){return Ut.hasOne("lastPostedUser").call(this)},n.lastPost=function(){return Ut.hasOne("lastPost").call(this)},n.lastPostNumber=function(){return Ut.attribute("lastPostNumber").call(this)},n.commentCount=function(){return Ut.attribute("commentCount").call(this)},n.replyCount=function(){return Tr("commentCount",(function(t){var e;return Math.max(0,(null!=(e=t)?e:0)-1)})).call(this)},n.posts=function(){return Ut.hasMany("posts").call(this)},n.mostRelevantPost=function(){return Ut.hasOne("mostRelevantPost").call(this)},n.lastReadAt=function(){return Ut.attribute("lastReadAt",Ut.transformDate).call(this)},n.lastReadPostNumber=function(){return Ut.attribute("lastReadPostNumber").call(this)},n.isUnread=function(){return Tr("unreadCount",(function(t){return!!t})).call(this)},n.isRead=function(){return Tr("unreadCount",(function(t){return!(!v.session.user||t)})).call(this)},n.hiddenAt=function(){return Ut.attribute("hiddenAt",Ut.transformDate).call(this)},n.hiddenUser=function(){return Ut.hasOne("hiddenUser").call(this)},n.isHidden=function(){return Tr("hiddenAt",(function(t){return!!t})).call(this)},n.canReply=function(){return Ut.attribute("canReply").call(this)},n.canRename=function(){return Ut.attribute("canRename").call(this)},n.canHide=function(){return Ut.attribute("canHide").call(this)},n.canDelete=function(){return Ut.attribute("canDelete").call(this)},n.removePost=function(t){var e=this.rawRelationship("posts");e&&e.some((function(n,r){return t===n.id&&(e.splice(r,1),!0)}))},n.unreadCount=function(){var t,e,n,r=v.session.user;if(r&&(null!=(t=null==(e=r.markedAllAsReadAt())?void 0:e.getTime())?t:0)<(null==(n=this.lastPostedAt())?void 0:n.getTime())){var i,o,a=Math.max(0,(null!=(i=this.lastPostNumber())?i:0)-(this.lastReadPostNumber()||0));return Math.min(a,null!=(o=this.commentCount())?o:0)}return 0},n.badges=function(){var t=new F;return this.isHidden()&&t.add("hidden",m(Ht,{type:"hidden",icon:"fas fa-trash",label:v.translator.trans("core.lib.badge.hidden_tooltip")})),t},n.postIds=function(){var t,e;return null!=(t=null==(e=this.rawRelationship("posts"))?void 0:e.map((function(t){return t.id})))?t:[]},e}(Ut),Br=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.number=function(){return Ut.attribute("number").call(this)},n.discussion=function(){return Ut.hasOne("discussion").call(this)},n.createdAt=function(){return Ut.attribute("createdAt",Ut.transformDate).call(this)},n.user=function(){return Ut.hasOne("user").call(this)},n.contentType=function(){return Ut.attribute("contentType").call(this)},n.content=function(){return Ut.attribute("content").call(this)},n.contentHtml=function(){return Ut.attribute("contentHtml").call(this)},n.renderFailed=function(){return Ut.attribute("renderFailed").call(this)},n.contentPlain=function(){return Tr("contentHtml",(function(t){return"string"==typeof t?ge(t):t})).call(this)},n.editedAt=function(){return Ut.attribute("editedAt",Ut.transformDate).call(this)},n.editedUser=function(){return Ut.hasOne("editedUser").call(this)},n.isEdited=function(){return Tr("editedAt",(function(t){return!!t})).call(this)},n.hiddenAt=function(){return Ut.attribute("hiddenAt",Ut.transformDate).call(this)},n.hiddenUser=function(){return Ut.hasOne("hiddenUser").call(this)},n.isHidden=function(){return Tr("hiddenAt",(function(t){return!!t})).call(this)},n.canEdit=function(){return Ut.attribute("canEdit").call(this)},n.canHide=function(){return Ut.attribute("canHide").call(this)},n.canDelete=function(){return Ut.attribute("canDelete").call(this)},e}(Ut),Pr=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.contentType=function(){return Ut.attribute("contentType").call(this)},n.content=function(){return Ut.attribute("content").call(this)},n.createdAt=function(){return Ut.attribute("createdAt",Ut.transformDate).call(this)},n.isRead=function(){return Ut.attribute("isRead").call(this)},n.user=function(){return Ut.hasOne("user").call(this)},n.fromUser=function(){return Ut.hasOne("fromUser").call(this)},n.subject=function(){return Ut.hasOne("subject").call(this)},e}(Ut),Or=function(){function t(){this.modal=null,this.modalList=[],this.backdropShown=!1,this.key=0}var e=t.prototype;return e.show=function(t,e,n){var r=this;if(void 0===e&&(e={}),void 0===n&&(n=!1),!(t.prototype instanceof rt)){var i="The ModalManager can only show Modals.";throw console.error(i),new Error(i)}this.backdropShown=!0,m.redraw.sync(),requestAnimationFrame((function(){r.modal={componentClass:t,attrs:e,key:r.key++},n?r.modalList.push(r.modal):r.modalList=[r.modal],m.redraw()}))},e.close=function(){this.modal&&(this.modalList.length>1?(this.modalList.pop(),this.modal=this.modalList[this.modalList.length-1]):(this.modal=null,this.modalList=[]),m.redraw())},e.isModalOpen=function(){return!!this.modal},t}(),Ir=function(){function t(){this.activeAlerts={},this.alertId=0}var e=t.prototype;return e.getActiveAlerts=function(){return this.activeAlerts},e.show=function(t,e,n){var r,i=nt,o={};return 1==arguments.length?r=t:2==arguments.length?(o=t,r=e):3==arguments.length&&(i=t,o=e,r=n),this.activeAlerts[++this.alertId]={children:r,attrs:o,componentClass:i},m.redraw(),this.alertId},e.dismiss=function(t){t&&t in this.activeAlerts&&(delete this.activeAlerts[t],m.redraw())},e.clear=function(){this.activeAlerts={},m.redraw()},t}();function jr(t,e,n){var r,i;console.group("%c"+e,"background-color: #d83e3e; color: #ffffff; font-weight: bold;"),console.error(n),console.groupEnd(),null!=(r=v.session)&&null!=(i=r.user)&&i.isAdmin()&&v.alerts.show({type:"error"},""+t)}var Lr=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.token=function(){return Ut.attribute("token").call(this)},n.userId=function(){return Ut.attribute("userId").call(this)},n.title=function(){return Ut.attribute("title").call(this)},n.type=function(){return Ut.attribute("type").call(this)},n.createdAt=function(){return Ut.attribute("createdAt",Ut.transformDate).call(this)},n.lastActivityAt=function(){return Ut.attribute("lastActivityAt",Ut.transformDate).call(this)},n.lastIpAddress=function(){return Ut.attribute("lastIpAddress").call(this)},n.device=function(){return Ut.attribute("device").call(this)},n.isCurrent=function(){return Ut.attribute("isCurrent").call(this)},n.isSessionToken=function(){return Ut.attribute("isSessionToken").call(this)},e}(Ut),Mr=["background","deserialize","extract","modifyText"];function $r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Rr=function(){function t(){this.forum=void 0,this.routes={},this.initializers=new F,this.session=void 0,this.translator=new cr,this.store=new fr({"access-tokens":Lr,forums:Ar,users:kr,discussions:Sr,posts:Br,groups:zt,notifications:Pr}),this.cache={},this.booted=!1,this.current=new ct(null),this.previous=new ct(null),this.modal=new Or,this.alerts=new Ir,this.drawer=void 0,this.history=null,this.pane=null,this.data=void 0,this.refs={fontawesome:"https://fontawesome.com/v5/search?o=r&m=free"},this._title="",this._titleCount=0,this.requestErrorAlert=null,this.initialRoute=void 0}var e=t.prototype;return e.load=function(t){this.data=t,this.translator.setLocale(t.locale)},e.boot=function(){var t,e=this,n=[];this.initializers.toArray().forEach((function(t){try{t(e)}catch(e){var r=t.itemName.includes("/")?t.itemName.replace(/(\/flarum-ext-)|(\/flarum-)/g,"-"):t.itemName;n.push((function(){return jr(H(v.translator.trans("core.lib.error.extension_initialiation_failed_message",{extension:r})),r+" failed to initialize",e)}))}})),this.store.pushPayload({data:this.data.resources}),this.forum=this.store.getById("forums","1"),this.session=new pr(null!=(t=this.store.getById("users",String(this.data.session.userId)))?t:null,this.data.session.csrfToken),this.mount(),this.initialRoute=window.location.href,n.forEach((function(t){return t()}))},e.bootExtensions=function(t){var e=this;Object.keys(t).forEach((function(n){var r=t[n];if(r.extend)for(var i,o=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return $r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$r(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(r.extend.flat(1/0));!(i=o()).done;)i.value.extend(e,{name:n,exports:r})}))},e.mount=function(t){var e=this;void 0===t&&(t=""),m.mount(document.getElementById("modal"),{view:function(){return m(xn,{state:e.modal})}}),m.mount(document.getElementById("alerts"),{view:function(){return m(En,{state:e.alerts})}}),this.drawer=new hr,m.route(document.getElementById("content"),t+"/",mr(this.routes,t));var n=document.getElementById("app"),r=document.querySelector(".App-header"),i=new gr((function(t){var e=n.getBoundingClientRect().top+document.body.scrollTop;n.classList.toggle("affix",t>=e),n.classList.toggle("scrolled",t>e),r.classList.toggle("navbar-fixed-top",t>=e)}));i.start(),i.update(),document.body.classList.add("ontouchstart"in window?"touch":"no-touch"),xr()},e.preloadedApiDocument=function(){if(this.data.apiDocument&&window.location.href===this.initialRoute){var t=(dr(this.data.apiDocument),this.store.pushPayload(this.data.apiDocument));return this.data.apiDocument=null,t}return null},e.screen=function(){return getComputedStyle(document.documentElement).getPropertyValue("--flarum-screen")},e.setTitle=function(t){this.title=t,this.updateTitle()},e.setTitleCount=function(t){this.titleCount=t,this.updateTitle()},e.updateTitle=function(){var t=this.titleCount?"("+this.titleCount+") ":"",e=m.route.get()===this.forum.attribute("basePath")+"/",n={pageTitle:this.title,forumName:this.forum.attribute("title"),pageNumber:1},r=e||!this.title?H(v.translator.trans("core.lib.meta_titles.without_page_title",n)):H(v.translator.trans("core.lib.meta_titles.with_page_title",n));r=t+r;var i=new DOMParser;document.title=i.parseFromString(r,"text/html").body.innerText},e.transformRequestOptions=function(t){var e=this,n=w({},t),r=n.background,i=n.deserialize,o=n.extract,a=n.modifyText,s=j(n,Mr),u=a||o,l=w({background:null==r||r,deserialize:null!=i?i:function(t){return t}},s);if(Er(l,"config",(function(t,n){n.setRequestHeader("X-CSRF-Token",e.session.csrfToken)})),l.method&&!["GET","POST"].includes(l.method)){var c=l.method;Er(l,"config",(function(t,e){e.setRequestHeader("X-HTTP-Method-Override",c)})),l.method="POST"}return l.extract=function(t){var e;e=u?u(t.responseText):t.responseText;var n=t.status;if(n<200||n>299)throw new vr(n,""+e,l,t);if(t.getResponseHeader){var r=t.getResponseHeader("X-CSRF-Token");r&&(v.session.csrfToken=r)}try{return""===e?null:JSON.parse(e)}catch(n){throw new vr(500,""+e,l,t)}},l},e.request=function(t){var e=this,n=this.transformRequestOptions(t);return this.requestErrorAlert&&this.alerts.dismiss(this.requestErrorAlert),m.request(n).catch((function(n){return e.requestErrorCatch(n,t.errorHandler)}))},e.requestErrorCatch=function(t,e){var n,r,i,o,a=null!=(n=null==(r=t.response)||null==(i=r.errors)?void 0:i.map((function(t){var e;return decodeURI(null!=(e=t.detail)?e:"")})))?n:[];switch(t.status){case 422:o=a.map((function(t){return[t,m("br",null)]})).flat().slice(0,-1);break;case 401:case 403:o=v.translator.trans("core.lib.error.permission_denied_message");break;case 404:case 410:o=v.translator.trans("core.lib.error.not_found_message");break;case 413:o=v.translator.trans("core.lib.error.payload_too_large_message");break;case 429:o=v.translator.trans("core.lib.error.rate_limit_exceeded_message");break;default:o=this.requestWasCrossOrigin(t)?v.translator.trans("core.lib.error.generic_cross_origin_message"):v.translator.trans("core.lib.error.generic_message")}var s=v.forum.attribute("debug");return t.alert={type:"error",content:o,controls:s&&[m(W,{className:"Button Button--link",onclick:this.showDebug.bind(this,t,a)},v.translator.trans("core.lib.debug_button"))]},e?e(t):this.requestErrorDefaultHandler(t,s,a),Promise.reject(t)},e.requestWasCrossOrigin=function(t){return new URL(t.options.url,document.baseURI).origin!==window.location.origin},e.requestErrorDefaultHandler=function(t,e,n){if(!(t instanceof vr))throw t;if(e&&t.xhr){var r,i=t.options,o=i.method,a=i.url,s=t.xhr.status,u=void 0===s?"":s;console.group(o+" "+a+" "+u),n.length?(r=console).error.apply(r,n):console.error(t),console.groupEnd()}t.alert&&(this.requestErrorAlert=this.alerts.show(t.alert,t.alert.content))},e.showDebug=function(t,e){null!==this.requestErrorAlert&&this.alerts.dismiss(this.requestErrorAlert),this.modal.show(Cn,{error:t,formattedError:e})},e.route=function(t,e){void 0===e&&(e={});var n=this.routes[t];if(!n)throw new Error("Route '"+t+"' does not exist");var r=n.path.replace(/:([^\/]+)/g,(function(t,n){return""+G(e,n)}));for(var i in e)e.hasOwnProperty(i)&&!e[i]&&delete e[i];var o=m.buildQueryString(e);return(""===m.route.prefix?this.forum.attribute("basePath"):"")+r+(o?"?"+o:"")},C(t,[{key:"title",get:function(){return this._title},set:function(t){this._title=t}},{key:"titleCount",get:function(){return this._titleCount},set:function(t){this._titleCount=t}}]),t}(),Hr=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.view=function(){var t=v.history,e=v.pane;return m("div",{className:S("Navigation ButtonGroup",this.attrs.className),onmouseenter:e&&e.show.bind(e),onmouseleave:e&&e.onmouseleave.bind(e)},null!=t&&t.canGoBack()?[this.getBackButton(),this.getPaneButton()]:this.getDrawerButton())},n.getBackButton=function(){var t=v.history,e=null==t?void 0:t.getPrevious();return m(K,{className:"Button Navigation-back Button--icon",href:null==t?void 0:t.backUrl(),icon:"fas fa-chevron-left","aria-label":null==e?void 0:e.title,onclick:function(e){e.shiftKey||e.ctrlKey||e.metaKey||2===e.which||(e.preventDefault(),null==t||t.back())}})},n.getPaneButton=function(){var t=v.pane;return t&&t.active?m(W,{className:S("Button Button--icon Navigation-pin",{active:t.pinned}),onclick:t.togglePinned.bind(t),icon:"fas fa-thumbtack"}):null},n.getDrawerButton=function(){if(!this.attrs.drawer)return null;var t=v.drawer,e=v.session.user;return m(W,{className:S("Button Button--icon Navigation-drawer",{new:null==e?void 0:e.newNotificationCount()}),onclick:function(e){e.stopPropagation(),t.show()},icon:"fas fa-bars","aria-label":v.translator.trans("core.lib.nav.drawer_button")})},e}(x),qr=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.getButtonContent=function(e){var n=t.prototype.getButtonContent.call(this,e),r=Yr.data.extensions[this.attrs.extensionId],i=this.statusItems(r.id).toArray();return n.unshift(m("span",{className:"ExtensionListItem-icon ExtensionIcon",style:r.icon},!!r.icon&&R(r.icon.name))),n.push(i),n},n.statusItems=function(t){var e=new F;return e.add("enabled",m("span",{className:"ExtensionListItem-Dot "+(at(t)?"enabled":"disabled")})),e},e}(K),Ur=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.query=bt("")},n.view=function(){return m(Xt,{className:"AdminNav App-titleControl AdminNav-Main",buttonClassName:"Button"},this.items().toArray().concat(this.extensionItems().toArray()))},n.oncreate=function(e){t.prototype.oncreate.call(this,e),this.scrollToActive()},n.onupdate=function(e){t.prototype.onupdate.call(this,e),this.scrollToActive()},n.scrollToActive=function(){var t=$(".Dropdown-menu").children(".active"),e=$("#admin-navigation"),n=Yr.previous.type?250:0;t.length>0&&(t[0].offsetTop>e.scrollTop()+e.outerHeight()||t[0].offsetTop+t[0].offsetHeight<e.scrollTop())&&e.animate({scrollTop:t[0].offsetTop-e.height()/2},n)},n.items=function(){var t=new F;return t.add("category-core",m("h4",{className:"ExtensionListTitle"},Yr.translator.trans("core.admin.nav.categories.core")),120),t.add("dashboard",m(K,{href:Yr.route("dashboard"),icon:"far fa-chart-bar",title:Yr.translator.trans("core.admin.nav.dashboard_title")},Yr.translator.trans("core.admin.nav.dashboard_button")),100),t.add("basics",m(K,{href:Yr.route("basics"),icon:"fas fa-pencil-alt",title:Yr.translator.trans("core.admin.nav.basics_title")},Yr.translator.trans("core.admin.nav.basics_button")),90),t.add("mail",m(K,{href:Yr.route("mail"),icon:"fas fa-envelope",title:Yr.translator.trans("core.admin.nav.email_title")},Yr.translator.trans("core.admin.nav.email_button")),80),t.add("permissions",m(K,{href:Yr.route("permissions"),icon:"fas fa-key",title:Yr.translator.trans("core.admin.nav.permissions_title")},Yr.translator.trans("core.admin.nav.permissions_button")),70),t.add("appearance",m(K,{href:Yr.route("appearance"),icon:"fas fa-paint-brush",title:Yr.translator.trans("core.admin.nav.appearance_title")},Yr.translator.trans("core.admin.nav.appearance_button")),60),t.add("userList",m(K,{href:Yr.route("users"),icon:"fas fa-users",title:Yr.translator.trans("core.admin.nav.userlist_title")},Yr.translator.trans("core.admin.nav.userlist_button")),50),t.add("search",m("div",{className:"Search-input"},m("input",{className:"FormControl SearchBar",bidi:this.query,type:"search",placeholder:Yr.translator.trans("core.admin.nav.search_placeholder")})),0),t},n.extensionItems=function(){var t=this,e=new F,n=st(),r=Yr.extensionCategories;return Object.keys(n).map((function(i){t.query()||e.add("category-"+i,m("h4",{className:"ExtensionListTitle"},Yr.translator.trans("core.admin.nav.categories."+i)),r[i]),n[i].map((function(n){var o=t.query().toUpperCase(),a=n.extra["flarum-extension"].title||"",s=n.description||"";(!o||a.toUpperCase().includes(o)||s.toUpperCase().includes(o))&&e.add("extension-"+n.id,m(qr,{href:Yr.route("extension",{id:n.id}),extensionId:n.id,className:"ExtensionNavButton",title:s},a),r[i])}))})),e},e}(x),zr="You must select an active extension via `.for()` before using extensionData.",Wr=function(){function t(){this.state={currentExtension:null,data:{}}}var e=t.prototype;return e.for=function(t){return this.state.currentExtension=t,this.state.data[t]=this.state.data[t]||{},this},e.registerSetting=function(t,e){if(void 0===e&&(e=0),null===this.state.currentExtension)throw new Error(zr);var n=t;n instanceof Function&&(n.setting=Math.random().toString(36));var r=this.state.data[this.state.currentExtension].settings||new F;return r.add(n.setting,n,e),this.state.data[this.state.currentExtension].settings=r,this},e.registerPermission=function(t,e,n){var r;if(void 0===n&&(n=0),null===this.state.currentExtension)throw new Error(zr);var i=this.state.data[this.state.currentExtension].permissions||{},o=i[e]||new F;return o.add(t.permission,t,n),this.state.data[this.state.currentExtension].permissions=w({},i,((r={})[e]=o,r)),this},e.registerPage=function(t){if(null===this.state.currentExtension)throw new Error(zr);return this.state.data[this.state.currentExtension].page=t,this},e.getSettings=function(t){var e,n;return null==(e=this.state.data[t])||null==(n=e.settings)?void 0:n.toArray()},e.getAllExtensionPermissions=function(t){var e=this,n=new F;return Object.keys(this.state.data).map((function(r){var i,o,a=null==(i=e.state.data[r])||null==(o=i.permissions)?void 0:o[t];e.extensionHasPermissions(r)&&void 0!==a&&n.merge(a)})),n},e.getExtensionPermissions=function(t,e){var n,r,i=null==(n=this.state.data[t])||null==(r=n.permissions)?void 0:r[e];return this.extensionHasPermissions(t)&&null!=i?i:new F},e.extensionHasPermissions=function(t){var e;return void 0!==(null==(e=this.state.data[t])?void 0:e.permissions)},e.getPage=function(t){var e;return null==(e=this.state.data[t])?void 0:e.page},t}(),Gr=function(t){function e(){var e;return(e=t.call(this)||this).extensionData=new Wr,e.extensionCategories={feature:30,theme:20,language:10},e.history={canGoBack:function(){return!0},getCurrent:function(){return null},getPrevious:function(){return null},push:function(){},backUrl:function(){return e.forum.attribute("baseUrl")},back:function(){window.location.assign(this.backUrl())},home:function(){}},e.data=void 0,e.route=void 0,Se(y(e)),e.route=Object.getPrototypeOf(Object.getPrototypeOf(y(e))).route.bind(y(e)),e}D(e,t);var n=e.prototype;return n.mount=function(){document.location.hash||(document.location.hash="#/"),m.route.prefix="#",t.prototype.mount.call(this),m.mount(document.getElementById("app-navigation"),{view:function(){return m(Hr,{className:"App-backControl",drawer:!0})}}),m.mount(document.getElementById("header-navigation"),Hr),m.mount(document.getElementById("header-primary"),I),m.mount(document.getElementById("header-secondary"),tt),m.mount(document.getElementById("admin-navigation"),Ur)},n.getRequiredPermissions=function(t){var e=[];return"startDiscussion"!==t&&0!==t.indexOf("discussion.")||e.push("viewForum"),"discussion.delete"===t&&e.push("discussion.hide"),"discussion.deletePosts"===t&&e.push("discussion.hidePosts"),"user.editGroups"===t&&e.push("viewHiddenGroups"),e},e}(Rr),Vr=new Gr;window.app=Vr;const Yr=Vr;function Kr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Xr=function(){function t(t){this.model=void 0,this.callbacks=[],this.model=t}var e=t.prototype;return e.attribute=function(t,e){var n=this;return void 0===e&&(e=null),this.callbacks.push((function(){n.model.prototype[t]=e?Ut.attribute(t,e):Ut.attribute(t)})),this},e.hasOne=function(t){var e=this;return this.callbacks.push((function(){e.model.prototype[t]=Ut.hasOne(t)})),this},e.hasMany=function(t){var e=this;return this.callbacks.push((function(){e.model.prototype[t]=Ut.hasMany(t)})),this},e.extend=function(t,e){for(var n,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return Kr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Kr(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this.callbacks);!(n=r()).done;)n.value.call(this)},t}(),Jr=function(){function t(){this.postComponents={}}var e=t.prototype;return e.add=function(t,e){return this.postComponents[t]=e,this},e.extend=function(t,e){Object.assign(t.postComponents,this.postComponents)},t}(),Qr=function(){function t(){this.routes={},this.helpers={}}var e=t.prototype;return e.add=function(t,e,n){return this.routes[t]={path:e,component:n},this},e.helper=function(t,e){return this.helpers[t]=e,this},e.extend=function(t,e){Object.assign(t.routes,this.routes),Object.assign(t.route,this.helpers)},t}(),Zr=function(){function t(){this.models={}}var e=t.prototype;return e.add=function(t,e){return this.models[t]=e,this},e.extend=function(t,e){for(var n in this.models){if(t.store.models[n])throw new Error('The model type "'+n+'" has already been registered with the class "'+t.store.models[n].name+'".');t.store.models[n]=this.models[n]}},t}();const ti={Model:Xr,PostTypes:Jr,Routes:Qr,Store:Zr};var ei=n(1655),ni=n.n(ei),ri=null;function ii(t,e){var n=e.text,r=e.selectionStart,i=e.selectionEnd,o=t.selectionStart,a=t.value.slice(0,o),s=t.value.slice(t.selectionEnd);if(null===ri||!0===ri){t.contentEditable="true";try{ri=document.execCommand("insertText",!1,n)}catch(t){ri=!1}t.contentEditable="false"}ri&&!t.value.slice(0,t.selectionStart).endsWith(n)&&(ri=!1),ri||(t.value=a+n+s,t.dispatchEvent(new CustomEvent("input",{bubbles:!0,cancelable:!0}))),null!=r&&null!=i?t.setSelectionRange(r,i):t.setSelectionRange(o,t.selectionEnd)}var oi=function(){function t(t,e){this.el=void 0,this.el=document.createElement("textarea"),this.build(t,e)}var e=t.prototype;return e.build=function(t,e){var n=this;this.el.className=e.classNames.join(" "),this.el.disabled=e.disabled,this.el.placeholder=e.placeholder,this.el.value=e.value;var r=function(t){e.inputListeners.forEach((function(t){t()})),t.redraw=!1};this.el.oninput=function(t){e.oninput(n.el.value),r(t)},this.el.onclick=r,this.el.onkeyup=r,this.el.addEventListener("keydown",(function(t){n.keyHandlers(e).toArray().forEach((function(e){return e(t)}))})),t.append(this.el)},e.keyHandlers=function(t){var e=new F;return e.add("submit",(function(e){(e.metaKey||e.ctrlKey)&&"Enter"===e.key&&t.onsubmit()})),e},e.moveCursorTo=function(t){this.setSelectionRange(t,t)},e.getSelectionRange=function(){return[this.el.selectionStart,this.el.selectionEnd]},e.getLastNChars=function(t){return this.el.value.slice(Math.max(0,this.el.selectionStart-t),this.el.selectionStart)},e.insertAtCursor=function(t){this.insertAt(this.el.selectionStart,t)},e.insertAt=function(t,e){this.insertBetween(t,t,e)},e.insertBetween=function(t,e,n){this.setSelectionRange(t,e);var r=t+n.length;ii(this.el,{text:n,selectionStart:r,selectionEnd:r})},e.replaceBeforeCursor=function(t,e){this.insertBetween(t,this.el.selectionStart,e)},e.setSelectionRange=function(t,e){this.el.setSelectionRange(t,e),this.focus()},e.getCaretCoordinates=function(t){var e=ni()(this.el,t);return{top:e.top-this.el.scrollTop,left:e.left}},e.disabled=function(t){this.el.disabled=t},e.focus=function(){this.el.focus()},e.destroy=function(){this.el.remove()},t}(),ai="The `evented` util is deprecated and no longer supported.",si="2547";const ui={handlers:null,getHandlers:function(t){return M(ai,si),this.handlers=this.handlers||{},this.handlers[t]=this.handlers[t]||[],this.handlers[t]},trigger:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];M(ai,si),this.getHandlers(t).forEach((function(t){return t.apply(e,r)}))},on:function(t,e){M(ai,si),this.getHandlers(t).push(e)},one:function(t,e){M(ai,si),this.getHandlers(t).push((function n(){e.apply(this,arguments),this.off(t,n)}))},off:function(t,e){M(ai,si);var n=this.getHandlers(t),r=n.indexOf(e);-1!==r&&n.splice(r,1)}};var li,ci=function(){function t(){this.events={},this.events={}}var e=t.prototype;return e.on=function(t,e){return this.events[t]||(this.events[t]=[]),this.events[t].push(e),this},e.emit=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.events[t]&&this.events[t].forEach((function(t){return t.apply(void 0,n)}))},t}();!function(t){t[t.Enter=13]="Enter",t[t.Escape=27]="Escape",t[t.Space=32]="Space",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowDown=40]="ArrowDown",t[t.ArrowLeft=37]="ArrowLeft",t[t.ArrowRight=39]="ArrowRight",t[t.Tab=9]="Tab",t[t.Backspace=8]="Backspace"}(li||(li={}));var di=function(){function t(){this.callbacks=new Map,this.whenCallback=function(t){return!0}}var e=t.prototype;return e.onUp=function(t){return this.callbacks.set(li.ArrowUp,(function(e){e.preventDefault(),t(e)})),this},e.onDown=function(t){return this.callbacks.set(li.ArrowDown,(function(e){e.preventDefault(),t(e)})),this},e.onSelect=function(t,e){void 0===e&&(e=!1);var n=function(e){e.preventDefault(),t(e)};return e||this.callbacks.set(li.Tab,n),this.callbacks.set(li.Enter,n),this},e.onTab=function(t){return this.callbacks.set(9,(function(e){e.preventDefault(),t(e)})),this},e.onCancel=function(t){return this.callbacks.set(li.Escape,(function(e){e.stopPropagation(),e.preventDefault(),t(e)})),this},e.onRemove=function(t){return this.callbacks.set(li.Backspace,(function(e){e instanceof KeyboardEvent&&e.target instanceof HTMLInputElement&&0===e.target.selectionStart&&0===e.target.selectionEnd&&(t(e),e.preventDefault())})),this},e.when=function(t){return this.whenCallback=t,this},e.bindTo=function(t){t[0].addEventListener("keydown",this.navigate.bind(this))},e.navigate=function(t){if(this.whenCallback(t)){var e=this.callbacks.get(t.which);e&&e(t)}},t}(),fi={prefix:"",suffix:"",blockPrefix:"",blockSuffix:"",multiline:!1,replaceNext:"",prefixSpace:!1,scanFor:"",surroundWithNewlines:!1,orderedList:!1,unorderedList:!1,trimFirst:!1};function pi(t){return t.trim().split("\n").length>1}function hi(t,e){return Array(e+1).join(t)}function mi(t){var e,n,r=t.value.slice(0,t.selectionStart),i=t.value.slice(t.selectionEnd),o=r.match(/\n*$/),a=i.match(/^\n*/),s=o?o[0].length:0,u=a?a[0].length:0;return r.match(/\S/)&&s<2&&(e=hi("\n",2-s)),i.match(/\S/)&&u<2&&(n=hi("\n",2-u)),null==e&&(e=""),null==n&&(n=""),{newlinesToAppend:e,newlinesToPrepend:n}}function vi(t){var e=t.split("\n"),n=/^\d+\.\s+/,r=e.every((function(t){return n.test(t)})),i=e;return r&&(i=e.map((function(t){return t.replace(n,"")}))),{text:i.join("\n"),processed:r}}function gi(t){var e=t.split("\n"),n=e.every((function(t){return t.startsWith("- ")})),r=e;return n&&(r=e.map((function(t){return t.slice("- ".length,t.length)}))),{text:r.join("\n"),processed:n}}function yi(t,e){return e?"- ":t+1+". "}var bi,Di=n(8492),wi=/[.*+?^${}()|[\]\\]/g,xi=function(){function t(){this.callbacks=void 0,this.data=void 0;for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.callbacks=e,this.data={},this.needsRebuild()}var e=t.prototype;return e.needsRebuild=function(){var t=this,e=!1;return this.callbacks.forEach((function(n,r){var i=n();i!==t.data[r]&&(t.data[r]=i,e=!0)})),e},e.check=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.callbacks=this.callbacks.concat(e),this.needsRebuild()},e.invalidate=function(){this.data={}},t}();function Ei(t,e){var n,r,i=new RegExp(String.raw(bi||(n=["(w+/)?(","|common)/"],(r=["(\\w+\\/)?(","|common)\\/"])||(r=n.slice(0)),n.raw=r,bi=n),e)),o=/(\.js|\.tsx?)$/;return new Proxy(t,{get:function(t,e){return t[e]||t[e.replace(i,"$1").replace(o,"")]}})}var Ci=function(t){function e(){return t.apply(this,arguments)||this}D(e,t),e.initAttrs=function(e){t.initAttrs.call(this,e),e.className=S(e.className,"Dropdown--split"),e.menuClassName=S(e.menuClassName,"Dropdown-menu--right")};var n=e.prototype;return n.getButton=function(t){var e=this.getFirstChild(t),n=Object.assign({},null==e?void 0:e.attrs);return n.className=S(n.className,"SplitDropdown-button Button",this.attrs.buttonClassName),m("[",null,m(W,n,e.children),m("button",{className:"Dropdown-toggle Button Button--icon "+this.attrs.buttonClassName,"aria-haspopup":"menu","aria-label":this.attrs.accessibleToggleLabel,"data-toggle":"dropdown"},this.attrs.icon?R(this.attrs.icon,{className:"Button-icon"}):null,R("fas fa-caret-down",{className:"Button-caret"})))},n.getFirstChild=function(t){for(var e=t;e instanceof Array;)e=e[0];return e},e}(Q),Ai=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.handler=function(){return this.attrs.when()||void 0},n.oncreate=function(e){t.prototype.oncreate.call(this,e),this.boundHandler=this.handler.bind(this),$(window).on("beforeunload",this.boundHandler)},n.onremove=function(e){t.prototype.onremove.call(this,e),$(window).off("beforeunload",this.boundHandler)},n.view=function(t){return m("[",null,t.children)},e}(x),Ni=function(t){function e(){return t.apply(this,arguments)||this}D(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.value=this.attrs.value||"",this.disabled=!!this.attrs.disabled},n.view=function(){return m("div",{className:"TextEditor"},m("div",{className:"TextEditor-editorContainer"}),m("ul",{className:"TextEditor-controls Composer-footer"},O(this.controlItems().toArray()),m("li",{className:"TextEditor-toolbar"},this.toolbarItems().toArray())))},n.oncreate=function(e){t.prototype.oncreate.call(this,e),this.attrs.composer.editor=this.buildEditor(this.$(".TextEditor-editorContainer")[0])},n.onupdate=function(e){t.prototype.onupdate.call(this,e);var n=!!this.attrs.disabled;this.disabled!==n&&(this.disabled=n,this.attrs.composer.editor.disabled(n))},n.buildEditorParams=function(){var t=this;return{classNames:["FormControl","Composer-flexible","TextEditor-editor"],disabled:this.disabled,placeholder:this.attrs.placeholder||"",value:this.value,oninput:this.oninput.bind(this),inputListeners:[],onsubmit:function(){t.onsubmit(),m.redraw()}}},n.buildEditor=function(t){return new oi(t,this.buildEditorParams())},n.controlItems=function(){var t=new F;return t.add("submit",m(W,{icon:"fas fa-paper-plane",className:"Button Button--primary",itemClassName:"App-primaryControl",onclick:this.onsubmit.bind(this)},this.attrs.submitLabel)),this.attrs.preview&&t.add("preview",m(Lt,{text:v.translator.trans("core.forum.composer.preview_tooltip")},m(W,{icon:"far fa-eye",className:"Button Button--icon",onclick:this.attrs.preview}))),t},n.toolbarItems=function(){return new F},n.oninput=function(t){this.value=t,this.attrs.onchange(this.value)},n.onsubmit=function(){this.attrs.onsubmit(this.value)},e}(x),Fi=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.view=function(e){var n=t.prototype.view.call(this,e);return m(Lt,{text:this.attrs.tooltipText||H(e.children)},n)},e.initAttrs=function(e){t.initAttrs.call(this,e),e.className=e.className||"Button Button--icon Button--link",e.tooltipText=e.title},e}(W),_i=function(){function t(){this.element=void 0}var e=t.prototype;return e.$=function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e=$(this.element);return t?e.find(t):e})),e.render=function(){var t=this,e=this.view();e.attrs=e.attrs||{};var n=e.attrs.oncreate;return e.attrs.oncreate=function(e){t.element=e.dom,n&&n.apply(t,[e])},e},t}(),Ti=function(){function t(t,e,n){void 0===t&&(t={}),void 0===e&&(e=1),void 0===n&&(n=20),this.location=void 0,this.pageSize=void 0,this.pages=[],this.params={},this.initialLoading=!1,this.loadingPrev=!1,this.loadingNext=!1,this.params=t,this.location={page:e},this.pageSize=n}var e=t.prototype;return e.clear=function(){this.pages=[],m.redraw()},e.loadPrev=function(){var t=this;if(this.loadingPrev||1===this.getLocation().page)return Promise.resolve();this.loadingPrev=!0;var e=this.getPrevPageNumber();return this.loadPage(e).then(this.parseResults.bind(this,e)).finally((function(){return t.loadingPrev=!1}))},e.loadNext=function(){var t=this;if(this.loadingNext)return Promise.resolve();this.loadingNext=!0;var e=this.getNextPageNumber();return this.loadPage(e).then(this.parseResults.bind(this,e)).finally((function(){return t.loadingNext=!1}))},e.parseResults=function(t,e){var n,r=Number(t),i=null==(n=e.payload)?void 0:n.links,o={number:r,items:e,hasNext:!(null==i||!i.next),hasPrev:!(null==i||!i.prev)};this.isEmpty()||r>this.getNextPageNumber()-1?this.pages.push(o):this.pages.unshift(o),this.location={page:r},m.redraw()},e.loadPage=function(t){void 0===t&&(t=1);var e=this.requestParams(),n=Array.isArray(e.include)?e.include.join(","):e.include,r=w({},e,{page:w({},e.page,{offset:this.pageSize*(t-1)}),include:n});return v.store.find(this.type,r)},e.requestParams=function(){return this.params},e.refreshParams=function(t,e){return this.isEmpty()||this.paramsChanged(t)?(this.params=t,this.refresh(e)):Promise.resolve()},e.refresh=function(t){var e=this;return void 0===t&&(t=1),this.initialLoading=!0,this.loadingPrev=!1,this.loadingNext=!1,this.clear(),this.location={page:t},this.loadPage().then((function(t){e.pages=[],e.parseResults(e.location.page,t)})).finally((function(){return e.initialLoading=!1}))},e.getPages=function(){return this.pages},e.getLocation=function(){return this.location},e.isLoading=function(){return this.initialLoading||this.loadingNext||this.loadingPrev},e.isInitialLoading=function(){return this.initialLoading},e.isLoadingPrev=function(){return this.loadingPrev},e.isLoadingNext=function(){return this.loadingNext},e.hasItems=function(){return!!this.getAllItems().length},e.isEmpty=function(){return!this.isInitialLoading()&&!this.hasItems()},e.hasPrev=function(){var t;return!(null==(t=this.pages[0])||!t.hasPrev)},e.hasNext=function(){var t;return!(null==(t=this.pages[this.pages.length-1])||!t.hasNext)},e.getParams=function(){return this.params},e.getNextPageNumber=function(){var t,e=null==(t=this.pages[this.pages.length-1])?void 0:t.number;return e&&!isNaN(e)?e+1:this.location.page},e.getPrevPageNumber=function(){var t,e=null==(t=this.pages[0])?void 0:t.number;return e&&!isNaN(e)?Math.max(e-1,1):this.location.page},e.paramsChanged=function(t){var e=this;return Object.keys(t).some((function(n){return e.getParams()[n]!==t[n]}))},e.getAllItems=function(){return this.getPages().map((function(t){return t.items})).flat()},t}(),ki=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e.prototype.view=function(t){return m("div",{className:"LabelValue"},m("div",{className:"LabelValue-label"},v.translator.trans("core.lib.data_segment.label",{label:this.attrs.label})),m("div",{className:"LabelValue-value"},this.attrs.value))},e}(x),Si=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).ip=void 0,e}D(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.ip=this.attrs.ip||""},n.view=function(){return m("span",{className:"IPAddress"},this.viewItems().toArray())},n.viewItems=function(){var t=new F;return t.add("ip",m("span",null,this.ip),100),t},e}(x);const Bi={extenders:ti,extend:o,Session:pr,Store:fr,"utils/BasicEditorDriver":oi,"utils/bidi":f,"utils/evented":ui,"utils/EventEmitter":ci,"utils/KeyboardNavigatable":di,"utils/liveHumanTimes":xr,"utils/ItemList":F,"utils/mixin":function(t){for(var e=function(t){function e(){return t.apply(this,arguments)||this}return D(e,t),e}(t),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(t){Object.assign(e.prototype,t)})),e},"utils/humanTime":Dr,"utils/computed":Tr,"utils/insertText":ii,"utils/styleSelectedText":function(t,e){t.focus(),e=Object.assign({},fi,e);var n,r=t.value.slice(t.selectionStart,t.selectionEnd);n=e.orderedList||e.unorderedList?function(t,e){var n=t.selectionStart===t.selectionEnd,r=t.selectionStart,i=t.selectionEnd;!function(t){for(var e=t.value.split("\n"),n=0,r=0;r<e.length;r++){var i=e[r].length+1;t.selectionStart>=n&&t.selectionStart<n+i&&(t.selectionStart=n),t.selectionEnd>=n&&t.selectionEnd<n+i&&(t.selectionEnd=n+i-1),n+=i}}(t);var o=t.value.slice(t.selectionStart,t.selectionEnd),a=function(t,e){var n,r,i;return i=t.orderedList?(n=gi((r=vi(e)).text)).text:(n=vi((r=gi(e)).text)).text,[r,n,i]}(e,o),s=a[0],u=a[1],l=a[2],c=l.split("\n").map((function(t,n){return""+yi(n,e.unorderedList)+t})),d=c.reduce((function(t,n,r){return t+yi(r,e.unorderedList).length}),0),f=c.reduce((function(t,n,r){return t+yi(r,!e.unorderedList).length}),0);if(s.processed)return n?i=r=Math.max(r-yi(0,e.unorderedList).length,0):(r=t.selectionStart,i=t.selectionEnd-d),{text:l,selectionStart:r,selectionEnd:i};var p=mi(t),h=p.newlinesToAppend,m=p.newlinesToPrepend,v=h+c.join("\n")+m;return n?i=r=Math.max(r+yi(0,e.unorderedList).length+h.length,0):u.processed?(r=Math.max(t.selectionStart+h.length,0),i=t.selectionEnd+h.length+d-f):(r=Math.max(t.selectionStart+h.length,0),i=t.selectionEnd+h.length+d),{text:v,selectionStart:r,selectionEnd:i}}(t,e):e.multiline&&pi(r)?function(t,e){var n=e.prefix,r=e.suffix,i=e.blockPrefix,o=e.blockSuffix,a=e.surroundWithNewlines,s=t.value.slice(t.selectionStart,t.selectionEnd),u=t.selectionStart,l=t.selectionEnd,c=s.split("\n"),d=i.length>0?i:n,f=o.length>0?o:d==n?r:"";if(c.every((function(t){return t.startsWith(d)&&t.endsWith(f)})))l=u+(s=c.map((function(t){return t.slice(d.length,t.length-f.length)})).join("\n")).length;else if(s=c.map((function(t){return d+t+f})).join("\n"),a||""===f){var p=mi(t),h=p.newlinesToAppend,m=p.newlinesToPrepend;l=(u+=h.length)+s.length,s=h+s+m}return{text:s,selectionStart:u,selectionEnd:l}}(t,e):function(t,e){var n=e.prefix,r=e.suffix,i=e.blockPrefix,o=e.blockSuffix,a=e.replaceNext,s=e.prefixSpace,u=e.scanFor,l=e.surroundWithNewlines,c=t.selectionStart,d=t.selectionEnd,f=t.value.slice(t.selectionStart,t.selectionEnd),p=pi(f)&&i.length>0?i+"\n":n,h=pi(f)&&o.length>0?"\n"+o:p===n?r:"";if(s){var m=t.value[t.selectionStart-1];0===t.selectionStart||null==m||m.match(/\s/)||(p=" "+p)}f=function(t,e,n,r){if(void 0===r&&(r=!1),t.selectionStart===t.selectionEnd)t.selectionStart=function(t,e){for(var n=e;t[n]&&null!=t[n-1]&&!t[n-1].match(/\s/);)n--;return n}(t.value,t.selectionStart),t.selectionEnd=function(t,e,n){for(var r=e,i=n?/\n/:/\s/;t[r]&&!t[r].match(i);)r++;return r}(t.value,t.selectionEnd,r);else{var i=t.selectionStart-e.length,o=t.selectionEnd+n.length,a=t.value.slice(i,t.selectionStart)===e,s=t.value.slice(t.selectionEnd,o)===n;a&&s&&(t.selectionStart=i,t.selectionEnd=o)}return t.value.slice(t.selectionStart,t.selectionEnd)}(t,p,h,e.multiline);var v=t.selectionStart,g=t.selectionEnd,y=a.length>0&&h.indexOf(a)>-1&&f.length>0;if(l){var b=mi(t);p=b.newlinesToAppend+n,h+=b.newlinesToPrepend}if(f.startsWith(p)&&f.endsWith(h)){var D=f.slice(p.length,f.length-h.length);if(c===d){var w=c-p.length;w=Math.max(w,v),v=g=w=Math.min(w,v+D.length)}else g=v+D.length;return{text:D,selectionStart:v,selectionEnd:g}}if(y)return u.length>0&&f.match(u)?{text:p+(h=h.replace(a,f)),selectionStart:v=g=v+p.length,selectionEnd:g}:{text:p+f+h,selectionStart:v=v+p.length+f.length+h.indexOf(a),selectionEnd:g=v+a.length};var x=p+f+h;v=c+p.length,g=d+p.length;var E=f.match(/^\s*|\s*$/g);if(e.trimFirst&&E){var C=E[0]||"",A=E[1]||"";x=C+p+f.trim()+h+A,v+=C.length,g-=A.length}return{text:x,selectionStart:v,selectionEnd:g}}(t,e),ii(t,n)},"utils/Drawer":hr,"utils/EditorDriverInterface":Di,"utils/anchorScroll":function(t,e){var n=$(window),r=$(t).offset().top-n.scrollTop();e(),n.scrollTop($(t).offset().top-r)},"utils/RequestError":vr,"utils/abbreviateNumber":function(t){return t>=1e6?Math.floor(t/1e6)+H(v.translator.trans("core.lib.number_suffix.mega_text")):t>=1e3?(t/1e3).toFixed(1)+H(v.translator.trans("core.lib.number_suffix.kilo_text")):t.toString()},"utils/string":e,"utils/SubtreeRetainer":xi,"utils/escapeRegExp":function(t){return t.replace(wi,"\\$&")},"utils/extract":G,"utils/ScrollListener":gr,"utils/stringToColor":_r,"utils/Stream":bt,"utils/subclassOf":lt,"utils/setRouteWithForcedRefresh":function(t,e,n){void 0===e&&(e=null),void 0===n&&(n={});var r=w({},n);r.state=r.state||{},r.state.key=Date.now(),m.route.set(t,e,r)},"utils/patchMithril":p,"utils/proxifyCompat":Ei,"utils/classList":S,"utils/extractText":H,"utils/formatNumber":function(t,e){return void 0===e&&(e=v.data.locale),new Intl.NumberFormat(e).format(t)},"utils/mapRoutes":mr,"utils/withAttr":ft,"utils/throttleDebounce":a,"utils/isObject":A,"utils/focusTrap":i,"utils/isDark":Mt,"models/AccessToken":Lr,"models/Notification":Pr,"models/User":kr,"models/Post":Br,"models/Discussion":Sr,"models/Group":zt,"models/Forum":Ar,Component:x,Fragment:_i,Translator:cr,"components/AlertManager":En,"components/Page":dt,"components/Switch":ht,"components/Badge":Ht,"components/LoadingIndicator":U,"components/Placeholder":Ae,"components/Separator":T,"components/Dropdown":Q,"components/SplitDropdown":Ci,"components/RequestErrorModal":Cn,"components/FieldSet":Ot,"components/Select":gt,"components/Navigation":Hr,"components/Alert":nt,"components/Link":Y,"components/LinkButton":K,"components/Checkbox":pt,"components/ColorPreviewInput":Ct,"components/ConfirmDocumentUnload":Ai,"components/SelectDropdown":Xt,"components/ModalManager":xn,"components/Button":W,"components/Modal":rt,"components/GroupBadge":qt,"components/TextEditor":Ni,"components/TextEditorButton":Fi,"components/Tooltip":Lt,"components/EditUserModal":fe,"components/LabelValue":ki,"components/IPAddress":Si,Model:Ut,Application:Rr,"helpers/fullTime":function(t){var e=br()(t),n=e.format(),r=e.format("LLLL");return m("time",{pubdate:!0,datetime:n},r)},"helpers/avatar":X,"helpers/fireApplicationError":jr,"helpers/fireDebugWarning":t,"helpers/icon":R,"helpers/humanTime":function(t){var e=br()(t),n=e.format(),r=e.format("LLLL"),i=Dr(t);return m("time",{pubdate:!0,datetime:n,title:r,"data-humantime":!0},i)},"helpers/punctuateSeries":Ee,"helpers/highlight":function(t,e,n){if(!e&&!n)return t;var r=e instanceof RegExp?e:new RegExp(null!=e?e:"","gi"),i=t,o=0;return n&&(e&&(o=Math.max(0,t.search(r)-n/2)),i=me(i,n,o)),i=$("<div/>").text(i).html(),e&&(i=i.replace(r,"<mark>$&</mark>")),m.trust(i)},"helpers/username":J,"helpers/userOnline":function(t){return t.lastSeenAt()&&t.isOnline()?m("span",{className:"UserOnline"},R("fas fa-circle")):null},"helpers/listItems":O,"helpers/textContrastClass":$t,"resolvers/DefaultResolver":Te,"states/PaginatedListState":Ti,"states/AlertManagerState":Ir,"states/ModalManagerState":Or,"states/PageState":ct},Pi=Object.assign(Bi,{"utils/saveSettings":Dt,"utils/ExtensionData":Wr,"utils/isExtensionEnabled":at,"utils/getCategorizedExtensions":st,"utils/generateElementId":xt,"components/SettingDropdown":Jt,"components/EditCustomFooterModal":re,"components/SessionDropdown":Z,"components/HeaderPrimary":I,"components/AdminPage":St,"components/AppearancePage":oe,"components/StatusWidget":ot,"components/ExtensionsWidget":ut,"components/HeaderSecondary":tt,"components/SettingsModal":te,"components/DashboardWidget":et,"components/DebugWarningWidget":Bt,"components/ExtensionPage":_e,"components/ExtensionLinkButton":qr,"components/PermissionGrid":Qt,"components/ExtensionPermissionGrid":Ce,"components/MailPage":ae,"components/UploadImageButton":ie,"components/LoadingModal":it,"components/DashboardPage":Pt,"components/BasicsPage":It,"components/UserListPage":xe,"components/EditCustomHeaderModal":ne,"components/PermissionsPage":Zt,"components/PermissionDropdown":Yt,"components/ReadmeModal":Fe,"components/AdminNav":Ur,"components/AdminHeader":wt,"components/EditCustomCssModal":ee,"components/EditGroupModal":Wt,"components/CreateUserModal":we,"models/ExtensionReadme":Ne,"resolvers/ExtensionPageResolver":ke,routes:Se,AdminApplication:Gr});Pi.app=Yr;var Oi=Ei(Pi,"admin")})(),flarum.core=r})();


var module={};

(()=>{var e={n:a=>{var s=a&&a.__esModule?()=>a.default:()=>a;return e.d(s,{a:s}),s},d:(a,s)=>{for(var l in s)e.o(s,l)&&!e.o(a,l)&&Object.defineProperty(a,l,{enumerable:!0,get:s[l]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},a={};(()=>{"use strict";e.r(a);const s=flarum.core.compat["admin/app"];var l=e.n(s);l().initializers.add("flarum-flags",(function(){l().extensionData.for("flarum-flags").registerSetting({setting:"flarum-flags.guidelines_url",type:"text",label:l().translator.trans("flarum-flags.admin.settings.guidelines_url_label")},15).registerSetting({setting:"flarum-flags.can_flag_own",type:"boolean",label:l().translator.trans("flarum-flags.admin.settings.flag_own_posts_label")}).registerPermission({icon:"fas fa-flag",label:l().translator.trans("flarum-flags.admin.permissions.view_flags_label"),permission:"discussion.viewFlags"},"moderate",65).registerPermission({icon:"fas fa-flag",label:l().translator.trans("flarum-flags.admin.permissions.flag_posts_label"),permission:"discussion.flagPosts"},"reply",65)}))})(),module.exports=a})();


flarum.extensions['flarum-flags']=module.exports;

var module={};

(()=>{var e={n:r=>{var a=r&&r.__esModule?()=>r.default:()=>r;return e.d(a,{a}),a},d:(r,a)=>{for(var o in a)e.o(a,o)&&!e.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:a[o]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};(()=>{"use strict";e.r(r);const a=flarum.core.compat.app;var o=e.n(a);o().initializers.add("flarum-suspend",(function(){o().extensionData.for("flarum-suspend").registerPermission({icon:"fas fa-ban",label:o().translator.trans("flarum-suspend.admin.permissions.suspend_users_label"),permission:"user.suspend"},"moderate")}))})(),module.exports=r})();


flarum.extensions['flarum-suspend']=module.exports;

var module={};

(()=>{var r={n:s=>{var e=s&&s.__esModule?()=>s.default:()=>s;return r.d(e,{a:e}),e},d:(s,e)=>{for(var a in e)r.o(e,a)&&!r.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:e[a]})},o:(r,s)=>Object.prototype.hasOwnProperty.call(r,s),r:r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},s={};(()=>{"use strict";r.r(s);const e=flarum.core.compat["common/extend"],a=flarum.core.compat["admin/app"];var o=r.n(a);o().initializers.add("flarum-approval",(function(){(0,e.extend)(o(),"getRequiredPermissions",(function(r,s){"discussion.startWithoutApproval"===s&&r.push("startDiscussion"),"discussion.replyWithoutApproval"===s&&r.push("discussion.reply")})),o().extensionData.for("flarum-approval").registerPermission({icon:"fas fa-check",label:o().translator.trans("flarum-approval.admin.permissions.start_discussions_without_approval_label"),permission:"discussion.startWithoutApproval"},"start",95).registerPermission({icon:"fas fa-check",label:o().translator.trans("flarum-approval.admin.permissions.reply_without_approval_label"),permission:"discussion.replyWithoutApproval"},"reply",95).registerPermission({icon:"fas fa-check",label:o().translator.trans("flarum-approval.admin.permissions.approve_posts_label"),permission:"discussion.approvePosts"},"moderate",65)}))})(),module.exports=s})();


flarum.extensions['flarum-approval']=module.exports;

var module={};

/*! For license information please see admin.js.LICENSE.txt */
(()=>{var t={946:(t,e,n)=>{"use strict";n.d(e,{l:()=>Rn});const o=flarum.core.compat["admin/app"];var r=n.n(o);const a=flarum.core.compat["common/extend"],i=flarum.core.compat["admin/components/PermissionGrid"];var s=n.n(i);const l=flarum.core.compat["admin/components/PermissionDropdown"];var c=n.n(l);const u=flarum.core.compat["common/components/Dropdown"];var d=n.n(u);const h=flarum.core.compat["common/components/Button"];var f=n.n(h);const p=flarum.core.compat["common/components/LoadingIndicator"];var g=n.n(p);const v=flarum.core.compat["common/utils/extract"];var b=n.n(v);const y=flarum.core.compat["common/components/Link"];var w=n.n(y);const _=flarum.core.compat["common/utils/classList"];var T=n.n(_);const x=flarum.core.compat["common/helpers/textContrastClass"];var S=n.n(x);function E(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var o=t&&t.icon(),r=n.useColor,a=void 0===r||r;return e.className=T()([e.className,"icon",o?t.icon():"TagIcon"]),t&&a?(e.style=e.style||{},e.style["--color"]=t.color(),o&&(e.style.color=t.color())):t||(e.className+=" untagged"),o?m("i",e):m("span",e)}function N(t,e){void 0===e&&(e={}),e.style=e.style||{},e.className="TagLabel "+(e.className||"");var n=b()(e,"link"),o=t?t.name():app.translator.trans("flarum-tags.lib.deleted_tag_text");if(t){var r=t.color();r&&(e.style["--tag-bg"]=r,e.className=T()(e.className,"colored",S()(r))),n&&(e.title=t.description()||"",e.href=app.route("tag",{tags:t.slug()})),t.isChild()&&(e.className+=" TagLabel--child")}else e.className+=" untagged";return m(n?w():"span",e,m("span",{className:"TagLabel-text"},t&&t.icon()&&E(t,{className:"TagLabel-icon"},{useColor:!1}),m("span",{className:"TagLabel-name"},o)))}function C(t){return t.slice(0).sort((function(t,e){var n=t.position(),o=e.position();if(null===n&&null===o)return e.discussionCount()-t.discussionCount();if(null===o)return-1;if(null===n)return 1;var r=t.parent(),a=e.parent();return r===a?n-o:r&&a?r.position()-a.position():r?r===e?1:r.position()-o:a?a===t?-1:n-a.position():0}))}function D(){(0,a.extend)(s().prototype,"oninit",(function(){this.loading=!0})),(0,a.extend)(s().prototype,"oncreate",(function(){var t=this;r().tagList.load().then((function(){t.loading=!1,m.redraw()}))})),(0,a.override)(s().prototype,"view",(function(t,e){return this.loading?m(g(),null):t(e)})),(0,a.override)(r(),"getRequiredPermissions",(function(t,e){var n=e.match(/^tag\d+\./);return n?t(e.substr(n[0].length)).map((function(t){return n[0]+t})):t(e)})),(0,a.extend)(s().prototype,"scopeItems",(function(t){C(r().store.all("tags")).filter((function(t){return t.isRestricted()})).forEach((function(e){return t.add("tag"+e.id(),{label:N(e),onremove:function(){return e.save({isRestricted:!1})},render:function(t){return"setting"in t?null:"viewForum"===t.permission||"startDiscussion"===t.permission||t.permission.startsWith("discussion.")&&!1!==t.tagScoped||t.tagScoped?m(c(),{permission:"tag"+e.id()+"."+t.permission,allowGuest:t.allowGuest}):null}})}))})),(0,a.extend)(s().prototype,"scopeControlItems",(function(t){var e=C(r().store.all("tags").filter((function(t){return!t.isRestricted()})));e.length&&t.add("tag",m(d(),{className:"Dropdown--restrictByTag",buttonClassName:"Button Button--text",label:r().translator.trans("flarum-tags.admin.permissions.restrict_by_tag_heading"),icon:"fas fa-plus",caretIcon:null},e.map((function(t){return m(f(),{icon:!0,onclick:function(){return t.save({isRestricted:!0})}},[E(t,{className:"Button-icon"})," ",t.name()])}))))}))}function O(){app.extensionData.for("flarum-tags").registerPermission({icon:"fas fa-tag",label:app.translator.trans("flarum-tags.admin.permissions.tag_discussions_label"),permission:"discussion.tag"},"moderate",95).registerPermission({icon:"fas fa-tags",label:app.translator.trans("flarum-tags.admin.permissions.bypass_tag_counts_label"),permission:"bypassTagCounts"},"start",89)}const I=flarum.core.compat["admin/components/BasicsPage"];var P=n.n(I);function M(){(0,a.extend)(P().prototype,"homePageItems",(function(t){t.add("tags",{path:"/tags",label:app.translator.trans("flarum-tags.admin.basics.tags_label")})}))}const L=flarum.core.compat["admin/components/SettingDropdown"];var k=n.n(L);function A(){(0,a.extend)(s().prototype,"startItems",(function(t){t.add("allowTagChange",{icon:"fas fa-tag",label:r().translator.trans("flarum-tags.admin.permissions.allow_edit_tags_label"),setting:function(){var t=parseInt(r().data.settings.allow_tag_change,10);return m(k(),{defaultLabel:t?r().translator.trans("core.admin.permissions_controls.allow_some_minutes_button",{count:t}):r().translator.trans("core.admin.permissions_controls.allow_indefinitely_button"),key:"allow_tag_change",options:[{value:"-1",label:r().translator.trans("core.admin.permissions_controls.allow_indefinitely_button")},{value:"10",label:r().translator.trans("core.admin.permissions_controls.allow_ten_minutes_button")},{value:"reply",label:r().translator.trans("core.admin.permissions_controls.allow_until_reply_button")}]})}},90)}))}const R=flarum.core.compat["admin/components/AdminPage"];var F=n.n(R);function B(){return B=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},B.apply(this,arguments)}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function X(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,j(t,e)}const Y=flarum.core.compat["common/Component"];var H=n.n(Y);const q=flarum.core.compat["common/app"];var G=n.n(q);const W=flarum.core.compat["common/utils/extractText"];var z=n.n(W);const U=flarum.core.compat["common/helpers/highlight"];var K=n.n(U);const V=flarum.core.compat["common/utils/KeyboardNavigatable"];var J=n.n(V);const Z=flarum.core.compat["common/components/Modal"];var Q=n.n(Z);const tt=flarum.core.compat["common/utils/Stream"];var et=n.n(tt);function nt(t,e){if(null==t)return{};var n,o,r={},a=Object.keys(t);for(o=0;o<a.length;o++)n=a[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}var ot=["className","isToggled"],rt=function(t){function e(){return t.apply(this,arguments)||this}return X(e,t),e.prototype.view=function(t){var e=this.attrs,n=e.className,o=e.isToggled,r=nt(e,ot),a=o?"far fa-check-circle":"far fa-circle";return m(f(),Object.assign({},r,{icon:a,className:T()([n,o&&"Button--toggled"])}),t.children)},e}(H()),at=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).loading=!0,e.tags=void 0,e.selected=[],e.bypassReqs=!1,e.filter=et()(""),e.focused=!1,e.navigator=new(J()),e.indexTag=void 0,e}X(e,t),e.initAttrs=function(e){var n,o,r,a,i,s,l,c,u,d,m,h,f,p,g,v,b,y;t.initAttrs.call(this,e),e.title||(e.title=z()(G().translator.trans("flarum-tags.lib.tag_selection_modal.title"))),e.canSelect||(e.canSelect=function(){return!0}),null!=e.allowResetting||(e.allowResetting=!0),e.limits={min:{total:null!=(n=null==(o=e.limits)||null==(r=o.min)?void 0:r.total)?n:-1/0,primary:null!=(a=null==(i=e.limits)||null==(s=i.min)?void 0:s.primary)?a:-1/0,secondary:null!=(l=null==(c=e.limits)||null==(u=c.min)?void 0:u.secondary)?l:-1/0},max:{total:null!=(d=null==(m=e.limits)||null==(h=m.max)?void 0:h.total)?d:1/0,primary:null!=(f=null==(p=e.limits)||null==(g=p.max)?void 0:g.primary)?f:1/0,secondary:null!=(v=null==(b=e.limits)||null==(y=b.max)?void 0:y.secondary)?v:1/0}},function(t){if(t.min.primary>t.max.primary)throw new Error("The minimum number of primary tags allowed cannot be more than the maximum number of primary tags allowed.");if(t.min.secondary>t.max.secondary)throw new Error("The minimum number of secondary tags allowed cannot be more than the maximum number of secondary tags allowed.");if(t.min.total>t.max.primary+t.max.secondary)throw new Error("The minimum number of tags allowed cannot be more than the maximum number of primary and secondary tags allowed together.");if(t.max.total<t.min.primary+t.min.secondary)throw new Error("The maximum number of tags allowed cannot be less than the minimum number of primary and secondary tags allowed together.");if(t.min.total>t.max.total)throw new Error("The minimum number of tags allowed cannot be more than the maximum number of tags allowed.")}(e.limits)};var n=e.prototype;return n.oninit=function(e){var n=this;t.prototype.oninit.call(this,e),this.navigator.onUp((function(){return n.setIndex(n.getCurrentNumericIndex()-1,!0)})).onDown((function(){return n.setIndex(n.getCurrentNumericIndex()+1,!0)})).onSelect(this.select.bind(this)).onRemove((function(){return n.selected.splice(n.selected.length-1,1)})),G().tagList.load(["parent"]).then((function(t){n.loading=!1,n.attrs.selectableTags&&(t=n.attrs.selectableTags(t)),n.tags=C(t),n.attrs.selectedTags&&n.attrs.selectedTags.map(n.addTag.bind(n)),n.indexTag=t[0],m.redraw()}))},n.className=function(){return T()("TagSelectionModal",this.attrs.className)},n.title=function(){return this.attrs.title},n.content=function(){var t=this;if(this.loading||!this.tags)return m(g(),null);var e=this.filter().toLowerCase(),n=this.primaryCount(),o=this.secondaryCount(),r=this.getFilteredTags(),a=Math.max(z()(this.getInstruction(n,o)).length,this.filter().length);return[m("div",{className:"Modal-body"},m("div",{className:"TagSelectionModal-form"},m("div",{className:"TagSelectionModal-form-input"},m("div",{className:"TagsInput FormControl "+(this.focused?"focus":""),onclick:function(){return t.$(".TagsInput input").focus()}},m("span",{className:"TagsInput-selected"},this.selected.map((function(e){return m("span",{className:"TagsInput-tag",onclick:function(){t.removeTag(e),t.onready()}},N(e))}))),m("input",{className:"FormControl",placeholder:z()(this.getInstruction(n,o)),bidi:this.filter,style:{width:a+"ch"},onkeydown:this.navigator.navigate.bind(this.navigator),onfocus:function(){return t.focused=!0},onblur:function(){return t.focused=!1}}))),m("div",{className:"TagSelectionModal-form-submit App-primaryControl"},m(f(),{type:"submit",className:"Button Button--primary",disabled:!this.meetsRequirements(n,o),icon:"fas fa-check"},G().translator.trans("flarum-tags.lib.tag_selection_modal.submit_button"))))),m("div",{className:"Modal-footer"},m("ul",{className:"TagSelectionModal-list SelectTagList"},r.map((function(n){return m("li",{"data-index":n.id(),className:T()({pinned:null!==n.position(),child:!!n.parent(),colored:!!n.color(),selected:t.selected.includes(n),active:t.indexTag===n}),style:{color:n.color()},onmouseover:function(){return t.indexTag=n},onclick:t.toggleTag.bind(t,n)},E(n),m("span",{className:"SelectTagListItem-name"},K()(n.name(),e)),n.description()?m("span",{className:"SelectTagListItem-description"},n.description()):"")}))),this.attrs.limits.allowBypassing&&m("div",{className:"TagSelectionModal-controls"},m(rt,{className:"Button",onclick:function(){return t.bypassReqs=!t.bypassReqs},isToggled:this.bypassReqs},G().translator.trans("flarum-tags.lib.tag_selection_modal.bypass_requirements"))))]},n.getFilteredTags=function(){var t=this,e=this.filter().toLowerCase(),n=this.primaryCount(),o=this.secondaryCount(),r=this.tags;return this.attrs.requireParentTag&&(r=r.filter((function(e){var n=e.parent();return null!==n&&(!1===n||t.selected.includes(n))}))),this.bypassReqs||(this.selected.length>=this.attrs.limits.max.total?r=r.filter((function(e){return t.selected.includes(e)})):(n>=this.attrs.limits.max.primary&&(r=r.filter((function(e){return!e.isPrimary()||t.selected.includes(e)}))),o>=this.attrs.limits.max.secondary&&(r=r.filter((function(e){return e.isPrimary()||t.selected.includes(e)}))))),e&&(r=r.filter((function(t){return t.name().toLowerCase().includes(e)}))),this.indexTag&&r.includes(this.indexTag)||(this.indexTag=r[0]),r},n.primaryCount=function(){return this.selected.filter((function(t){return t.isPrimary()})).length},n.secondaryCount=function(){return this.selected.filter((function(t){return!t.isPrimary()})).length},n.meetsRequirements=function(t,e){return!!(this.bypassReqs||this.attrs.allowResetting&&0===this.selected.length)||!(this.selected.length<this.attrs.limits.min.total)&&t>=this.attrs.limits.min.primary&&e>=this.attrs.limits.min.secondary},n.addTag=function(t){if(t&&this.attrs.canSelect(t)){if(this.attrs.onSelect&&this.attrs.onSelect(t,this.selected),this.attrs.requireParentTag){var e=t.parent();e&&!this.selected.includes(e)&&this.selected.push(e)}this.selected.includes(t)||this.selected.push(t)}},n.removeTag=function(t){var e=this.selected.indexOf(t);-1!==e&&(this.selected.splice(e,1),this.attrs.requireParentTag&&this.selected.filter((function(e){return e.parent()===t})).forEach(this.removeTag.bind(this)),this.attrs.onDeselect&&this.attrs.onDeselect(t,this.selected))},n.toggleTag=function(t){this.tags&&(this.selected.includes(t)?this.removeTag(t):this.addTag(t),this.filter()&&(this.filter(""),this.indexTag=this.tags[0]),this.onready())},n.getInstruction=function(t,e){if(this.bypassReqs)return"";if(t<this.attrs.limits.min.primary){var n=this.attrs.limits.min.primary-t;return z()(G().translator.trans("flarum-tags.lib.tag_selection_modal.choose_primary_placeholder",{count:n}))}if(e<this.attrs.limits.min.secondary){var o=this.attrs.limits.min.secondary-e;return z()(G().translator.trans("flarum-tags.lib.tag_selection_modal.choose_secondary_placeholder",{count:o}))}if(this.selected.length<this.attrs.limits.min.total){var r=this.attrs.limits.min.total-this.selected.length;return z()(G().translator.trans("flarum-tags.lib.tag_selection_modal.choose_tags_placeholder",{count:r}))}return""},n.onsubmit=function(t){t.preventDefault(),this.attrs.onsubmit&&this.attrs.onsubmit(this.selected),this.hide()},n.select=function(t){t.metaKey||t.ctrlKey||this.indexTag&&this.selected.includes(this.indexTag)?this.selected.length&&this.$('button[type="submit"]').click():this.indexTag&&this.getItem(this.indexTag)[0].dispatchEvent(new Event("click"))},n.selectableItems=function(){return this.$(".TagSelectionModal-list > li")},n.getCurrentNumericIndex=function(){return this.indexTag?this.selectableItems().index(this.getItem(this.indexTag)):-1},n.getItem=function(t){return this.selectableItems().filter('[data-index="'+t.id()+'"]')},n.setIndex=function(t,e){var n=this.selectableItems(),o=n.parent();t<0?t=n.length-1:t>=n.length&&(t=0);var r=n.eq(t);if(this.indexTag=G().store.getById("tags",r.attr("data-index")),m.redraw(),e&&this.indexTag){var a,i=o.scrollTop(),s=o.offset().top,l=s+o.outerHeight(),c=r.offset().top,u=c+r.outerHeight();c<s?a=i-s+c-parseInt(o.css("padding-top"),10):u>l&&(a=i-l+u+parseInt(o.css("padding-bottom"),10)),void 0!==a&&o.stop(!0).animate({scrollTop:a},100)}},e}(Q()),it=["link"];function st(t,e){void 0===e&&(e={});var n=[],o=e,r=o.link,a=nt(o,it);return a.className=T()("TagsLabel",a.className),t?C(t).forEach((function(e){(e||1===t.length)&&n.push(N(e,{link:r}))})):n.push(N()),m("span",a,n)}var lt=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).tags=[],e.loaded=!1,e}return X(e,t),e.prototype.view=function(){var t=this,e=JSON.parse(this.attrs.settingValue()||"[]");return this.loaded||r().tagList.load(["parent"]).then((function(n){t.tags=n.filter((function(t){return e.includes(t.id())})),t.loaded=!0,m.redraw()})),m("div",{className:"Form-group SelectTagsSettingComponent"},m("label",null,this.attrs.label),this.attrs.help&&m("p",{className:"helpText"},this.attrs.help),this.loaded?m(f(),{className:"Button Button--text",onclick:function(){return r().modal.show(at,B({selectedTags:t.tags,onsubmit:function(e){t.tags=e,t.attrs.settingValue(JSON.stringify(e.map((function(t){return t.id()}))))}},t.attrs.options))}},this.tags.length?st(this.tags):m("span",{className:"TagLabel untagged"},r().translator.trans("flarum-tags.admin.settings.button_text"))):m(g(),{size:"small",display:"inline"}))},e}(H());function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function ut(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach((function(e){mt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function dt(t){return dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dt(t)}function mt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ht(){return ht=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},ht.apply(this,arguments)}function ft(t,e){if(null==t)return{};var n,o,r=function(t,e){if(null==t)return{};var n,o,r={},a=Object.keys(t);for(o=0;o<a.length;o++)n=a[o],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(o=0;o<a.length;o++)n=a[o],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function pt(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var gt=pt(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),vt=pt(/Edge/i),bt=pt(/firefox/i),yt=pt(/safari/i)&&!pt(/chrome/i)&&!pt(/android/i),wt=pt(/iP(ad|od|hone)/i),_t=pt(/chrome/i)&&pt(/android/i),Tt={capture:!1,passive:!1};function xt(t,e,n){t.addEventListener(e,n,!gt&&Tt)}function St(t,e,n){t.removeEventListener(e,n,!gt&&Tt)}function Et(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function Nt(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function Ct(t,e,n,o){if(t){n=n||document;do{if(null!=e&&(">"===e[0]?t.parentNode===n&&Et(t,e):Et(t,e))||o&&t===n)return t;if(t===n)break}while(t=Nt(t))}return null}var Dt,Ot=/\s+/g;function It(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var o=(" "+t.className+" ").replace(Ot," ").replace(" "+e+" "," ");t.className=(o+(n?" "+e:"")).replace(Ot," ")}}function Pt(t,e,n){var o=t&&t.style;if(o){if(void 0===n)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in o||-1!==e.indexOf("webkit")||(e="-webkit-"+e),o[e]=n+("string"==typeof n?"":"px")}}function Mt(t,e){var n="";if("string"==typeof t)n=t;else do{var o=Pt(t,"transform");o&&"none"!==o&&(n=o+" "+n)}while(!e&&(t=t.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(n)}function Lt(t,e,n){if(t){var o=t.getElementsByTagName(e),r=0,a=o.length;if(n)for(;r<a;r++)n(o[r],r);return o}return[]}function kt(){return document.scrollingElement||document.documentElement}function At(t,e,n,o,r){if(t.getBoundingClientRect||t===window){var a,i,s,l,c,u,d;if(t!==window&&t.parentNode&&t!==kt()?(i=(a=t.getBoundingClientRect()).top,s=a.left,l=a.bottom,c=a.right,u=a.height,d=a.width):(i=0,s=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(r=r||t.parentNode,!gt))do{if(r&&r.getBoundingClientRect&&("none"!==Pt(r,"transform")||n&&"static"!==Pt(r,"position"))){var m=r.getBoundingClientRect();i-=m.top+parseInt(Pt(r,"border-top-width")),s-=m.left+parseInt(Pt(r,"border-left-width")),l=i+a.height,c=s+a.width;break}}while(r=r.parentNode);if(o&&t!==window){var h=Mt(r||t),f=h&&h.a,p=h&&h.d;h&&(l=(i/=p)+(u/=p),c=(s/=f)+(d/=f))}return{top:i,left:s,bottom:l,right:c,width:d,height:u}}}function Rt(t,e,n){for(var o=Yt(t,!0),r=At(t)[e];o;){var a=At(o)[n];if(!("top"===n||"left"===n?r>=a:r<=a))return o;if(o===kt())break;o=Yt(o,!1)}return!1}function Ft(t,e,n,o){for(var r=0,a=0,i=t.children;a<i.length;){if("none"!==i[a].style.display&&i[a]!==qe.ghost&&(o||i[a]!==qe.dragged)&&Ct(i[a],n.draggable,t,!1)){if(r===e)return i[a];r++}a++}return null}function Bt(t,e){for(var n=t.lastElementChild;n&&(n===qe.ghost||"none"===Pt(n,"display")||e&&!Et(n,e));)n=n.previousElementSibling;return n||null}function jt(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===qe.clone||e&&!Et(t,e)||n++;return n}function Xt(t){var e=0,n=0,o=kt();if(t)do{var r=Mt(t),a=r.a,i=r.d;e+=t.scrollLeft*a,n+=t.scrollTop*i}while(t!==o&&(t=t.parentNode));return[e,n]}function Yt(t,e){if(!t||!t.getBoundingClientRect)return kt();var n=t,o=!1;do{if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var r=Pt(n);if(n.clientWidth<n.scrollWidth&&("auto"==r.overflowX||"scroll"==r.overflowX)||n.clientHeight<n.scrollHeight&&("auto"==r.overflowY||"scroll"==r.overflowY)){if(!n.getBoundingClientRect||n===document.body)return kt();if(o||e)return n;o=!0}}}while(n=n.parentNode);return kt()}function Ht(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function qt(t,e){return function(){if(!Dt){var n=arguments,o=this;1===n.length?t.call(o,n[0]):t.apply(o,n),Dt=setTimeout((function(){Dt=void 0}),e)}}}function Gt(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function Wt(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var zt="Sortable"+(new Date).getTime();var Ut=[],$t={initializeByDefault:!0},Kt={mount:function(t){for(var e in $t)$t.hasOwnProperty(e)&&!(e in t)&&(t[e]=$t[e]);Ut.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),Ut.push(t)},pluginEvent:function(t,e,n){var o=this;this.eventCanceled=!1,n.cancel=function(){o.eventCanceled=!0};var r=t+"Global";Ut.forEach((function(o){e[o.pluginName]&&(e[o.pluginName][r]&&e[o.pluginName][r](ut({sortable:e},n)),e.options[o.pluginName]&&e[o.pluginName][t]&&e[o.pluginName][t](ut({sortable:e},n)))}))},initializePlugins:function(t,e,n,o){for(var r in Ut.forEach((function(o){var r=o.pluginName;if(t.options[r]||o.initializeByDefault){var a=new o(t,e,t.options);a.sortable=t,a.options=t.options,t[r]=a,ht(n,a.defaults)}})),t.options)if(t.options.hasOwnProperty(r)){var a=this.modifyOption(t,r,t.options[r]);void 0!==a&&(t.options[r]=a)}},getEventProperties:function(t,e){var n={};return Ut.forEach((function(o){"function"==typeof o.eventProperties&&ht(n,o.eventProperties.call(e[o.pluginName],t))})),n},modifyOption:function(t,e,n){var o;return Ut.forEach((function(r){t[r.pluginName]&&r.optionListeners&&"function"==typeof r.optionListeners[e]&&(o=r.optionListeners[e].call(t[r.pluginName],n))})),o}};var Vt=["evt"],Jt=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.evt,r=ft(n,Vt);Kt.pluginEvent.bind(qe)(t,e,ut({dragEl:Qt,parentEl:te,ghostEl:ee,rootEl:ne,nextEl:oe,lastDownEl:re,cloneEl:ae,cloneHidden:ie,dragStarted:ye,putSortable:me,activeSortable:qe.active,originalEvent:o,oldIndex:se,oldDraggableIndex:ce,newIndex:le,newDraggableIndex:ue,hideGhostForTarget:je,unhideGhostForTarget:Xe,cloneNowHidden:function(){ie=!0},cloneNowShown:function(){ie=!1},dispatchSortableEvent:function(t){Zt({sortable:e,name:t,originalEvent:o})}},r))};function Zt(t){!function(t){var e=t.sortable,n=t.rootEl,o=t.name,r=t.targetEl,a=t.cloneEl,i=t.toEl,s=t.fromEl,l=t.oldIndex,c=t.newIndex,u=t.oldDraggableIndex,d=t.newDraggableIndex,m=t.originalEvent,h=t.putSortable,f=t.extraEventProperties;if(e=e||n&&n[zt]){var p,g=e.options,v="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||gt||vt?(p=document.createEvent("Event")).initEvent(o,!0,!0):p=new CustomEvent(o,{bubbles:!0,cancelable:!0}),p.to=i||n,p.from=s||n,p.item=r||n,p.clone=a,p.oldIndex=l,p.newIndex=c,p.oldDraggableIndex=u,p.newDraggableIndex=d,p.originalEvent=m,p.pullMode=h?h.lastPutMode:void 0;var b=ut(ut({},f),Kt.getEventProperties(o,e));for(var y in b)p[y]=b[y];n&&n.dispatchEvent(p),g[v]&&g[v].call(e,p)}}(ut({putSortable:me,cloneEl:ae,targetEl:Qt,rootEl:ne,oldIndex:se,oldDraggableIndex:ce,newIndex:le,newDraggableIndex:ue},t))}var Qt,te,ee,ne,oe,re,ae,ie,se,le,ce,ue,de,me,he,fe,pe,ge,ve,be,ye,we,_e,Te,xe,Se=!1,Ee=!1,Ne=[],Ce=!1,De=!1,Oe=[],Ie=!1,Pe=[],Me="undefined"!=typeof document,Le=wt,ke=vt||gt?"cssFloat":"float",Ae=Me&&!_t&&!wt&&"draggable"in document.createElement("div"),Re=function(){if(Me){if(gt)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),Fe=function(t,e){var n=Pt(t),o=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),r=Ft(t,0,e),a=Ft(t,1,e),i=r&&Pt(r),s=a&&Pt(a),l=i&&parseInt(i.marginLeft)+parseInt(i.marginRight)+At(r).width,c=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+At(a).width;if("flex"===n.display)return"column"===n.flexDirection||"column-reverse"===n.flexDirection?"vertical":"horizontal";if("grid"===n.display)return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(r&&i.float&&"none"!==i.float){var u="left"===i.float?"left":"right";return!a||"both"!==s.clear&&s.clear!==u?"horizontal":"vertical"}return r&&("block"===i.display||"flex"===i.display||"table"===i.display||"grid"===i.display||l>=o&&"none"===n[ke]||a&&"none"===n[ke]&&l+c>o)?"vertical":"horizontal"},Be=function(t){function e(t,n){return function(o,r,a,i){var s=o.options.group.name&&r.options.group.name&&o.options.group.name===r.options.group.name;if(null==t&&(n||s))return!0;if(null==t||!1===t)return!1;if(n&&"clone"===t)return t;if("function"==typeof t)return e(t(o,r,a,i),n)(o,r,a,i);var l=(n?o:r).options.group.name;return!0===t||"string"==typeof t&&t===l||t.join&&t.indexOf(l)>-1}}var n={},o=t.group;o&&"object"==dt(o)||(o={name:o}),n.name=o.name,n.checkPull=e(o.pull,!0),n.checkPut=e(o.put),n.revertClone=o.revertClone,t.group=n},je=function(){!Re&&ee&&Pt(ee,"display","none")},Xe=function(){!Re&&ee&&Pt(ee,"display","")};Me&&!_t&&document.addEventListener("click",(function(t){if(Ee)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Ee=!1,!1}),!0);var Ye=function(t){if(Qt){t=t.touches?t.touches[0]:t;var e=(r=t.clientX,a=t.clientY,Ne.some((function(t){var e=t[zt].options.emptyInsertThreshold;if(e&&!Bt(t)){var n=At(t),o=r>=n.left-e&&r<=n.right+e,s=a>=n.top-e&&a<=n.bottom+e;return o&&s?i=t:void 0}})),i);if(e){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=t[o]);n.target=n.rootEl=e,n.preventDefault=void 0,n.stopPropagation=void 0,e[zt]._onDragOver(n)}}var r,a,i},He=function(t){Qt&&Qt.parentNode[zt]._isOutsideThisEl(t.target)};function qe(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=ht({},e),t[zt]=this;var n,o,r={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Fe(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==qe.supportPointer&&"PointerEvent"in window&&!yt,emptyInsertThreshold:5};for(var a in Kt.initializePlugins(this,t,r),r)!(a in e)&&(e[a]=r[a]);for(var i in Be(e),this)"_"===i.charAt(0)&&"function"==typeof this[i]&&(this[i]=this[i].bind(this));this.nativeDraggable=!e.forceFallback&&Ae,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?xt(t,"pointerdown",this._onTapStart):(xt(t,"mousedown",this._onTapStart),xt(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(xt(t,"dragover",this),xt(t,"dragenter",this)),Ne.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),ht(this,(o=[],{captureAnimationState:function(){o=[],this.options.animation&&[].slice.call(this.el.children).forEach((function(t){if("none"!==Pt(t,"display")&&t!==qe.ghost){o.push({target:t,rect:At(t)});var e=ut({},o[o.length-1].rect);if(t.thisAnimationDuration){var n=Mt(t,!0);n&&(e.top-=n.f,e.left-=n.e)}t.fromRect=e}}))},addAnimationState:function(t){o.push(t)},removeAnimationState:function(t){o.splice(function(t,e){for(var n in t)if(t.hasOwnProperty(n))for(var o in e)if(e.hasOwnProperty(o)&&e[o]===t[n][o])return Number(n);return-1}(o,{target:t}),1)},animateAll:function(t){var e=this;if(!this.options.animation)return clearTimeout(n),void("function"==typeof t&&t());var r=!1,a=0;o.forEach((function(t){var n=0,o=t.target,i=o.fromRect,s=At(o),l=o.prevFromRect,c=o.prevToRect,u=t.rect,d=Mt(o,!0);d&&(s.top-=d.f,s.left-=d.e),o.toRect=s,o.thisAnimationDuration&&Ht(l,s)&&!Ht(i,s)&&(u.top-s.top)/(u.left-s.left)==(i.top-s.top)/(i.left-s.left)&&(n=function(t,e,n,o){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*o.animation}(u,l,c,e.options)),Ht(s,i)||(o.prevFromRect=i,o.prevToRect=s,n||(n=e.options.animation),e.animate(o,u,s,n)),n&&(r=!0,a=Math.max(a,n),clearTimeout(o.animationResetTimer),o.animationResetTimer=setTimeout((function(){o.animationTime=0,o.prevFromRect=null,o.fromRect=null,o.prevToRect=null,o.thisAnimationDuration=null}),n),o.thisAnimationDuration=n)})),clearTimeout(n),r?n=setTimeout((function(){"function"==typeof t&&t()}),a):"function"==typeof t&&t(),o=[]},animate:function(t,e,n,o){if(o){Pt(t,"transition",""),Pt(t,"transform","");var r=Mt(this.el),a=r&&r.a,i=r&&r.d,s=(e.left-n.left)/(a||1),l=(e.top-n.top)/(i||1);t.animatingX=!!s,t.animatingY=!!l,Pt(t,"transform","translate3d("+s+"px,"+l+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),Pt(t,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),Pt(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){Pt(t,"transition",""),Pt(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),o)}}}))}function Ge(t,e,n,o,r,a,i,s){var l,c,u=t[zt],d=u.options.onMove;return!window.CustomEvent||gt||vt?(l=document.createEvent("Event")).initEvent("move",!0,!0):l=new CustomEvent("move",{bubbles:!0,cancelable:!0}),l.to=e,l.from=t,l.dragged=n,l.draggedRect=o,l.related=r||e,l.relatedRect=a||At(e),l.willInsertAfter=s,l.originalEvent=i,t.dispatchEvent(l),d&&(c=d.call(u,l,i)),c}function We(t){t.draggable=!1}function ze(){Ie=!1}function Ue(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,o=0;n--;)o+=e.charCodeAt(n);return o.toString(36)}function $e(t){return setTimeout(t,0)}function Ke(t){return clearTimeout(t)}qe.prototype={constructor:qe,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(we=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Qt):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,n=this.el,o=this.options,r=o.preventOnFilter,a=t.type,i=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,s=(i||t).target,l=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||s,c=o.filter;if(function(t){Pe.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var o=e[n];o.checked&&Pe.push(o)}}(n),!Qt&&!(/mousedown|pointerdown/.test(a)&&0!==t.button||o.disabled)&&!l.isContentEditable&&(this.nativeDraggable||!yt||!s||"SELECT"!==s.tagName.toUpperCase())&&!((s=Ct(s,o.draggable,n,!1))&&s.animated||re===s)){if(se=jt(s),ce=jt(s,o.draggable),"function"==typeof c){if(c.call(this,t,s,this))return Zt({sortable:e,rootEl:l,name:"filter",targetEl:s,toEl:n,fromEl:n}),Jt("filter",e,{evt:t}),void(r&&t.cancelable&&t.preventDefault())}else if(c&&(c=c.split(",").some((function(o){if(o=Ct(l,o.trim(),n,!1))return Zt({sortable:e,rootEl:o,name:"filter",targetEl:s,fromEl:n,toEl:n}),Jt("filter",e,{evt:t}),!0}))))return void(r&&t.cancelable&&t.preventDefault());o.handle&&!Ct(l,o.handle,n,!1)||this._prepareDragStart(t,i,s)}}},_prepareDragStart:function(t,e,n){var o,r=this,a=r.el,i=r.options,s=a.ownerDocument;if(n&&!Qt&&n.parentNode===a){var l=At(n);if(ne=a,te=(Qt=n).parentNode,oe=Qt.nextSibling,re=n,de=i.group,qe.dragged=Qt,he={target:Qt,clientX:(e||t).clientX,clientY:(e||t).clientY},ve=he.clientX-l.left,be=he.clientY-l.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Qt.style["will-change"]="all",o=function(){Jt("delayEnded",r,{evt:t}),qe.eventCanceled?r._onDrop():(r._disableDelayedDragEvents(),!bt&&r.nativeDraggable&&(Qt.draggable=!0),r._triggerDragStart(t,e),Zt({sortable:r,name:"choose",originalEvent:t}),It(Qt,i.chosenClass,!0))},i.ignore.split(",").forEach((function(t){Lt(Qt,t.trim(),We)})),xt(s,"dragover",Ye),xt(s,"mousemove",Ye),xt(s,"touchmove",Ye),xt(s,"mouseup",r._onDrop),xt(s,"touchend",r._onDrop),xt(s,"touchcancel",r._onDrop),bt&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Qt.draggable=!0),Jt("delayStart",this,{evt:t}),!i.delay||i.delayOnTouchOnly&&!e||this.nativeDraggable&&(vt||gt))o();else{if(qe.eventCanceled)return void this._onDrop();xt(s,"mouseup",r._disableDelayedDrag),xt(s,"touchend",r._disableDelayedDrag),xt(s,"touchcancel",r._disableDelayedDrag),xt(s,"mousemove",r._delayedDragTouchMoveHandler),xt(s,"touchmove",r._delayedDragTouchMoveHandler),i.supportPointer&&xt(s,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(o,i.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Qt&&We(Qt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;St(t,"mouseup",this._disableDelayedDrag),St(t,"touchend",this._disableDelayedDrag),St(t,"touchcancel",this._disableDelayedDrag),St(t,"mousemove",this._delayedDragTouchMoveHandler),St(t,"touchmove",this._delayedDragTouchMoveHandler),St(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?xt(document,"pointermove",this._onTouchMove):xt(document,e?"touchmove":"mousemove",this._onTouchMove):(xt(Qt,"dragend",this),xt(ne,"dragstart",this._onDragStart));try{document.selection?$e((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(Se=!1,ne&&Qt){Jt("dragStarted",this,{evt:e}),this.nativeDraggable&&xt(document,"dragover",He);var n=this.options;!t&&It(Qt,n.dragClass,!1),It(Qt,n.ghostClass,!0),qe.active=this,t&&this._appendGhost(),Zt({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if(fe){this._lastX=fe.clientX,this._lastY=fe.clientY,je();for(var t=document.elementFromPoint(fe.clientX,fe.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint(fe.clientX,fe.clientY))!==e;)e=t;if(Qt.parentNode[zt]._isOutsideThisEl(t),e)do{if(e[zt]&&e[zt]._onDragOver({clientX:fe.clientX,clientY:fe.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break;t=e}while(e=e.parentNode);Xe()}},_onTouchMove:function(t){if(he){var e=this.options,n=e.fallbackTolerance,o=e.fallbackOffset,r=t.touches?t.touches[0]:t,a=ee&&Mt(ee,!0),i=ee&&a&&a.a,s=ee&&a&&a.d,l=Le&&xe&&Xt(xe),c=(r.clientX-he.clientX+o.x)/(i||1)+(l?l[0]-Oe[0]:0)/(i||1),u=(r.clientY-he.clientY+o.y)/(s||1)+(l?l[1]-Oe[1]:0)/(s||1);if(!qe.active&&!Se){if(n&&Math.max(Math.abs(r.clientX-this._lastX),Math.abs(r.clientY-this._lastY))<n)return;this._onDragStart(t,!0)}if(ee){a?(a.e+=c-(pe||0),a.f+=u-(ge||0)):a={a:1,b:0,c:0,d:1,e:c,f:u};var d="matrix(".concat(a.a,",").concat(a.b,",").concat(a.c,",").concat(a.d,",").concat(a.e,",").concat(a.f,")");Pt(ee,"webkitTransform",d),Pt(ee,"mozTransform",d),Pt(ee,"msTransform",d),Pt(ee,"transform",d),pe=c,ge=u,fe=r}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!ee){var t=this.options.fallbackOnBody?document.body:ne,e=At(Qt,!0,Le,!0,t),n=this.options;if(Le){for(xe=t;"static"===Pt(xe,"position")&&"none"===Pt(xe,"transform")&&xe!==document;)xe=xe.parentNode;xe!==document.body&&xe!==document.documentElement?(xe===document&&(xe=kt()),e.top+=xe.scrollTop,e.left+=xe.scrollLeft):xe=kt(),Oe=Xt(xe)}It(ee=Qt.cloneNode(!0),n.ghostClass,!1),It(ee,n.fallbackClass,!0),It(ee,n.dragClass,!0),Pt(ee,"transition",""),Pt(ee,"transform",""),Pt(ee,"box-sizing","border-box"),Pt(ee,"margin",0),Pt(ee,"top",e.top),Pt(ee,"left",e.left),Pt(ee,"width",e.width),Pt(ee,"height",e.height),Pt(ee,"opacity","0.8"),Pt(ee,"position",Le?"absolute":"fixed"),Pt(ee,"zIndex","100000"),Pt(ee,"pointerEvents","none"),qe.ghost=ee,t.appendChild(ee),Pt(ee,"transform-origin",ve/parseInt(ee.style.width)*100+"% "+be/parseInt(ee.style.height)*100+"%")}},_onDragStart:function(t,e){var n=this,o=t.dataTransfer,r=n.options;Jt("dragStart",this,{evt:t}),qe.eventCanceled?this._onDrop():(Jt("setupClone",this),qe.eventCanceled||((ae=Wt(Qt)).removeAttribute("id"),ae.draggable=!1,ae.style["will-change"]="",this._hideClone(),It(ae,this.options.chosenClass,!1),qe.clone=ae),n.cloneId=$e((function(){Jt("clone",n),qe.eventCanceled||(n.options.removeCloneOnHide||ne.insertBefore(ae,Qt),n._hideClone(),Zt({sortable:n,name:"clone"}))})),!e&&It(Qt,r.dragClass,!0),e?(Ee=!0,n._loopId=setInterval(n._emulateDragOver,50)):(St(document,"mouseup",n._onDrop),St(document,"touchend",n._onDrop),St(document,"touchcancel",n._onDrop),o&&(o.effectAllowed="move",r.setData&&r.setData.call(n,o,Qt)),xt(document,"drop",n),Pt(Qt,"transform","translateZ(0)")),Se=!0,n._dragStartId=$e(n._dragStarted.bind(n,e,t)),xt(document,"selectstart",n),ye=!0,yt&&Pt(document.body,"user-select","none"))},_onDragOver:function(t){var e,n,o,r,a=this.el,i=t.target,s=this.options,l=s.group,c=qe.active,u=de===l,d=s.sort,m=me||c,h=this,f=!1;if(!Ie){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),i=Ct(i,s.draggable,a,!0),O("dragOver"),qe.eventCanceled)return f;if(Qt.contains(t.target)||i.animated&&i.animatingX&&i.animatingY||h._ignoreWhileAnimating===i)return P(!1);if(Ee=!1,c&&!s.disabled&&(u?d||(o=te!==ne):me===this||(this.lastPutMode=de.checkPull(this,c,Qt,t))&&l.checkPut(this,c,Qt,t))){if(r="vertical"===this._getDirection(t,i),e=At(Qt),O("dragOverValid"),qe.eventCanceled)return f;if(o)return te=ne,I(),this._hideClone(),O("revert"),qe.eventCanceled||(oe?ne.insertBefore(Qt,oe):ne.appendChild(Qt)),P(!0);var p=Bt(a,s.draggable);if(!p||function(t,e,n){var o=At(Bt(n.el,n.options.draggable));return e?t.clientX>o.right+10||t.clientX<=o.right&&t.clientY>o.bottom&&t.clientX>=o.left:t.clientX>o.right&&t.clientY>o.top||t.clientX<=o.right&&t.clientY>o.bottom+10}(t,r,this)&&!p.animated){if(p===Qt)return P(!1);if(p&&a===t.target&&(i=p),i&&(n=At(i)),!1!==Ge(ne,a,Qt,e,i,n,t,!!i))return I(),p&&p.nextSibling?a.insertBefore(Qt,p.nextSibling):a.appendChild(Qt),te=a,M(),P(!0)}else if(p&&function(t,e,n){var o=At(Ft(n.el,0,n.options,!0));return e?t.clientX<o.left-10||t.clientY<o.top&&t.clientX<o.right:t.clientY<o.top-10||t.clientY<o.bottom&&t.clientX<o.left}(t,r,this)){var g=Ft(a,0,s,!0);if(g===Qt)return P(!1);if(n=At(i=g),!1!==Ge(ne,a,Qt,e,i,n,t,!1))return I(),a.insertBefore(Qt,g),te=a,M(),P(!0)}else if(i.parentNode===a){n=At(i);var v,b,y,w=Qt.parentNode!==a,_=!function(t,e,n){var o=n?t.left:t.top,r=n?t.right:t.bottom,a=n?t.width:t.height,i=n?e.left:e.top,s=n?e.right:e.bottom,l=n?e.width:e.height;return o===i||r===s||o+a/2===i+l/2}(Qt.animated&&Qt.toRect||e,i.animated&&i.toRect||n,r),T=r?"top":"left",x=Rt(i,"top","top")||Rt(Qt,"top","top"),S=x?x.scrollTop:void 0;if(we!==i&&(b=n[T],Ce=!1,De=!_&&s.invertSwap||w),v=function(t,e,n,o,r,a,i,s){var l=o?t.clientY:t.clientX,c=o?n.height:n.width,u=o?n.top:n.left,d=o?n.bottom:n.right,m=!1;if(!i)if(s&&Te<c*r){if(!Ce&&(1===_e?l>u+c*a/2:l<d-c*a/2)&&(Ce=!0),Ce)m=!0;else if(1===_e?l<u+Te:l>d-Te)return-_e}else if(l>u+c*(1-r)/2&&l<d-c*(1-r)/2)return function(t){return jt(Qt)<jt(t)?1:-1}(e);return(m=m||i)&&(l<u+c*a/2||l>d-c*a/2)?l>u+c/2?1:-1:0}(t,i,n,r,_?1:s.swapThreshold,null==s.invertedSwapThreshold?s.swapThreshold:s.invertedSwapThreshold,De,we===i),0!==v){var E=jt(Qt);do{E-=v,y=te.children[E]}while(y&&("none"===Pt(y,"display")||y===ee))}if(0===v||y===i)return P(!1);we=i,_e=v;var N=i.nextElementSibling,C=!1,D=Ge(ne,a,Qt,e,i,n,t,C=1===v);if(!1!==D)return 1!==D&&-1!==D||(C=1===D),Ie=!0,setTimeout(ze,30),I(),C&&!N?a.appendChild(Qt):i.parentNode.insertBefore(Qt,C?N:i),x&&Gt(x,0,S-x.scrollTop),te=Qt.parentNode,void 0===b||De||(Te=Math.abs(b-At(i)[T])),M(),P(!0)}if(a.contains(Qt))return P(!1)}return!1}function O(s,l){Jt(s,h,ut({evt:t,isOwner:u,axis:r?"vertical":"horizontal",revert:o,dragRect:e,targetRect:n,canSort:d,fromSortable:m,target:i,completed:P,onMove:function(n,o){return Ge(ne,a,Qt,e,n,At(n),t,o)},changed:M},l))}function I(){O("dragOverAnimationCapture"),h.captureAnimationState(),h!==m&&m.captureAnimationState()}function P(e){return O("dragOverCompleted",{insertion:e}),e&&(u?c._hideClone():c._showClone(h),h!==m&&(It(Qt,me?me.options.ghostClass:c.options.ghostClass,!1),It(Qt,s.ghostClass,!0)),me!==h&&h!==qe.active?me=h:h===qe.active&&me&&(me=null),m===h&&(h._ignoreWhileAnimating=i),h.animateAll((function(){O("dragOverAnimationComplete"),h._ignoreWhileAnimating=null})),h!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(i===Qt&&!Qt.animated||i===a&&!i.animated)&&(we=null),s.dragoverBubble||t.rootEl||i===document||(Qt.parentNode[zt]._isOutsideThisEl(t.target),!e&&Ye(t)),!s.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),f=!0}function M(){le=jt(Qt),ue=jt(Qt,s.draggable),Zt({sortable:h,name:"change",toEl:a,newIndex:le,newDraggableIndex:ue,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){St(document,"mousemove",this._onTouchMove),St(document,"touchmove",this._onTouchMove),St(document,"pointermove",this._onTouchMove),St(document,"dragover",Ye),St(document,"mousemove",Ye),St(document,"touchmove",Ye)},_offUpEvents:function(){var t=this.el.ownerDocument;St(t,"mouseup",this._onDrop),St(t,"touchend",this._onDrop),St(t,"pointerup",this._onDrop),St(t,"touchcancel",this._onDrop),St(document,"selectstart",this)},_onDrop:function(t){var e=this.el,n=this.options;le=jt(Qt),ue=jt(Qt,n.draggable),Jt("drop",this,{evt:t}),te=Qt&&Qt.parentNode,le=jt(Qt),ue=jt(Qt,n.draggable),qe.eventCanceled||(Se=!1,De=!1,Ce=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ke(this.cloneId),Ke(this._dragStartId),this.nativeDraggable&&(St(document,"drop",this),St(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),yt&&Pt(document.body,"user-select",""),Pt(Qt,"transform",""),t&&(ye&&(t.cancelable&&t.preventDefault(),!n.dropBubble&&t.stopPropagation()),ee&&ee.parentNode&&ee.parentNode.removeChild(ee),(ne===te||me&&"clone"!==me.lastPutMode)&&ae&&ae.parentNode&&ae.parentNode.removeChild(ae),Qt&&(this.nativeDraggable&&St(Qt,"dragend",this),We(Qt),Qt.style["will-change"]="",ye&&!Se&&It(Qt,me?me.options.ghostClass:this.options.ghostClass,!1),It(Qt,this.options.chosenClass,!1),Zt({sortable:this,name:"unchoose",toEl:te,newIndex:null,newDraggableIndex:null,originalEvent:t}),ne!==te?(le>=0&&(Zt({rootEl:te,name:"add",toEl:te,fromEl:ne,originalEvent:t}),Zt({sortable:this,name:"remove",toEl:te,originalEvent:t}),Zt({rootEl:te,name:"sort",toEl:te,fromEl:ne,originalEvent:t}),Zt({sortable:this,name:"sort",toEl:te,originalEvent:t})),me&&me.save()):le!==se&&le>=0&&(Zt({sortable:this,name:"update",toEl:te,originalEvent:t}),Zt({sortable:this,name:"sort",toEl:te,originalEvent:t})),qe.active&&(null!=le&&-1!==le||(le=se,ue=ce),Zt({sortable:this,name:"end",toEl:te,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){Jt("nulling",this),ne=Qt=te=ee=oe=ae=re=ie=he=fe=ye=le=ue=se=ce=we=_e=me=de=qe.dragged=qe.ghost=qe.clone=qe.active=null,Pe.forEach((function(t){t.checked=!0})),Pe.length=pe=ge=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Qt&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],n=this.el.children,o=0,r=n.length,a=this.options;o<r;o++)Ct(t=n[o],a.draggable,this.el,!1)&&e.push(t.getAttribute(a.dataIdAttr)||Ue(t));return e},sort:function(t,e){var n={},o=this.el;this.toArray().forEach((function(t,e){var r=o.children[e];Ct(r,this.options.draggable,o,!1)&&(n[t]=r)}),this),e&&this.captureAnimationState(),t.forEach((function(t){n[t]&&(o.removeChild(n[t]),o.appendChild(n[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return Ct(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var n=this.options;if(void 0===e)return n[t];var o=Kt.modifyOption(this,t,e);n[t]=void 0!==o?o:e,"group"===t&&Be(n)},destroy:function(){Jt("destroy",this);var t=this.el;t[zt]=null,St(t,"mousedown",this._onTapStart),St(t,"touchstart",this._onTapStart),St(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(St(t,"dragover",this),St(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),Ne.splice(Ne.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!ie){if(Jt("hideClone",this),qe.eventCanceled)return;Pt(ae,"display","none"),this.options.removeCloneOnHide&&ae.parentNode&&ae.parentNode.removeChild(ae),ie=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(ie){if(Jt("showClone",this),qe.eventCanceled)return;Qt.parentNode!=ne||this.options.group.revertClone?oe?ne.insertBefore(ae,oe):ne.appendChild(ae):ne.insertBefore(ae,Qt),this.options.group.revertClone&&this.animate(Qt,ae),Pt(ae,"display",""),ie=!1}}else this._hideClone()}},Me&&xt(document,"touchmove",(function(t){(qe.active||Se)&&t.cancelable&&t.preventDefault()})),qe.utils={on:xt,off:St,css:Pt,find:Lt,is:function(t,e){return!!Ct(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},throttle:qt,closest:Ct,toggleClass:It,clone:Wt,index:jt,nextTick:$e,cancelNextTick:Ke,detectDirection:Fe,getChild:Ft},qe.get=function(t){return t[zt]},qe.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(qe.utils=ut(ut({},qe.utils),t.utils)),Kt.mount(t)}))},qe.create=function(t,e){return new qe(t,e)},qe.version="1.15.0";var Ve,Je,Ze,Qe,tn,en,nn=[],on=!1;function rn(){nn.forEach((function(t){clearInterval(t.pid)})),nn=[]}function an(){clearInterval(en)}var sn=qt((function(t,e,n,o){if(e.scroll){var r,a=(t.touches?t.touches[0]:t).clientX,i=(t.touches?t.touches[0]:t).clientY,s=e.scrollSensitivity,l=e.scrollSpeed,c=kt(),u=!1;Je!==n&&(Je=n,rn(),Ve=e.scroll,r=e.scrollFn,!0===Ve&&(Ve=Yt(n,!0)));var d=0,m=Ve;do{var h=m,f=At(h),p=f.top,g=f.bottom,v=f.left,b=f.right,y=f.width,w=f.height,_=void 0,T=void 0,x=h.scrollWidth,S=h.scrollHeight,E=Pt(h),N=h.scrollLeft,C=h.scrollTop;h===c?(_=y<x&&("auto"===E.overflowX||"scroll"===E.overflowX||"visible"===E.overflowX),T=w<S&&("auto"===E.overflowY||"scroll"===E.overflowY||"visible"===E.overflowY)):(_=y<x&&("auto"===E.overflowX||"scroll"===E.overflowX),T=w<S&&("auto"===E.overflowY||"scroll"===E.overflowY));var D=_&&(Math.abs(b-a)<=s&&N+y<x)-(Math.abs(v-a)<=s&&!!N),O=T&&(Math.abs(g-i)<=s&&C+w<S)-(Math.abs(p-i)<=s&&!!C);if(!nn[d])for(var I=0;I<=d;I++)nn[I]||(nn[I]={});nn[d].vx==D&&nn[d].vy==O&&nn[d].el===h||(nn[d].el=h,nn[d].vx=D,nn[d].vy=O,clearInterval(nn[d].pid),0==D&&0==O||(u=!0,nn[d].pid=setInterval(function(){o&&0===this.layer&&qe.active._onTouchMove(tn);var e=nn[this.layer].vy?nn[this.layer].vy*l:0,n=nn[this.layer].vx?nn[this.layer].vx*l:0;"function"==typeof r&&"continue"!==r.call(qe.dragged.parentNode[zt],n,e,t,tn,nn[this.layer].el)||Gt(nn[this.layer].el,n,e)}.bind({layer:d}),24))),d++}while(e.bubbleScroll&&m!==c&&(m=Yt(m,!1)));on=u}}),30),ln=function(t){var e=t.originalEvent,n=t.putSortable,o=t.dragEl,r=t.activeSortable,a=t.dispatchSortableEvent,i=t.hideGhostForTarget,s=t.unhideGhostForTarget;if(e){var l=n||r;i();var c=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(c.clientX,c.clientY);s(),l&&!l.el.contains(u)&&(a("spill"),this.onSpill({dragEl:o,putSortable:n}))}};function cn(){}function un(){}cn.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,n=t.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var o=Ft(this.sortable.el,this.startIndex,this.options);o?this.sortable.el.insertBefore(e,o):this.sortable.el.appendChild(e),this.sortable.animateAll(),n&&n.animateAll()},drop:ln},ht(cn,{pluginName:"revertOnSpill"}),un.prototype={onSpill:function(t){var e=t.dragEl,n=t.putSortable||this.sortable;n.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),n.animateAll()},drop:ln},ht(un,{pluginName:"removeOnSpill"}),qe.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?xt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?xt(document,"pointermove",this._handleFallbackAutoScroll):e.touches?xt(document,"touchmove",this._handleFallbackAutoScroll):xt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?St(document,"dragover",this._handleAutoScroll):(St(document,"pointermove",this._handleFallbackAutoScroll),St(document,"touchmove",this._handleFallbackAutoScroll),St(document,"mousemove",this._handleFallbackAutoScroll)),an(),rn(),clearTimeout(Dt),Dt=void 0},nulling:function(){tn=Je=Ve=on=en=Ze=Qe=null,nn.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var n=this,o=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(o,r);if(tn=t,e||this.options.forceAutoScrollFallback||vt||gt||yt){sn(t,this.options,a,e);var i=Yt(a,!0);!on||en&&o===Ze&&r===Qe||(en&&an(),en=setInterval((function(){var a=Yt(document.elementFromPoint(o,r),!0);a!==i&&(i=a,rn()),sn(t,n.options,a,e)}),10),Ze=o,Qe=r)}else{if(!this.options.bubbleScroll||Yt(a,!0)===kt())return void rn();sn(t,this.options,Yt(a,!1),!1)}}},ht(t,{pluginName:"scroll",initializeByDefault:!0})}),qe.mount(un,cn);const dn=qe,mn=flarum.core.compat["admin/components/ExtensionPage"];var hn=n.n(mn);const fn=flarum.core.compat["common/utils/withAttr"];var pn=n.n(fn);const gn=flarum.core.compat["common/components/ColorPreviewInput"];var vn=n.n(gn);const bn=flarum.core.compat["common/utils/ItemList"];var yn=n.n(bn);const wn=flarum.core.compat["common/utils/string"];var _n=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).tag=void 0,e.name=void 0,e.slug=void 0,e.description=void 0,e.color=void 0,e.icon=void 0,e.isHidden=void 0,e.primary=void 0,e}X(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.tag=this.attrs.model||r().store.createRecord("tags"),this.name=et()(this.tag.name()||""),this.slug=et()(this.tag.slug()||""),this.description=et()(this.tag.description()||""),this.color=et()(this.tag.color()||""),this.icon=et()(this.tag.icon()||""),this.isHidden=et()(this.tag.isHidden()||!1),this.primary=et()(this.attrs.primary||!1)},n.className=function(){return"EditTagModal Modal--small"},n.title=function(){return this.name()?N(r().store.createRecord("tags",{attributes:this.submitData()})):r().translator.trans("flarum-tags.admin.edit_tag.title")},n.content=function(){return m("div",{className:"Modal-body"},m("div",{className:"Form"},this.fields().toArray()))},n.fields=function(){var t=this,e=new(yn());return e.add("name",m("div",{className:"Form-group"},m("label",null,r().translator.trans("flarum-tags.admin.edit_tag.name_label")),m("input",{className:"FormControl",placeholder:r().translator.trans("flarum-tags.admin.edit_tag.name_placeholder"),value:this.name(),oninput:function(e){var n=e.target;t.name(n.value),t.slug((0,wn.slug)(n.value))}})),50),e.add("slug",m("div",{className:"Form-group"},m("label",null,r().translator.trans("flarum-tags.admin.edit_tag.slug_label")),m("input",{className:"FormControl",bidi:this.slug})),40),e.add("description",m("div",{className:"Form-group"},m("label",null,r().translator.trans("flarum-tags.admin.edit_tag.description_label")),m("textarea",{className:"FormControl",bidi:this.description})),30),e.add("color",m("div",{className:"Form-group"},m("label",null,r().translator.trans("flarum-tags.admin.edit_tag.color_label")),m(vn(),{className:"FormControl",placeholder:"#aaaaaa",bidi:this.color})),20),e.add("icon",m("div",{className:"Form-group"},m("label",null,r().translator.trans("flarum-tags.admin.edit_tag.icon_label")),m("div",{className:"helpText"},r().translator.trans("flarum-tags.admin.edit_tag.icon_text",{a:m("a",{href:r().refs.fontawesome,tabindex:"-1"})})),m("input",{className:"FormControl",placeholder:"fas fa-bolt",bidi:this.icon})),10),e.add("hidden",m("div",{className:"Form-group"},m("div",null,m("label",{className:"checkbox"},m("input",{type:"checkbox",bidi:this.isHidden}),r().translator.trans("flarum-tags.admin.edit_tag.hide_label")))),10),e.add("submit",m("div",{className:"Form-group"},m(f(),{type:"submit",className:"Button Button--primary EditTagModal-save",loading:this.loading},r().translator.trans("flarum-tags.admin.edit_tag.submit_button")),this.tag.exists&&m("button",{type:"button",className:"Button EditTagModal-delete",onclick:this.delete.bind(this)},r().translator.trans("flarum-tags.admin.edit_tag.delete_tag_button"))),-10),e},n.submitData=function(){return{name:this.name(),slug:this.slug(),description:this.description(),color:this.color(),icon:this.icon(),isHidden:this.isHidden(),primary:this.primary()}},n.onsubmit=function(t){var e=this;t.preventDefault(),this.loading=!0,this.tag.save(this.submitData()).then((function(){return e.hide()}),(function(){return e.loading=!1}))},n.delete=function(){var t=this;if(confirm(z()(r().translator.trans("flarum-tags.admin.edit_tag.delete_tag_confirmation")))){var e=r().store.all("tags").filter((function(e){return e.parent()===t.tag}));this.tag.delete().then((function(){e.forEach((function(t){return t.pushData({attributes:{isChild:!1},relationships:{parent:null}})})),m.redraw()})),this.hide()}},e}(Q());function Tn(t){return m("li",{"data-id":t.id(),style:{color:t.color()}},m("div",{className:"TagListItem-info"},E(t),m("span",{className:"TagListItem-name"},t.name()),m(f(),{className:"Button Button--link",icon:"fas fa-pencil-alt","aria-label":r().translator.trans("flarum-tags.admin.tags.edit_tag_label",{tag:t.name()}),onclick:function(){return r().modal.show(_n,{model:t})}})),!t.isChild()&&null!==t.position()&&m("ol",{className:"TagListItem-children TagList"},C(r().store.all("tags")).filter((function(e){return e.parent()===t})).map(Tn)))}var xn=function(t){function e(){return t.apply(this,arguments)||this}X(e,t);var n=e.prototype;return n.oninit=function(e){var n=this;t.prototype.oninit.call(this,e),this.forcedRefreshKey=0,this.loading=!0,r().tagList.load(["parent"]).then((function(){n.loading=!1,m.redraw()}))},n.content=function(){if(this.loading)return m(g(),null);var t=this.setting("flarum-tags.min_primary_tags",0),e=this.setting("flarum-tags.max_primary_tags",0),n=this.setting("flarum-tags.min_secondary_tags",0),o=this.setting("flarum-tags.max_secondary_tags",0),a=C(r().store.all("tags").filter((function(t){return!t.parent()})));return m("div",{className:"TagsContent"},m("div",{className:"TagsContent-list"},m("div",{className:"container",key:this.forcedRefreshKey,oncreate:this.onListOnCreate.bind(this)},m("div",{className:"SettingsGroups"},m("div",{className:"TagGroup"},m("label",null,r().translator.trans("flarum-tags.admin.tags.primary_heading")),m("ol",{className:"TagList TagList--primary"},a.filter((function(t){return null!==t.position()&&!t.isChild()})).map(Tn)),m(f(),{className:"Button TagList-button",icon:"fas fa-plus",onclick:function(){return r().modal.show(_n,{primary:!0})}},r().translator.trans("flarum-tags.admin.tags.create_primary_tag_button"))),m("div",{className:"TagGroup TagGroup--secondary"},m("label",null,r().translator.trans("flarum-tags.admin.tags.secondary_heading")),m("ul",{className:"TagList"},a.filter((function(t){return null===t.position()})).sort((function(t,e){return t.name().localeCompare(e.name())})).map(Tn)),m(f(),{className:"Button TagList-button",icon:"fas fa-plus",onclick:function(){return r().modal.show(_n,{primary:!1})}},r().translator.trans("flarum-tags.admin.tags.create_secondary_tag_button"))),m("div",{className:"Form"},m("label",null,r().translator.trans("flarum-tags.admin.tags.settings_heading")),m("div",{className:"Form-group"},m("label",null,r().translator.trans("flarum-tags.admin.tag_settings.required_primary_heading")),m("div",{className:"helpText"},r().translator.trans("flarum-tags.admin.tag_settings.required_primary_text")),m("div",{className:"TagSettings-rangeInput"},m("input",{className:"FormControl",type:"number",min:"0",value:t(),oninput:pn()("value",this.setMinTags.bind(this,t,e))}),r().translator.trans("flarum-tags.admin.tag_settings.range_separator_text"),m("input",{className:"FormControl",type:"number",min:t(),bidi:e}))),m("div",{className:"Form-group"},m("label",null,r().translator.trans("flarum-tags.admin.tag_settings.required_secondary_heading")),m("div",{className:"helpText"},r().translator.trans("flarum-tags.admin.tag_settings.required_secondary_text")),m("div",{className:"TagSettings-rangeInput"},m("input",{className:"FormControl",type:"number",min:"0",value:n(),oninput:pn()("value",this.setMinTags.bind(this,n,o))}),r().translator.trans("flarum-tags.admin.tag_settings.range_separator_text"),m("input",{className:"FormControl",type:"number",min:n(),bidi:o}))),m("div",{className:"Form-group"},this.submitButton()))),m("div",{className:"TagsContent-footer"},m("p",null,r().translator.trans("flarum-tags.admin.tags.about_tags_text"))))))},n.onListOnCreate=function(t){var e=this;this.$(".TagList").get().map((function(t){dn.create(t,{group:"tags",delay:50,delayOnTouchOnly:!0,touchStartThreshold:5,animation:150,swapThreshold:.65,dragClass:"sortable-dragging",ghostClass:"sortable-placeholder",onSort:function(t){return e.onSortUpdate(t)}})}))},n.setMinTags=function(t,e,n){t(n),e(Math.max(n,e()))},n.onSortUpdate=function(t){t.from instanceof HTMLOListElement&&t.to instanceof HTMLUListElement&&r().store.getById("tags",t.item.getAttribute("data-id")).pushData({attributes:{position:null,isChild:!1},relationships:{parent:null}});var e=this.$(".TagList--primary > li").map((function(){return{id:$(this).data("id"),children:$(this).find("li").map((function(){return $(this).data("id")})).get()}})).get();e.forEach((function(t,e){var n=r().store.getById("tags",t.id);n.pushData({attributes:{position:e,isChild:!1},relationships:{parent:null}}),t.children.forEach((function(t,e){r().store.getById("tags",t).pushData({attributes:{position:e,isChild:!0},relationships:{parent:n}})}))})),r().request({url:r().forum.attribute("apiUrl")+"/tags/order",method:"POST",body:{order:e}}),this.forcedRefreshKey++,m.redraw()},e}(hn());function Sn(t,e,n,o,r,a,i){try{var s=t[a](i),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(o,r)}function En(t){return function(){var e=this,n=arguments;return new Promise((function(o,r){var a=t.apply(e,n);function i(t){Sn(a,o,r,i,s,"next",t)}function s(t){Sn(a,o,r,i,s,"throw",t)}i(void 0)}))}}var Nn=n(507),Cn=n.n(Nn),Dn=function(){function t(){this.loadedIncludes=void 0}var e=t.prototype;return e.load=function(){var t=En(Cn().mark((function t(e){var n,o=this;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=[]),this.loadedIncludes){t.next=3;break}return t.abrupt("return",this.query(e));case 3:if(0!==(n=e.filter((function(t){return!o.loadedIncludes.has(t)}))).length){t.next=6;break}return t.abrupt("return",Promise.resolve(G().store.all("tags")));case 6:return t.abrupt("return",this.query(n));case 7:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.query=function(){var t=En(Cn().mark((function t(e){var n=this;return Cn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return void 0===e&&(e=[]),null!=this.loadedIncludes||(this.loadedIncludes=new Set),t.abrupt("return",G().store.find("tags",{include:e.join(",")}).then((function(t){return e.forEach((function(t){return n.loadedIncludes.add(t)})),t})));case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),t}();const On=flarum.core.compat["common/extenders"];var In=n.n(On);const Pn=flarum.core.compat["common/utils/computed"];var Mn=n.n(Pn);const Ln=flarum.core.compat["common/Model"];var kn=n.n(Ln),An=function(t){function e(){return t.apply(this,arguments)||this}X(e,t);var n=e.prototype;return n.name=function(){return kn().attribute("name").call(this)},n.slug=function(){return kn().attribute("slug").call(this)},n.description=function(){return kn().attribute("description").call(this)},n.color=function(){return kn().attribute("color").call(this)},n.backgroundUrl=function(){return kn().attribute("backgroundUrl").call(this)},n.backgroundMode=function(){return kn().attribute("backgroundMode").call(this)},n.icon=function(){return kn().attribute("icon").call(this)},n.position=function(){return kn().attribute("position").call(this)},n.parent=function(){return kn().hasOne("parent").call(this)},n.children=function(){return kn().hasMany("children").call(this)},n.defaultSort=function(){return kn().attribute("defaultSort").call(this)},n.isChild=function(){return kn().attribute("isChild").call(this)},n.isHidden=function(){return kn().attribute("isHidden").call(this)},n.discussionCount=function(){return kn().attribute("discussionCount").call(this)},n.lastPostedAt=function(){return kn().attribute("lastPostedAt",kn().transformDate).call(this)},n.lastPostedDiscussion=function(){return kn().hasOne("lastPostedDiscussion").call(this)},n.isRestricted=function(){return kn().attribute("isRestricted").call(this)},n.canStartDiscussion=function(){return kn().attribute("canStartDiscussion").call(this)},n.canAddToDiscussion=function(){return kn().attribute("canAddToDiscussion").call(this)},n.isPrimary=function(){return Mn()("position","parent",(function(t,e){return null!==t&&!1===e})).call(this)},e}(kn());const Rn=[(new(In().Store)).add("tags",An)],Fn={"tags/utils/sortTags":C,"tags/models/Tag":An,"tags/helpers/tagsLabel":st,"tags/helpers/tagIcon":E,"tags/helpers/tagLabel":N,"tags/components/TagSelectionModal":at,"tags/states/TagListState":Dn},Bn=Object.assign(Fn,{"tags/addTagsHomePageOption":M,"tags/addTagChangePermission":A,"tags/components/TagsPage":xn,"tags/components/EditTagModal":_n,"tags/components/SelectTagsSettingComponent":lt,"tags/addTagPermission":O,"tags/addTagsPermissionScope":D}),jn=flarum.core;r().initializers.add("flarum-tags",(function(t){t.tagList=new Dn,t.extensionData.for("flarum-tags").registerPage(xn),D(),O(),M(),A(),(0,a.extend)(F().prototype,"customSettingComponents",(function(t){var e=this;t.add("flarum-tags.select-tags",(function(t){return m(lt,Object.assign({},t,{settingValue:e.settings[t.setting]}))}))}))})),Object.assign(jn.compat,Bn)},810:()=>{},440:(t,e,n)=>{var o=n(75).default;function r(){"use strict";t.exports=r=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},n=Object.prototype,a=n.hasOwnProperty,i=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function m(t,e,n,o){var r=e&&e.prototype instanceof p?e:p,a=Object.create(r.prototype),s=new D(o||[]);return i(a,"_invoke",{value:S(t,n,s)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=m;var f={};function p(){}function g(){}function v(){}var b={};d(b,l,(function(){return this}));var y=Object.getPrototypeOf,w=y&&y(y(O([])));w&&w!==n&&a.call(w,l)&&(b=w);var _=v.prototype=p.prototype=Object.create(b);function T(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function n(r,i,s,l){var c=h(t[r],t,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==o(d)&&a.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,s,l)}),(function(t){n("throw",t,s,l)})):e.resolve(d).then((function(t){u.value=t,s(u)}),(function(t){return n("throw",t,s,l)}))}l(c.arg)}var r;i(this,"_invoke",{value:function(t,o){function a(){return new e((function(e,r){n(t,o,e,r)}))}return r=r?r.then(a,a):a()}})}function S(t,e,n){var o="suspendedStart";return function(r,a){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw a;return{value:void 0,done:!0}}for(n.method=r,n.arg=a;;){var i=n.delegate;if(i){var s=E(i,n);if(s){if(s===f)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var l=h(t,e,n);if("normal"===l.type){if(o=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o="completed",n.method="throw",n.arg=l.arg)}}}function E(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,E(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var r=o.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function N(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(N,this),this.reset(!0)}function O(t){if(t){var e=t[l];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(a.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return g.prototype=v,i(_,"constructor",{value:v,configurable:!0}),i(v,"constructor",{value:g,configurable:!0}),g.displayName=d(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,v):(t.__proto__=v,d(t,u,"GeneratorFunction")),t.prototype=Object.create(_),t},e.awrap=function(t){return{__await:t}},T(x.prototype),d(x.prototype,c,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,o,r,a){void 0===a&&(a=Promise);var i=new x(m(t,n,o,r),a);return e.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},T(_),d(_,u,"Generator"),d(_,l,(function(){return this})),d(_,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var o in e)n.push(o);return n.reverse(),function t(){for(;n.length;){var o=n.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},e.values=O,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!t)for(var e in this)"t"===e.charAt(0)&&a.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,o){return i.type="throw",i.arg=t,e.next=n,o&&(e.method="next",e.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],i=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=a.call(r,"catchLoc"),l=a.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var i=r?r.completion:{};return i.type=t,i.arg=e,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var o=n.completion;if("throw"===o.type){var r=o.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:O(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports},75:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},507:(t,e,n)=>{var o=n(440)();t.exports=o;try{regeneratorRuntime=o}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}},e={};function n(o){var r=e[o];if(void 0!==r)return r.exports;var a=e[o]={exports:{}};return t[o](a,a.exports,n),a.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var o={};(()=>{"use strict";n.r(o),n.d(o,{extend:()=>r.l});var t=n(810),e={};for(const n in t)"default"!==n&&(e[n]=()=>t[n]);n.d(o,e);var r=n(946)})(),module.exports=o})();


flarum.extensions['flarum-tags']=module.exports;

var module={};

(()=>{var t={497:t=>{"use strict";var e=Object.prototype.hasOwnProperty,n="~";function r(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function o(t,e,r,o,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var l=new i(r,o||t,s),a=n?n+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],l]:t._events[a].push(l):(t._events[a]=l,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new r:delete t._events[e]}function l(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),l.prototype.eventNames=function(){var t,r,i=[];if(0===this._eventsCount)return i;for(r in t=this._events)e.call(t,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},l.prototype.listeners=function(t){var e=n?n+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s},l.prototype.listenerCount=function(t){var e=n?n+t:t,r=this._events[e];return r?r.fn?1:r.length:0},l.prototype.emit=function(t,e,r,i,o,s){var l=n?n+t:t;if(!this._events[l])return!1;var a,c,u=this._events[l],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,i),!0;case 5:return u.fn.call(u.context,e,r,i,o),!0;case 6:return u.fn.call(u.context,e,r,i,o,s),!0}for(c=1,a=new Array(h-1);c<h;c++)a[c-1]=arguments[c];u.fn.apply(u.context,a)}else{var f,d=u.length;for(c=0;c<d;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,r);break;case 4:u[c].fn.call(u[c].context,e,r,i);break;default:if(!a)for(f=1,a=new Array(h-1);f<h;f++)a[f-1]=arguments[f];u[c].fn.apply(u[c].context,a)}}return!0},l.prototype.on=function(t,e,n){return o(this,t,e,n,!1)},l.prototype.once=function(t,e,n){return o(this,t,e,n,!0)},l.prototype.removeListener=function(t,e,r,i){var o=n?n+t:t;if(!this._events[o])return this;if(!e)return s(this,o),this;var l=this._events[o];if(l.fn)l.fn!==e||i&&!l.once||r&&l.context!==r||s(this,o);else{for(var a=0,c=[],u=l.length;a<u;a++)(l[a].fn!==e||i&&!l[a].once||r&&l[a].context!==r)&&c.push(l[a]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},l.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new r,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,t.exports=l},813:t=>{var e=-1;function n(t,d,p,v,g){if(t===d)return t?[[0,t]]:[];if(null!=p){var b=function(t,e,n){var r="number"==typeof n?{index:n,length:0}:n.oldRange,i="number"==typeof n?null:n.newRange,o=t.length,s=e.length;if(0===r.length&&(null===i||0===i.length)){var l=r.index,a=t.slice(0,l),c=t.slice(l),u=i?i.index:null,h=l+s-o;if((null===u||u===h)&&!(h<0||h>s)){var f=e.slice(0,h);if((v=e.slice(h))===c){var d=Math.min(l,h);if((b=a.slice(0,d))===(N=f.slice(0,d)))return m(b,a.slice(d),f.slice(d),c)}}if(null===u||u===l){var p=l,v=(f=e.slice(0,p),e.slice(p));if(f===a){var g=Math.min(o-p,s-p);if((y=c.slice(c.length-g))===(x=v.slice(v.length-g)))return m(a,c.slice(0,c.length-g),v.slice(0,v.length-g),y)}}}if(r.length>0&&i&&0===i.length){var b=t.slice(0,r.index),y=t.slice(r.index+r.length);if(!(s<(d=b.length)+(g=y.length))){var N=e.slice(0,d),x=e.slice(s-g);if(b===N&&y===x)return m(b,t.slice(d,o-g),e.slice(d,s-g),y)}}return null}(t,d,p);if(b)return b}var y=i(t,d),N=t.substring(0,y);y=s(t=t.substring(y),d=d.substring(y));var x=t.substring(t.length-y),w=function(t,o){var l;if(!t)return[[1,o]];if(!o)return[[e,t]];var a=t.length>o.length?t:o,c=t.length>o.length?o:t,u=a.indexOf(c);if(-1!==u)return l=[[1,a.substring(0,u)],[0,c],[1,a.substring(u+c.length)]],t.length>o.length&&(l[0][0]=l[2][0]=e),l;if(1===c.length)return[[e,t],[1,o]];var h=function(t,e){var n=t.length>e.length?t:e,r=t.length>e.length?e:t;if(n.length<4||2*r.length<n.length)return null;function o(t,e,n){for(var r,o,l,a,c=t.substring(n,n+Math.floor(t.length/4)),u=-1,h="";-1!==(u=e.indexOf(c,u+1));){var f=i(t.substring(n),e.substring(u)),d=s(t.substring(0,n),e.substring(0,u));h.length<d+f&&(h=e.substring(u-d,u)+e.substring(u,u+f),r=t.substring(0,n-d),o=t.substring(n+f),l=e.substring(0,u-d),a=e.substring(u+f))}return 2*h.length>=t.length?[r,o,l,a,h]:null}var l,a,c,u,h,f=o(n,r,Math.ceil(n.length/4)),d=o(n,r,Math.ceil(n.length/2));return f||d?(l=d?f&&f[4].length>d[4].length?f:d:f,t.length>e.length?(a=l[0],c=l[1],u=l[2],h=l[3]):(u=l[0],h=l[1],a=l[2],c=l[3]),[a,c,u,h,l[4]]):null}(t,o);if(h){var f=h[0],d=h[1],p=h[2],v=h[3],g=h[4],m=n(f,p),b=n(d,v);return m.concat([[0,g]],b)}return function(t,n){for(var i=t.length,o=n.length,s=Math.ceil((i+o)/2),l=s,a=2*s,c=new Array(a),u=new Array(a),h=0;h<a;h++)c[h]=-1,u[h]=-1;c[l+1]=0,u[l+1]=0;for(var f=i-o,d=f%2!=0,p=0,v=0,g=0,m=0,b=0;b<s;b++){for(var y=-b+p;y<=b-v;y+=2){for(var N=l+y,x=(k=y===-b||y!==b&&c[N-1]<c[N+1]?c[N+1]:c[N-1]+1)-y;k<i&&x<o&&t.charAt(k)===n.charAt(x);)k++,x++;if(c[N]=k,k>i)v+=2;else if(x>o)p+=2;else if(d&&(A=l+f-y)>=0&&A<a&&-1!==u[A]&&k>=(E=i-u[A]))return r(t,n,k,x)}for(var w=-b+g;w<=b-m;w+=2){for(var E,A=l+w,q=(E=w===-b||w!==b&&u[A-1]<u[A+1]?u[A+1]:u[A-1]+1)-w;E<i&&q<o&&t.charAt(i-E-1)===n.charAt(o-q-1);)E++,q++;if(u[A]=E,E>i)m+=2;else if(q>o)g+=2;else if(!d){var k;if((N=l+f-w)>=0&&N<a&&-1!==c[N])if(x=l+(k=c[N])-N,k>=(E=i-E))return r(t,n,k,x)}}}return[[e,t],[1,n]]}(t,o)}(t=t.substring(0,t.length-y),d=d.substring(0,d.length-y));return N&&w.unshift([0,N]),x&&w.push([0,x]),f(w,g),v&&function(t){for(var n=!1,r=[],i=0,d=null,p=0,v=0,g=0,m=0,b=0;p<t.length;)0==t[p][0]?(r[i++]=p,v=m,g=b,m=0,b=0,d=t[p][1]):(1==t[p][0]?m+=t[p][1].length:b+=t[p][1].length,d&&d.length<=Math.max(v,g)&&d.length<=Math.max(m,b)&&(t.splice(r[i-1],0,[e,d]),t[r[i-1]+1][0]=1,i--,p=--i>0?r[i-1]:-1,v=0,g=0,m=0,b=0,d=null,n=!0)),p++;for(n&&f(t),function(t){function e(t,e){if(!t||!e)return 6;var n=t.charAt(t.length-1),r=e.charAt(0),i=n.match(l),o=r.match(l),s=i&&n.match(a),f=o&&r.match(a),d=s&&n.match(c),p=f&&r.match(c),v=d&&t.match(u),g=p&&e.match(h);return v||g?5:d||p?4:i&&!s&&f?3:s||f?2:i||o?1:0}for(var n=1;n<t.length-1;){if(0==t[n-1][0]&&0==t[n+1][0]){var r=t[n-1][1],i=t[n][1],o=t[n+1][1],f=s(r,i);if(f){var d=i.substring(i.length-f);r=r.substring(0,r.length-f),i=d+i.substring(0,i.length-f),o=d+o}for(var p=r,v=i,g=o,m=e(r,i)+e(i,o);i.charAt(0)===o.charAt(0);){r+=i.charAt(0),i=i.substring(1)+o.charAt(0),o=o.substring(1);var b=e(r,i)+e(i,o);b>=m&&(m=b,p=r,v=i,g=o)}t[n-1][1]!=p&&(p?t[n-1][1]=p:(t.splice(n-1,1),n--),t[n][1]=v,g?t[n+1][1]=g:(t.splice(n+1,1),n--))}n++}}(t),p=1;p<t.length;){if(t[p-1][0]==e&&1==t[p][0]){var y=t[p-1][1],N=t[p][1],x=o(y,N),w=o(N,y);x>=w?(x>=y.length/2||x>=N.length/2)&&(t.splice(p,0,[0,N.substring(0,x)]),t[p-1][1]=y.substring(0,y.length-x),t[p+1][1]=N.substring(x),p++):(w>=y.length/2||w>=N.length/2)&&(t.splice(p,0,[0,y.substring(0,w)]),t[p-1][0]=1,t[p-1][1]=N.substring(0,N.length-w),t[p+1][0]=e,t[p+1][1]=y.substring(w),p++),p++}p++}}(w),w}function r(t,e,r,i){var o=t.substring(0,r),s=e.substring(0,i),l=t.substring(r),a=e.substring(i),c=n(o,s),u=n(l,a);return c.concat(u)}function i(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(o,i)==e.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return d(t.charCodeAt(i-1))&&i--,i}function o(t,e){var n=t.length,r=e.length;if(0==n||0==r)return 0;n>r?t=t.substring(n-r):n<r&&(e=e.substring(0,n));var i=Math.min(n,r);if(t==e)return i;for(var o=0,s=1;;){var l=t.substring(i-s),a=e.indexOf(l);if(-1==a)return o;s+=a,0!=a&&t.substring(i-s)!=e.substring(0,s)||(o=s,s++)}}function s(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var n=0,r=Math.min(t.length,e.length),i=r,o=0;n<i;)t.substring(t.length-i,t.length-o)==e.substring(e.length-i,e.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return p(t.charCodeAt(t.length-i))&&i--,i}var l=/[^a-zA-Z0-9]/,a=/\s/,c=/[\r\n]/,u=/\n\r?\n$/,h=/^\r?\n\r?\n/;function f(t,n){t.push([0,""]);for(var r,o=0,l=0,a=0,c="",u="";o<t.length;)if(o<t.length-1&&!t[o][1])t.splice(o,1);else switch(t[o][0]){case 1:a++,u+=t[o][1],o++;break;case e:l++,c+=t[o][1],o++;break;case 0:var h=o-a-l-1;if(n){if(h>=0&&g(t[h][1])){var d=t[h][1].slice(-1);if(t[h][1]=t[h][1].slice(0,-1),c=d+c,u=d+u,!t[h][1]){t.splice(h,1),o--;var p=h-1;t[p]&&1===t[p][0]&&(a++,u=t[p][1]+u,p--),t[p]&&t[p][0]===e&&(l++,c=t[p][1]+c,p--),h=p}}v(t[o][1])&&(d=t[o][1].charAt(0),t[o][1]=t[o][1].slice(1),c+=d,u+=d)}if(o<t.length-1&&!t[o][1]){t.splice(o,1);break}if(c.length>0||u.length>0){c.length>0&&u.length>0&&(0!==(r=i(u,c))&&(h>=0?t[h][1]+=u.substring(0,r):(t.splice(0,0,[0,u.substring(0,r)]),o++),u=u.substring(r),c=c.substring(r)),0!==(r=s(u,c))&&(t[o][1]=u.substring(u.length-r)+t[o][1],u=u.substring(0,u.length-r),c=c.substring(0,c.length-r)));var m=a+l;0===c.length&&0===u.length?(t.splice(o-m,m),o-=m):0===c.length?(t.splice(o-m,m,[1,u]),o=o-m+1):0===u.length?(t.splice(o-m,m,[e,c]),o=o-m+1):(t.splice(o-m,m,[e,c],[1,u]),o=o-m+2)}0!==o&&0===t[o-1][0]?(t[o-1][1]+=t[o][1],t.splice(o,1)):o++,a=0,l=0,c="",u=""}""===t[t.length-1][1]&&t.pop();var b=!1;for(o=1;o<t.length-1;)0===t[o-1][0]&&0===t[o+1][0]&&(t[o][1].substring(t[o][1].length-t[o-1][1].length)===t[o-1][1]?(t[o][1]=t[o-1][1]+t[o][1].substring(0,t[o][1].length-t[o-1][1].length),t[o+1][1]=t[o-1][1]+t[o+1][1],t.splice(o-1,1),b=!0):t[o][1].substring(0,t[o+1][1].length)==t[o+1][1]&&(t[o-1][1]+=t[o+1][1],t[o][1]=t[o][1].substring(t[o+1][1].length)+t[o+1][1],t.splice(o+1,1),b=!0)),o++;b&&f(t,n)}function d(t){return t>=55296&&t<=56319}function p(t){return t>=56320&&t<=57343}function v(t){return p(t.charCodeAt(0))}function g(t){return d(t.charCodeAt(t.length-1))}function m(t,n,r,i){return g(t)||v(i)?null:function(t){for(var e=[],n=0;n<t.length;n++)t[n][1].length>0&&e.push(t[n]);return e}([[0,t],[e,n],[1,r],[0,i]])}function b(t,e,r,i){return n(t,e,r,i,!0)}b.INSERT=1,b.DELETE=e,b.EQUAL=0,t.exports=b},298:(t,e,n)=>{t=n.nmd(t);var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",s="[object Boolean]",l="[object Date]",a="[object Function]",c="[object GeneratorFunction]",u="[object Map]",h="[object Number]",f="[object Object]",d="[object Promise]",p="[object RegExp]",v="[object Set]",g="[object String]",m="[object Symbol]",b="[object WeakMap]",y="[object ArrayBuffer]",N="[object DataView]",x="[object Float32Array]",w="[object Float64Array]",E="[object Int8Array]",A="[object Int16Array]",q="[object Int32Array]",k="[object Uint8Array]",_="[object Uint8ClampedArray]",L="[object Uint16Array]",O="[object Uint32Array]",S=/\w*$/,T=/^\[object .+?Constructor\]$/,j=/^(?:0|[1-9]\d*)$/,C={};C[o]=C["[object Array]"]=C[y]=C[N]=C[s]=C[l]=C[x]=C[w]=C[E]=C[A]=C[q]=C[u]=C[h]=C[f]=C[p]=C[v]=C[g]=C[m]=C[k]=C[_]=C[L]=C[O]=!0,C["[object Error]"]=C[a]=C[b]=!1;var R="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,I="object"==typeof self&&self&&self.Object===Object&&self,M=R||I||Function("return this")(),B=e&&!e.nodeType&&e,D=B&&t&&!t.nodeType&&t,U=D&&D.exports===B;function P(t,e){return t.set(e[0],e[1]),t}function z(t,e){return t.add(e),t}function F(t,e,n,r){var i=-1,o=t?t.length:0;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function H(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function V(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function K(t,e){return function(n){return t(e(n))}}function W(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var Z,$=Array.prototype,G=Function.prototype,X=Object.prototype,Y=M["__core-js_shared__"],Q=(Z=/[^.]+$/.exec(Y&&Y.keys&&Y.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"",J=G.toString,tt=X.hasOwnProperty,et=X.toString,nt=RegExp("^"+J.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rt=U?M.Buffer:void 0,it=M.Symbol,ot=M.Uint8Array,st=K(Object.getPrototypeOf,Object),lt=Object.create,at=X.propertyIsEnumerable,ct=$.splice,ut=Object.getOwnPropertySymbols,ht=rt?rt.isBuffer:void 0,ft=K(Object.keys,Object),dt=Mt(M,"DataView"),pt=Mt(M,"Map"),vt=Mt(M,"Promise"),gt=Mt(M,"Set"),mt=Mt(M,"WeakMap"),bt=Mt(Object,"create"),yt=zt(dt),Nt=zt(pt),xt=zt(vt),wt=zt(gt),Et=zt(mt),At=it?it.prototype:void 0,qt=At?At.valueOf:void 0;function kt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function _t(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Lt(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Ot(t){this.__data__=new _t(t)}function St(t,e,n){var r=t[e];tt.call(t,e)&&Ft(r,n)&&(void 0!==n||e in t)||(t[e]=n)}function Tt(t,e){for(var n=t.length;n--;)if(Ft(t[n][0],e))return n;return-1}function jt(t,e,n,r,i,d,b){var T;if(r&&(T=d?r(t,i,d,b):r(t)),void 0!==T)return T;if(!Zt(t))return t;var j=Ht(t);if(j){if(T=function(t){var e=t.length,n=t.constructor(e);return e&&"string"==typeof t[0]&&tt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!e)return function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(t,T)}else{var R=Dt(t),I=R==a||R==c;if(Kt(t))return function(t,e){if(e)return t.slice();var n=new t.constructor(t.length);return t.copy(n),n}(t,e);if(R==f||R==o||I&&!d){if(H(t))return d?t:{};if(T=function(t){return"function"!=typeof t.constructor||Pt(t)?{}:Zt(e=st(t))?lt(e):{};var e}(I?{}:t),!e)return function(t,e){return Rt(t,Bt(t),e)}(t,function(t,e){return t&&Rt(e,$t(e),t)}(T,t))}else{if(!C[R])return d?t:{};T=function(t,e,n,r){var i,o=t.constructor;switch(e){case y:return Ct(t);case s:case l:return new o(+t);case N:return function(t,e){var n=e?Ct(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,r);case x:case w:case E:case A:case q:case k:case _:case L:case O:return function(t,e){var n=e?Ct(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,r);case u:return function(t,e,n){return F(e?n(V(t),!0):V(t),P,new t.constructor)}(t,r,n);case h:case g:return new o(t);case p:return function(t){var e=new t.constructor(t.source,S.exec(t));return e.lastIndex=t.lastIndex,e}(t);case v:return function(t,e,n){return F(e?n(W(t),!0):W(t),z,new t.constructor)}(t,r,n);case m:return i=t,qt?Object(qt.call(i)):{}}}(t,R,jt,e)}}b||(b=new Ot);var M=b.get(t);if(M)return M;if(b.set(t,T),!j)var B=n?function(t){return function(t,e,n){var r=e(t);return Ht(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,$t,Bt)}(t):$t(t);return function(t,e){for(var n=-1,r=t?t.length:0;++n<r&&!1!==e(t[n],n););}(B||t,(function(i,o){B&&(i=t[o=i]),St(T,o,jt(i,e,n,r,o,t,b))})),T}function Ct(t){var e=new t.constructor(t.byteLength);return new ot(e).set(new ot(t)),e}function Rt(t,e,n,r){n||(n={});for(var i=-1,o=e.length;++i<o;){var s=e[i],l=r?r(n[s],t[s],s,n,t):void 0;St(n,s,void 0===l?t[s]:l)}return n}function It(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Mt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Zt(t)||(e=t,Q&&Q in e))&&(Wt(t)||H(t)?nt:T).test(zt(t));var e}(n)?n:void 0}kt.prototype.clear=function(){this.__data__=bt?bt(null):{}},kt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},kt.prototype.get=function(t){var e=this.__data__;if(bt){var n=e[t];return n===r?void 0:n}return tt.call(e,t)?e[t]:void 0},kt.prototype.has=function(t){var e=this.__data__;return bt?void 0!==e[t]:tt.call(e,t)},kt.prototype.set=function(t,e){return this.__data__[t]=bt&&void 0===e?r:e,this},_t.prototype.clear=function(){this.__data__=[]},_t.prototype.delete=function(t){var e=this.__data__,n=Tt(e,t);return!(n<0||(n==e.length-1?e.pop():ct.call(e,n,1),0))},_t.prototype.get=function(t){var e=this.__data__,n=Tt(e,t);return n<0?void 0:e[n][1]},_t.prototype.has=function(t){return Tt(this.__data__,t)>-1},_t.prototype.set=function(t,e){var n=this.__data__,r=Tt(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},Lt.prototype.clear=function(){this.__data__={hash:new kt,map:new(pt||_t),string:new kt}},Lt.prototype.delete=function(t){return It(this,t).delete(t)},Lt.prototype.get=function(t){return It(this,t).get(t)},Lt.prototype.has=function(t){return It(this,t).has(t)},Lt.prototype.set=function(t,e){return It(this,t).set(t,e),this},Ot.prototype.clear=function(){this.__data__=new _t},Ot.prototype.delete=function(t){return this.__data__.delete(t)},Ot.prototype.get=function(t){return this.__data__.get(t)},Ot.prototype.has=function(t){return this.__data__.has(t)},Ot.prototype.set=function(t,e){var n=this.__data__;if(n instanceof _t){var r=n.__data__;if(!pt||r.length<199)return r.push([t,e]),this;n=this.__data__=new Lt(r)}return n.set(t,e),this};var Bt=ut?K(ut,Object):function(){return[]},Dt=function(t){return et.call(t)};function Ut(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||j.test(t))&&t>-1&&t%1==0&&t<e}function Pt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||X)}function zt(t){if(null!=t){try{return J.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ft(t,e){return t===e||t!=t&&e!=e}(dt&&Dt(new dt(new ArrayBuffer(1)))!=N||pt&&Dt(new pt)!=u||vt&&Dt(vt.resolve())!=d||gt&&Dt(new gt)!=v||mt&&Dt(new mt)!=b)&&(Dt=function(t){var e=et.call(t),n=e==f?t.constructor:void 0,r=n?zt(n):void 0;if(r)switch(r){case yt:return N;case Nt:return u;case xt:return d;case wt:return v;case Et:return b}return e});var Ht=Array.isArray;function Vt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!Wt(t)}var Kt=ht||function(){return!1};function Wt(t){var e=Zt(t)?et.call(t):"";return e==a||e==c}function Zt(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function $t(t){return Vt(t)?function(t,e){var n=Ht(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&Vt(t)}(t)&&tt.call(t,"callee")&&(!at.call(t,"callee")||et.call(t)==o)}(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,i=!!r;for(var s in t)!e&&!tt.call(t,s)||i&&("length"==s||Ut(s,r))||n.push(s);return n}(t):function(t){if(!Pt(t))return ft(t);var e=[];for(var n in Object(t))tt.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)}t.exports=function(t){return jt(t,!0,!0)}},429:(t,e,n)=>{t=n.nmd(t);var r="__lodash_hash_undefined__",i=9007199254740991,o="[object Arguments]",s="[object Array]",l="[object Boolean]",a="[object Date]",c="[object Error]",u="[object Function]",h="[object Map]",f="[object Number]",d="[object Object]",p="[object Promise]",v="[object RegExp]",g="[object Set]",m="[object String]",b="[object WeakMap]",y="[object ArrayBuffer]",N="[object DataView]",x=/^\[object .+?Constructor\]$/,w=/^(?:0|[1-9]\d*)$/,E={};E["[object Float32Array]"]=E["[object Float64Array]"]=E["[object Int8Array]"]=E["[object Int16Array]"]=E["[object Int32Array]"]=E["[object Uint8Array]"]=E["[object Uint8ClampedArray]"]=E["[object Uint16Array]"]=E["[object Uint32Array]"]=!0,E[o]=E[s]=E[y]=E[l]=E[N]=E[a]=E[c]=E[u]=E[h]=E[f]=E[d]=E[v]=E[g]=E[m]=E[b]=!1;var A="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,q="object"==typeof self&&self&&self.Object===Object&&self,k=A||q||Function("return this")(),_=e&&!e.nodeType&&e,L=_&&t&&!t.nodeType&&t,O=L&&L.exports===_,S=O&&A.process,T=function(){try{return S&&S.binding&&S.binding("util")}catch(t){}}(),j=T&&T.isTypedArray;function C(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function R(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function I(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var M,B,D,U=Array.prototype,P=Function.prototype,z=Object.prototype,F=k["__core-js_shared__"],H=P.toString,V=z.hasOwnProperty,K=(M=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||""))?"Symbol(src)_1."+M:"",W=z.toString,Z=RegExp("^"+H.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),$=O?k.Buffer:void 0,G=k.Symbol,X=k.Uint8Array,Y=z.propertyIsEnumerable,Q=U.splice,J=G?G.toStringTag:void 0,tt=Object.getOwnPropertySymbols,et=$?$.isBuffer:void 0,nt=(B=Object.keys,D=Object,function(t){return B(D(t))}),rt=Lt(k,"DataView"),it=Lt(k,"Map"),ot=Lt(k,"Promise"),st=Lt(k,"Set"),lt=Lt(k,"WeakMap"),at=Lt(Object,"create"),ct=jt(rt),ut=jt(it),ht=jt(ot),ft=jt(st),dt=jt(lt),pt=G?G.prototype:void 0,vt=pt?pt.valueOf:void 0;function gt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function mt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function bt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function yt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new bt;++e<n;)this.add(t[e])}function Nt(t){var e=this.__data__=new mt(t);this.size=e.size}function xt(t,e){for(var n=t.length;n--;)if(Ct(t[n][0],e))return n;return-1}function wt(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":J&&J in Object(t)?function(t){var e=V.call(t,J),n=t[J];try{t[J]=void 0;var r=!0}catch(t){}var i=W.call(t);return r&&(e?t[J]=n:delete t[J]),i}(t):function(t){return W.call(t)}(t)}function Et(t){return Pt(t)&&wt(t)==o}function At(t,e,n,r,i){return t===e||(null==t||null==e||!Pt(t)&&!Pt(e)?t!=t&&e!=e:function(t,e,n,r,i,u){var p=It(t),b=It(e),x=p?s:St(t),w=b?s:St(e),E=(x=x==o?d:x)==d,A=(w=w==o?d:w)==d,q=x==w;if(q&&Mt(t)){if(!Mt(e))return!1;p=!0,E=!1}if(q&&!E)return u||(u=new Nt),p||zt(t)?qt(t,e,n,r,i,u):function(t,e,n,r,i,o,s){switch(n){case N:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case y:return!(t.byteLength!=e.byteLength||!o(new X(t),new X(e)));case l:case a:case f:return Ct(+t,+e);case c:return t.name==e.name&&t.message==e.message;case v:case m:return t==e+"";case h:var u=R;case g:var d=1&r;if(u||(u=I),t.size!=e.size&&!d)return!1;var p=s.get(t);if(p)return p==e;r|=2,s.set(t,e);var b=qt(u(t),u(e),r,i,o,s);return s.delete(t),b;case"[object Symbol]":if(vt)return vt.call(t)==vt.call(e)}return!1}(t,e,x,n,r,i,u);if(!(1&n)){var k=E&&V.call(t,"__wrapped__"),_=A&&V.call(e,"__wrapped__");if(k||_){var L=k?t.value():t,O=_?e.value():e;return u||(u=new Nt),i(L,O,n,r,u)}}return!!q&&(u||(u=new Nt),function(t,e,n,r,i,o){var s=1&n,l=kt(t),a=l.length;if(a!=kt(e).length&&!s)return!1;for(var c=a;c--;){var u=l[c];if(!(s?u in e:V.call(e,u)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var d=s;++c<a;){var p=t[u=l[c]],v=e[u];if(r)var g=s?r(v,p,u,e,t,o):r(p,v,u,t,e,o);if(!(void 0===g?p===v||i(p,v,n,r,o):g)){f=!1;break}d||(d="constructor"==u)}if(f&&!d){var m=t.constructor,b=e.constructor;m==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,u))}(t,e,n,r,At,i))}function qt(t,e,n,r,i,o){var s=1&n,l=t.length,a=e.length;if(l!=a&&!(s&&a>l))return!1;var c=o.get(t);if(c&&o.get(e))return c==e;var u=-1,h=!0,f=2&n?new yt:void 0;for(o.set(t,e),o.set(e,t);++u<l;){var d=t[u],p=e[u];if(r)var v=s?r(p,d,u,e,t,o):r(d,p,u,t,e,o);if(void 0!==v){if(v)continue;h=!1;break}if(f){if(!C(e,(function(t,e){if(s=e,!f.has(s)&&(d===t||i(d,t,n,r,o)))return f.push(e);var s}))){h=!1;break}}else if(d!==p&&!i(d,p,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function kt(t){return function(t,e,n){var r=e(t);return It(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,Ft,Ot)}function _t(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function Lt(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!Ut(t)||function(t){return!!K&&K in t}(t))&&(Bt(t)?Z:x).test(jt(t))}(n)?n:void 0}gt.prototype.clear=function(){this.__data__=at?at(null):{},this.size=0},gt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},gt.prototype.get=function(t){var e=this.__data__;if(at){var n=e[t];return n===r?void 0:n}return V.call(e,t)?e[t]:void 0},gt.prototype.has=function(t){var e=this.__data__;return at?void 0!==e[t]:V.call(e,t)},gt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=at&&void 0===e?r:e,this},mt.prototype.clear=function(){this.__data__=[],this.size=0},mt.prototype.delete=function(t){var e=this.__data__,n=xt(e,t);return!(n<0||(n==e.length-1?e.pop():Q.call(e,n,1),--this.size,0))},mt.prototype.get=function(t){var e=this.__data__,n=xt(e,t);return n<0?void 0:e[n][1]},mt.prototype.has=function(t){return xt(this.__data__,t)>-1},mt.prototype.set=function(t,e){var n=this.__data__,r=xt(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},bt.prototype.clear=function(){this.size=0,this.__data__={hash:new gt,map:new(it||mt),string:new gt}},bt.prototype.delete=function(t){var e=_t(this,t).delete(t);return this.size-=e?1:0,e},bt.prototype.get=function(t){return _t(this,t).get(t)},bt.prototype.has=function(t){return _t(this,t).has(t)},bt.prototype.set=function(t,e){var n=_t(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},yt.prototype.add=yt.prototype.push=function(t){return this.__data__.set(t,r),this},yt.prototype.has=function(t){return this.__data__.has(t)},Nt.prototype.clear=function(){this.__data__=new mt,this.size=0},Nt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Nt.prototype.get=function(t){return this.__data__.get(t)},Nt.prototype.has=function(t){return this.__data__.has(t)},Nt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof mt){var r=n.__data__;if(!it||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new bt(r)}return n.set(t,e),this.size=n.size,this};var Ot=tt?function(t){return null==t?[]:(t=Object(t),function(e){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var s=e[n];l=s,Y.call(t,l)&&(o[i++]=s)}var l;return o}(tt(t)))}:function(){return[]},St=wt;function Tt(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||w.test(t))&&t>-1&&t%1==0&&t<e}function jt(t){if(null!=t){try{return H.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ct(t,e){return t===e||t!=t&&e!=e}(rt&&St(new rt(new ArrayBuffer(1)))!=N||it&&St(new it)!=h||ot&&St(ot.resolve())!=p||st&&St(new st)!=g||lt&&St(new lt)!=b)&&(St=function(t){var e=wt(t),n=e==d?t.constructor:void 0,r=n?jt(n):"";if(r)switch(r){case ct:return N;case ut:return h;case ht:return p;case ft:return g;case dt:return b}return e});var Rt=Et(function(){return arguments}())?Et:function(t){return Pt(t)&&V.call(t,"callee")&&!Y.call(t,"callee")},It=Array.isArray,Mt=et||function(){return!1};function Bt(t){if(!Ut(t))return!1;var e=wt(t);return e==u||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Dt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}function Ut(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Pt(t){return null!=t&&"object"==typeof t}var zt=j?function(t){return function(e){return t(e)}}(j):function(t){return Pt(t)&&Dt(t.length)&&!!E[wt(t)]};function Ft(t){return null!=(e=t)&&Dt(e.length)&&!Bt(e)?function(t,e){var n=It(t),r=!n&&Rt(t),i=!n&&!r&&Mt(t),o=!n&&!r&&!i&&zt(t),s=n||r||i||o,l=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],a=l.length;for(var c in t)!e&&!V.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Tt(c,a))||l.push(c);return l}(t):function(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||z))return nt(t);var e,n,r=[];for(var i in Object(t))V.call(t,i)&&"constructor"!=i&&r.push(i);return r}(t);var e}t.exports=function(t,e){return At(t,e)}},755:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(298),o=n(429);!function(t){t.compose=function(t,e,n){void 0===t&&(t={}),void 0===e&&(e={}),void 0===n&&(n=!1),"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var r=i(e);for(var o in n||(r=Object.keys(r).reduce((function(t,e){return null!=r[e]&&(t[e]=r[e]),t}),{})),t)void 0!==t[o]&&void 0===e[o]&&(r[o]=t[o]);return Object.keys(r).length>0?r:void 0},t.diff=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var n=Object.keys(t).concat(Object.keys(e)).reduce((function(n,r){return o(t[r],e[r])||(n[r]=void 0===e[r]?null:e[r]),n}),{});return Object.keys(n).length>0?n:void 0},t.invert=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),t=t||{};var n=Object.keys(e).reduce((function(n,r){return e[r]!==t[r]&&void 0!==t[r]&&(n[r]=e[r]),n}),{});return Object.keys(t).reduce((function(n,r){return t[r]!==e[r]&&void 0===e[r]&&(n[r]=null),n}),n)},t.transform=function(t,e,n){if(void 0===n&&(n=!1),"object"!=typeof t)return e;if("object"==typeof e){if(!n)return e;var r=Object.keys(e).reduce((function(n,r){return void 0===t[r]&&(n[r]=e[r]),n}),{});return Object.keys(r).length>0?r:void 0}}}(r||(r={})),e.default=r},143:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;var r=n(813),i=n(298),o=n(429),s=n(755);e.AttributeMap=s.default;var l=n(210);e.Op=l.default;var a=n(104);e.OpIterator=a.default;var c=String.fromCharCode(0),u=function(t,e){if("object"!=typeof t||null===t)throw new Error("cannot retain a "+typeof t);if("object"!=typeof e||null===e)throw new Error("cannot retain a "+typeof e);var n=Object.keys(t)[0];if(!n||n!==Object.keys(e)[0])throw new Error("embed types not matched: "+n+" != "+Object.keys(e)[0]);return[n,t[n],e[n]]},h=function(){function t(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}t.registerEmbed=function(t,e){this.handlers[t]=e},t.unregisterEmbed=function(t){delete this.handlers[t]},t.getHandler=function(t){var e=this.handlers[t];if(!e)throw new Error('no handlers for embed type "'+t+'"');return e};var e=t.prototype;return e.insert=function(t,e){var n={};return"string"==typeof t&&0===t.length?this:(n.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n))},e.delete=function(t){return t<=0?this:this.push({delete:t})},e.retain=function(t,e){if("number"==typeof t&&t<=0)return this;var n={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)},e.push=function(t){var e=this.ops.length,n=this.ops[e-1];if(t=i(t),"object"==typeof n){if("number"==typeof t.delete&&"number"==typeof n.delete)return this.ops[e-1]={delete:n.delete+t.delete},this;if("number"==typeof n.delete&&null!=t.insert&&(e-=1,"object"!=typeof(n=this.ops[e-1])))return this.ops.unshift(t),this;if(o(t.attributes,n.attributes)){if("string"==typeof t.insert&&"string"==typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},e.chop=function(){var t=this.ops[this.ops.length-1];return t&&"number"==typeof t.retain&&!t.attributes&&this.ops.pop(),this},e.filter=function(t){return this.ops.filter(t)},e.forEach=function(t){this.ops.forEach(t)},e.map=function(t){return this.ops.map(t)},e.partition=function(t){var e=[],n=[];return this.forEach((function(r){(t(r)?e:n).push(r)})),[e,n]},e.reduce=function(t,e){return this.ops.reduce(t,e)},e.changeLength=function(){return this.reduce((function(t,e){return e.insert?t+l.default.length(e):e.delete?t-e.delete:t}),0)},e.length=function(){return this.reduce((function(t,e){return t+l.default.length(e)}),0)},e.slice=function(e,n){void 0===e&&(e=0),void 0===n&&(n=1/0);for(var r=[],i=new a.default(this.ops),o=0;o<n&&i.hasNext();){var s=void 0;o<e?s=i.next(e-o):(s=i.next(n-o),r.push(s)),o+=l.default.length(s)}return new t(r)},e.compose=function(e){var n=new a.default(this.ops),r=new a.default(e.ops),i=[],l=r.peek();if(null!=l&&"number"==typeof l.retain&&null==l.attributes){for(var c=l.retain;"insert"===n.peekType()&&n.peekLength()<=c;)c-=n.peekLength(),i.push(n.next());l.retain-c>0&&r.next(l.retain-c)}for(var h=new t(i);n.hasNext()||r.hasNext();)if("insert"===r.peekType())h.push(r.next());else if("delete"===n.peekType())h.push(n.next());else{var f=Math.min(n.peekLength(),r.peekLength()),d=n.next(f),p=r.next(f);if(p.retain){var v={};if("number"==typeof d.retain)v.retain="number"==typeof p.retain?f:p.retain;else if("number"==typeof p.retain)null==d.retain?v.insert=d.insert:v.retain=d.retain;else{var g,m=null==d.retain?"insert":"retain",b=u(d[m],p.retain),y=b[0],N=b[1],x=b[2],w=t.getHandler(y);v[m]=((g={})[y]=w.compose(N,x,"retain"===m),g)}var E=s.default.compose(d.attributes,p.attributes,"number"==typeof d.retain);if(E&&(v.attributes=E),h.push(v),!r.hasNext()&&o(h.ops[h.ops.length-1],v)){var A=new t(n.rest());return h.concat(A).chop()}}else"number"==typeof p.delete&&("number"==typeof d.retain||"object"==typeof d.retain&&null!==d.retain)&&h.push(p)}return h.chop()},e.concat=function(e){var n=new t(this.ops.slice());return e.ops.length>0&&(n.push(e.ops[0]),n.ops=n.ops.concat(e.ops.slice(1))),n},e.diff=function(e,n){if(this.ops===e.ops)return new t;var i=[this,e].map((function(t){return t.map((function(n){if(null!=n.insert)return"string"==typeof n.insert?n.insert:c;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")})).join("")})),l=new t,u=r(i[0],i[1],n,!0),h=new a.default(this.ops),f=new a.default(e.ops);return u.forEach((function(t){for(var e=t[1].length;e>0;){var n=0;switch(t[0]){case r.INSERT:n=Math.min(f.peekLength(),e),l.push(f.next(n));break;case r.DELETE:n=Math.min(e,h.peekLength()),h.next(n),l.delete(n);break;case r.EQUAL:n=Math.min(h.peekLength(),f.peekLength(),e);var i=h.next(n),a=f.next(n);o(i.insert,a.insert)?l.retain(n,s.default.diff(i.attributes,a.attributes)):l.push(a).delete(n)}e-=n}})),l.chop()},e.eachLine=function(e,n){void 0===n&&(n="\n");for(var r=new a.default(this.ops),i=new t,o=0;r.hasNext();){if("insert"!==r.peekType())return;var s=r.peek(),c=l.default.length(s)-r.peekLength(),u="string"==typeof s.insert?s.insert.indexOf(n,c)-c:-1;if(u<0)i.push(r.next());else if(u>0)i.push(r.next(u));else{if(!1===e(i,r.next(1).attributes||{},o))return;o+=1,i=new t}}i.length()>0&&e(i,{},o)},e.invert=function(e){var n=new t;return this.reduce((function(r,i){if(i.insert)n.delete(l.default.length(i));else{if("number"==typeof i.retain&&null==i.attributes)return n.retain(i.retain),r+i.retain;if(i.delete||"number"==typeof i.retain){var o=i.delete||i.retain;return e.slice(r,r+o).forEach((function(t){i.delete?n.push(t):i.retain&&i.attributes&&n.retain(l.default.length(t),s.default.invert(i.attributes,t.attributes))})),r+o}if("object"==typeof i.retain&&null!==i.retain){var c,h=e.slice(r,r+1),f=new a.default(h.ops).next(),d=u(i.retain,f.insert),p=d[0],v=d[1],g=d[2],m=t.getHandler(p);return n.retain(((c={})[p]=m.invert(v,g),c),s.default.invert(i.attributes,f.attributes)),r+1}}return r}),0),n.chop()},e.transform=function(e,n){if(void 0===n&&(n=!1),n=!!n,"number"==typeof e)return this.transformPosition(e,n);for(var r=e,i=new a.default(this.ops),o=new a.default(r.ops),c=new t;i.hasNext()||o.hasNext();)if("insert"!==i.peekType()||!n&&"insert"===o.peekType())if("insert"===o.peekType())c.push(o.next());else{var u=Math.min(i.peekLength(),o.peekLength()),h=i.next(u),f=o.next(u);if(h.delete)continue;if(f.delete)c.push(f);else{var d=h.retain,p=f.retain,v="object"==typeof p&&null!==p?p:u;if("object"==typeof d&&null!==d&&"object"==typeof p&&null!==p){var g=Object.keys(d)[0];if(g===Object.keys(p)[0]){var m,b=t.getHandler(g);b&&((m={})[g]=b.transform(d[g],p[g],n),v=m)}}c.retain(v,s.default.transform(h.attributes,f.attributes,n))}}else c.retain(l.default.length(i.next()));return c.chop()},e.transformPosition=function(t,e){void 0===e&&(e=!1),e=!!e;for(var n=new a.default(this.ops),r=0;n.hasNext()&&r<=t;){var i=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(r<t||!e)&&(t+=i),r+=i):t-=Math.min(i,t-r)}return t},t}();h.Op=l.default,h.OpIterator=a.default,h.AttributeMap=s.default,h.handlers={},e.default=h,t.exports=h,t.exports.default=h},210:(t,e)=>{"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),function(t){t.length=function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"object"==typeof t.retain&&null!==t.retain?1:"string"==typeof t.insert?t.insert.length:1}}(n||(n={})),e.default=n},104:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(210),i=function(){function t(t){this.ops=t,this.index=0,this.offset=0}var e=t.prototype;return e.hasNext=function(){return this.peekLength()<1/0},e.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var n=this.offset,i=r.default.length(e);if(t>=i-n?(t=i-n,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};var o={};return e.attributes&&(o.attributes=e.attributes),"number"==typeof e.retain?o.retain=t:"object"==typeof e.retain&&null!==e.retain?o.retain=e.retain:"string"==typeof e.insert?o.insert=e.insert.substr(n,t):o.insert=e.insert,o}return{retain:1/0}},e.peek=function(){return this.ops[this.index]},e.peekLength=function(){return this.ops[this.index]?r.default.length(this.ops[this.index])-this.offset:1/0},e.peekType=function(){var t=this.ops[this.index];return t?"number"==typeof t.delete?"delete":"number"==typeof t.retain||"object"==typeof t.retain&&null!==t.retain?"retain":"insert":"retain"},e.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var t=this.offset,e=this.index,n=this.next(),r=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(r)}return[]},t}();e.default=i}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={id:r,loaded:!1,exports:{}};return t[r](o,o.exports,n),o.loaded=!0,o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";var t={};n.r(t),n.d(t,{Attributor:()=>Ae,AttributorStore:()=>je,BlockBlot:()=>Ve,ClassAttributor:()=>Oe,ContainerBlot:()=>We,EmbedBlot:()=>Ze,InlineBlot:()=>Fe,LeafBlot:()=>Me,ParentBlot:()=>Pe,Registry:()=>_e,Scope:()=>Ee,ScrollBlot:()=>Xe,StyleAttributor:()=>Te,TextBlot:()=>Qe});const e=flarum.core.compat["common/app"];n.n(e)().initializers.add("justoverclock/newsletter",(function(){console.log("[justoverclock/newsletter] Hello, forum and admin!")}));const r=flarum.core.compat["admin/app"];var i=n.n(r);function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}const l=flarum.core.compat["admin/components/ExtensionPage"];var a=n.n(l);function c(t,e){if(null==t)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function u(){return u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u.apply(null,arguments)}const h=function(t,e){return t===e||t!=t&&e!=e},f=function(t,e){for(var n=t.length;n--;)if(h(t[n][0],e))return n;return-1};var d=Array.prototype.splice;function p(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}p.prototype.clear=function(){this.__data__=[],this.size=0},p.prototype.delete=function(t){var e=this.__data__,n=f(e,t);return!(n<0||(n==e.length-1?e.pop():d.call(e,n,1),--this.size,0))},p.prototype.get=function(t){var e=this.__data__,n=f(e,t);return n<0?void 0:e[n][1]},p.prototype.has=function(t){return f(this.__data__,t)>-1},p.prototype.set=function(t,e){var n=this.__data__,r=f(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};const v=p,g="object"==typeof global&&global&&global.Object===Object&&global;var b="object"==typeof self&&self&&self.Object===Object&&self;const y=g||b||Function("return this")(),N=y.Symbol;var x=Object.prototype,w=x.hasOwnProperty,E=x.toString,A=N?N.toStringTag:void 0;var q=Object.prototype.toString;var k=N?N.toStringTag:void 0;const _=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":k&&k in Object(t)?function(t){var e=w.call(t,A),n=t[A];try{t[A]=void 0;var r=!0}catch(t){}var i=E.call(t);return r&&(e?t[A]=n:delete t[A]),i}(t):function(t){return q.call(t)}(t)},L=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},O=function(t){if(!L(t))return!1;var e=_(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},S=y["__core-js_shared__"];var T,j=(T=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+T:"";var C=Function.prototype.toString;const R=function(t){if(null!=t){try{return C.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var I=/^\[object .+?Constructor\]$/,M=Function.prototype,B=Object.prototype,D=M.toString,U=B.hasOwnProperty,P=RegExp("^"+D.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const z=function(t){return!(!L(t)||(e=t,j&&j in e))&&(O(t)?P:I).test(R(t));var e},F=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return z(n)?n:void 0},H=F(y,"Map"),V=F(Object,"create");var K=Object.prototype.hasOwnProperty;var W=Object.prototype.hasOwnProperty;function Z(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Z.prototype.clear=function(){this.__data__=V?V(null):{},this.size=0},Z.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Z.prototype.get=function(t){var e=this.__data__;if(V){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return K.call(e,t)?e[t]:void 0},Z.prototype.has=function(t){var e=this.__data__;return V?void 0!==e[t]:W.call(e,t)},Z.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=V&&void 0===e?"__lodash_hash_undefined__":e,this};const $=Z,G=function(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map};function X(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}X.prototype.clear=function(){this.size=0,this.__data__={hash:new $,map:new(H||v),string:new $}},X.prototype.delete=function(t){var e=G(this,t).delete(t);return this.size-=e?1:0,e},X.prototype.get=function(t){return G(this,t).get(t)},X.prototype.has=function(t){return G(this,t).has(t)},X.prototype.set=function(t,e){var n=G(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};const Y=X;function Q(t){var e=this.__data__=new v(t);this.size=e.size}Q.prototype.clear=function(){this.__data__=new v,this.size=0},Q.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Q.prototype.get=function(t){return this.__data__.get(t)},Q.prototype.has=function(t){return this.__data__.has(t)},Q.prototype.set=function(t,e){var n=this.__data__;if(n instanceof v){var r=n.__data__;if(!H||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Y(r)}return n.set(t,e),this.size=n.size,this};const J=Q,tt=function(){try{var t=F(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),et=function(t,e,n){"__proto__"==e&&tt?tt(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},nt=function(t,e,n){(void 0!==n&&!h(t[e],n)||void 0===n&&!(e in t))&&et(t,e,n)},rt=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),s=o.length;s--;){var l=o[++r];if(!1===e(i[l],l,i))break}return t};var it="object"==typeof exports&&exports&&!exports.nodeType&&exports,ot=it&&"object"==typeof module&&module&&!module.nodeType&&module,st=ot&&ot.exports===it?y.Buffer:void 0,lt=st?st.allocUnsafe:void 0;const at=function(t,e){if(e)return t.slice();var n=t.length,r=lt?lt(n):new t.constructor(n);return t.copy(r),r},ct=y.Uint8Array,ut=function(t){var e=new t.constructor(t.byteLength);return new ct(e).set(new ct(t)),e},ht=function(t,e){var n=e?ut(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},ft=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e};var dt=Object.create;const pt=function(){function t(){}return function(e){if(!L(e))return{};if(dt)return dt(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),vt=function(t,e){return function(n){return t(e(n))}},gt=vt(Object.getPrototypeOf,Object);var mt=Object.prototype;const bt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||mt)},yt=function(t){return"function"!=typeof t.constructor||bt(t)?{}:pt(gt(t))},Nt=function(t){return null!=t&&"object"==typeof t},xt=function(t){return Nt(t)&&"[object Arguments]"==_(t)};var wt=Object.prototype,Et=wt.hasOwnProperty,At=wt.propertyIsEnumerable;const qt=xt(function(){return arguments}())?xt:function(t){return Nt(t)&&Et.call(t,"callee")&&!At.call(t,"callee")},kt=Array.isArray,_t=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Lt=function(t){return null!=t&&_t(t.length)&&!O(t)};var Ot="object"==typeof exports&&exports&&!exports.nodeType&&exports,St=Ot&&"object"==typeof module&&module&&!module.nodeType&&module,Tt=St&&St.exports===Ot?y.Buffer:void 0;const jt=(Tt?Tt.isBuffer:void 0)||function(){return!1};var Ct=Function.prototype,Rt=Object.prototype,It=Ct.toString,Mt=Rt.hasOwnProperty,Bt=It.call(Object);var Dt={};Dt["[object Float32Array]"]=Dt["[object Float64Array]"]=Dt["[object Int8Array]"]=Dt["[object Int16Array]"]=Dt["[object Int32Array]"]=Dt["[object Uint8Array]"]=Dt["[object Uint8ClampedArray]"]=Dt["[object Uint16Array]"]=Dt["[object Uint32Array]"]=!0,Dt["[object Arguments]"]=Dt["[object Array]"]=Dt["[object ArrayBuffer]"]=Dt["[object Boolean]"]=Dt["[object DataView]"]=Dt["[object Date]"]=Dt["[object Error]"]=Dt["[object Function]"]=Dt["[object Map]"]=Dt["[object Number]"]=Dt["[object Object]"]=Dt["[object RegExp]"]=Dt["[object Set]"]=Dt["[object String]"]=Dt["[object WeakMap]"]=!1;const Ut=function(t){return function(e){return t(e)}};var Pt="object"==typeof exports&&exports&&!exports.nodeType&&exports,zt=Pt&&"object"==typeof module&&module&&!module.nodeType&&module,Ft=zt&&zt.exports===Pt&&g.process;const Ht=function(){try{return zt&&zt.require&&zt.require("util").types||Ft&&Ft.binding&&Ft.binding("util")}catch(t){}}();var Vt=Ht&&Ht.isTypedArray;const Kt=Vt?Ut(Vt):function(t){return Nt(t)&&_t(t.length)&&!!Dt[_(t)]},Wt=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var Zt=Object.prototype.hasOwnProperty;const $t=function(t,e,n){var r=t[e];Zt.call(t,e)&&h(r,n)&&(void 0!==n||e in t)||et(t,e,n)},Gt=function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var l=e[o],a=r?r(n[l],t[l],l,n,t):void 0;void 0===a&&(a=t[l]),i?et(n,l,a):$t(n,l,a)}return n};var Xt=/^(?:0|[1-9]\d*)$/;const Yt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Xt.test(t))&&t>-1&&t%1==0&&t<e};var Qt=Object.prototype.hasOwnProperty;const Jt=function(t,e){var n=kt(t),r=!n&&qt(t),i=!n&&!r&&jt(t),o=!n&&!r&&!i&&Kt(t),s=n||r||i||o,l=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],a=l.length;for(var c in t)!e&&!Qt.call(t,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Yt(c,a))||l.push(c);return l};var te=Object.prototype.hasOwnProperty;const ee=function(t){if(!L(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=bt(t),n=[];for(var r in t)("constructor"!=r||!e&&te.call(t,r))&&n.push(r);return n},ne=function(t){return Lt(t)?Jt(t,!0):ee(t)},re=function(t,e,n,r,i,o,s){var l,a=Wt(t,n),c=Wt(e,n),u=s.get(c);if(u)nt(t,n,u);else{var h=o?o(a,c,n+"",t,e,s):void 0,f=void 0===h;if(f){var d=kt(c),p=!d&&jt(c),v=!d&&!p&&Kt(c);h=c,d||p||v?kt(a)?h=a:Nt(l=a)&&Lt(l)?h=ft(a):p?(f=!1,h=at(c,!0)):v?(f=!1,h=ht(c,!0)):h=[]:function(t){if(!Nt(t)||"[object Object]"!=_(t))return!1;var e=gt(t);if(null===e)return!0;var n=Mt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&It.call(n)==Bt}(c)||qt(c)?(h=a,qt(a)?h=function(t){return Gt(t,ne(t))}(a):L(a)&&!O(a)||(h=yt(c))):f=!1}f&&(s.set(c,h),i(h,c,r,o,s),s.delete(c)),nt(t,n,h)}},ie=function t(e,n,r,i,o){e!==n&&rt(n,(function(s,l){if(o||(o=new J),L(s))re(e,n,l,r,t,i,o);else{var a=i?i(Wt(e,l),s,l+"",e,n,o):void 0;void 0===a&&(a=s),nt(e,l,a)}}),ne)},oe=function(t){return t};var se=Math.max;const le=tt?function(t,e){return tt(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:oe;var ae=Date.now;const ce=(ue=le,he=0,fe=0,function(){var t=ae(),e=16-(t-fe);if(fe=t,e>0){if(++he>=800)return arguments[0]}else he=0;return ue.apply(void 0,arguments)});var ue,he,fe;const de=function(t,e){return ce(function(t,e,n){return e=se(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=se(r.length-e,0),s=Array(o);++i<o;)s[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(s),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,l)}}(t,e,oe),t+"")},pe=(ve=function(t,e,n){ie(t,e,n)},de((function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=ve.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(t,e,n){if(!L(n))return!1;var r=typeof e;return!!("number"==r?Lt(n)&&Yt(e,n.length):"string"==r&&e in n)&&h(n[e],t)}(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var s=e[n];s&&ve(t,s,n)}return t})));var ve;function ge(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function me(t){return me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},me(t)}function be(t){var e=function(t){if("object"!=me(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=me(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==me(e)?e:e+""}function ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,be(r.key),r)}}function Ne(t){return Ne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ne(t)}function xe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xe=function(){return!!t})()}function we(t){var e="function"==typeof Map?new Map:void 0;return we=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(xe())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&o(i,n.prototype),i}(t,arguments,Ne(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),o(n,t)},we(t)}var Ee=function(t){return t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t}(Ee||{}),Ae=function(){function t(t,e,n){void 0===n&&(n={}),this.attrName=t,this.keyName=e;var r=Ee.TYPE&Ee.ATTRIBUTE;this.scope=null!=n.scope?n.scope&Ee.LEVEL|r:Ee.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}t.keys=function(t){return Array.from(t.attributes).map((function(t){return t.name}))};var e=t.prototype;return e.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},e.canAdd=function(t,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1)},e.remove=function(t){t.removeAttribute(this.keyName)},e.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""},t}(),qe=function(t){function e(e){var n;return e="[Parchment] "+e,(n=t.call(this,e)||this).message=e,n.name=n.constructor.name,n}return s(e,t),e}(we(Error)),ke=function(){function t(){this.attributes={},this.classes={},this.tags={},this.types={}}t.find=function(t,e){if(void 0===e&&(e=!1),null==t)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){var n=null;try{n=t.parentNode}catch(t){return null}return this.find(n,e)}return null};var e=t.prototype;return e.create=function(e,n,r){var i=this.query(n);if(null==i)throw new qe("Unable to create "+n+" blot");var o=i,s=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:o.create(r),l=new o(e,s,r);return t.blots.set(l.domNode,l),l},e.find=function(e,n){return void 0===n&&(n=!1),t.find(e,n)},e.query=function(t,e){var n,r=this;return void 0===e&&(e=Ee.ANY),"string"==typeof t?n=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?n=this.types.text:"number"==typeof t?t&Ee.LEVEL&Ee.BLOCK?n=this.types.block:t&Ee.LEVEL&Ee.INLINE&&(n=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some((function(t){return!!(n=r.classes[t])})),n=n||this.tags[t.tagName]),null==n?null:"scope"in n&&e&Ee.LEVEL&n.scope&&e&Ee.TYPE&n.scope?n:null},e.register=function(){for(var t=this,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.map((function(e){var n="blotName"in e,r="attrName"in e;if(!n&&!r)throw new qe("Invalid definition");if(n&&"abstract"===e.blotName)throw new qe("Cannot register abstract class");var i=n?e.blotName:r?e.attrName:void 0;return t.types[i]=e,r?"string"==typeof e.keyName&&(t.attributes[e.keyName]=e):n&&(e.className&&(t.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map((function(t){return t.toUpperCase()})):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach((function(n){(null==t.tags[n]||null==e.className)&&(t.tags[n]=e)})))),e}))},t}();ke.blots=new WeakMap;var _e=ke;function Le(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((function(t){return 0===t.indexOf(e+"-")}))}var Oe=function(t){function e(){return t.apply(this,arguments)||this}s(e,t),e.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map((function(t){return t.split("-").slice(0,-1).join("-")}))};var n=e.prototype;return n.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},n.remove=function(t){Le(t,this.keyName).forEach((function(e){t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")},n.value=function(t){var e=(Le(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""},e}(Ae);function Se(t){var e=t.split("-"),n=e.slice(1).map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("");return e[0]+n}var Te=function(t){function e(){return t.apply(this,arguments)||this}s(e,t),e.keys=function(t){return(t.getAttribute("style")||"").split(";").map((function(t){return t.split(":")[0].trim()}))};var n=e.prototype;return n.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[Se(this.keyName)]=e,!0)},n.remove=function(t){t.style[Se(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},n.value=function(t){var e=t.style[Se(this.keyName)];return this.canAdd(t,e)?e:""},e}(Ae),je=function(){function t(t){this.attributes={},this.domNode=t,this.build()}var e=t.prototype;return e.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},e.build=function(){var t=this;this.attributes={};var e=_e.find(this.domNode);if(null!=e){var n=Ae.keys(this.domNode),r=Oe.keys(this.domNode),i=Te.keys(this.domNode);n.concat(r).concat(i).forEach((function(n){var r=e.scroll.query(n,Ee.ATTRIBUTE);r instanceof Ae&&(t.attributes[r.attrName]=r)}))}},e.copy=function(t){var e=this;Object.keys(this.attributes).forEach((function(n){var r=e.attributes[n].value(e.domNode);t.format(n,r)}))},e.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach((function(t){e.attributes[t].remove(e.domNode)})),this.attributes={}},e.values=function(){var t=this;return Object.keys(this.attributes).reduce((function(e,n){return e[n]=t.attributes[n].value(t.domNode),e}),{})},t}(),Ce=function(){function t(t,e){this.scroll=t,this.domNode=e,_e.blots.set(e,this),this.prev=null,this.next=null}t.create=function(t){if(null==this.tagName)throw new qe("Blot definition missing tagName");var e,n;return Array.isArray(this.tagName)?("string"==typeof t?(n=t.toUpperCase(),parseInt(n,10).toString()===n&&(n=parseInt(n,10))):"number"==typeof t&&(n=t),e="number"==typeof n?document.createElement(this.tagName[n-1]):n&&this.tagName.indexOf(n)>-1?document.createElement(n):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e};var e,n,r=t.prototype;return r.attach=function(){},r.clone=function(){var t=this.domNode.cloneNode(!1);return this.scroll.create(t)},r.detach=function(){null!=this.parent&&this.parent.removeChild(this),_e.blots.delete(this.domNode)},r.deleteAt=function(t,e){this.isolate(t,e).remove()},r.formatAt=function(t,e,n,r){var i=this.isolate(t,e);if(null!=this.scroll.query(n,Ee.BLOT)&&r)i.wrap(n,r);else if(null!=this.scroll.query(n,Ee.ATTRIBUTE)){var o=this.scroll.create(this.statics.scope);i.wrap(o),o.format(n,r)}},r.insertAt=function(t,e,n){var r=null==n?this.scroll.create("text",e):this.scroll.create(e,n),i=this.split(t);this.parent.insertBefore(r,i||void 0)},r.isolate=function(t,e){var n=this.split(t);if(null==n)throw new Error("Attempt to isolate at end");return n.split(e),n},r.length=function(){return 1},r.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)},r.optimize=function(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)},r.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},r.replaceWith=function(t,e){var n="string"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n},r.split=function(t,e){return 0===t?this:this.next},r.update=function(t,e){},r.wrap=function(t,e){var n="string"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(n,this.next||void 0),"function"!=typeof n.appendChild)throw new qe("Cannot wrap "+t);return n.appendChild(this),n},e=t,(n=[{key:"statics",get:function(){return this.constructor}}])&&ye(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();Ce.blotName="abstract";var Re=Ce,Ie=function(t){function e(){return t.apply(this,arguments)||this}s(e,t),e.value=function(t){return!0};var n=e.prototype;return n.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},n.position=function(t,e){var n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]},n.value=function(){var t;return(t={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,t},e}(Re);Ie.scope=Ee.INLINE_BLOT;var Me=Ie,Be=function(){function t(){this.head=null,this.tail=null,this.length=0}var e=t.prototype;return e.append=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if(this.insertBefore(e[0],null),e.length>1){var r=e.slice(1);this.append.apply(this,r)}},e.at=function(t){for(var e=this.iterator(),n=e();n&&t>0;)t-=1,n=e();return n},e.contains=function(t){for(var e=this.iterator(),n=e();n;){if(n===t)return!0;n=e()}return!1},e.indexOf=function(t){for(var e=this.iterator(),n=e(),r=0;n;){if(n===t)return r;r+=1,n=e()}return-1},e.insertBefore=function(t,e){null!=t&&(this.remove(t),t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)},e.offset=function(t){for(var e=0,n=this.head;null!=n;){if(n===t)return e;e+=n.length(),n=n.next}return-1},e.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)},e.iterator=function(t){return void 0===t&&(t=this.head),function(){var e=t;return null!=t&&(t=t.next),e}},e.find=function(t,e){void 0===e&&(e=!1);for(var n=this.iterator(),r=n();r;){var i=r.length();if(t<i||e&&t===i&&(null==r.next||0!==r.next.length()))return[r,t];t-=i,r=n()}return[null,0]},e.forEach=function(t){for(var e=this.iterator(),n=e();n;)t(n),n=e()},e.forEachAt=function(t,e,n){if(!(e<=0))for(var r=this.find(t),i=r[0],o=t-r[1],s=this.iterator(i),l=s();l&&o<t+e;){var a=l.length();t>o?n(l,t-o,Math.min(e,o+a-t)):n(l,0,Math.min(a,t+e-o)),o+=a,l=s()}},e.map=function(t){return this.reduce((function(e,n){return e.push(t(n)),e}),[])},e.reduce=function(t,e){for(var n=this.iterator(),r=n();r;)e=t(e,r),r=n();return e},t}();function De(t,e){var n=e.find(t);if(n)return n;try{return e.create(t)}catch(n){var r=e.create(Ee.INLINE);return Array.from(t.childNodes).forEach((function(t){r.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(r.domNode,t),r.attach(),r}}var Ue=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).uiNode=null,r.build(),r}s(e,t);var n=e.prototype;return n.appendChild=function(t){this.insertBefore(t)},n.attach=function(){t.prototype.attach.call(this),this.children.forEach((function(t){t.attach()}))},n.attachUI=function(t){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=t,e.uiClass&&this.uiNode.classList.add(e.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)},n.build=function(){var t=this;this.children=new Be,Array.from(this.domNode.childNodes).filter((function(e){return e!==t.uiNode})).reverse().forEach((function(e){try{var n=De(e,t.scroll);t.insertBefore(n,t.children.head||void 0)}catch(t){if(t instanceof qe)return;throw t}}))},n.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(function(t,e,n){t.deleteAt(e,n)}))},n.descendant=function(t,n){void 0===n&&(n=0);var r=this.children.find(n),i=r[0],o=r[1];return null==t.blotName&&t(i)||null!=t.blotName&&i instanceof t?[i,o]:i instanceof e?i.descendant(t,o):[null,-1]},n.descendants=function(t,n,r){void 0===n&&(n=0),void 0===r&&(r=Number.MAX_VALUE);var i=[],o=r;return this.children.forEachAt(n,r,(function(n,r,s){(null==t.blotName&&t(n)||null!=t.blotName&&n instanceof t)&&i.push(n),n instanceof e&&(i=i.concat(n.descendants(t,r,o))),o-=s})),i},n.detach=function(){this.children.forEach((function(t){t.detach()})),t.prototype.detach.call(this)},n.enforceAllowedChildren=function(){var t=this,n=!1;this.children.forEach((function(r){n||t.statics.allowedChildren.some((function(t){return r instanceof t}))||(r.statics.scope===Ee.BLOCK_BLOT?(null!=r.next&&t.splitAfter(r),null!=r.prev&&t.splitAfter(r.prev),r.parent.unwrap(),n=!0):r instanceof e?r.unwrap():r.remove())}))},n.formatAt=function(t,e,n,r){this.children.forEachAt(t,e,(function(t,e,i){t.formatAt(e,i,n,r)}))},n.insertAt=function(t,e,n){var r=this.children.find(t),i=r[0],o=r[1];if(i)i.insertAt(o,e,n);else{var s=null==n?this.scroll.create("text",e):this.scroll.create(e,n);this.appendChild(s)}},n.insertBefore=function(t,e){null!=t.parent&&t.parent.children.remove(t);var n=null;this.children.insertBefore(t,e||null),t.parent=this,null!=e&&(n=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==n)&&this.domNode.insertBefore(t.domNode,n),t.attach()},n.length=function(){return this.children.reduce((function(t,e){return t+e.length()}),0)},n.moveChildren=function(t,e){this.children.forEach((function(n){t.insertBefore(n,e)}))},n.optimize=function(e){if(t.prototype.optimize.call(this,e),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){var n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()},n.path=function(t,n){void 0===n&&(n=!1);var r=this.children.find(t,n),i=r[0],o=r[1],s=[[this,t]];return i instanceof e?s.concat(i.path(o,n)):(null!=i&&s.push([i,o]),s)},n.removeChild=function(t){this.children.remove(t)},n.replaceWith=function(n,r){var i="string"==typeof n?this.scroll.create(n,r):n;return i instanceof e&&this.moveChildren(i),t.prototype.replaceWith.call(this,i)},n.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(t,this.length(),(function(t,r,i){var o=t.split(r,e);null!=o&&n.appendChild(o)})),n},n.splitAfter=function(t){for(var e=this.clone();null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e},n.unwrap=function(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()},n.update=function(t,e){var n=this,r=[],i=[];t.forEach((function(t){t.target===n.domNode&&"childList"===t.type&&(r.push.apply(r,t.addedNodes),i.push.apply(i,t.removedNodes))})),i.forEach((function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=n.scroll.find(t);null!=e&&(null==e.domNode.parentNode||e.domNode.parentNode===n.domNode)&&e.detach()}})),r.filter((function(t){return t.parentNode===n.domNode&&t!==n.uiNode})).sort((function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(t){var e=null;null!=t.nextSibling&&(e=n.scroll.find(t.nextSibling));var r=De(t,n.scroll);(r.next!==e||null==r.next)&&(null!=r.parent&&r.parent.removeChild(n),n.insertBefore(r,e||void 0))})),this.enforceAllowedChildren()},e}(Re);Ue.uiClass="";var Pe=Ue,ze=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).attributes=new je(r.domNode),r}s(e,t),e.create=function(e){return t.create.call(this,e)},e.formats=function(t,n){var r=n.query(e.blotName);if(null==r||t.tagName!==r.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}};var n=e.prototype;return n.format=function(t,n){var r=this;if(t!==this.statics.blotName||n){var i=this.scroll.query(t,Ee.INLINE);if(null==i)return;i instanceof Ae?this.attributes.attribute(i,n):n&&(t!==this.statics.blotName||this.formats()[t]!==n)&&this.replaceWith(t,n)}else this.children.forEach((function(t){t instanceof e||(t=t.wrap(e.blotName,!0)),r.attributes.copy(t)})),this.unwrap()},n.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t},n.formatAt=function(e,n,r,i){null!=this.formats()[r]||this.scroll.query(r,Ee.ATTRIBUTE)?this.isolate(e,n).format(r,i):t.prototype.formatAt.call(this,e,n,r,i)},n.optimize=function(n){t.prototype.optimize.call(this,n);var r=this.formats();if(0===Object.keys(r).length)return this.unwrap();var i=this.next;i instanceof e&&i.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0}(r,i.formats())&&(i.moveChildren(this),i.remove())},n.replaceWith=function(e,n){var r=t.prototype.replaceWith.call(this,e,n);return this.attributes.copy(r),r},n.update=function(e,n){var r=this;t.prototype.update.call(this,e,n),e.some((function(t){return t.target===r.domNode&&"attributes"===t.type}))&&this.attributes.build()},n.wrap=function(n,r){var i=t.prototype.wrap.call(this,n,r);return i instanceof e&&this.attributes.move(i),i},e}(Pe);ze.allowedChildren=[ze,Me],ze.blotName="inline",ze.scope=Ee.INLINE_BLOT,ze.tagName="SPAN";var Fe=ze,He=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).attributes=new je(r.domNode),r}s(e,t),e.create=function(e){return t.create.call(this,e)},e.formats=function(t,n){var r=n.query(e.blotName);if(null==r||t.tagName!==r.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}};var n=e.prototype;return n.format=function(t,n){var r=this.scroll.query(t,Ee.BLOCK);null!=r&&(r instanceof Ae?this.attributes.attribute(r,n):t!==this.statics.blotName||n?n&&(t!==this.statics.blotName||this.formats()[t]!==n)&&this.replaceWith(t,n):this.replaceWith(e.blotName))},n.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t},n.formatAt=function(e,n,r,i){null!=this.scroll.query(r,Ee.BLOCK)?this.format(r,i):t.prototype.formatAt.call(this,e,n,r,i)},n.insertAt=function(e,n,r){if(null==r||null!=this.scroll.query(n,Ee.INLINE))t.prototype.insertAt.call(this,e,n,r);else{var i=this.split(e);if(null==i)throw new Error("Attempt to insertAt after block boundaries");var o=this.scroll.create(n,r);i.parent.insertBefore(o,i)}},n.replaceWith=function(e,n){var r=t.prototype.replaceWith.call(this,e,n);return this.attributes.copy(r),r},n.update=function(e,n){var r=this;t.prototype.update.call(this,e,n),e.some((function(t){return t.target===r.domNode&&"attributes"===t.type}))&&this.attributes.build()},e}(Pe);He.blotName="block",He.scope=Ee.BLOCK_BLOT,He.tagName="P",He.allowedChildren=[Fe,He,Me];var Ve=He,Ke=function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var n=e.prototype;return n.checkMerge=function(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName},n.deleteAt=function(e,n){t.prototype.deleteAt.call(this,e,n),this.enforceAllowedChildren()},n.formatAt=function(e,n,r,i){t.prototype.formatAt.call(this,e,n,r,i),this.enforceAllowedChildren()},n.insertAt=function(e,n,r){t.prototype.insertAt.call(this,e,n,r),this.enforceAllowedChildren()},n.optimize=function(e){t.prototype.optimize.call(this,e),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())},e}(Pe);Ke.blotName="container",Ke.scope=Ee.BLOCK_BLOT;var We=Ke,Ze=function(t){function e(){return t.apply(this,arguments)||this}s(e,t),e.formats=function(t,e){};var n=e.prototype;return n.format=function(e,n){t.prototype.formatAt.call(this,0,this.length(),e,n)},n.formatAt=function(e,n,r,i){0===e&&n===this.length()?this.format(r,i):t.prototype.formatAt.call(this,e,n,r,i)},n.formats=function(){return this.statics.formats(this.domNode,this.scroll)},e}(Me),$e={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},Ge=function(t){function e(e,n){var r;return(r=t.call(this,null,n)||this).registry=e,r.scroll=ge(r),r.build(),r.observer=new MutationObserver((function(t){r.update(t)})),r.observer.observe(r.domNode,$e),r.attach(),r}s(e,t);var n=e.prototype;return n.create=function(t,e){return this.registry.create(this,t,e)},n.find=function(t,e){void 0===e&&(e=!1);var n=this.registry.find(t,e);return n?n.scroll===this?n:e?this.find(n.scroll.domNode.parentNode,!0):null:null},n.query=function(t,e){return void 0===e&&(e=Ee.ANY),this.registry.query(t,e)},n.register=function(){var t;return(t=this.registry).register.apply(t,arguments)},n.build=function(){null!=this.scroll&&t.prototype.build.call(this)},n.detach=function(){t.prototype.detach.call(this),this.observer.disconnect()},n.deleteAt=function(e,n){this.update(),0===e&&n===this.length()?this.children.forEach((function(t){t.remove()})):t.prototype.deleteAt.call(this,e,n)},n.formatAt=function(e,n,r,i){this.update(),t.prototype.formatAt.call(this,e,n,r,i)},n.insertAt=function(e,n,r){this.update(),t.prototype.insertAt.call(this,e,n,r)},n.optimize=function(e,n){var r=this;void 0===e&&(e=[]),void 0===n&&(n={}),t.prototype.optimize.call(this,n);for(var i=n.mutationsMap||new WeakMap,o=Array.from(this.observer.takeRecords());o.length>0;)e.push(o.pop());for(var s=function(t,e){void 0===e&&(e=!0),null==t||t===r||null!=t.domNode.parentNode&&(i.has(t.domNode)||i.set(t.domNode,[]),e&&s(t.parent))},l=function(t){i.has(t.domNode)&&(t instanceof Pe&&t.children.forEach(l),i.delete(t.domNode),t.optimize(n))},a=e,c=0;a.length>0;c+=1){if(c>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(a.forEach((function(t){var e=r.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(s(r.find(t.previousSibling,!1)),Array.from(t.addedNodes).forEach((function(t){var e=r.find(t,!1);s(e,!1),e instanceof Pe&&e.children.forEach((function(t){s(t,!1)}))}))):"attributes"===t.type&&s(e.prev)),s(e))})),this.children.forEach(l),o=(a=Array.from(this.observer.takeRecords())).slice();o.length>0;)e.push(o.pop())}},n.update=function(e,n){var r=this;void 0===n&&(n={}),e=e||this.observer.takeRecords();var i=new WeakMap;e.map((function(t){var e=r.find(t.target,!0);return null==e?null:i.has(e.domNode)?(i.get(e.domNode).push(t),null):(i.set(e.domNode,[t]),e)})).forEach((function(t){null!=t&&t!==r&&i.has(t.domNode)&&t.update(i.get(t.domNode)||[],n)})),n.mutationsMap=i,i.has(this.domNode)&&t.prototype.update.call(this,i.get(this.domNode),n),this.optimize(e,n)},e}(Pe);Ge.blotName="scroll",Ge.defaultChild=Ve,Ge.allowedChildren=[Ve,We],Ge.scope=Ee.BLOCK_BLOT,Ge.tagName="DIV";var Xe=Ge,Ye=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).text=r.statics.value(r.domNode),r}s(e,t),e.create=function(t){return document.createTextNode(t)},e.value=function(t){return t.data};var n=e.prototype;return n.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},n.index=function(t,e){return this.domNode===t?e:-1},n.insertAt=function(e,n,r){null==r?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):t.prototype.insertAt.call(this,e,n,r)},n.length=function(){return this.text.length},n.optimize=function(n){t.prototype.optimize.call(this,n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},n.position=function(t,e){return void 0===e&&(e=!1),[this.domNode,t]},n.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var n=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n},n.update=function(t,e){var n=this;t.some((function(t){return"characterData"===t.type&&t.target===n.domNode}))&&(this.text=this.statics.value(this.domNode))},n.value=function(){return this.text},e}(Me);Ye.blotName="text",Ye.scope=Ee.INLINE_BLOT;var Qe=Ye,Je=n(143);const tn=vt(Object.keys,Object);var en=Object.prototype.hasOwnProperty;const nn=function(t){return Lt(t)?Jt(t):function(t){if(!bt(t))return tn(t);var e=[];for(var n in Object(t))en.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)},rn=function(){return[]};var on=Object.prototype.propertyIsEnumerable,sn=Object.getOwnPropertySymbols;const ln=sn?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}(sn(t),(function(e){return on.call(t,e)})))}:rn,an=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t},cn=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)an(e,ln(t)),t=gt(t);return e}:rn,un=function(t,e,n){var r=e(t);return kt(t)?r:an(r,n(t))},hn=function(t){return un(t,nn,ln)},fn=function(t){return un(t,ne,cn)},dn=F(y,"DataView"),pn=F(y,"Promise"),vn=F(y,"Set"),gn=F(y,"WeakMap");var mn="[object Map]",bn="[object Promise]",yn="[object Set]",Nn="[object WeakMap]",xn="[object DataView]",wn=R(dn),En=R(H),An=R(pn),qn=R(vn),kn=R(gn),_n=_;(dn&&_n(new dn(new ArrayBuffer(1)))!=xn||H&&_n(new H)!=mn||pn&&_n(pn.resolve())!=bn||vn&&_n(new vn)!=yn||gn&&_n(new gn)!=Nn)&&(_n=function(t){var e=_(t),n="[object Object]"==e?t.constructor:void 0,r=n?R(n):"";if(r)switch(r){case wn:return xn;case En:return mn;case An:return bn;case qn:return yn;case kn:return Nn}return e});const Ln=_n;var On=Object.prototype.hasOwnProperty;var Sn=/\w*$/;var Tn=N?N.prototype:void 0,jn=Tn?Tn.valueOf:void 0;const Cn=function(t,e,n){var r,i,o,s=t.constructor;switch(e){case"[object ArrayBuffer]":return ut(t);case"[object Boolean]":case"[object Date]":return new s(+t);case"[object DataView]":return function(t,e){var n=e?ut(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return ht(t,n);case"[object Map]":case"[object Set]":return new s;case"[object Number]":case"[object String]":return new s(t);case"[object RegExp]":return(o=new(i=t).constructor(i.source,Sn.exec(i))).lastIndex=i.lastIndex,o;case"[object Symbol]":return r=t,jn?Object(jn.call(r)):{}}};var Rn=Ht&&Ht.isMap;const In=Rn?Ut(Rn):function(t){return Nt(t)&&"[object Map]"==Ln(t)};var Mn=Ht&&Ht.isSet;const Bn=Mn?Ut(Mn):function(t){return Nt(t)&&"[object Set]"==Ln(t)};var Dn="[object Arguments]",Un="[object Function]",Pn="[object Object]",zn={};zn[Dn]=zn["[object Array]"]=zn["[object ArrayBuffer]"]=zn["[object DataView]"]=zn["[object Boolean]"]=zn["[object Date]"]=zn["[object Float32Array]"]=zn["[object Float64Array]"]=zn["[object Int8Array]"]=zn["[object Int16Array]"]=zn["[object Int32Array]"]=zn["[object Map]"]=zn["[object Number]"]=zn[Pn]=zn["[object RegExp]"]=zn["[object Set]"]=zn["[object String]"]=zn["[object Symbol]"]=zn["[object Uint8Array]"]=zn["[object Uint8ClampedArray]"]=zn["[object Uint16Array]"]=zn["[object Uint32Array]"]=!0,zn["[object Error]"]=zn[Un]=zn["[object WeakMap]"]=!1;const Fn=function t(e,n,r,i,o,s){var l,a=1&n,c=2&n,u=4&n;if(r&&(l=o?r(e,i,o,s):r(e)),void 0!==l)return l;if(!L(e))return e;var h=kt(e);if(h){if(l=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&On.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!a)return ft(e,l)}else{var f=Ln(e),d=f==Un||"[object GeneratorFunction]"==f;if(jt(e))return at(e,a);if(f==Pn||f==Dn||d&&!o){if(l=c||d?{}:yt(e),!a)return c?function(t,e){return Gt(t,cn(t),e)}(e,function(t,e){return t&&Gt(e,ne(e),t)}(l,e)):function(t,e){return Gt(t,ln(t),e)}(e,function(t,e){return t&&Gt(e,nn(e),t)}(l,e))}else{if(!zn[f])return o?e:{};l=Cn(e,f,a)}}s||(s=new J);var p=s.get(e);if(p)return p;s.set(e,l),Bn(e)?e.forEach((function(i){l.add(t(i,n,r,i,e,s))})):In(e)&&e.forEach((function(i,o){l.set(o,t(i,n,r,o,e,s))}));var v=h?void 0:(u?c?fn:hn:c?ne:nn)(e);return function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););}(v||e,(function(i,o){v&&(i=e[o=i]),$t(l,o,t(i,n,r,o,e,s))})),l},Hn=function(t){return Fn(t,5)};function Vn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Y;++e<n;)this.add(t[e])}Vn.prototype.add=Vn.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},Vn.prototype.has=function(t){return this.__data__.has(t)};const Kn=Vn,Wn=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},Zn=function(t,e,n,r,i,o){var s=1&n,l=t.length,a=e.length;if(l!=a&&!(s&&a>l))return!1;var c=o.get(t),u=o.get(e);if(c&&u)return c==e&&u==t;var h=-1,f=!0,d=2&n?new Kn:void 0;for(o.set(t,e),o.set(e,t);++h<l;){var p=t[h],v=e[h];if(r)var g=s?r(v,p,h,e,t,o):r(p,v,h,t,e,o);if(void 0!==g){if(g)continue;f=!1;break}if(d){if(!Wn(e,(function(t,e){if(s=e,!d.has(s)&&(p===t||i(p,t,n,r,o)))return d.push(e);var s}))){f=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f},$n=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},Gn=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var Xn=N?N.prototype:void 0,Yn=Xn?Xn.valueOf:void 0;var Qn=Object.prototype.hasOwnProperty;var Jn="[object Arguments]",tr="[object Array]",er="[object Object]",nr=Object.prototype.hasOwnProperty;const rr=function(t,e,n,r,i,o){var s=kt(t),l=kt(e),a=s?tr:Ln(t),c=l?tr:Ln(e),u=(a=a==Jn?er:a)==er,f=(c=c==Jn?er:c)==er,d=a==c;if(d&&jt(t)){if(!jt(e))return!1;s=!0,u=!1}if(d&&!u)return o||(o=new J),s||Kt(t)?Zn(t,e,n,r,i,o):function(t,e,n,r,i,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new ct(t),new ct(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return h(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var l=$n;case"[object Set]":var a=1&r;if(l||(l=Gn),t.size!=e.size&&!a)return!1;var c=s.get(t);if(c)return c==e;r|=2,s.set(t,e);var u=Zn(l(t),l(e),r,i,o,s);return s.delete(t),u;case"[object Symbol]":if(Yn)return Yn.call(t)==Yn.call(e)}return!1}(t,e,a,n,r,i,o);if(!(1&n)){var p=u&&nr.call(t,"__wrapped__"),v=f&&nr.call(e,"__wrapped__");if(p||v){var g=p?t.value():t,m=v?e.value():e;return o||(o=new J),i(g,m,n,r,o)}}return!!d&&(o||(o=new J),function(t,e,n,r,i,o){var s=1&n,l=hn(t),a=l.length;if(a!=hn(e).length&&!s)return!1;for(var c=a;c--;){var u=l[c];if(!(s?u in e:Qn.call(e,u)))return!1}var h=o.get(t),f=o.get(e);if(h&&f)return h==e&&f==t;var d=!0;o.set(t,e),o.set(e,t);for(var p=s;++c<a;){var v=t[u=l[c]],g=e[u];if(r)var m=s?r(g,v,u,e,t,o):r(v,g,u,t,e,o);if(!(void 0===m?v===g||i(v,g,n,r,o):m)){d=!1;break}p||(p="constructor"==u)}if(d&&!p){var b=t.constructor,y=e.constructor;b==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof y&&y instanceof y||(d=!1)}return o.delete(t),o.delete(e),d}(t,e,n,r,i,o))},ir=function t(e,n,r,i,o){return e===n||(null==e||null==n||!Nt(e)&&!Nt(n)?e!=e&&n!=n:rr(e,n,r,i,t,o))},or=function(t,e){return ir(t,e)};var sr=function(t){function e(){return t.apply(this,arguments)||this}s(e,t),e.value=function(){};var n=e.prototype;return n.optimize=function(){(this.prev||this.next)&&this.remove()},n.length=function(){return 0},n.value=function(){return""},e}(Ze);sr.blotName="break",sr.tagName="BR";const lr=sr;var ar,cr=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e}(Qe),ur={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function hr(t){return t.replace(/[&<>"']/g,(function(t){return ur[t]}))}var fr=function(t){function e(){return t.apply(this,arguments)||this}s(e,t),e.compare=function(t,n){var r=e.order.indexOf(t),i=e.order.indexOf(n);return r>=0||i>=0?r-i:t===n?0:t<n?-1:1};var n=e.prototype;return n.formatAt=function(n,r,i,o){if(e.compare(this.statics.blotName,i)<0&&this.scroll.query(i,Ee.BLOT)){var s=this.isolate(n,r);o&&s.wrap(i,o)}else t.prototype.formatAt.call(this,n,r,i,o)},n.optimize=function(n){if(t.prototype.optimize.call(this,n),this.parent instanceof e&&e.compare(this.statics.blotName,this.parent.statics.blotName)>0){var r=this.parent.isolate(this.offset(),this.length());this.moveChildren(r),r.wrap(this)}},e}(Fe);ar=fr,fr.allowedChildren=[ar,lr,Ze,cr],fr.order=["cursor","inline","link","underline","strike","italic","bold","script","code"];const dr=fr;var pr=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).cache={},e}s(e,t);var n=e.prototype;return n.delta=function(){return null==this.cache.delta&&(this.cache.delta=gr(this)),this.cache.delta},n.deleteAt=function(e,n){t.prototype.deleteAt.call(this,e,n),this.cache={}},n.formatAt=function(e,n,r,i){n<=0||(this.scroll.query(r,Ee.BLOCK)?e+n===this.length()&&this.format(r,i):t.prototype.formatAt.call(this,e,Math.min(n,this.length()-e-1),r,i),this.cache={})},n.insertAt=function(e,n,r){if(null!=r)return t.prototype.insertAt.call(this,e,n,r),void(this.cache={});if(0!==n.length){var i=n.split("\n"),o=i.shift();o.length>0&&(e<this.length()-1||null==this.children.tail?t.prototype.insertAt.call(this,Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});var s=this;i.reduce((function(t,e){return(s=s.split(t,!0)).insertAt(0,e),e.length}),e+o.length)}},n.insertBefore=function(e,n){var r=this.children.head;t.prototype.insertBefore.call(this,e,n),r instanceof lr&&r.remove(),this.cache={}},n.length=function(){return null==this.cache.length&&(this.cache.length=t.prototype.length.call(this)+1),this.cache.length},n.moveChildren=function(e,n){t.prototype.moveChildren.call(this,e,n),this.cache={}},n.optimize=function(e){t.prototype.optimize.call(this,e),this.cache={}},n.path=function(e){return t.prototype.path.call(this,e,!0)},n.removeChild=function(e){t.prototype.removeChild.call(this,e),this.cache={}},n.split=function(e){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&(0===e||e>=this.length()-1)){var r=this.clone();return 0===e?(this.parent.insertBefore(r,this),this):(this.parent.insertBefore(r,this.next),r)}var i=t.prototype.split.call(this,e,n);return this.cache={},i},e}(Ve);pr.blotName="block",pr.tagName="P",pr.defaultChild=lr,pr.allowedChildren=[lr,dr,Ze,cr];var vr=function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var n=e.prototype;return n.attach=function(){t.prototype.attach.call(this),this.attributes=new je(this.domNode)},n.delta=function(){return(new Je).insert(this.value(),u({},this.formats(),this.attributes.values()))},n.format=function(t,e){var n=this.scroll.query(t,Ee.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,e)},n.formatAt=function(t,e,n,r){this.format(n,r)},n.insertAt=function(e,n,r){var i=this;if(null==r){var o=n.split("\n"),s=o.pop(),l=o.map((function(t){var e=i.scroll.create(pr.blotName);return e.insertAt(0,t),e})),a=this.split(e);l.forEach((function(t){i.parent.insertBefore(t,a)})),s&&this.parent.insertBefore(this.scroll.create("text",s),a)}else t.prototype.insertAt.call(this,e,n,r)},e}(Ze);function gr(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.descendants(Me).reduce((function(t,n){return 0===n.length()?t:t.insert(n.value(),mr(n,{},e))}),new Je).insert("\n",mr(t))}function mr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==t?e:("formats"in t&&"function"==typeof t.formats&&(e=u({},e,t.formats()),n&&delete e["code-token"]),null==t.parent||"scroll"===t.parent.statics.blotName||t.parent.statics.scope!==t.statics.scope?e:mr(t.parent,e,n))}vr.scope=Ee.BLOCK_BLOT;var br=function(t){function e(n,r,i){var o;return(o=t.call(this,n,r)||this).selection=i,o.textNode=document.createTextNode(e.CONTENTS),o.domNode.appendChild(o.textNode),o.savedLength=0,o}s(e,t),e.value=function(){};var n=e.prototype;return n.detach=function(){null!=this.parent&&this.parent.removeChild(this)},n.format=function(n,r){if(0===this.savedLength){for(var i=this,o=0;null!=i&&i.statics.scope!==Ee.BLOCK_BLOT;)o+=i.offset(i.parent),i=i.parent;null!=i&&(this.savedLength=e.CONTENTS.length,i.optimize(),i.formatAt(o,e.CONTENTS.length,n,r),this.savedLength=0)}else t.prototype.format.call(this,n,r)},n.index=function(e,n){return e===this.textNode?0:t.prototype.index.call(this,e,n)},n.length=function(){return this.savedLength},n.position=function(){return[this.textNode,this.textNode.data.length]},n.remove=function(){t.prototype.remove.call(this),this.parent=null},n.restore=function(){if(this.selection.composing||null==this.parent)return null;for(var t=this.selection.getNativeRange();null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);var n,r=this.prev instanceof cr?this.prev:null,i=r?r.length():0,o=this.next instanceof cr?this.next:null,s=o?o.text:"",l=this.textNode,a=l.data.split(e.CONTENTS).join("");if(l.data=e.CONTENTS,r)n=r,(a||o)&&(r.insertAt(r.length(),a+s),o&&o.remove());else if(o)n=o,o.insertAt(0,a);else{var c=document.createTextNode(a);n=this.scroll.create(c),this.parent.insertBefore(n,this)}if(this.remove(),t){var u=function(t,e){return r&&t===r.domNode?e:t===l?i+e-1:o&&t===o.domNode?i+a.length+e:null},h=u(t.start.node,t.start.offset),f=u(t.end.node,t.end.offset);if(null!==h&&null!==f)return{startNode:n.domNode,startOffset:h,endNode:n.domNode,endOffset:f}}return null},n.update=function(t,e){var n=this;if(t.some((function(t){return"characterData"===t.type&&t.target===n.textNode}))){var r=this.restore();r&&(e.range=r)}},n.optimize=function(n){t.prototype.optimize.call(this,n);for(var r=this.parent;r;){if("A"===r.domNode.tagName){this.savedLength=e.CONTENTS.length,r.isolate(this.offset(r),this.length()).unwrap(),this.savedLength=0;break}r=r.parent}},n.value=function(){return""},e}(Ze);br.blotName="cursor",br.className="ql-cursor",br.tagName="span",br.CONTENTS="\ufeff";const yr=br;var Nr=n(497);const xr=new WeakMap;var wr=["error","warn","log","info"],Er="warn";function Ar(t){if(Er&&wr.indexOf(t)<=wr.indexOf(Er)){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(e=console)[t].apply(e,r)}}function qr(t){return wr.reduce((function(e,n){return e[n]=Ar.bind(console,n,t),e}),{})}qr.level=function(t){Er=t},Ar.level=qr.level;const kr=qr;var _r=kr("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(t){document.addEventListener(t,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach((function(t){var n,r=xr.get(t);r&&r.emitter&&(n=r.emitter).handleDOM.apply(n,e)}))}))}));var Lr=function(t){function e(){var e;return(e=t.call(this)||this).domListeners={},e.on("error",_r.error),e}s(e,t);var n=e.prototype;return n.emit=function(){for(var e,n,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=_r.log).call.apply(e,[_r].concat(i)),(n=t.prototype.emit).call.apply(n,[this].concat(i))},n.handleDOM=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];(this.domListeners[t.type]||[]).forEach((function(e){var r=e.node,i=e.handler;(t.target===r||r.contains(t.target))&&i.apply(void 0,[t].concat(n))}))},n.listenDOM=function(t,e,n){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:n})},e}(Nr);Lr.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"},Lr.sources={API:"api",SILENT:"silent",USER:"user"};const Or=Lr;var Sr=kr("quill:selection"),Tr=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.index=t,this.length=e},jr=function(){function t(t,e){var n=this;this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Tr(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){n.mouseDown||n.composing||setTimeout(n.update.bind(n,Or.sources.USER),1)})),this.emitter.on(Or.events.SCROLL_BEFORE_UPDATE,(function(){if(n.hasFocus()){var t=n.getNativeRange();null!=t&&t.start.node!==n.cursor.textNode&&n.emitter.once(Or.events.SCROLL_UPDATE,(function(e,r){try{n.root.contains(t.start.node)&&n.root.contains(t.end.node)&&n.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset);var i=r.some((function(t){return"characterData"===t.type||"childList"===t.type||"attributes"===t.type&&t.target===n.root}));n.update(i?Or.sources.SILENT:e)}catch(t){}}))}})),this.emitter.on(Or.events.SCROLL_OPTIMIZE,(function(t,e){if(e.range){var r=e.range,i=r.startNode,o=r.startOffset,s=r.endNode,l=r.endOffset;n.setNativeRange(i,o,s,l),n.update(Or.sources.SILENT)}})),this.update(Or.sources.SILENT)}var e=t.prototype;return e.handleComposition=function(){var t=this;this.emitter.on(Or.events.COMPOSITION_BEFORE_START,(function(){t.composing=!0})),this.emitter.on(Or.events.COMPOSITION_END,(function(){if(t.composing=!1,t.cursor.parent){var e=t.cursor.restore();if(!e)return;setTimeout((function(){t.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)}),1)}}))},e.handleDragging=function(){var t=this;this.emitter.listenDOM("mousedown",document.body,(function(){t.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){t.mouseDown=!1,t.update(Or.sources.USER)}))},e.focus=function(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))},e.format=function(t,e){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!this.scroll.query(t,Ee.BLOCK)){if(n.start.node!==this.cursor.textNode){var r=this.scroll.find(n.start.node,!1);if(null==r)return;if(r instanceof Me){var i=r.split(n.start.offset);r.parent.insertBefore(this.cursor,i)}else r.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}},e.getBounds=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.scroll.length();t=Math.min(t,r-1),n=Math.min(t+n,r-1)-t;var i=this.scroll.leaf(t),o=i[0],s=i[1];if(null==o)return null;if(n>0&&s===o.length()){var l=this.scroll.leaf(t+1)[0];l&&this.scroll.line(t)[0]===this.scroll.line(t+1)[0]&&(o=l,s=0)}var a=o.position(s,!0);e=a[0],s=a[1];var c=document.createRange();if(n>0){c.setStart(e,s);var u=this.scroll.leaf(t+n);if(o=u[0],s=u[1],null==o)return null;var h=o.position(s,!0);return e=h[0],s=h[1],c.setEnd(e,s),c.getBoundingClientRect()}var f,d="left";if(e instanceof Text){if(!e.data.length)return null;s<e.data.length?(c.setStart(e,s),c.setEnd(e,s+1)):(c.setStart(e,s-1),c.setEnd(e,s),d="right"),f=c.getBoundingClientRect()}else{if(!(o.domNode instanceof Element))return null;f=o.domNode.getBoundingClientRect(),s>0&&(d="right")}return{bottom:f.top+f.height,height:f.height,left:f[d],right:f[d],top:f.top,width:0}},e.getNativeRange=function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;var e=t.getRangeAt(0);if(null==e)return null;var n=this.normalizeNative(e);return Sr.info("getNativeRange",n),n},e.getRange=function(){var t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]},e.hasFocus=function(){return document.activeElement===this.root||null!=document.activeElement&&Cr(this.root,document.activeElement)},e.normalizedToRange=function(t){var e=this,n=[[t.start.node,t.start.offset]];t.native.collapsed||n.push([t.end.node,t.end.offset]);var r=n.map((function(t){var n=t[0],r=t[1],i=e.scroll.find(n,!0),o=i.offset(e.scroll);return 0===r?o:i instanceof Me?o+i.index(n,r):o+i.length()})),i=Math.min(Math.max.apply(Math,r),this.scroll.length()-1),o=Math.min.apply(Math,[i].concat(r));return new Tr(o,i-o)},e.normalizeNative=function(t){if(!Cr(this.root,t.startContainer)||!t.collapsed&&!Cr(this.root,t.endContainer))return null;var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((function(t){for(var e=t.node,n=t.offset;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>n)e=e.childNodes[n],n=0;else{if(e.childNodes.length!==n)break;n=(e=e.lastChild)instanceof Text?e.data.length:e.childNodes.length>0?e.childNodes.length:e.childNodes.length+1}t.node=e,t.offset=n})),e},e.rangeToNative=function(t){var e=this,n=this.scroll.length(),r=function(t,r){t=Math.min(n-1,t);var i=e.scroll.leaf(t),o=i[0],s=i[1];return o?o.position(s,r):[null,-1]};return[].concat(r(t.index,!1),r(t.index+t.length,!0))},e.setNativeRange=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Sr.info("setNativeRange",t,e,n,r),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=n.parentNode){var o=document.getSelection();if(null!=o)if(null!=t){this.hasFocus()||this.root.focus({preventScroll:!0});var s=(this.getNativeRange()||{}).native;if(null==s||i||t!==s.startContainer||e!==s.startOffset||n!==s.endContainer||r!==s.endOffset){t instanceof Element&&"BR"===t.tagName&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&"BR"===n.tagName&&(r=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);var l=document.createRange();l.setStart(t,e),l.setEnd(n,r),o.removeAllRanges(),o.addRange(l)}}else o.removeAllRanges(),this.root.blur()}},e.setRange=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Or.sources.API;if("string"==typeof e&&(n=e,e=!1),Sr.info("setRange",t),null!=t){var r=this.rangeToNative(t);this.setNativeRange.apply(this,r.concat([e]))}else this.setNativeRange(null);this.update(n)},e.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Or.sources.USER,e=this.lastRange,n=this.getRange(),r=n[0],i=n[1];if(this.lastRange=r,this.lastNative=i,null!=this.lastRange&&(this.savedRange=this.lastRange),!or(e,this.lastRange)){var o;if(!this.composing&&null!=i&&i.native.collapsed&&i.start.node!==this.cursor.textNode){var s=this.cursor.restore();s&&this.setNativeRange(s.startNode,s.startOffset,s.endNode,s.endOffset)}var l,a=[Or.events.SELECTION_CHANGE,Hn(this.lastRange),Hn(e),t];(o=this.emitter).emit.apply(o,[Or.events.EDITOR_CHANGE].concat(a)),t!==Or.sources.SILENT&&(l=this.emitter).emit.apply(l,a)}},t}();function Cr(t,e){try{e.parentNode}catch(t){return!1}return t.contains(e)}const Rr=jr;var Ir=/^[ -~]*$/;function Mr(t,e,n){if(0===t.length){var r=Ur(n.pop())[0];return e<=0?"</li></"+r+">":"</li></"+r+">"+Mr([],e-1,n)}var i=t[0],o=i.child,s=i.offset,l=i.length,a=i.indent,c=i.type,u=t.slice(1),h=Ur(c),f=h[0],d=h[1];if(a>e)return n.push(c),a===e+1?"<"+f+"><li"+d+">"+Br(o,s,l)+Mr(u,a,n):"<"+f+"><li>"+Mr(t,e+1,n);var p=n[n.length-1];return a===e&&c===p?"</li><li"+d+">"+Br(o,s,l)+Mr(u,a,n):"</li></"+Ur(n.pop())[0]+">"+Mr(t,e-1,n)}function Br(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("html"in t&&"function"==typeof t.html)return t.html(e,n);if(t instanceof cr)return hr(t.value().slice(e,e+n)).replaceAll(" ","&nbsp;");if(t instanceof Pe){if("list-container"===t.statics.blotName){var i=[];return t.children.forEachAt(e,n,(function(t,e,n){var r="formats"in t&&"function"==typeof t.formats?t.formats():{};i.push({child:t,offset:e,length:n,indent:r.indent||0,type:r.list})})),Mr(i,-1,[])}var o=[];if(t.children.forEachAt(e,n,(function(t,e,n){o.push(Br(t,e,n))})),r||"list"===t.statics.blotName)return o.join("");var s=t.domNode,l=s.outerHTML,a=s.innerHTML,c=l.split(">"+a+"<"),u=c[0],h=c[1];return"<table"===u?'<table style="border: 1px solid #000;">'+o.join("")+"<"+h:u+">"+o.join("")+"<"+h}return t.domNode instanceof Element?t.domNode.outerHTML:""}function Dr(t,e){return Object.keys(e).reduce((function(n,r){if(null==t[r])return n;var i=e[r];return i===t[r]?n[r]=i:Array.isArray(i)?i.indexOf(t[r])<0?n[r]=i.concat([t[r]]):n[r]=i:n[r]=[i,t[r]],n}),{})}function Ur(t){var e="ordered"===t?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function Pr(t){return t.reduce((function(t,e){if("string"==typeof e.insert){var n=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(n,e.attributes)}return t.push(e)}),new Je)}function zr(t,e){var n=t.index,r=t.length;return new Tr(n+e,r)}const Fr=function(){function t(t){this.scroll=t,this.delta=this.getDelta()}var e=t.prototype;return e.applyDelta=function(t){var e=this;this.scroll.update();var n=this.scroll.length();this.scroll.batchStart();var r,i,o=Pr(t),s=new Je;return(r=o.ops.slice(),i=[],r.forEach((function(t){"string"==typeof t.insert?t.insert.split("\n").forEach((function(e,n){n&&i.push({insert:"\n",attributes:t.attributes}),e&&i.push({insert:e,attributes:t.attributes})})):i.push(t)})),i).reduce((function(t,r){var i=Je.Op.length(r),o=r.attributes||{},l=!1,a=!1;if(null!=r.insert){if(s.retain(i),"string"==typeof r.insert){var c=r.insert;a=!c.endsWith("\n")&&(n<=t||!!e.scroll.descendant(vr,t)[0]),e.scroll.insertAt(t,c);var u=e.scroll.line(t),h=u[0],f=u[1],d=pe({},mr(h));if(h instanceof pr){var p=h.descendant(Me,f)[0];p&&(d=pe(d,mr(p)))}o=Je.AttributeMap.diff(d,o)||{}}else if("object"==typeof r.insert){var v=Object.keys(r.insert)[0];if(null==v)return t;var g=null!=e.scroll.query(v,Ee.INLINE);if(g)(n<=t||e.scroll.descendant(vr,t)[0])&&(a=!0);else if(t>0){var m=e.scroll.descendant(Me,t-1),b=m[0],y=m[1];b instanceof cr?"\n"!==b.value()[y]&&(l=!0):b instanceof Ze&&b.statics.scope===Ee.INLINE_BLOT&&(l=!0)}if(e.scroll.insertAt(t,v,r.insert[v]),g){var N=e.scroll.descendant(Me,t)[0];if(N){var x=pe({},mr(N));o=Je.AttributeMap.diff(x,o)||{}}}}n+=i}else if(s.push(r),null!==r.retain&&"object"==typeof r.retain){var w=Object.keys(r.retain)[0];if(null==w)return t;e.scroll.updateEmbedAt(t,w,r.retain[w])}Object.keys(o).forEach((function(n){e.scroll.formatAt(t,i,n,o[n])}));var E=l?1:0,A=a?1:0;return n+=E+A,s.retain(E),s.delete(A),t+i+E+A}),0),s.reduce((function(t,n){return"number"==typeof n.delete?(e.scroll.deleteAt(t,n.delete),t):t+Je.Op.length(n)}),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(o)},e.deleteText=function(t,e){return this.scroll.deleteAt(t,e),this.update((new Je).retain(t).delete(e))},e.formatLine=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach((function(i){n.scroll.lines(t,Math.max(e,1)).forEach((function(t){t.format(i,r[i])}))})),this.scroll.optimize();var i=(new Je).retain(t).retain(e,Hn(r));return this.update(i)},e.formatText=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(r).forEach((function(i){n.scroll.formatAt(t,e,i,r[i])}));var i=(new Je).retain(t).retain(e,Hn(r));return this.update(i)},e.getContents=function(t,e){return this.delta.slice(t,t+e)},e.getDelta=function(){return this.scroll.lines().reduce((function(t,e){return t.concat(e.delta())}),new Je)},e.getFormat=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=[];0===e?this.scroll.path(t).forEach((function(t){var e=t[0];e instanceof pr?n.push(e):e instanceof Me&&r.push(e)})):(n=this.scroll.lines(t,e),r=this.scroll.descendants(Me,t,e));var i=[n,r].map((function(t){var e=t.shift();if(null==e)return{};for(var n=mr(e);Object.keys(n).length>0;){var r=t.shift();if(null==r)return n;n=Dr(mr(r),n)}return n}));return u({},i[0],i[1])},e.getHTML=function(t,e){var n=this.scroll.line(t),r=n[0],i=n[1];if(r){var o=r.length();return r.length()>=i+e&&(0!==i||e!==o)?Br(r,i,e,!0):Br(this.scroll,t,e,!0)}return""},e.getText=function(t,e){return this.getContents(t,e).filter((function(t){return"string"==typeof t.insert})).map((function(t){return t.insert})).join("")},e.insertContents=function(t,e){var n=Pr(e),r=(new Je).retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(r)},e.insertEmbed=function(t,e,n){var r;return this.scroll.insertAt(t,e,n),this.update((new Je).retain(t).insert(((r={})[e]=n,r)))},e.insertText=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(r).forEach((function(i){n.scroll.formatAt(t,e.length,i,r[i])})),this.update((new Je).retain(t).insert(e,Hn(r)))},e.isBlank=function(){if(0===this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;if((null==t?void 0:t.statics.blotName)!==pr.blotName)return!1;var e=t;return!(e.children.length>1)&&e.children.head instanceof lr},e.removeFormat=function(t,e){var n=this.getText(t,e),r=this.scroll.line(t+e),i=r[0],o=r[1],s=0,l=new Je;null!=i&&(s=i.length()-o,l=i.delta().slice(o,o+s-1).insert("\n"));var a=this.getContents(t,e+s).diff((new Je).insert(n).concat(l)),c=(new Je).retain(t).concat(a);return this.applyDelta(c)},e.update=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(Ir)&&this.scroll.find(e[0].target)){var i=this.scroll.find(e[0].target),o=mr(i),s=i.offset(this.scroll),l=e[0].oldValue.replace(yr.CONTENTS,""),a=(new Je).insert(l),c=(new Je).insert(i.value()),u=n&&{oldRange:zr(n.oldRange,-s),newRange:zr(n.newRange,-s)};t=(new Je).retain(s).concat(a.diff(c,u)).reduce((function(t,e){return e.insert?t.insert(e.insert,o):t.push(e)}),new Je),this.delta=r.compose(t)}else this.delta=this.getDelta(),t&&or(r.compose(t),this.delta)||(t=r.diff(this.delta,n));return t},t}();var Hr=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.quill=t,this.options=e};Hr.DEFAULTS={};const Vr=Hr;var Kr="\ufeff";const Wr=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).contentNode=document.createElement("span"),r.contentNode.setAttribute("contenteditable","false"),Array.from(r.domNode.childNodes).forEach((function(t){r.contentNode.appendChild(t)})),r.leftGuard=document.createTextNode(Kr),r.rightGuard=document.createTextNode(Kr),r.domNode.appendChild(r.leftGuard),r.domNode.appendChild(r.contentNode),r.domNode.appendChild(r.rightGuard),r}s(e,t);var n=e.prototype;return n.index=function(e,n){return e===this.leftGuard?0:e===this.rightGuard?1:t.prototype.index.call(this,e,n)},n.restore=function(t){var e,n=null,r=t.data.split(Kr).join("");if(t===this.leftGuard)if(this.prev instanceof cr){var i=this.prev.length();this.prev.insertAt(i,r),n={startNode:this.prev.domNode,startOffset:i+r.length}}else e=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(e),this),n={startNode:e,startOffset:r.length};else t===this.rightGuard&&(this.next instanceof cr?(this.next.insertAt(0,r),n={startNode:this.next.domNode,startOffset:r.length}):(e=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(e),this.next),n={startNode:e,startOffset:r.length}));return t.data=Kr,n},n.update=function(t,e){var n=this;t.forEach((function(t){if("characterData"===t.type&&(t.target===n.leftGuard||t.target===n.rightGuard)){var r=n.restore(t.target);r&&(e.range=r)}}))},e}(Ze),Zr=function(){function t(t,e){this.isComposing=!1,this.scroll=t,this.emitter=e,this.setupListeners()}var e=t.prototype;return e.setupListeners=function(){var t=this;this.scroll.domNode.addEventListener("compositionstart",(function(e){t.isComposing||t.handleCompositionStart(e)})),this.scroll.domNode.addEventListener("compositionend",(function(e){t.isComposing&&queueMicrotask((function(){t.handleCompositionEnd(e)}))}))},e.handleCompositionStart=function(t){var e=t.target instanceof Node?this.scroll.find(t.target,!0):null;!e||e instanceof Wr||(this.emitter.emit(Or.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(Or.events.COMPOSITION_START,t),this.isComposing=!0)},e.handleCompositionEnd=function(t){this.emitter.emit(Or.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(Or.events.COMPOSITION_END,t),this.isComposing=!1},t}();var $r,Gr=function(){function t(t,e){this.modules={},this.quill=t,this.options=e}var e=t.prototype;return e.init=function(){var t=this;Object.keys(this.options.modules).forEach((function(e){null==t.modules[e]&&t.addModule(e)}))},e.addModule=function(t){var e=this.quill.constructor.import("modules/"+t);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]},t}();$r=Gr,Gr.DEFAULTS={modules:{}},Gr.themes={default:$r};const Xr=Gr;var Yr=function(t){var e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,r="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*r,left:e.left}},Qr=function(t){var e=parseInt(t,10);return Number.isNaN(e)?0:e},Jr=function(t,e,n,r,i,o){return t<n&&e>r?0:t<n?-(n-t+i):e>r?e-t>r-n?t+i-n:e-r+o:0};var ti=["block","break","cursor","inline","scroll","text"];var ei=["modules"],ni=["modules"],ri=kr("quill"),ii=new _e;Pe.uiClass="ql-ui";var oi=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options=ci(e,r),this.container=this.options.container,null!=this.container){this.options.debug&&t.debug(this.options.debug);var i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",xr.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Or;var o=Xe.blotName,s=this.options.registry.query(o);if(!s||!("blotName"in s))throw new Error('Cannot initialize Quill without "'+o+'" blot');if(this.scroll=new s(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Fr(this.scroll),this.selection=new Rr(this.scroll,this.emitter),this.composition=new Zr(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Or.events.EDITOR_CHANGE,(function(t){t===Or.events.TEXT_CHANGE&&n.root.classList.toggle("ql-blank",n.editor.isBlank())})),this.emitter.on(Or.events.SCROLL_UPDATE,(function(t,e){var r=n.selection.lastRange,i=n.selection.getRange()[0],o=r&&i?{oldRange:r,newRange:i}:void 0;ui.call(n,(function(){return n.editor.update(null,e,o)}),t)})),this.emitter.on(Or.events.SCROLL_EMBED_UPDATE,(function(e,r){var i=n.selection.lastRange,o=n.selection.getRange()[0],s=i&&o?{oldRange:i,newRange:o}:void 0;ui.call(n,(function(){var t,i=(new Je).retain(e.offset(n)).retain(((t={})[e.statics.blotName]=r,t));return n.editor.update(i,[],s)}),t.sources.USER)})),i){var l=this.clipboard.convert({html:i+"<p><br></p>",text:"\n"});this.setContents(l)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}else ri.error("Invalid Quill container",e)}t.debug=function(t){!0===t&&(t="log"),kr.level(t)},t.find=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return xr.get(t)||ii.find(t,e)},t.import=function(t){return null==this.imports[t]&&ri.error("Cannot import "+t+". Are you sure it was registered?"),this.imports[t]},t.register=function(){var t=this;if("string"!=typeof(arguments.length<=0?void 0:arguments[0])){var e=arguments.length<=0?void 0:arguments[0],n=!!(arguments.length<=1?void 0:arguments[1]),r="attrName"in e?e.attrName:e.blotName;"string"==typeof r?this.register("formats/"+r,e,n):Object.keys(e).forEach((function(r){t.register(r,e[r],n)}))}else{var i=arguments.length<=0?void 0:arguments[0],o=arguments.length<=1?void 0:arguments[1],s=!!(arguments.length<=2?void 0:arguments[2]);null==this.imports[i]||s||ri.warn("Overwriting "+i+" with",o),this.imports[i]=o,(i.startsWith("blots/")||i.startsWith("formats/"))&&o&&"boolean"!=typeof o&&"abstract"!==o.blotName&&ii.register(o),"function"==typeof o.register&&o.register(ii)}};var e=t.prototype;return e.addContainer=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){var n=t;(t=document.createElement("div")).classList.add(n)}return this.container.insertBefore(t,e),t},e.blur=function(){this.selection.setRange(null)},e.deleteText=function(t,e,n){var r=this,i=hi(t,e,n);return t=i[0],e=i[1],n=i[3],ui.call(this,(function(){return r.editor.deleteText(t,e)}),n,t,-1*e)},e.disable=function(){this.enable(!1)},e.editReadOnly=function(t){this.allowReadOnlyEdits=!0;var e=t();return this.allowReadOnlyEdits=!1,e},e.enable=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)},e.focus=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()},e.format=function(t,e){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Or.sources.API;return ui.call(this,(function(){var r=n.getSelection(!0),i=new Je;if(null==r)return i;if(n.scroll.query(t,Ee.BLOCK)){var o;i=n.editor.formatLine(r.index,r.length,((o={})[t]=e,o))}else{if(0===r.length)return n.selection.format(t,e),i;var s;i=n.editor.formatText(r.index,r.length,((s={})[t]=e,s))}return n.setSelection(r,Or.sources.SILENT),i}),r)},e.formatLine=function(t,e,n,r,i){var o,s=this,l=hi(t,e,n,r,i);return t=l[0],e=l[1],o=l[2],i=l[3],ui.call(this,(function(){return s.editor.formatLine(t,e,o)}),i,t,0)},e.formatText=function(t,e,n,r,i){var o,s=this,l=hi(t,e,n,r,i);return t=l[0],e=l[1],o=l[2],i=l[3],ui.call(this,(function(){return s.editor.formatText(t,e,o)}),i,t,0)},e.getBounds=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!(e="number"==typeof t?this.selection.getBounds(t,n):this.selection.getBounds(t.index,t.length)))return null;var r=this.container.getBoundingClientRect();return{bottom:e.bottom-r.top,height:e.height,left:e.left-r.left,right:e.right-r.left,top:e.top-r.top,width:e.width}},e.getContents=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,n=hi(t,e);return t=n[0],e=n[1],this.editor.getContents(t,e)},e.getFormat=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)},e.getIndex=function(t){return t.offset(this.scroll)},e.getLength=function(){return this.scroll.length()},e.getLeaf=function(t){return this.scroll.leaf(t)},e.getLine=function(t){return this.scroll.line(t)},e.getLines=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)},e.getModule=function(t){return this.theme.modules[t]},e.getSelection=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]},e.getSemanticHTML=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;"number"==typeof e&&(n=null!=(t=n)?t:this.getLength()-e);var r=hi(e,n);return e=r[0],n=r[1],this.editor.getHTML(e,n)},e.getText=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;"number"==typeof e&&(n=null!=(t=n)?t:this.getLength()-e);var r=hi(e,n);return e=r[0],n=r[1],this.editor.getText(e,n)},e.hasFocus=function(){return this.selection.hasFocus()},e.insertEmbed=function(e,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.sources.API;return ui.call(this,(function(){return i.editor.insertEmbed(e,n,r)}),o,e)},e.insertText=function(t,e,n,r,i){var o,s=this,l=hi(t,0,n,r,i);return t=l[0],o=l[2],i=l[3],ui.call(this,(function(){return s.editor.insertText(t,e,o)}),i,t,e.length)},e.isEnabled=function(){return this.scroll.isEnabled()},e.off=function(){var t;return(t=this.emitter).off.apply(t,arguments)},e.on=function(){var t;return(t=this.emitter).on.apply(t,arguments)},e.once=function(){var t;return(t=this.emitter).once.apply(t,arguments)},e.removeFormat=function(t,e,n){var r=this,i=hi(t,e,n);return t=i[0],e=i[1],n=i[3],ui.call(this,(function(){return r.editor.removeFormat(t,e)}),n,t)},e.scrollRectIntoView=function(t){!function(t,e){for(var n,r=t.ownerDocument,i=e,o=t;o;){var s,l,a,c,u=o===r.body,h=u?{top:0,right:null!=(s=null==(l=window.visualViewport)?void 0:l.width)?s:r.documentElement.clientWidth,bottom:null!=(a=null==(c=window.visualViewport)?void 0:c.height)?a:r.documentElement.clientHeight,left:0}:Yr(o),f=getComputedStyle(o),d=Jr(i.left,i.right,h.left,h.right,Qr(f.scrollPaddingLeft),Qr(f.scrollPaddingRight)),p=Jr(i.top,i.bottom,h.top,h.bottom,Qr(f.scrollPaddingTop),Qr(f.scrollPaddingBottom));if(d||p)if(u){var v;null==(v=r.defaultView)||v.scrollBy(d,p)}else{var g=o,m=g.scrollLeft,b=g.scrollTop;p&&(o.scrollTop+=p),d&&(o.scrollLeft+=d);var y=o.scrollLeft-m,N=o.scrollTop-b;i={left:i.left-y,top:i.top-N,right:i.right-y,bottom:i.bottom-N}}o=u||"fixed"===f.position?null:(n=o).parentElement||n.getRootNode().host||null}}(this.root,t)},e.scrollIntoView=function(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()},e.scrollSelectionIntoView=function(){var t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)},e.setContents=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Or.sources.API;return ui.call(this,(function(){t=new Je(t);var n=e.getLength(),r=e.editor.deleteText(0,n),i=e.editor.insertContents(0,t),o=e.editor.deleteText(e.getLength()-1,1);return r.compose(i).compose(o)}),n)},e.setSelection=function(e,n,r){if(null==e)this.selection.setRange(null,n||t.sources.API);else{var i=hi(e,n,r);e=i[0],n=i[1],r=i[3],this.selection.setRange(new Tr(Math.max(0,e),n),r),r!==Or.sources.SILENT&&this.scrollSelectionIntoView()}},e.setText=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Or.sources.API,n=(new Je).insert(t);return this.setContents(n,e)},e.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Or.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e},e.updateContents=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Or.sources.API;return ui.call(this,(function(){return t=new Je(t),e.editor.applyDelta(t)}),n,!0)},t}();function si(t){return"string"==typeof t?document.querySelector(t):t}function li(t){return Object.entries(null!=t?t:{}).reduce((function(t,e){var n,r=e[0],i=e[1];return u({},t,((n={})[r]=!0===i?{}:i,n))}),{})}function ai(t){return Object.fromEntries(Object.entries(t).filter((function(t){return void 0!==t[1]})))}function ci(t,e){var n=si(t);if(!n)throw new Error("Invalid Quill container");var r=e.theme&&e.theme!==oi.DEFAULTS.theme?oi.import("themes/"+e.theme):Xr;if(!r)throw new Error("Invalid theme "+e.theme+". Did you register it?");var i=oi.DEFAULTS,o=i.modules,s=c(i,ei),l=r.DEFAULTS,a=l.modules,h=c(l,ni),f=li(e.modules);null!=f&&f.toolbar&&f.toolbar.constructor!==Object&&(f=u({},f,{toolbar:{container:f.toolbar}}));var d=pe({},li(o),li(a),f),p=u({},s,ai(h),ai(e)),v=e.registry;return v?e.formats&&ri.warn('Ignoring "formats" option because "registry" is specified'):v=e.formats?function(t,e,n){var r=new _e;return ti.forEach((function(t){var n=e.query(t);n&&r.register(n)})),t.forEach((function(t){var i=e.query(t);i||n.error('Cannot register "'+t+'" specified in "formats" config. Are you sure it was registered?');for(var o=0;i;){var s;if(r.register(i),i="blotName"in i&&null!=(s=i.requiredContainer)?s:null,(o+=1)>100){n.error('Cycle detected in registering blot requiredContainer: "'+t+'"');break}}})),r}(e.formats,p.registry,ri):p.registry,u({},p,{registry:v,container:n,theme:r,modules:Object.entries(d).reduce((function(t,e){var n,r=e[0],i=e[1];if(!i)return t;var o=oi.import("modules/"+r);return null==o?(ri.error("Cannot load "+r+" module. Are you sure you registered it?"),t):u({},t,((n={})[r]=pe({},o.DEFAULTS||{},i),n))}),{}),bounds:si(p.bounds)})}function ui(t,e,n,r){if(!this.isEnabled()&&e===Or.sources.USER&&!this.allowReadOnlyEdits)return new Je;var i=null==n?null:this.getSelection(),o=this.editor.delta,s=t();if(null!=i&&(!0===n&&(n=i.index),null==r?i=fi(i,s,e):0!==r&&(i=fi(i,n,r,e)),this.setSelection(i,Or.sources.SILENT)),s.length()>0){var l,a,c=[Or.events.TEXT_CHANGE,s,o,e];(l=this.emitter).emit.apply(l,[Or.events.EDITOR_CHANGE].concat(c)),e!==Or.sources.SILENT&&(a=this.emitter).emit.apply(a,c)}return s}function hi(t,e,n,r,i){var o={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(i=r,r=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(i=r,r=n,n=e,e=0),"object"==typeof n?(o=n,i=r):"string"==typeof n&&(null!=r?o[n]=r:i=n),[t,e,o,i=i||Or.sources.API]}function fi(t,e,n,r){var i,o,s="number"==typeof n?n:0;if(null==t)return null;if(e&&"function"==typeof e.transformPosition){var l=[t.index,t.index+t.length].map((function(t){return e.transformPosition(t,r!==Or.sources.USER)}));i=l[0],o=l[1]}else{var a=[t.index,t.index+t.length].map((function(t){return t<e||t===e&&r===Or.sources.USER?t:s>=0?t+s:Math.max(e,t+s)}));i=a[0],o=a[1]}return new Tr(i,o-i)}oi.DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:ii,theme:"default"},oi.events=Or.events,oi.sources=Or.sources,oi.version="2.0.3",oi.imports={delta:Je,parchment:t,"core/module":Vr,"core/theme":Xr};var di=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e}(We);const pi=di;function vi(t){return t instanceof pr||t instanceof vr}function gi(t){return"function"==typeof t.updateContent}var mi=function(t){function e(e,n,r){var i,o=r.emitter;return(i=t.call(this,e,n)||this).emitter=o,i.batch=!1,i.optimize(),i.enable(),i.domNode.addEventListener("dragstart",(function(t){return i.handleDragStart(t)})),i}s(e,t);var n=e.prototype;return n.batchStart=function(){Array.isArray(this.batch)||(this.batch=[])},n.batchEnd=function(){if(this.batch){var t=this.batch;this.batch=!1,this.update(t)}},n.emitMount=function(t){this.emitter.emit(Or.events.SCROLL_BLOT_MOUNT,t)},n.emitUnmount=function(t){this.emitter.emit(Or.events.SCROLL_BLOT_UNMOUNT,t)},n.emitEmbedUpdate=function(t,e){this.emitter.emit(Or.events.SCROLL_EMBED_UPDATE,t,e)},n.deleteAt=function(e,n){var r=this.line(e),i=r[0],o=r[1],s=this.line(e+n)[0];if(t.prototype.deleteAt.call(this,e,n),null!=s&&i!==s&&o>0){if(i instanceof vr||s instanceof vr)return void this.optimize();var l=s.children.head instanceof lr?null:s.children.head;i.moveChildren(s,l),i.remove()}this.optimize()},n.enable=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t?"true":"false")},n.formatAt=function(e,n,r,i){t.prototype.formatAt.call(this,e,n,r,i),this.optimize()},n.insertAt=function(e,n,r){if(e>=this.length())if(null==r||null==this.scroll.query(n,Ee.BLOCK)){var i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),null==r&&n.endsWith("\n")?i.insertAt(0,n.slice(0,-1),r):i.insertAt(0,n,r)}else{var o=this.scroll.create(n,r);this.appendChild(o)}else t.prototype.insertAt.call(this,e,n,r);this.optimize()},n.insertBefore=function(e,n){if(e.statics.scope===Ee.INLINE_BLOT){var r=this.scroll.create(this.statics.defaultChild.blotName);r.appendChild(e),t.prototype.insertBefore.call(this,r,n)}else t.prototype.insertBefore.call(this,e,n)},n.insertContents=function(t,e){var n=this,r=this.deltaToRenderBlocks(e.concat((new Je).insert("\n"))),i=r.pop();if(null!=i){this.batchStart();var o=r.shift();if(o){var s,l="block"===o.type&&(0===o.delta.length()||!this.descendant(vr,t)[0]&&t<this.length()),a="block"===o.type?o.delta:(new Je).insert(((s={})[o.key]=o.value,s));bi(this,t,a);var c="block"===o.type?1:0,u=t+a.length()+c;l&&this.insertAt(u-1,"\n");var h=mr(this.line(t)[0]),f=Je.AttributeMap.diff(h,o.attributes)||{};Object.keys(f).forEach((function(t){n.formatAt(u-1,1,t,f[t])})),t=u}var d=this.children.find(t),p=d[0],v=d[1];r.length&&(p&&(p=p.split(v),v=0),r.forEach((function(t){if("block"===t.type)bi(n.createBlock(t.attributes,p||void 0),0,t.delta);else{var e=n.create(t.key,t.value);n.insertBefore(e,p||void 0),Object.keys(t.attributes).forEach((function(n){e.format(n,t.attributes[n])}))}}))),"block"===i.type&&i.delta.length()&&bi(this,p?p.offset(p.scroll)+v:this.length(),i.delta),this.batchEnd(),this.optimize()}},n.isEnabled=function(){return"true"===this.domNode.getAttribute("contenteditable")},n.leaf=function(t){var e=this.path(t).pop();if(!e)return[null,-1];var n=e[0],r=e[1];return n instanceof Me?[n,r]:[null,-1]},n.line=function(t){return t===this.length()?this.line(t-1):this.descendant(vi,t)},n.lines=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,n=function(t,e,r){var i=[],o=r;return t.children.forEachAt(e,r,(function(t,e,r){vi(t)?i.push(t):t instanceof We&&(i=i.concat(n(t,e,o))),o-=r})),i};return n(this,t,e)},n.optimize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(t.prototype.optimize.call(this,e,n),e.length>0&&this.emitter.emit(Or.events.SCROLL_OPTIMIZE,e,n))},n.path=function(e){return t.prototype.path.call(this,e).slice(1)},n.remove=function(){},n.update=function(e){var n=this;if(this.batch)Array.isArray(e)&&(this.batch=this.batch.concat(e));else{var r=Or.sources.USER;"string"==typeof e&&(r=e),Array.isArray(e)||(e=this.observer.takeRecords()),(e=e.filter((function(t){var e=t.target,r=n.find(e,!0);return r&&!gi(r)}))).length>0&&this.emitter.emit(Or.events.SCROLL_BEFORE_UPDATE,r,e),t.prototype.update.call(this,e.concat([])),e.length>0&&this.emitter.emit(Or.events.SCROLL_UPDATE,r,e)}},n.updateEmbedAt=function(t,e,n){var r=this.descendant((function(t){return t instanceof vr}),t)[0];r&&r.statics.blotName===e&&gi(r)&&r.updateContent(n)},n.handleDragStart=function(t){t.preventDefault()},n.deltaToRenderBlocks=function(t){var e=this,n=[],r=new Je;return t.forEach((function(t){var i=null==t?void 0:t.insert;if(i)if("string"==typeof i){var o=i.split("\n");o.slice(0,-1).forEach((function(e){var i;r.insert(e,t.attributes),n.push({type:"block",delta:r,attributes:null!=(i=t.attributes)?i:{}}),r=new Je}));var s=o[o.length-1];s&&r.insert(s,t.attributes)}else{var l,a=Object.keys(i)[0];if(!a)return;e.query(a,Ee.INLINE)?r.push(t):(r.length()&&n.push({type:"block",delta:r,attributes:{}}),r=new Je,n.push({type:"blockEmbed",key:a,value:i[a],attributes:null!=(l=t.attributes)?l:{}}))}})),r.length()&&n.push({type:"block",delta:r,attributes:{}}),n},n.createBlock=function(t,e){var n,r=this,i={};Object.entries(t).forEach((function(t){var e=t[0],o=t[1];null!=r.query(e,Ee.BLOCK&Ee.BLOT)?n=e:i[e]=o}));var o=this.create(n||this.statics.defaultChild.blotName,n?t[n]:void 0);this.insertBefore(o,e||void 0);var s=o.length();return Object.entries(i).forEach((function(t){var e=t[0],n=t[1];o.formatAt(0,s,e,n)})),o},e}(Xe);function bi(t,e,n){n.reduce((function(e,n){var r=Je.Op.length(n),i=n.attributes||{};if(null!=n.insert)if("string"==typeof n.insert){var o=n.insert;t.insertAt(e,o);var s=mr(t.descendant(Me,e)[0]);i=Je.AttributeMap.diff(s,i)||{}}else if("object"==typeof n.insert){var l=Object.keys(n.insert)[0];if(null==l)return e;if(t.insertAt(e,l,n.insert[l]),null!=t.scroll.query(l,Ee.INLINE)){var a=mr(t.descendant(Me,e)[0]);i=Je.AttributeMap.diff(a,i)||{}}}return Object.keys(i).forEach((function(n){t.formatAt(e,r,n,i[n])})),e+r}),e)}mi.blotName="scroll",mi.className="ql-editor",mi.tagName="DIV",mi.defaultChild=pr,mi.allowedChildren=[pr,vr,pi];const yi=mi;var Ni={scope:Ee.BLOCK,whitelist:["right","center","justify"]},xi=new Ae("align","align",Ni),wi=new Oe("align","ql-align",Ni),Ei=new Te("align","text-align",Ni),Ai=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.prototype.value=function(e){var n=t.prototype.value.call(this,e);return n.startsWith("rgb(")?"#"+(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map((function(t){return("00"+parseInt(t,10).toString(16)).slice(-2)})).join(""):n},e}(Te),qi=new Oe("color","ql-color",{scope:Ee.INLINE}),ki=new Ai("color","color",{scope:Ee.INLINE}),_i=new Oe("background","ql-bg",{scope:Ee.INLINE}),Li=new Ai("background","background-color",{scope:Ee.INLINE}),Oi=function(t){function e(){return t.apply(this,arguments)||this}s(e,t),e.create=function(e){var n=t.create.call(this,e);return n.setAttribute("spellcheck","false"),n};var n=e.prototype;return n.code=function(t,e){return this.children.map((function(t){return t.length()<=1?"":t.domNode.innerText})).join("\n").slice(t,t+e)},n.html=function(t,e){return"<pre>\n"+hr(this.code(t,e))+"\n</pre>"},e}(pi),Si=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.register=function(){oi.register(Oi)},e}(pr);Si.TAB="  ";var Ti=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e}(dr);Ti.blotName="code",Ti.tagName="CODE",Si.blotName="code-block",Si.className="ql-code-block",Si.tagName="DIV",Oi.blotName="code-block-container",Oi.className="ql-code-block-container",Oi.tagName="DIV",Oi.allowedChildren=[Si],Si.allowedChildren=[cr,lr,yr],Si.requiredContainer=Oi;var ji={scope:Ee.BLOCK,whitelist:["rtl"]},Ci=new Ae("direction","dir",ji),Ri=new Oe("direction","ql-direction",ji),Ii=new Te("direction","direction",ji),Mi={scope:Ee.INLINE,whitelist:["serif","monospace"]},Bi=new Oe("font","ql-font",Mi),Di=new(function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.prototype.value=function(e){return t.prototype.value.call(this,e).replace(/["']/g,"")},e}(Te))("font","font-family",Mi),Ui=new Oe("size","ql-size",{scope:Ee.INLINE,whitelist:["small","large","huge"]}),Pi=new Te("size","font-size",{scope:Ee.INLINE,whitelist:["10px","18px","32px"]}),zi=kr("quill:keyboard"),Fi=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",Hi=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).bindings={},Object.keys(r.options.bindings).forEach((function(t){r.options.bindings[t]&&r.addBinding(r.options.bindings[t])})),r.addBinding({key:"Enter",shiftKey:null},r.handleEnter),r.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(r.addBinding({key:"Backspace"},{collapsed:!0},r.handleBackspace),r.addBinding({key:"Delete"},{collapsed:!0},r.handleDelete)):(r.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},r.handleBackspace),r.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},r.handleDelete)),r.addBinding({key:"Backspace"},{collapsed:!1},r.handleDeleteRange),r.addBinding({key:"Delete"},{collapsed:!1},r.handleDeleteRange),r.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},r.handleBackspace),r.listen(),r}s(e,t),e.match=function(t,e){return!["altKey","ctrlKey","metaKey","shiftKey"].some((function(n){return!!e[n]!==t[n]&&null!==e[n]}))&&(e.key===t.key||e.key===t.which)};var n=e.prototype;return n.addBinding=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function(t){if("string"==typeof t||"number"==typeof t)t={key:t};else{if("object"!=typeof t)return null;t=Hn(t)}return t.shortKey&&(t[Fi]=t.shortKey,delete t.shortKey),t}(t);null!=i?("function"==typeof n&&(n={handler:n}),"function"==typeof r&&(r={handler:r}),(Array.isArray(i.key)?i.key:[i.key]).forEach((function(t){var o=u({},i,{key:t},n,r);e.bindings[o.key]=e.bindings[o.key]||[],e.bindings[o.key].push(o)}))):zi.warn("Attempted to add invalid keyboard binding",i)},n.listen=function(){var t=this;this.quill.root.addEventListener("keydown",(function(n){if(!n.defaultPrevented&&!n.isComposing&&(229!==n.keyCode||"Enter"!==n.key&&"Backspace"!==n.key)){var r=(t.bindings[n.key]||[]).concat(t.bindings[n.which]||[]).filter((function(t){return e.match(n,t)}));if(0!==r.length){var i=oi.find(n.target,!0);if(!i||i.scroll===t.quill.scroll){var o=t.quill.getSelection();if(null!=o&&t.quill.hasFocus()){var s=t.quill.getLine(o.index),l=s[0],a=s[1],c=t.quill.getLeaf(o.index),u=c[0],h=c[1],f=0===o.length?[u,h]:t.quill.getLeaf(o.index+o.length),d=f[0],p=f[1],v=u instanceof Qe?u.value().slice(0,h):"",g=d instanceof Qe?d.value().slice(p):"",m={collapsed:0===o.length,empty:0===o.length&&l.length()<=1,format:t.quill.getFormat(o),line:l,offset:a,prefix:v,suffix:g,event:n};r.some((function(e){if(null!=e.collapsed&&e.collapsed!==m.collapsed)return!1;if(null!=e.empty&&e.empty!==m.empty)return!1;if(null!=e.offset&&e.offset!==m.offset)return!1;if(Array.isArray(e.format)){if(e.format.every((function(t){return null==m.format[t]})))return!1}else if("object"==typeof e.format&&!Object.keys(e.format).every((function(t){return!0===e.format[t]?null!=m.format[t]:!1===e.format[t]?null==m.format[t]:or(e.format[t],m.format[t])})))return!1;return!(null!=e.prefix&&!e.prefix.test(m.prefix)||null!=e.suffix&&!e.suffix.test(m.suffix)||!0===e.handler.call(t,o,m,e))}))&&n.preventDefault()}}}}}))},n.handleBackspace=function(t,e){var n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(!(0===t.index||this.quill.getLength()<=1)){var r={},i=this.quill.getLine(t.index)[0],o=(new Je).retain(t.index-n).delete(n);if(0===e.offset){var s=this.quill.getLine(t.index-1)[0];if(s&&!("block"===s.statics.blotName&&s.length()<=1)){var l=i.formats(),a=this.quill.getFormat(t.index-1,1);if(r=Je.AttributeMap.diff(l,a)||{},Object.keys(r).length>0){var c=(new Je).retain(t.index+i.length()-2).retain(1,r);o=o.compose(c)}}}this.quill.updateContents(o,oi.sources.USER),this.quill.focus()}},n.handleDelete=function(t,e){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-n)){var r={},i=this.quill.getLine(t.index)[0],o=(new Je).retain(t.index).delete(n);if(e.offset>=i.length()-1){var s=this.quill.getLine(t.index+1)[0];if(s){var l=i.formats(),a=this.quill.getFormat(t.index,1);r=Je.AttributeMap.diff(l,a)||{},Object.keys(r).length>0&&(o=o.retain(s.length()-1).retain(1,r))}}this.quill.updateContents(o,oi.sources.USER),this.quill.focus()}},n.handleDeleteRange=function(t){Gi({range:t,quill:this.quill}),this.quill.focus()},n.handleEnter=function(t,e){var n=this,r=Object.keys(e.format).reduce((function(t,r){return n.quill.scroll.query(r,Ee.BLOCK)&&!Array.isArray(e.format[r])&&(t[r]=e.format[r]),t}),{}),i=(new Je).retain(t.index).delete(t.length).insert("\n",r);this.quill.updateContents(i,oi.sources.USER),this.quill.setSelection(t.index+1,oi.sources.SILENT),this.quill.focus()},e}(Vr),Vi={bindings:{bold:Zi("bold"),italic:Zi("italic"),underline:Zi("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler:function(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","+1",oi.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","-1",oi.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",oi.sources.USER):null!=e.format.list&&this.quill.format("list",!1,oi.sources.USER)}},"indent code-block":Ki(!0),"outdent code-block":Ki(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,oi.sources.USER)}},tab:{key:"Tab",handler:function(t,e){if(e.format.table)return!0;this.quill.history.cutoff();var n=(new Je).retain(t.index).delete(t.length).insert("\t");return this.quill.updateContents(n,oi.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,oi.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler:function(){this.quill.format("blockquote",!1,oi.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler:function(t,e){var n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,oi.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler:function(t){var e=this.quill.getLine(t.index),n=e[0],r=e[1],i=u({},n.formats(),{list:"checked"}),o=(new Je).retain(t.index).insert("\n",i).retain(n.length()-r-1).retain(1,{list:"unchecked"});this.quill.updateContents(o,oi.sources.USER),this.quill.setSelection(t.index+1,oi.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var n=this.quill.getLine(t.index),r=n[0],i=n[1],o=(new Je).retain(t.index).insert("\n",e.format).retain(r.length()-i-1).retain(1,{header:null});this.quill.updateContents(o,oi.sources.USER),this.quill.setSelection(t.index+1,oi.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler:function(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler:function(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler:function(t){var e,n,r,i=this.quill.getModule("table");if(i){var o=i.getTable(t),s=o[0],l=(e=o[1],n=o[2],r=o[3],null==e.prev&&null==e.next?null==n.prev&&null==n.next?0===r?-1:1:null==n.prev?-1:1:null==e.prev?-1:null==e.next?1:null);if(null==l)return;var a=s.offset();if(l<0){var c=(new Je).retain(a).insert("\n");this.quill.updateContents(c,oi.sources.USER),this.quill.setSelection(t.index+1,t.length,oi.sources.SILENT)}else if(l>0){a+=s.length();var u=(new Je).retain(a).insert("\n");this.quill.updateContents(u,oi.sources.USER),this.quill.setSelection(a,oi.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler:function(t,e){var n=e.event,r=e.line,i=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(i-1,oi.sources.USER):this.quill.setSelection(i+r.length(),oi.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(t,e){if(null==this.quill.scroll.query("list"))return!0;var n,r=e.prefix.length,i=this.quill.getLine(t.index),o=i[0],s=i[1];if(s>r)return!0;switch(e.prefix.trim()){case"[]":case"[ ]":n="unchecked";break;case"[x]":n="checked";break;case"-":case"*":n="bullet";break;default:n="ordered"}this.quill.insertText(t.index," ",oi.sources.USER),this.quill.history.cutoff();var l=(new Je).retain(t.index-s).delete(r+1).retain(o.length()-2-s).retain(1,{list:n});return this.quill.updateContents(l,oi.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-r,oi.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler:function(t){for(var e=this.quill.getLine(t.index),n=e[0],r=e[1],i=2,o=n;null!=o&&o.length()<=1&&o.formats()["code-block"];)if(o=o.prev,(i-=1)<=0){var s=(new Je).retain(t.index+n.length()-r-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(s,oi.sources.USER),this.quill.setSelection(t.index-1,oi.sources.SILENT),!1}return!0}},"embed left":Wi("ArrowLeft",!1),"embed left shift":Wi("ArrowLeft",!0),"embed right":Wi("ArrowRight",!1),"embed right shift":Wi("ArrowRight",!0),"table down":$i(!1),"table up":$i(!0)}};function Ki(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler:function(e,n){var r=n.event,i=this.quill.scroll.query("code-block").TAB;if(0===e.length&&!r.shiftKey)return this.quill.insertText(e.index,i,oi.sources.USER),void this.quill.setSelection(e.index+i.length,oi.sources.SILENT);var o=0===e.length?this.quill.getLines(e.index,1):this.quill.getLines(e),s=e.index,l=e.length;o.forEach((function(e,n){t?(e.insertAt(0,i),0===n?s+=i.length:l+=i.length):e.domNode.textContent.startsWith(i)&&(e.deleteAt(0,i.length),0===n?s-=i.length:l-=i.length)})),this.quill.update(oi.sources.USER),this.quill.setSelection(s,l,oi.sources.SILENT)}}}function Wi(t,e){var n;return(n={key:t,shiftKey:e,altKey:null})["ArrowLeft"===t?"prefix":"suffix"]=/^$/,n.handler=function(n){var r=n.index;return"ArrowRight"===t&&(r+=n.length+1),!(this.quill.getLeaf(r)[0]instanceof Ze&&("ArrowLeft"===t?e?this.quill.setSelection(n.index-1,n.length+1,oi.sources.USER):this.quill.setSelection(n.index-1,oi.sources.USER):e?this.quill.setSelection(n.index,n.length+1,oi.sources.USER):this.quill.setSelection(n.index+n.length+1,oi.sources.USER),1))},n}function Zi(t){return{key:t[0],shortKey:!0,handler:function(e,n){this.quill.format(t,!n.format[t],oi.sources.USER)}}}function $i(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler:function(e,n){var r=t?"prev":"next",i=n.line,o=i.parent[r];if(null!=o){if("table-row"===o.statics.blotName){for(var s=o.children.head,l=i;null!=l.prev;)l=l.prev,s=s.next;var a=s.offset(this.quill.scroll)+Math.min(n.offset,s.length()-1);this.quill.setSelection(a,0,oi.sources.USER)}}else{var c=i.table()[r];null!=c&&(t?this.quill.setSelection(c.offset(this.quill.scroll)+c.length()-1,0,oi.sources.USER):this.quill.setSelection(c.offset(this.quill.scroll),0,oi.sources.USER))}return!1}}}function Gi(t){var e=t.quill,n=t.range,r=e.getLines(n),i={};if(r.length>1){var o=r[0].formats(),s=r[r.length-1].formats();i=Je.AttributeMap.diff(s,o)||{}}e.deleteText(n,oi.sources.USER),Object.keys(i).length>0&&e.formatLine(n.index,1,i,oi.sources.USER),e.setSelection(n.index,oi.sources.SILENT)}Hi.DEFAULTS=Vi;var Xi=/font-weight:\s*normal/,Yi=["P","OL","UL"],Qi=function(t){return t&&Yi.includes(t.tagName)},Ji=/\bmso-list:[^;]*ignore/i,to=/\bmso-list:[^;]*\bl(\d+)/i,eo=/\bmso-list:[^;]*\blevel(\d+)/i,no=[function(t){"urn:schemas-microsoft-com:office:word"===t.documentElement.getAttribute("xmlns:w")&&function(t){var e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],r=[];e.forEach((function(t){(t.getAttribute("style")||"").match(Ji)?n.push(t):r.push(t)})),n.forEach((function(t){var e;return null==(e=t.parentNode)?void 0:e.removeChild(t)}));for(var i=t.documentElement.innerHTML,o=r.map((function(t){return function(t,e){var n=t.getAttribute("style"),r=null==n?void 0:n.match(to);if(!r)return null;var i=Number(r[1]),o=null==n?void 0:n.match(eo),s=o?Number(o[1]):1,l=new RegExp("@list l"+i+":level"+s+"\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)","i"),a=e.match(l);return{id:i,indent:s,type:a&&"bullet"===a[1]?"bullet":"ordered",element:t}}(t,i)})).filter((function(t){return t})),s=function(){for(var t,e=[],n=o.shift();n;){var r;e.push(n),n=o.length&&(null==(r=o[0])?void 0:r.element)===n.element.nextElementSibling&&o[0].id===n.id?o.shift():null}var i=document.createElement("ul");e.forEach((function(t){var e=document.createElement("li");e.setAttribute("data-list",t.type),t.indent>1&&e.setAttribute("class","ql-indent-"+(t.indent-1)),e.innerHTML=t.element.innerHTML,i.appendChild(e)}));var s=null==(t=e[0])?void 0:t.element,l=(null!=s?s:{}).parentNode;s&&(null==l||l.replaceChild(i,s)),e.slice(1).forEach((function(t){var e=t.element;null==l||l.removeChild(e)}))};o.length;)s()}(t)},function(t){t.querySelector('[id^="docs-internal-guid-"]')&&(function(t){Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter((function(t){var e;return null==(e=t.getAttribute("style"))?void 0:e.match(Xi)})).forEach((function(e){var n,r=t.createDocumentFragment();r.append.apply(r,e.childNodes),null==(n=e.parentNode)||n.replaceChild(r,e)}))}(t),function(t){Array.from(t.querySelectorAll("br")).filter((function(t){return Qi(t.previousElementSibling)&&Qi(t.nextElementSibling)})).forEach((function(t){var e;null==(e=t.parentNode)||e.removeChild(t)}))}(t))}];var ro=kr("quill:clipboard"),io=[[Node.TEXT_NODE,function(t,e,n){var r,i=t.data;if("O:P"===(null==(r=t.parentElement)?void 0:r.tagName))return e.insert(i.trim());if(!fo(t)){if(0===i.trim().length&&i.includes("\n")&&!function(t,e){return t.previousElementSibling&&t.nextElementSibling&&!uo(t.previousElementSibling,e)&&!uo(t.nextElementSibling,e)}(t,n))return e;i=(i=i.replace(/[^\S\u00a0]/g," ")).replace(/ {2,}/g," "),(null==t.previousSibling&&null!=t.parentElement&&uo(t.parentElement,n)||t.previousSibling instanceof Element&&uo(t.previousSibling,n))&&(i=i.replace(/^ /,"")),(null==t.nextSibling&&null!=t.parentElement&&uo(t.parentElement,n)||t.nextSibling instanceof Element&&uo(t.nextSibling,n))&&(i=i.replace(/ $/,"")),i=i.replaceAll("Â "," ")}return e.insert(i)}],[Node.TEXT_NODE,go],["br",function(t,e){return co(e,"\n")||e.insert("\n"),e}],[Node.ELEMENT_NODE,go],[Node.ELEMENT_NODE,function(t,e,n){var r=n.query(t);if(null==r)return e;if(r.prototype instanceof Ze){var i={},o=r.value(t);if(null!=o)return i[r.blotName]=o,(new Je).insert(i,r.formats(t,n))}else if(r.prototype instanceof Ve&&!co(e,"\n")&&e.insert("\n"),"blotName"in r&&"formats"in r&&"function"==typeof r.formats)return ao(e,r.blotName,r.formats(t,n),n);return e}],[Node.ELEMENT_NODE,function(t,e,n){var r=Ae.keys(t),i=Oe.keys(t),o=Te.keys(t),s={};return r.concat(i).concat(o).forEach((function(e){var r=n.query(e,Ee.ATTRIBUTE);null!=r&&(s[r.attrName]=r.value(t),s[r.attrName])||(null==(r=oo[e])||r.attrName!==e&&r.keyName!==e||(s[r.attrName]=r.value(t)||void 0),null==(r=so[e])||r.attrName!==e&&r.keyName!==e||(r=so[e],s[r.attrName]=r.value(t)||void 0))})),Object.entries(s).reduce((function(t,e){return ao(t,e[0],e[1],n)}),e)}],[Node.ELEMENT_NODE,function(t,e,n){var r,i={},o=t.style||{};return"italic"===o.fontStyle&&(i.italic=!0),"underline"===o.textDecoration&&(i.underline=!0),"line-through"===o.textDecoration&&(i.strike=!0),(null!=(r=o.fontWeight)&&r.startsWith("bold")||parseInt(o.fontWeight,10)>=700)&&(i.bold=!0),e=Object.entries(i).reduce((function(t,e){return ao(t,e[0],e[1],n)}),e),parseFloat(o.textIndent||0)>0?(new Je).insert("\t").concat(e):e}],["li",function(t,e,n){var r=n.query(t);if(null==r||"list"!==r.blotName||!co(e,"\n"))return e;for(var i=-1,o=t.parentNode;null!=o;)["OL","UL"].includes(o.tagName)&&(i+=1),o=o.parentNode;return i<=0?e:e.reduce((function(t,e){return e.insert?e.attributes&&"number"==typeof e.attributes.indent?t.push(e):t.insert(e.insert,u({indent:i},e.attributes||{})):t}),new Je)}],["ol, ul",function(t,e,n){var r=t,i="OL"===r.tagName?"ordered":"bullet",o=r.getAttribute("data-checked");return o&&(i="true"===o?"checked":"unchecked"),ao(e,"list",i,n)}],["pre",function(t,e,n){var r=n.query("code-block");return ao(e,"code-block",!r||!("formats"in r)||"function"!=typeof r.formats||r.formats(t,n),n)}],["tr",function(t,e,n){var r,i,o="TABLE"===(null==(r=t.parentElement)?void 0:r.tagName)?t.parentElement:null==(i=t.parentElement)?void 0:i.parentElement;return null!=o?ao(e,"table",Array.from(o.querySelectorAll("tr")).indexOf(t)+1,n):e}],["b",vo("bold")],["i",vo("italic")],["strike",vo("strike")],["style",function(){return new Je}]],oo=[xi,Ci].reduce((function(t,e){return t[e.keyName]=e,t}),{}),so=[Ei,Li,ki,Ii,Di,Pi].reduce((function(t,e){return t[e.keyName]=e,t}),{}),lo=function(t){function e(e,n){var r,i;return(i=t.call(this,e,n)||this).quill.root.addEventListener("copy",(function(t){return i.onCaptureCopy(t,!1)})),i.quill.root.addEventListener("cut",(function(t){return i.onCaptureCopy(t,!0)})),i.quill.root.addEventListener("paste",i.onCapturePaste.bind(i)),i.matchers=[],io.concat(null!=(r=i.options.matchers)?r:[]).forEach((function(t){var e=t[0],n=t[1];i.addMatcher(e,n)})),i}s(e,t);var n=e.prototype;return n.addMatcher=function(t,e){this.matchers.push([t,e])},n.convert=function(t){var e,n=t.html,r=t.text,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i[Si.blotName])return(new Je).insert(r||"",((e={})[Si.blotName]=i[Si.blotName],e));if(!n)return(new Je).insert(r||"",i);var o=this.convertHTML(n);return co(o,"\n")&&(null==o.ops[o.ops.length-1].attributes||i.table)?o.compose((new Je).retain(o.length()-1).delete(1)):o},n.normalizeHTML=function(t){!function(t){t.documentElement&&no.forEach((function(e){e(t)}))}(t)},n.convertHTML=function(t){var e=(new DOMParser).parseFromString(t,"text/html");this.normalizeHTML(e);var n=e.body,r=new WeakMap,i=this.prepareMatching(n,r),o=i[0],s=i[1];return po(this.quill.scroll,n,o,s,r)},n.dangerouslyPasteHTML=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oi.sources.API;if("string"==typeof t){var r=this.convert({html:t,text:""});this.quill.setContents(r,e),this.quill.setSelection(0,oi.sources.SILENT)}else{var i=this.convert({html:e,text:""});this.quill.updateContents((new Je).retain(t).concat(i),n),this.quill.setSelection(t+i.length(),oi.sources.SILENT)}},n.onCaptureCopy=function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.defaultPrevented){t.preventDefault();var i=this.quill.selection.getRange()[0];if(null!=i){var o=this.onCopy(i,r),s=o.html,l=o.text;null==(e=t.clipboardData)||e.setData("text/plain",l),null==(n=t.clipboardData)||n.setData("text/html",s),r&&Gi({range:i,quill:this.quill})}}},n.normalizeURIList=function(t){return t.split(/\r?\n/).filter((function(t){return"#"!==t[0]})).join("\n")},n.onCapturePaste=function(t){var e,n,r;if(!t.defaultPrevented&&this.quill.isEnabled()){t.preventDefault();var i=this.quill.getSelection(!0);if(null!=i){var o=null==(e=t.clipboardData)?void 0:e.getData("text/html"),s=null==(n=t.clipboardData)?void 0:n.getData("text/plain");if(!o&&!s){var l,a=null==(l=t.clipboardData)?void 0:l.getData("text/uri-list");a&&(s=this.normalizeURIList(a))}var c=Array.from((null==(r=t.clipboardData)?void 0:r.files)||[]);if(!o&&c.length>0)this.quill.uploader.upload(i,c);else{if(o&&c.length>0){var u,h=(new DOMParser).parseFromString(o,"text/html");if(1===h.body.childElementCount&&"IMG"===(null==(u=h.body.firstElementChild)?void 0:u.tagName))return void this.quill.uploader.upload(i,c)}this.onPaste(i,{html:o,text:s})}}}},n.onCopy=function(t){var e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}},n.onPaste=function(t,e){var n=e.text,r=e.html,i=this.quill.getFormat(t.index),o=this.convert({text:n,html:r},i);ro.log("onPaste",o,{text:n,html:r});var s=(new Je).retain(t.index).delete(t.length).concat(o);this.quill.updateContents(s,oi.sources.USER),this.quill.setSelection(s.length()-t.length,oi.sources.SILENT),this.quill.scrollSelectionIntoView()},n.prepareMatching=function(t,e){var n=[],r=[];return this.matchers.forEach((function(i){var o=i[0],s=i[1];switch(o){case Node.TEXT_NODE:r.push(s);break;case Node.ELEMENT_NODE:n.push(s);break;default:Array.from(t.querySelectorAll(o)).forEach((function(t){if(e.has(t)){var n=e.get(t);null==n||n.push(s)}else e.set(t,[s])}))}})),[n,r]},e}(Vr);function ao(t,e,n,r){return r.query(e)?t.reduce((function(t,r){var i;if(!r.insert)return t;if(r.attributes&&r.attributes[e])return t.push(r);var o=n?((i={})[e]=n,i):{};return t.insert(r.insert,u({},o,r.attributes))}),new Je):t}function co(t,e){for(var n="",r=t.ops.length-1;r>=0&&n.length<e.length;--r){var i=t.ops[r];if("string"!=typeof i.insert)break;n=i.insert+n}return n.slice(-1*e.length)===e}function uo(t,e){if(!(t instanceof Element))return!1;var n=e.query(t);return!(n&&n.prototype instanceof Ze)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}lo.DEFAULTS={matchers:[]};var ho=new WeakMap;function fo(t){return null!=t&&(ho.has(t)||("PRE"===t.tagName?ho.set(t,!0):ho.set(t,fo(t.parentNode))),ho.get(t))}function po(t,e,n,r,i){return e.nodeType===e.TEXT_NODE?r.reduce((function(n,r){return r(e,n,t)}),new Je):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((function(o,s){var l=po(t,s,n,r,i);return s.nodeType===e.ELEMENT_NODE&&(l=n.reduce((function(e,n){return n(s,e,t)}),l),l=(i.get(s)||[]).reduce((function(e,n){return n(s,e,t)}),l)),o.concat(l)}),new Je):new Je}function vo(t){return function(e,n,r){return ao(n,t,!0,r)}}function go(t,e,n){if(!co(e,"\n")){if(uo(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert("\n");if(e.length()>0&&t.nextSibling)for(var r=t.nextSibling;null!=r;){if(uo(r,n))return e.insert("\n");var i=n.query(r);if(i&&i.prototype instanceof vr)return e.insert("\n");r=r.firstChild}}return e}var mo=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).lastRecorded=0,r.ignoreChange=!1,r.stack={undo:[],redo:[]},r.currentRange=null,r.quill.on(oi.events.EDITOR_CHANGE,(function(t,e,n,i){t===oi.events.SELECTION_CHANGE?e&&i!==oi.sources.SILENT&&(r.currentRange=e):t===oi.events.TEXT_CHANGE&&(r.ignoreChange||(r.options.userOnly&&i!==oi.sources.USER?r.transform(e):r.record(e,n)),r.currentRange=yo(r.currentRange,e))})),r.quill.keyboard.addBinding({key:"z",shortKey:!0},r.undo.bind(r)),r.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},r.redo.bind(r)),/Win/i.test(navigator.platform)&&r.quill.keyboard.addBinding({key:"y",shortKey:!0},r.redo.bind(r)),r.quill.root.addEventListener("beforeinput",(function(t){"historyUndo"===t.inputType?(r.undo(),t.preventDefault()):"historyRedo"===t.inputType&&(r.redo(),t.preventDefault())})),r}s(e,t);var n=e.prototype;return n.change=function(t,e){if(0!==this.stack[t].length){var n=this.stack[t].pop();if(n){var r=this.quill.getContents(),i=n.delta.invert(r);this.stack[e].push({delta:i,range:yo(n.range,i)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,oi.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}}},n.clear=function(){this.stack={undo:[],redo:[]}},n.cutoff=function(){this.lastRecorded=0},n.record=function(t,e){if(0!==t.ops.length){this.stack.redo=[];var n=t.invert(e),r=this.currentRange,i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){var o=this.stack.undo.pop();o&&(n=n.compose(o.delta),r=o.range)}else this.lastRecorded=i;0!==n.length()&&(this.stack.undo.push({delta:n,range:r}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}},n.redo=function(){this.change("redo","undo")},n.transform=function(t){bo(this.stack.undo,t),bo(this.stack.redo,t)},n.undo=function(){this.change("undo","redo")},n.restoreSelection=function(t){if(t.range)this.quill.setSelection(t.range,oi.sources.USER);else{var e=(n=this.quill.scroll,r=t.delta,i=r.reduce((function(t,e){return t+(e.delete||0)}),0),o=r.length()-i,function(t,e){var n=e.ops[e.ops.length-1];return null!=n&&(null!=n.insert?"string"==typeof n.insert&&n.insert.endsWith("\n"):null!=n.attributes&&Object.keys(n.attributes).some((function(e){return null!=t.query(e,Ee.BLOCK)})))}(n,r)&&(o-=1),o);this.quill.setSelection(e,oi.sources.USER)}var n,r,i,o},e}(Vr);function bo(t,e){for(var n=e,r=t.length-1;r>=0;r-=1){var i=t[r];t[r]={delta:n.transform(i.delta,!0),range:i.range&&yo(i.range,n)},n=i.delta.transform(n),0===t[r].delta.length()&&t.splice(r,1)}}function yo(t,e){if(!t)return t;var n=e.transformPosition(t.index);return{index:n,length:e.transformPosition(t.index+t.length)-n}}mo.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};var No=function(t){function e(e,n){var r;return r=t.call(this,e,n)||this,e.root.addEventListener("drop",(function(t){t.preventDefault();var n=null;if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(t.clientX,t.clientY);else if(document.caretPositionFromPoint){var i=document.caretPositionFromPoint(t.clientX,t.clientY);(n=document.createRange()).setStart(i.offsetNode,i.offset),n.setEnd(i.offsetNode,i.offset)}var o=n&&e.selection.normalizeNative(n);if(o){var s,l=e.selection.normalizedToRange(o);null!=(s=t.dataTransfer)&&s.files&&r.upload(l,t.dataTransfer.files)}})),r}return s(e,t),e.prototype.upload=function(t,e){var n=this,r=[];Array.from(e).forEach((function(t){var e;t&&null!=(e=n.options.mimetypes)&&e.includes(t.type)&&r.push(t)})),r.length>0&&this.options.handler.call(this,t,r)},e}(Vr);No.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler:function(t,e){var n=this;if(this.quill.scroll.query("image")){var r=e.map((function(t){return new Promise((function(e){var n=new FileReader;n.onload=function(){e(n.result)},n.readAsDataURL(t)}))}));Promise.all(r).then((function(e){var r=e.reduce((function(t,e){return t.insert({image:e})}),(new Je).retain(t.index).delete(t.length));n.quill.updateContents(r,Or.sources.USER),n.quill.setSelection(t.index+e.length,Or.sources.SILENT)}))}}};const xo=No;var wo=["insertText","insertReplacementText"],Eo=function(t){function e(e,n){var r;return r=t.call(this,e,n)||this,e.root.addEventListener("beforeinput",(function(t){r.handleBeforeInput(t)})),/Android/i.test(navigator.userAgent)||e.on(oi.events.COMPOSITION_BEFORE_START,(function(){r.handleCompositionStart()})),r}s(e,t);var n=e.prototype;return n.deleteRange=function(t){Gi({range:t,quill:this.quill})},n.replaceText=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===t.length)return!1;if(e){var n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents((new Je).retain(t.index).insert(e,n),oi.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,oi.sources.SILENT),!0},n.handleBeforeInput=function(t){if(!this.quill.composition.isComposing&&!t.defaultPrevented&&wo.includes(t.inputType)){var e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(e&&!0!==e.collapsed){var n=function(t){var e;return"string"==typeof t.data?t.data:null!=(e=t.dataTransfer)&&e.types.includes("text/plain")?t.dataTransfer.getData("text/plain"):null}(t);if(null!=n){var r=this.quill.selection.normalizeNative(e),i=r?this.quill.selection.normalizedToRange(r):null;i&&this.replaceText(i,n)&&t.preventDefault()}}}},n.handleCompositionStart=function(){var t=this.quill.getSelection();t&&this.replaceText(t)},e}(Vr);const Ao=Eo;var qo=/Mac/i.test(navigator.platform),ko=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).isListening=!1,r.selectionChangeDeadline=0,r.handleArrowKeys(),r.handleNavigationShortcuts(),r}s(e,t);var n=e.prototype;return n.handleArrowKeys=function(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler:function(t,e){var n=e.line,r=e.event;if(!(n instanceof Pe&&n.uiNode))return!0;var i="rtl"===getComputedStyle(n.domNode).direction;return!!(i&&"ArrowRight"!==r.key||!i&&"ArrowLeft"!==r.key)||(this.quill.setSelection(t.index-1,t.length+(r.shiftKey?1:0),oi.sources.USER),!1)}})},n.handleNavigationShortcuts=function(){var t=this;this.quill.root.addEventListener("keydown",(function(e){!e.defaultPrevented&&function(t){return"ArrowLeft"===t.key||"ArrowRight"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key||"Home"===t.key||!(!qo||"a"!==t.key||!0!==t.ctrlKey)}(e)&&t.ensureListeningToSelectionChange()}))},n.ensureListeningToSelectionChange=function(){var t=this;this.selectionChangeDeadline=Date.now()+100,this.isListening||(this.isListening=!0,document.addEventListener("selectionchange",(function(){t.isListening=!1,Date.now()<=t.selectionChangeDeadline&&t.handleSelectionChange()}),{once:!0}))},n.handleSelectionChange=function(){var t=document.getSelection();if(t){var e=t.getRangeAt(0);if(!0===e.collapsed&&0===e.startOffset){var n=this.quill.scroll.find(e.startContainer);if(n instanceof Pe&&n.uiNode){var r=document.createRange();r.setStartAfter(n.uiNode),r.setEndAfter(n.uiNode),t.removeAllRanges(),t.addRange(r)}}}},e}(Vr);const _o=ko;oi.register({"blots/block":pr,"blots/block/embed":vr,"blots/break":lr,"blots/container":pi,"blots/cursor":yr,"blots/embed":Wr,"blots/inline":dr,"blots/scroll":yi,"blots/text":cr,"modules/clipboard":lo,"modules/history":mo,"modules/keyboard":Hi,"modules/uploader":xo,"modules/input":Ao,"modules/uiNode":_o});const Lo=oi;var Oo=function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var n=e.prototype;return n.add=function(e,n){var r=0;if("+1"===n||"-1"===n){var i=this.value(e)||0;r="+1"===n?i+1:i-1}else"number"==typeof n&&(r=n);return 0===r?(this.remove(e),!0):t.prototype.add.call(this,e,r.toString())},n.canAdd=function(e,n){return t.prototype.canAdd.call(this,e,n)||t.prototype.canAdd.call(this,e,parseInt(n,10))},n.value=function(e){return parseInt(t.prototype.value.call(this,e),10)||void 0},e}(Oe);const So=new Oo("indent","ql-indent",{scope:Ee.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});var To=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e}(pr);To.blotName="blockquote",To.tagName="blockquote";const jo=To;var Co=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.formats=function(t){return this.tagName.indexOf(t.tagName)+1},e}(pr);Co.blotName="header",Co.tagName=["H1","H2","H3","H4","H5","H6"];const Ro=Co;var Io=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e}(pi);Io.blotName="list-container",Io.tagName="OL";var Mo=function(t){function e(e,n){var r;r=t.call(this,e,n)||this;var i=n.ownerDocument.createElement("span"),o=function(t){if(e.isEnabled()){var i=r.statics.formats(n,e);"checked"===i?(r.format("list","unchecked"),t.preventDefault()):"unchecked"===i&&(r.format("list","checked"),t.preventDefault())}};return i.addEventListener("mousedown",o),i.addEventListener("touchstart",o),r.attachUI(i),r}return s(e,t),e.create=function(e){var n=t.create.call(this);return n.setAttribute("data-list",e),n},e.formats=function(t){return t.getAttribute("data-list")||void 0},e.register=function(){oi.register(Io)},e.prototype.format=function(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):t.prototype.format.call(this,e,n)},e}(pr);Mo.blotName="list",Mo.tagName="LI",Io.allowedChildren=[Mo],Mo.requiredContainer=Io;var Bo=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.create=function(){return t.create.call(this)},e.formats=function(){return!0},e.prototype.optimize=function(e){t.prototype.optimize.call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)},e}(dr);Bo.blotName="bold",Bo.tagName=["STRONG","B"];const Do=Bo;var Uo=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e}(Do);Uo.blotName="italic",Uo.tagName=["EM","I"];const Po=Uo;var zo=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.create=function(e){var n=t.create.call(this,e);return n.setAttribute("href",this.sanitize(e)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n},e.formats=function(t){return t.getAttribute("href")},e.sanitize=function(t){return Fo(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL},e.prototype.format=function(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("href",this.constructor.sanitize(n)):t.prototype.format.call(this,e,n)},e}(dr);function Fo(t,e){var n=document.createElement("a");n.href=t;var r=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(r)>-1}zo.blotName="link",zo.tagName="A",zo.SANITIZED_URL="about:blank",zo.PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];var Ho=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.create=function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):t.create.call(this,e)},e.formats=function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0},e}(dr);Ho.blotName="script",Ho.tagName=["SUB","SUP"];const Vo=Ho;var Ko=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e}(Do);Ko.blotName="strike",Ko.tagName=["S","STRIKE"];const Wo=Ko;var Zo=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e}(dr);Zo.blotName="underline",Zo.tagName="U";const $o=Zo;var Go=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.create=function(e){if(null==window.katex)throw new Error("Formula module requires KaTeX.");var n=t.create.call(this,e);return"string"==typeof e&&(window.katex.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n},e.value=function(t){return t.getAttribute("data-value")},e.prototype.html=function(){return"<span>"+this.value().formula+"</span>"},e}(Wr);Go.blotName="formula",Go.className="ql-formula",Go.tagName="SPAN";const Xo=Go;var Yo=["alt","height","width"],Qo=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.create=function(e){var n=t.create.call(this,e);return"string"==typeof e&&n.setAttribute("src",this.sanitize(e)),n},e.formats=function(t){return Yo.reduce((function(e,n){return t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e}),{})},e.match=function(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)},e.sanitize=function(t){return Fo(t,["http","https","data"])?t:"//:0"},e.value=function(t){return t.getAttribute("src")},e.prototype.format=function(e,n){Yo.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):t.prototype.format.call(this,e,n)},e}(Ze);Qo.blotName="image",Qo.tagName="IMG";const Jo=Qo;var ts=["height","width"],es=function(t){function e(){return t.apply(this,arguments)||this}s(e,t),e.create=function(e){var n=t.create.call(this,e);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(e)),n},e.formats=function(t){return ts.reduce((function(e,n){return t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e}),{})},e.sanitize=function(t){return zo.sanitize(t)},e.value=function(t){return t.getAttribute("src")};var n=e.prototype;return n.format=function(e,n){ts.indexOf(e)>-1?n?this.domNode.setAttribute(e,n):this.domNode.removeAttribute(e):t.prototype.format.call(this,e,n)},n.html=function(){var t=this.value().video;return'<a href="'+t+'">'+t+"</a>"},e}(vr);es.blotName="video",es.className="ql-video",es.tagName="IFRAME";const ns=es;var rs=new Oe("code-token","hljs",{scope:Ee.INLINE}),is=function(t){function e(e,n,r){var i;return i=t.call(this,e,n,r)||this,rs.add(i.domNode,r),i}s(e,t),e.formats=function(e,n){for(;null!=e&&e!==n.domNode;){if(e.classList&&e.classList.contains(Si.className))return t.formats.call(this,e,n);e=e.parentNode}};var n=e.prototype;return n.format=function(n,r){n!==e.blotName?t.prototype.format.call(this,n,r):r?rs.add(this.domNode,r):(rs.remove(this.domNode),this.domNode.classList.remove(this.statics.className))},n.optimize=function(){t.prototype.optimize.apply(this,arguments),rs.value(this.domNode)||this.unwrap()},e}(dr);is.blotName="code-token",is.className="ql-token";var os=function(t){function e(){return t.apply(this,arguments)||this}s(e,t),e.create=function(e){var n=t.create.call(this,e);return"string"==typeof e&&n.setAttribute("data-language",e),n},e.formats=function(t){return t.getAttribute("data-language")||"plain"},e.register=function(){};var n=e.prototype;return n.format=function(e,n){e===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):t.prototype.format.call(this,e,n)},n.replaceWith=function(e,n){return this.formatAt(0,this.length(),is.blotName,!1),t.prototype.replaceWith.call(this,e,n)},e}(Si),ss=function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var n=e.prototype;return n.attach=function(){t.prototype.attach.call(this),this.forceNext=!1,this.scroll.emitMount(this)},n.format=function(t,e){t===os.blotName&&(this.forceNext=!0,this.children.forEach((function(n){n.format(t,e)})))},n.formatAt=function(e,n,r,i){r===os.blotName&&(this.forceNext=!0),t.prototype.formatAt.call(this,e,n,r,i)},n.highlight=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=this.children.head){var r=Array.from(this.domNode.childNodes).filter((function(t){return t!==e.uiNode})).map((function(t){return t.textContent})).join("\n")+"\n",i=os.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==r){if(r.trim().length>0||null==this.cachedText){var o=this.children.reduce((function(t,e){return t.concat(gr(e,!1))}),new Je),s=t(r,i);o.diff(s).reduce((function(t,n){var r=n.retain,i=n.attributes;return r?(i&&Object.keys(i).forEach((function(n){[os.blotName,is.blotName].includes(n)&&e.formatAt(t,r,n,i[n])})),t+r):t}),0)}this.cachedText=r,this.forceNext=!1}}},n.html=function(t,e){var n=this.children.find(t)[0];return'<pre data-language="'+(n?os.formats(n.domNode):"plain")+'">\n'+hr(this.code(t,e))+"\n</pre>"},n.optimize=function(e){if(t.prototype.optimize.call(this,e),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){var n=os.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}},e}(Oi);ss.allowedChildren=[os],os.requiredContainer=ss,os.allowedChildren=[is,yr,cr,lr];var ls=function(t){function e(e,n){var r;if(null==(r=t.call(this,e,n)||this).options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");return r.languages=r.options.languages.reduce((function(t,e){return t[e.key]=!0,t}),{}),r.highlightBlot=r.highlightBlot.bind(r),r.initListener(),r.initTimer(),r}s(e,t),e.register=function(){oi.register(is,!0),oi.register(os,!0),oi.register(ss,!0)};var n=e.prototype;return n.initListener=function(){var t=this;this.quill.on(oi.events.SCROLL_BLOT_MOUNT,(function(e){if(e instanceof ss){var n=t.quill.root.ownerDocument.createElement("select");t.options.languages.forEach((function(t){var e=t.key,r=t.label,i=n.ownerDocument.createElement("option");i.textContent=r,i.setAttribute("value",e),n.appendChild(i)})),n.addEventListener("change",(function(){e.format(os.blotName,n.value),t.quill.root.focus(),t.highlight(e,!0)})),null==e.uiNode&&(e.attachUI(n),e.children.head&&(n.value=os.formats(e.children.head.domNode)))}}))},n.initTimer=function(){var t=this,e=null;this.quill.on(oi.events.SCROLL_OPTIMIZE,(function(){e&&clearTimeout(e),e=setTimeout((function(){t.highlight(),e=null}),t.options.interval)}))},n.highlight=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.quill.selection.composing){this.quill.update(oi.sources.USER);var r=this.quill.getSelection();(null==e?this.quill.scroll.descendants(ss):[e]).forEach((function(e){e.highlight(t.highlightBlot,n)})),this.quill.update(oi.sources.SILENT),null!=r&&this.quill.setSelection(r,oi.sources.SILENT)}},n.highlightBlot=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if("plain"===(e=this.languages[e]?e:"plain"))return hr(t).split("\n").reduce((function(t,n,r){var i;return 0!==r&&t.insert("\n",((i={})[Si.blotName]=e,i)),t.insert(n)}),new Je);var n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(Si.className),n.innerHTML=function(t,e,n){if("string"==typeof t.versionString){var r=t.versionString.split(".")[0];if(parseInt(r,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value}(this.options.hljs,e,t),po(this.quill.scroll,n,[function(t,e){var n,r=rs.value(t);return r?e.compose((new Je).retain(e.length(),((n={})[is.blotName]=r,n))):e}],[function(t,n){return t.data.split("\n").reduce((function(t,n,r){var i;return 0!==r&&t.insert("\n",((i={})[Si.blotName]=e,i)),t.insert(n)}),n)}],new WeakMap)},e}(Vr);ls.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};var as=function(t){function e(){return t.apply(this,arguments)||this}s(e,t),e.create=function(e){var n=t.create.call(this);return e?n.setAttribute("data-row",e):n.setAttribute("data-row",fs()),n},e.formats=function(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")};var n=e.prototype;return n.cellOffset=function(){return this.parent?this.parent.children.indexOf(this):-1},n.format=function(n,r){n===e.blotName&&r?this.domNode.setAttribute("data-row",r):t.prototype.format.call(this,n,r)},n.row=function(){return this.parent},n.rowOffset=function(){return this.row()?this.row().rowOffset():-1},n.table=function(){return this.row()&&this.row().table()},e}(pr);as.blotName="table",as.tagName="TD";var cs=function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var n=e.prototype;return n.checkMerge=function(){if(t.prototype.checkMerge.call(this)&&null!=this.next.children.head){var e=this.children.head.formats(),n=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.table===n.table&&e.table===r.table&&e.table===i.table}return!1},n.optimize=function(e){var n=this;t.prototype.optimize.call(this,e),this.children.forEach((function(t){if(null!=t.next){var e=t.formats(),r=t.next.formats();if(e.table!==r.table){var i=n.splitAfter(t);i&&i.optimize(),n.prev&&n.prev.optimize()}}}))},n.rowOffset=function(){return this.parent?this.parent.children.indexOf(this):-1},n.table=function(){return this.parent&&this.parent.parent},e}(pi);cs.blotName="table-row",cs.tagName="TR";var us=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e}(pi);us.blotName="table-body",us.tagName="TBODY";var hs=function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var n=e.prototype;return n.balanceCells=function(){var t=this,e=this.descendants(cs),n=e.reduce((function(t,e){return Math.max(e.children.length,t)}),0);e.forEach((function(e){new Array(n-e.children.length).fill(0).forEach((function(){var n;null!=e.children.head&&(n=as.formats(e.children.head.domNode));var r=t.scroll.create(as.blotName,n);e.appendChild(r),r.optimize()}))}))},n.cells=function(t){return this.rows().map((function(e){return e.children.at(t)}))},n.deleteColumn=function(t){var e=this.descendant(us)[0];null!=e&&null!=e.children.head&&e.children.forEach((function(e){var n=e.children.at(t);null!=n&&n.remove()}))},n.insertColumn=function(t){var e=this,n=this.descendant(us)[0];null!=n&&null!=n.children.head&&n.children.forEach((function(n){var r=n.children.at(t),i=as.formats(n.children.head.domNode),o=e.scroll.create(as.blotName,i);n.insertBefore(o,r)}))},n.insertRow=function(t){var e=this,n=this.descendant(us)[0];if(null!=n&&null!=n.children.head){var r=fs(),i=this.scroll.create(cs.blotName);n.children.head.children.forEach((function(){var t=e.scroll.create(as.blotName,r);i.appendChild(t)}));var o=n.children.at(t);n.insertBefore(i,o)}},n.rows=function(){var t=this.children.head;return null==t?[]:t.children.map((function(t){return t}))},e}(pi);function fs(){return"row-"+Math.random().toString(36).slice(2,6)}hs.blotName="table-container",hs.tagName="TABLE",hs.allowedChildren=[us],us.requiredContainer=hs,us.allowedChildren=[cs],cs.requiredContainer=us,cs.allowedChildren=[as],as.requiredContainer=cs;var ds=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).listenBalanceCells(),e}s(e,t),e.register=function(){oi.register(as),oi.register(cs),oi.register(us),oi.register(hs)};var n=e.prototype;return n.balanceTables=function(){this.quill.scroll.descendants(hs).forEach((function(t){t.balanceCells()}))},n.deleteColumn=function(){var t=this.getTable(),e=t[0],n=t[2];null!=n&&(e.deleteColumn(n.cellOffset()),this.quill.update(oi.sources.USER))},n.deleteRow=function(){var t=this.getTable()[1];null!=t&&(t.remove(),this.quill.update(oi.sources.USER))},n.deleteTable=function(){var t=this.getTable()[0];if(null!=t){var e=t.offset();t.remove(),this.quill.update(oi.sources.USER),this.quill.setSelection(e,oi.sources.SILENT)}},n.getTable=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(null==t)return[null,null,null,-1];var e=this.quill.getLine(t.index),n=e[0],r=e[1];if(null==n||n.statics.blotName!==as.blotName)return[null,null,null,-1];var i=n.parent;return[i.parent.parent,i,n,r]},n.insertColumn=function(t){var e=this.quill.getSelection();if(e){var n=this.getTable(e),r=n[0],i=n[1],o=n[2];if(null!=o){var s=o.cellOffset();r.insertColumn(s+t),this.quill.update(oi.sources.USER);var l=i.rowOffset();0===t&&(l+=1),this.quill.setSelection(e.index+l,e.length,oi.sources.SILENT)}}},n.insertColumnLeft=function(){this.insertColumn(0)},n.insertColumnRight=function(){this.insertColumn(1)},n.insertRow=function(t){var e=this.quill.getSelection();if(e){var n=this.getTable(e),r=n[0],i=n[1];if(null!=n[2]){var o=i.rowOffset();r.insertRow(o+t),this.quill.update(oi.sources.USER),t>0?this.quill.setSelection(e,oi.sources.SILENT):this.quill.setSelection(e.index+i.children.length,e.length,oi.sources.SILENT)}}},n.insertRowAbove=function(){this.insertRow(0)},n.insertRowBelow=function(){this.insertRow(1)},n.insertTable=function(t,e){var n=this.quill.getSelection();if(null!=n){var r=new Array(t).fill(0).reduce((function(t){var n=new Array(e).fill("\n").join("");return t.insert(n,{table:fs()})}),(new Je).retain(n.index));this.quill.updateContents(r,oi.sources.USER),this.quill.setSelection(n.index,oi.sources.SILENT),this.balanceTables()}},n.listenBalanceCells=function(){var t=this;this.quill.on(oi.events.SCROLL_OPTIMIZE,(function(e){e.some((function(e){return!!["TD","TR","TBODY","TABLE"].includes(e.target.tagName)&&(t.quill.once(oi.events.TEXT_CHANGE,(function(e,n,r){r===oi.sources.USER&&t.balanceTables()})),!0)}))}))},e}(Vr);const ps=ds;var vs=kr("quill:toolbar"),gs=function(t){function e(e,n){var r;if(r=t.call(this,e,n)||this,Array.isArray(r.options.container)){var i,o=document.createElement("div");o.setAttribute("role","toolbar"),function(t,e){Array.isArray(e[0])||(e=[e]),e.forEach((function(e){var n=document.createElement("span");n.classList.add("ql-formats"),e.forEach((function(t){if("string"==typeof t)ms(n,t);else{var e=Object.keys(t)[0],r=t[e];Array.isArray(r)?function(t,e,n){var r=document.createElement("select");r.classList.add("ql-"+e),n.forEach((function(t){var e=document.createElement("option");!1!==t?e.setAttribute("value",String(t)):e.setAttribute("selected","selected"),r.appendChild(e)})),t.appendChild(r)}(n,e,r):ms(n,e,r)}})),t.appendChild(n)}))}(o,r.options.container),null==(i=e.container)||null==(i=i.parentNode)||i.insertBefore(o,e.container),r.container=o}else"string"==typeof r.options.container?r.container=document.querySelector(r.options.container):r.container=r.options.container;return r.container instanceof HTMLElement?(r.container.classList.add("ql-toolbar"),r.controls=[],r.handlers={},r.options.handlers&&Object.keys(r.options.handlers).forEach((function(t){var e,n=null==(e=r.options.handlers)?void 0:e[t];n&&r.addHandler(t,n)})),Array.from(r.container.querySelectorAll("button, select")).forEach((function(t){r.attach(t)})),r.quill.on(oi.events.EDITOR_CHANGE,(function(){var t=r.quill.selection.getRange()[0];r.update(t)})),r):(vs.error("Container required for toolbar",r.options),ge(r))}s(e,t);var n=e.prototype;return n.addHandler=function(t,e){this.handlers[t]=e},n.attach=function(t){var e=this,n=Array.from(t.classList).find((function(t){return 0===t.indexOf("ql-")}));if(n)if(n=n.slice(3),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null!=this.handlers[n]||null!=this.quill.scroll.query(n)){var r="SELECT"===t.tagName?"change":"click";t.addEventListener(r,(function(r){var i;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;var o=t.options[t.selectedIndex];i=!o.hasAttribute("selected")&&(o.value||!1)}else i=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),r.preventDefault();e.quill.focus();var s=e.quill.selection.getRange()[0];if(null!=e.handlers[n])e.handlers[n].call(e,i);else if(e.quill.scroll.query(n).prototype instanceof Ze){var l;if(!(i=prompt("Enter "+n)))return;e.quill.updateContents((new Je).retain(s.index).delete(s.length).insert(((l={})[n]=i,l)),oi.sources.USER)}else e.quill.format(n,i,oi.sources.USER);e.update(s)})),this.controls.push([n,t])}else vs.warn("ignoring attaching to nonexistent format",n,t)},n.update=function(t){var e=null==t?{}:this.quill.getFormat(t);this.controls.forEach((function(n){var r=n[0],i=n[1];if("SELECT"===i.tagName){var o=null;if(null==t)o=null;else if(null==e[r])o=i.querySelector("option[selected]");else if(!Array.isArray(e[r])){var s=e[r];"string"==typeof s&&(s=s.replace(/"/g,'\\"')),o=i.querySelector('option[value="'+s+'"]')}null==o?(i.value="",i.selectedIndex=-1):o.selected=!0}else if(null==t)i.classList.remove("ql-active"),i.setAttribute("aria-pressed","false");else if(i.hasAttribute("value")){var l=e[r],a=l===i.getAttribute("value")||null!=l&&l.toString()===i.getAttribute("value")||null==l&&!i.getAttribute("value");i.classList.toggle("ql-active",a),i.setAttribute("aria-pressed",a.toString())}else{var c=null!=e[r];i.classList.toggle("ql-active",c),i.setAttribute("aria-pressed",c.toString())}}))},e}(Vr);function ms(t,e,n){var r=document.createElement("button");r.setAttribute("type","button"),r.classList.add("ql-"+e),r.setAttribute("aria-pressed","false"),null!=n?(r.value=n,r.setAttribute("aria-label",e+": "+n)):r.setAttribute("aria-label",e),t.appendChild(r)}gs.DEFAULTS={},gs.DEFAULTS={container:null,handlers:{clean:function(){var t=this,e=this.quill.getSelection();if(null!=e)if(0===e.length){var n=this.quill.getFormat();Object.keys(n).forEach((function(e){null!=t.quill.scroll.query(e,Ee.INLINE)&&t.quill.format(e,!1,oi.sources.USER)}))}else this.quill.removeFormat(e.index,e.length,oi.sources.USER)},direction:function(t){var e=this.quill.getFormat().align;"rtl"===t&&null==e?this.quill.format("align","right",oi.sources.USER):t||"right"!==e||this.quill.format("align",!1,oi.sources.USER),this.quill.format("direction",t,oi.sources.USER)},indent:function(t){var e=this.quill.getSelection(),n=this.quill.getFormat(e),r=parseInt(n.indent||0,10);if("+1"===t||"-1"===t){var i="+1"===t?1:-1;"rtl"===n.direction&&(i*=-1),this.quill.format("indent",r+i,oi.sources.USER)}},link:function(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,oi.sources.USER)},list:function(t){var e=this.quill.getSelection(),n=this.quill.getFormat(e);"check"===t?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,oi.sources.USER):this.quill.format("list","unchecked",oi.sources.USER):this.quill.format("list",t,oi.sources.USER)}}};var bs='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>';const ys={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:bs,"code-block":bs,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'};var Ns=0;function xs(t,e){t.setAttribute(e,""+!("true"===t.getAttribute(e)))}const ws=function(){function t(t){var e=this;this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){e.togglePicker()})),this.label.addEventListener("keydown",(function(t){switch(t.key){case"Enter":e.togglePicker();break;case"Escape":e.escape(),t.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}var e=t.prototype;return e.togglePicker=function(){this.container.classList.toggle("ql-expanded"),xs(this.label,"aria-expanded"),xs(this.options,"aria-hidden")},e.buildItem=function(t){var e=this,n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");var r=t.getAttribute("value");return r&&n.setAttribute("data-value",r),t.textContent&&n.setAttribute("data-label",t.textContent),n.addEventListener("click",(function(){e.selectItem(n,!0)})),n.addEventListener("keydown",(function(t){switch(t.key){case"Enter":e.selectItem(n,!0),t.preventDefault();break;case"Escape":e.escape(),t.preventDefault()}})),n},e.buildLabel=function(){var t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t},e.buildOptions=function(){var t=this,e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id="ql-picker-options-"+Ns,Ns+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach((function(n){var r=t.buildItem(n);e.appendChild(r),!0===n.selected&&t.selectItem(r)})),this.container.appendChild(e)},e.buildPicker=function(){var t=this;Array.from(this.select.attributes).forEach((function(e){t.container.setAttribute(e.name,e.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()},e.escape=function(){var t=this;this.close(),setTimeout((function(){return t.label.focus()}),1)},e.close=function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")},e.selectItem=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.container.querySelector(".ql-selected");t!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))},e.update=function(){var t;if(this.select.selectedIndex>-1){var e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);var n=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)},t}(),Es=function(t){function e(e,n){var r;return(r=t.call(this,e)||this).label.innerHTML=n,r.container.classList.add("ql-color-picker"),Array.from(r.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach((function(t){t.classList.add("ql-primary")})),r}s(e,t);var n=e.prototype;return n.buildItem=function(e){var n=t.prototype.buildItem.call(this,e);return n.style.backgroundColor=e.getAttribute("value")||"",n},n.selectItem=function(e,n){t.prototype.selectItem.call(this,e,n);var r=this.label.querySelector(".ql-color-label"),i=e&&e.getAttribute("data-value")||"";r&&("line"===r.tagName?r.style.stroke=i:r.style.fill=i)},e}(ws);var As=function(t){function e(e,n){var r;return(r=t.call(this,e)||this).container.classList.add("ql-icon-picker"),Array.from(r.container.querySelectorAll(".ql-picker-item")).forEach((function(t){t.innerHTML=n[t.getAttribute("data-value")||""]})),r.defaultItem=r.container.querySelector(".ql-selected"),r.selectItem(r.defaultItem),r}return s(e,t),e.prototype.selectItem=function(e,n){t.prototype.selectItem.call(this,e,n);var r=e||this.defaultItem;if(null!=r){if(this.label.innerHTML===r.innerHTML)return;this.label.innerHTML=r.innerHTML}},e}(ws);const qs=As;var ks=function(){function t(t,e){var n,r,i=this;this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,n=this.quill.root,"visible"!==(r=getComputedStyle(n,null).overflowY)&&"clip"!==r&&this.quill.root.addEventListener("scroll",(function(){i.root.style.marginTop=-1*i.quill.root.scrollTop+"px"})),this.hide()}var e=t.prototype;return e.hide=function(){this.root.classList.add("ql-hidden")},e.position=function(t){var e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=e+"px",this.root.style.top=n+"px",this.root.classList.remove("ql-flip");var r=this.boundsContainer.getBoundingClientRect(),i=this.root.getBoundingClientRect(),o=0;if(i.right>r.right&&(o=r.right-i.right,this.root.style.left=e+o+"px"),i.left<r.left&&(o=r.left-i.left,this.root.style.left=e+o+"px"),i.bottom>r.bottom){var s=i.bottom-i.top,l=t.bottom-t.top+s;this.root.style.top=n-l+"px",this.root.classList.add("ql-flip")}return o},e.show=function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")},t}();const _s=ks;var Ls=[!1,"center","right","justify"],Os=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Ss=[!1,"serif","monospace"],Ts=["1","2","3",!1],js=["small",!1,"large","huge"],Cs=function(t){function e(e,n){var r;r=t.call(this,e,n)||this;var i=function(t){document.body.contains(e.root)?(null==r.tooltip||r.tooltip.root.contains(t.target)||document.activeElement===r.tooltip.textbox||r.quill.hasFocus()||r.tooltip.hide(),null!=r.pickers&&r.pickers.forEach((function(e){e.container.contains(t.target)||e.close()}))):document.body.removeEventListener("click",i)};return e.emitter.listenDOM("click",document.body,i),r}s(e,t);var n=e.prototype;return n.addModule=function(e){var n=t.prototype.addModule.call(this,e);return"toolbar"===e&&this.extendToolbar(n),n},n.buildButtons=function(t,e){Array.from(t).forEach((function(t){(t.getAttribute("class")||"").split(/\s+/).forEach((function(n){if(n.startsWith("ql-")&&(n=n.slice(3),null!=e[n]))if("direction"===n)t.innerHTML=e[n][""]+e[n].rtl;else if("string"==typeof e[n])t.innerHTML=e[n];else{var r=t.value||"";null!=r&&e[n][r]&&(t.innerHTML=e[n][r])}}))}))},n.buildPickers=function(t,e){var n=this;this.pickers=Array.from(t).map((function(t){if(t.classList.contains("ql-align")&&(null==t.querySelector("option")&&Is(t,Ls),"object"==typeof e.align))return new qs(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){var n=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&Is(t,Os,"background"===n?"#ffffff":"#000000"),new Es(t,e[n])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?Is(t,Ss):t.classList.contains("ql-header")?Is(t,Ts):t.classList.contains("ql-size")&&Is(t,js)),new ws(t)})),this.quill.on(Or.events.EDITOR_CHANGE,(function(){n.pickers.forEach((function(t){t.update()}))}))},e}(Xr);Cs.DEFAULTS=pe({},Xr.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var t=this,e=this.container.querySelector("input.ql-image[type=file]");null==e&&((e=document.createElement("input")).setAttribute("type","file"),e.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),e.classList.add("ql-image"),e.addEventListener("change",(function(){var n=t.quill.getSelection(!0);t.quill.uploader.upload(n,e.files),e.value=""})),this.container.appendChild(e)),e.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Rs=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).textbox=r.root.querySelector('input[type="text"]'),r.listen(),r}s(e,t);var n=e.prototype;return n.listen=function(){var t=this;this.textbox.addEventListener("keydown",(function(e){"Enter"===e.key?(t.save(),e.preventDefault()):"Escape"===e.key&&(t.cancel(),e.preventDefault())}))},n.cancel=function(){this.hide(),this.restoreFocus()},n.edit=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=this.textbox){null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");var n=this.quill.getBounds(this.quill.selection.savedRange);null!=n&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+t)||""),this.root.setAttribute("data-mode",t)}},n.restoreFocus=function(){this.quill.focus({preventScroll:!0})},n.save=function(){var t=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var e=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,Or.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,Or.sources.USER)),this.quill.root.scrollTop=e;break;case"video":t=function(t){var e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?(e[1]||"https")+"://www.youtube.com/embed/"+e[2]+"?showinfo=0":(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(e[1]||"https")+"://player.vimeo.com/video/"+e[2]+"/":t}(t);case"formula":if(!t)break;var n=this.quill.getSelection(!0);if(null!=n){var r=n.index+n.length;this.quill.insertEmbed(r,this.root.getAttribute("data-mode"),t,Or.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(r+1," ",Or.sources.USER),this.quill.setSelection(r+2,Or.sources.USER)}}this.textbox.value="",this.hide()},e}(_s);function Is(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((function(e){var r=document.createElement("option");e===n?r.setAttribute("selected","selected"):r.setAttribute("value",String(e)),t.appendChild(r)}))}var Ms=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],Bs=function(t){function e(e,n){var r;return(r=t.call(this,e,n)||this).quill.on(Or.events.EDITOR_CHANGE,(function(t,e,n,i){if(t===Or.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&i===Or.sources.USER){r.show(),r.root.style.left="0px",r.root.style.width="",r.root.style.width=r.root.offsetWidth+"px";var o=r.quill.getLines(e.index,e.length);if(1===o.length){var s=r.quill.getBounds(e);null!=s&&r.position(s)}else{var l=o[o.length-1],a=r.quill.getIndex(l),c=Math.min(l.length()-1,e.index+e.length-a),u=r.quill.getBounds(new Tr(a,c));null!=u&&r.position(u)}}else document.activeElement!==r.textbox&&r.quill.hasFocus()&&r.hide()})),r}s(e,t);var n=e.prototype;return n.listen=function(){var e=this;t.prototype.listen.call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){e.root.classList.remove("ql-editing")})),this.quill.on(Or.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!e.root.classList.contains("ql-hidden")){var t=e.quill.getSelection();if(null!=t){var n=e.quill.getBounds(t);null!=n&&e.position(n)}}}),1)}))},n.cancel=function(){this.show()},n.position=function(e){var n=t.prototype.position.call(this,e),r=this.root.querySelector(".ql-tooltip-arrow");return r.style.marginLeft="",0!==n&&(r.style.marginLeft=-1*n-r.offsetWidth/2+"px"),n},e}(Rs);Bs.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");var Ds=function(t){function e(e,n){var r;return null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=Ms),(r=t.call(this,e,n)||this).quill.container.classList.add("ql-bubble"),r}return s(e,t),e.prototype.extendToolbar=function(t){this.tooltip=new Bs(this.quill,this.options.bounds),null!=t.container&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),ys),this.buildPickers(t.container.querySelectorAll("select"),ys))},e}(Cs);Ds.DEFAULTS=pe({},Cs.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,oi.sources.USER)}}}}});var Us=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],Ps=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).preview=e.root.querySelector("a.ql-preview"),e}s(e,t);var n=e.prototype;return n.listen=function(){var e=this;t.prototype.listen.call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(t){e.root.classList.contains("ql-editing")?e.save():e.edit("link",e.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(t){if(null!=e.linkRange){var n=e.linkRange;e.restoreFocus(),e.quill.formatText(n,"link",!1,Or.sources.USER),delete e.linkRange}t.preventDefault(),e.hide()})),this.quill.on(Or.events.SELECTION_CHANGE,(function(t,n,r){if(null!=t){if(0===t.length&&r===Or.sources.USER){var i=e.quill.scroll.descendant(zo,t.index),o=i[0],s=i[1];if(null!=o){e.linkRange=new Tr(t.index-s,o.length());var l=zo.formats(o.domNode);e.preview.textContent=l,e.preview.setAttribute("href",l),e.show();var a=e.quill.getBounds(e.linkRange);return void(null!=a&&e.position(a))}}else delete e.linkRange;e.hide()}}))},n.show=function(){t.prototype.show.call(this),this.root.removeAttribute("data-mode")},e}(Rs);Ps.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");var zs=function(t){function e(e,n){var r;return null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=Us),(r=t.call(this,e,n)||this).quill.container.classList.add("ql-snow"),r}return s(e,t),e.prototype.extendToolbar=function(t){null!=t.container&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),ys),this.buildPickers(t.container.querySelectorAll("select"),ys),this.tooltip=new Ps(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(function(e,n){t.handlers.link.call(t,!n.format.link)})))},e}(Cs);zs.DEFAULTS=pe({},Cs.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){if(t){var e=this.quill.getSelection();if(null==e||0===e.length)return;var n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&0!==n.indexOf("mailto:")&&(n="mailto:"+n),this.quill.theme.tooltip.edit("link",n)}else this.quill.format("link",!1,oi.sources.USER)}}}}});const Fs=zs;Lo.register({"attributors/attribute/direction":Ci,"attributors/class/align":wi,"attributors/class/background":_i,"attributors/class/color":qi,"attributors/class/direction":Ri,"attributors/class/font":Bi,"attributors/class/size":Ui,"attributors/style/align":Ei,"attributors/style/background":Li,"attributors/style/color":ki,"attributors/style/direction":Ii,"attributors/style/font":Di,"attributors/style/size":Pi},!0),Lo.register({"formats/align":wi,"formats/direction":Ri,"formats/indent":So,"formats/background":Li,"formats/color":ki,"formats/font":Bi,"formats/size":Ui,"formats/blockquote":jo,"formats/code-block":Si,"formats/header":Ro,"formats/list":Mo,"formats/bold":Do,"formats/code":Ti,"formats/italic":Po,"formats/link":zo,"formats/script":Vo,"formats/strike":Wo,"formats/underline":$o,"formats/formula":Xo,"formats/image":Jo,"formats/video":ns,"modules/syntax":ls,"modules/table":ps,"modules/toolbar":gs,"themes/bubble":Ds,"themes/snow":Fs,"ui/icons":ys,"ui/picker":ws,"ui/icon-picker":qs,"ui/color-picker":Es,"ui/tooltip":_s},!0);const Hs=Lo;var Vs=function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.loading=!1,this.getLastNewsletterDetails(),this.getTotalSubscribers(),this.lastNewsletterdetail=null,this.totalSubscribers=0,this.toolbarOptions=[[{font:[]}],[{header:[1,2,3]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{list:"ordered"},{list:"bullet"},{list:"check"}],["blockquote","code-block"],["link"],[{align:[]}]],console.log(this.lastNewsletterdetail)},n.oncreate=function(e){var n=this;t.prototype.oncreate.call(this,e),this.quill=new Hs("#editor-container",{theme:"snow",modules:{toolbar:this.toolbarOptions}}),this.quill.on("text-change",(function(){n.body=n.quill.getSemanticHTML(),m.redraw()}))},n.content=function(t){var e=this;return m("div",{className:"container"},m("div",{className:"newsletter-stats-container"},m("div",{className:"newsletter-stats-card"},m("h3",null,i().translator.trans("justoverclock-newsletter.admin.totalSubscribers")),m("small",null,i().translator.trans("justoverclock-newsletter.admin.totalSubscribersCount")),m("h2",{className:"stats-number"},this.totalSubscribers),m("p",null,i().translator.trans("justoverclock-newsletter.admin.newsletterCountText"))),m("div",{className:"newsletter-stats-card"},m("h3",null,i().translator.trans("justoverclock-newsletter.admin.lastNewsletterSent")),m("small",null,i().translator.trans("justoverclock-newsletter.admin.lastNewsletterSentDescription")),m("h2",{className:"stats-number"},this.lastNewsletterdetail?this.lastNewsletterdetail.attributes.title:i().translator.trans("justoverclock-newsletter.admin.noNewsletterSent")),this.lastNewsletterdetail?i().translator.trans("justoverclock-newsletter.admin.lastNewsletterSentText")+" "+new Date(this.lastNewsletterdetail.attributes.createdAt).toISOString().slice(0,16):i().translator.trans("justoverclock-newsletter.admin.noNewsletterSent"))),m("div",{className:"Form-group"},m("label",null,i().translator.trans("justoverclock-newsletter.admin.emailTitle")),m("input",{className:"FormControl",type:"text",placeholder:"newsletter title",oninput:function(t){return e.subject=t.target.value}})),m("div",{className:"Form-group"},m("label",null,i().translator.trans("justoverclock-newsletter.admin.textOrHtml")),m("div",{className:"editor-container FormControl",id:"editor-container"})),m("button",{className:"Button Button--primary",onclick:this.sendEmail.bind(this),disabled:!this.subject||!this.body},this.loading?""+i().translator.trans("justoverclock-newsletter.admin.sendingText"):""+i().translator.trans("justoverclock-newsletter.admin.sendEmailButtonText")))},n.getTotalSubscribers=function(){var t=this;i().request({method:"GET",url:i().forum.attribute("apiUrl")+"/newsletter/subscribers"}).then((function(e){t.totalSubscribers=e.data.length,m.redraw()}))},n.getLastNewsletterDetails=function(){var t=this;i().request({method:"GET",url:i().forum.attribute("apiUrl")+"/last-newsletter/get"}).then((function(e){t.lastNewsletterdetail=e.data.length>0?e.data[0]:null,console.log(e.data),m.redraw()}))},n.sendEmail=function(){var t=this;this.loading=!0,this.body=this.quill.getSemanticHTML(),i().request({method:"POST",url:i().forum.attribute("apiUrl")+"/newsletter/sendall",body:{email:this.email,subject:this.subject,body:this.body,html:this.html}}).then((function(){t.loading=!1,i().alerts.show({type:"success"},""+i().translator.trans("justoverclock-newsletter.admin.emailSentSuccessMessage"))})).catch((function(){i().alerts.show({type:"error"},""+i().translator.trans("justoverclock-newsletter.admin.emailSentErrorMessage"))}))},e}(a());i().initializers.add("justoverclock/newsletter",(function(){i().extensionData.for("justoverclock-newsletter").registerPage(Vs)}))})(),module.exports={}})();


flarum.extensions['justoverclock-newsletter']=module.exports;

var module={};

module.exports =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./admin.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./admin.js":
/*!******************!*\
  !*** ./admin.js ***!
  \******************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _src_admin__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./src/admin */ "./src/admin/index.js");
/* empty/unused harmony star reexport */

/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/createClass.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/createClass.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _createClass; });
/* harmony import */ var _toPropertyKey_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./toPropertyKey.js */ "./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js");

function _defineProperties(e, r) {
  for (var t = 0; t < r.length; t++) {
    var o = r[t];
    o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, Object(_toPropertyKey_js__WEBPACK_IMPORTED_MODULE_0__["default"])(o.key), o);
  }
}
function _createClass(e, r, t) {
  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", {
    writable: !1
  }), e;
}


/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/extends.js":
/*!************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/extends.js ***!
  \************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _extends; });
function _extends() {
  return _extends = Object.assign ? Object.assign.bind() : function (n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);
    }
    return n;
  }, _extends.apply(null, arguments);
}


/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _inheritsLoose; });
/* harmony import */ var _setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./setPrototypeOf.js */ "./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js");

function _inheritsLoose(t, o) {
  t.prototype = Object.create(o.prototype), t.prototype.constructor = t, Object(_setPrototypeOf_js__WEBPACK_IMPORTED_MODULE_0__["default"])(t, o);
}


/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js":
/*!*******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js ***!
  \*******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _setPrototypeOf; });
function _setPrototypeOf(t, e) {
  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {
    return t.__proto__ = e, t;
  }, _setPrototypeOf(t, e);
}


/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/toPrimitive.js":
/*!****************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/toPrimitive.js ***!
  \****************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return toPrimitive; });
/* harmony import */ var _typeof_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./typeof.js */ "./node_modules/@babel/runtime/helpers/esm/typeof.js");

function toPrimitive(t, r) {
  if ("object" != Object(_typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(t) || !t) return t;
  var e = t[Symbol.toPrimitive];
  if (void 0 !== e) {
    var i = e.call(t, r || "default");
    if ("object" != Object(_typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(i)) return i;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return ("string" === r ? String : Number)(t);
}


/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js":
/*!******************************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/toPropertyKey.js ***!
  \******************************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return toPropertyKey; });
/* harmony import */ var _typeof_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./typeof.js */ "./node_modules/@babel/runtime/helpers/esm/typeof.js");
/* harmony import */ var _toPrimitive_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./toPrimitive.js */ "./node_modules/@babel/runtime/helpers/esm/toPrimitive.js");


function toPropertyKey(t) {
  var i = Object(_toPrimitive_js__WEBPACK_IMPORTED_MODULE_1__["default"])(t, "string");
  return "symbol" == Object(_typeof_js__WEBPACK_IMPORTED_MODULE_0__["default"])(i) ? i : i + "";
}


/***/ }),

/***/ "./node_modules/@babel/runtime/helpers/esm/typeof.js":
/*!***********************************************************!*\
  !*** ./node_modules/@babel/runtime/helpers/esm/typeof.js ***!
  \***********************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return _typeof; });
function _typeof(o) {
  "@babel/helpers - typeof";

  return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {
    return typeof o;
  } : function (o) {
    return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;
  }, _typeof(o);
}


/***/ }),

/***/ "./node_modules/@kurkle/color/dist/color.esm.js":
/*!******************************************************!*\
  !*** ./node_modules/@kurkle/color/dist/color.esm.js ***!
  \******************************************************/
/*! exports provided: Color, b2n, b2p, default, hexParse, hexString, hsl2rgb, hslString, hsv2rgb, hueParse, hwb2rgb, lim, n2b, n2p, nameParse, p2b, rgb2hsl, rgbParse, rgbString, rotate, round */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Color", function() { return Color; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b2n", function() { return b2n; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b2p", function() { return b2p; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return index_esm; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hexParse", function() { return hexParse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hexString", function() { return _hexString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hsl2rgb", function() { return hsl2rgb; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hslString", function() { return _hslString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hsv2rgb", function() { return hsv2rgb; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hueParse", function() { return hueParse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "hwb2rgb", function() { return hwb2rgb; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "lim", function() { return lim; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n2b", function() { return n2b; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n2p", function() { return n2p; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "nameParse", function() { return nameParse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "p2b", function() { return p2b; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rgb2hsl", function() { return rgb2hsl; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rgbParse", function() { return rgbParse; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rgbString", function() { return _rgbString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "rotate", function() { return _rotate; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "round", function() { return round; });
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");

/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */
function round(v) {
  return v + 0.5 | 0;
}
var lim = function lim(v, l, h) {
  return Math.max(Math.min(v, h), l);
};
function p2b(v) {
  return lim(round(v * 2.55), 0, 255);
}
function b2p(v) {
  return lim(round(v / 2.55), 0, 100);
}
function n2b(v) {
  return lim(round(v * 255), 0, 255);
}
function b2n(v) {
  return lim(round(v / 2.55) / 100, 0, 1);
}
function n2p(v) {
  return lim(round(v * 100), 0, 100);
}
var map$1 = {
  0: 0,
  1: 1,
  2: 2,
  3: 3,
  4: 4,
  5: 5,
  6: 6,
  7: 7,
  8: 8,
  9: 9,
  A: 10,
  B: 11,
  C: 12,
  D: 13,
  E: 14,
  F: 15,
  a: 10,
  b: 11,
  c: 12,
  d: 13,
  e: 14,
  f: 15
};
var hex = [].concat('0123456789ABCDEF');
var h1 = function h1(b) {
  return hex[b & 0xF];
};
var h2 = function h2(b) {
  return hex[(b & 0xF0) >> 4] + hex[b & 0xF];
};
var eq = function eq(b) {
  return (b & 0xF0) >> 4 === (b & 0xF);
};
var isShort = function isShort(v) {
  return eq(v.r) && eq(v.g) && eq(v.b) && eq(v.a);
};
function hexParse(str) {
  var len = str.length;
  var ret;
  if (str[0] === '#') {
    if (len === 4 || len === 5) {
      ret = {
        r: 255 & map$1[str[1]] * 17,
        g: 255 & map$1[str[2]] * 17,
        b: 255 & map$1[str[3]] * 17,
        a: len === 5 ? map$1[str[4]] * 17 : 255
      };
    } else if (len === 7 || len === 9) {
      ret = {
        r: map$1[str[1]] << 4 | map$1[str[2]],
        g: map$1[str[3]] << 4 | map$1[str[4]],
        b: map$1[str[5]] << 4 | map$1[str[6]],
        a: len === 9 ? map$1[str[7]] << 4 | map$1[str[8]] : 255
      };
    }
  }
  return ret;
}
var alpha = function alpha(a, f) {
  return a < 255 ? f(a) : '';
};
function _hexString(v) {
  var f = isShort(v) ? h1 : h2;
  return v ? '#' + f(v.r) + f(v.g) + f(v.b) + alpha(v.a, f) : undefined;
}
var HUE_RE = /^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;
function hsl2rgbn(h, s, l) {
  var a = s * Math.min(l, 1 - l);
  var f = function f(n, k) {
    if (k === void 0) {
      k = (n + h / 30) % 12;
    }
    return l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
  };
  return [f(0), f(8), f(4)];
}
function hsv2rgbn(h, s, v) {
  var f = function f(n, k) {
    if (k === void 0) {
      k = (n + h / 60) % 6;
    }
    return v - v * s * Math.max(Math.min(k, 4 - k, 1), 0);
  };
  return [f(5), f(3), f(1)];
}
function hwb2rgbn(h, w, b) {
  var rgb = hsl2rgbn(h, 1, 0.5);
  var i;
  if (w + b > 1) {
    i = 1 / (w + b);
    w *= i;
    b *= i;
  }
  for (i = 0; i < 3; i++) {
    rgb[i] *= 1 - w - b;
    rgb[i] += w;
  }
  return rgb;
}
function hueValue(r, g, b, d, max) {
  if (r === max) {
    return (g - b) / d + (g < b ? 6 : 0);
  }
  if (g === max) {
    return (b - r) / d + 2;
  }
  return (r - g) / d + 4;
}
function rgb2hsl(v) {
  var range = 255;
  var r = v.r / range;
  var g = v.g / range;
  var b = v.b / range;
  var max = Math.max(r, g, b);
  var min = Math.min(r, g, b);
  var l = (max + min) / 2;
  var h, s, d;
  if (max !== min) {
    d = max - min;
    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
    h = hueValue(r, g, b, d, max);
    h = h * 60 + 0.5;
  }
  return [h | 0, s || 0, l];
}
function calln(f, a, b, c) {
  return (Array.isArray(a) ? f(a[0], a[1], a[2]) : f(a, b, c)).map(n2b);
}
function hsl2rgb(h, s, l) {
  return calln(hsl2rgbn, h, s, l);
}
function hwb2rgb(h, w, b) {
  return calln(hwb2rgbn, h, w, b);
}
function hsv2rgb(h, s, v) {
  return calln(hsv2rgbn, h, s, v);
}
function hue(h) {
  return (h % 360 + 360) % 360;
}
function hueParse(str) {
  var m = HUE_RE.exec(str);
  var a = 255;
  var v;
  if (!m) {
    return;
  }
  if (m[5] !== v) {
    a = m[6] ? p2b(+m[5]) : n2b(+m[5]);
  }
  var h = hue(+m[2]);
  var p1 = +m[3] / 100;
  var p2 = +m[4] / 100;
  if (m[1] === 'hwb') {
    v = hwb2rgb(h, p1, p2);
  } else if (m[1] === 'hsv') {
    v = hsv2rgb(h, p1, p2);
  } else {
    v = hsl2rgb(h, p1, p2);
  }
  return {
    r: v[0],
    g: v[1],
    b: v[2],
    a: a
  };
}
function _rotate(v, deg) {
  var h = rgb2hsl(v);
  h[0] = hue(h[0] + deg);
  h = hsl2rgb(h);
  v.r = h[0];
  v.g = h[1];
  v.b = h[2];
}
function _hslString(v) {
  if (!v) {
    return;
  }
  var a = rgb2hsl(v);
  var h = a[0];
  var s = n2p(a[1]);
  var l = n2p(a[2]);
  return v.a < 255 ? "hsla(" + h + ", " + s + "%, " + l + "%, " + b2n(v.a) + ")" : "hsl(" + h + ", " + s + "%, " + l + "%)";
}
var map = {
  x: 'dark',
  Z: 'light',
  Y: 're',
  X: 'blu',
  W: 'gr',
  V: 'medium',
  U: 'slate',
  A: 'ee',
  T: 'ol',
  S: 'or',
  B: 'ra',
  C: 'lateg',
  D: 'ights',
  R: 'in',
  Q: 'turquois',
  E: 'hi',
  P: 'ro',
  O: 'al',
  N: 'le',
  M: 'de',
  L: 'yello',
  F: 'en',
  K: 'ch',
  G: 'arks',
  H: 'ea',
  I: 'ightg',
  J: 'wh'
};
var names$1 = {
  OiceXe: 'f0f8ff',
  antiquewEte: 'faebd7',
  aqua: 'ffff',
  aquamarRe: '7fffd4',
  azuY: 'f0ffff',
  beige: 'f5f5dc',
  bisque: 'ffe4c4',
  black: '0',
  blanKedOmond: 'ffebcd',
  Xe: 'ff',
  XeviTet: '8a2be2',
  bPwn: 'a52a2a',
  burlywood: 'deb887',
  caMtXe: '5f9ea0',
  KartYuse: '7fff00',
  KocTate: 'd2691e',
  cSO: 'ff7f50',
  cSnflowerXe: '6495ed',
  cSnsilk: 'fff8dc',
  crimson: 'dc143c',
  cyan: 'ffff',
  xXe: '8b',
  xcyan: '8b8b',
  xgTMnPd: 'b8860b',
  xWay: 'a9a9a9',
  xgYF: '6400',
  xgYy: 'a9a9a9',
  xkhaki: 'bdb76b',
  xmagFta: '8b008b',
  xTivegYF: '556b2f',
  xSange: 'ff8c00',
  xScEd: '9932cc',
  xYd: '8b0000',
  xsOmon: 'e9967a',
  xsHgYF: '8fbc8f',
  xUXe: '483d8b',
  xUWay: '2f4f4f',
  xUgYy: '2f4f4f',
  xQe: 'ced1',
  xviTet: '9400d3',
  dAppRk: 'ff1493',
  dApskyXe: 'bfff',
  dimWay: '696969',
  dimgYy: '696969',
  dodgerXe: '1e90ff',
  fiYbrick: 'b22222',
  flSOwEte: 'fffaf0',
  foYstWAn: '228b22',
  fuKsia: 'ff00ff',
  gaRsbSo: 'dcdcdc',
  ghostwEte: 'f8f8ff',
  gTd: 'ffd700',
  gTMnPd: 'daa520',
  Way: '808080',
  gYF: '8000',
  gYFLw: 'adff2f',
  gYy: '808080',
  honeyMw: 'f0fff0',
  hotpRk: 'ff69b4',
  RdianYd: 'cd5c5c',
  Rdigo: '4b0082',
  ivSy: 'fffff0',
  khaki: 'f0e68c',
  lavFMr: 'e6e6fa',
  lavFMrXsh: 'fff0f5',
  lawngYF: '7cfc00',
  NmoncEffon: 'fffacd',
  ZXe: 'add8e6',
  ZcSO: 'f08080',
  Zcyan: 'e0ffff',
  ZgTMnPdLw: 'fafad2',
  ZWay: 'd3d3d3',
  ZgYF: '90ee90',
  ZgYy: 'd3d3d3',
  ZpRk: 'ffb6c1',
  ZsOmon: 'ffa07a',
  ZsHgYF: '20b2aa',
  ZskyXe: '87cefa',
  ZUWay: '778899',
  ZUgYy: '778899',
  ZstAlXe: 'b0c4de',
  ZLw: 'ffffe0',
  lime: 'ff00',
  limegYF: '32cd32',
  lRF: 'faf0e6',
  magFta: 'ff00ff',
  maPon: '800000',
  VaquamarRe: '66cdaa',
  VXe: 'cd',
  VScEd: 'ba55d3',
  VpurpN: '9370db',
  VsHgYF: '3cb371',
  VUXe: '7b68ee',
  VsprRggYF: 'fa9a',
  VQe: '48d1cc',
  VviTetYd: 'c71585',
  midnightXe: '191970',
  mRtcYam: 'f5fffa',
  mistyPse: 'ffe4e1',
  moccasR: 'ffe4b5',
  navajowEte: 'ffdead',
  navy: '80',
  Tdlace: 'fdf5e6',
  Tive: '808000',
  TivedBb: '6b8e23',
  Sange: 'ffa500',
  SangeYd: 'ff4500',
  ScEd: 'da70d6',
  pOegTMnPd: 'eee8aa',
  pOegYF: '98fb98',
  pOeQe: 'afeeee',
  pOeviTetYd: 'db7093',
  papayawEp: 'ffefd5',
  pHKpuff: 'ffdab9',
  peru: 'cd853f',
  pRk: 'ffc0cb',
  plum: 'dda0dd',
  powMrXe: 'b0e0e6',
  purpN: '800080',
  YbeccapurpN: '663399',
  Yd: 'ff0000',
  Psybrown: 'bc8f8f',
  PyOXe: '4169e1',
  saddNbPwn: '8b4513',
  sOmon: 'fa8072',
  sandybPwn: 'f4a460',
  sHgYF: '2e8b57',
  sHshell: 'fff5ee',
  siFna: 'a0522d',
  silver: 'c0c0c0',
  skyXe: '87ceeb',
  UXe: '6a5acd',
  UWay: '708090',
  UgYy: '708090',
  snow: 'fffafa',
  sprRggYF: 'ff7f',
  stAlXe: '4682b4',
  tan: 'd2b48c',
  teO: '8080',
  tEstN: 'd8bfd8',
  tomato: 'ff6347',
  Qe: '40e0d0',
  viTet: 'ee82ee',
  JHt: 'f5deb3',
  wEte: 'ffffff',
  wEtesmoke: 'f5f5f5',
  Lw: 'ffff00',
  LwgYF: '9acd32'
};
function unpack() {
  var unpacked = {};
  var keys = Object.keys(names$1);
  var tkeys = Object.keys(map);
  var i, j, k, ok, nk;
  for (i = 0; i < keys.length; i++) {
    ok = nk = keys[i];
    for (j = 0; j < tkeys.length; j++) {
      k = tkeys[j];
      nk = nk.replace(k, map[k]);
    }
    k = parseInt(names$1[ok], 16);
    unpacked[nk] = [k >> 16 & 0xFF, k >> 8 & 0xFF, k & 0xFF];
  }
  return unpacked;
}
var names;
function nameParse(str) {
  if (!names) {
    names = unpack();
    names.transparent = [0, 0, 0, 0];
  }
  var a = names[str.toLowerCase()];
  return a && {
    r: a[0],
    g: a[1],
    b: a[2],
    a: a.length === 4 ? a[3] : 255
  };
}
var RGB_RE = /^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;
function rgbParse(str) {
  var m = RGB_RE.exec(str);
  var a = 255;
  var r, g, b;
  if (!m) {
    return;
  }
  if (m[7] !== r) {
    var v = +m[7];
    a = m[8] ? p2b(v) : lim(v * 255, 0, 255);
  }
  r = +m[1];
  g = +m[3];
  b = +m[5];
  r = 255 & (m[2] ? p2b(r) : lim(r, 0, 255));
  g = 255 & (m[4] ? p2b(g) : lim(g, 0, 255));
  b = 255 & (m[6] ? p2b(b) : lim(b, 0, 255));
  return {
    r: r,
    g: g,
    b: b,
    a: a
  };
}
function _rgbString(v) {
  return v && (v.a < 255 ? "rgba(" + v.r + ", " + v.g + ", " + v.b + ", " + b2n(v.a) + ")" : "rgb(" + v.r + ", " + v.g + ", " + v.b + ")");
}
var to = function to(v) {
  return v <= 0.0031308 ? v * 12.92 : Math.pow(v, 1.0 / 2.4) * 1.055 - 0.055;
};
var from = function from(v) {
  return v <= 0.04045 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
};
function _interpolate(rgb1, rgb2, t) {
  var r = from(b2n(rgb1.r));
  var g = from(b2n(rgb1.g));
  var b = from(b2n(rgb1.b));
  return {
    r: n2b(to(r + t * (from(b2n(rgb2.r)) - r))),
    g: n2b(to(g + t * (from(b2n(rgb2.g)) - g))),
    b: n2b(to(b + t * (from(b2n(rgb2.b)) - b))),
    a: rgb1.a + t * (rgb2.a - rgb1.a)
  };
}
function modHSL(v, i, ratio) {
  if (v) {
    var tmp = rgb2hsl(v);
    tmp[i] = Math.max(0, Math.min(tmp[i] + tmp[i] * ratio, i === 0 ? 360 : 1));
    tmp = hsl2rgb(tmp);
    v.r = tmp[0];
    v.g = tmp[1];
    v.b = tmp[2];
  }
}
function clone(v, proto) {
  return v ? Object.assign(proto || {}, v) : v;
}
function fromObject(input) {
  var v = {
    r: 0,
    g: 0,
    b: 0,
    a: 255
  };
  if (Array.isArray(input)) {
    if (input.length >= 3) {
      v = {
        r: input[0],
        g: input[1],
        b: input[2],
        a: 255
      };
      if (input.length > 3) {
        v.a = n2b(input[3]);
      }
    }
  } else {
    v = clone(input, {
      r: 0,
      g: 0,
      b: 0,
      a: 1
    });
    v.a = n2b(v.a);
  }
  return v;
}
function functionParse(str) {
  if (str.charAt(0) === 'r') {
    return rgbParse(str);
  }
  return hueParse(str);
}
var Color = /*#__PURE__*/function () {
  function Color(input) {
    if (input instanceof Color) {
      return input;
    }
    var type = typeof input;
    var v;
    if (type === 'object') {
      v = fromObject(input);
    } else if (type === 'string') {
      v = hexParse(input) || nameParse(input) || functionParse(input);
    }
    this._rgb = v;
    this._valid = !!v;
  }
  var _proto = Color.prototype;
  _proto.rgbString = function rgbString() {
    return this._valid ? _rgbString(this._rgb) : undefined;
  };
  _proto.hexString = function hexString() {
    return this._valid ? _hexString(this._rgb) : undefined;
  };
  _proto.hslString = function hslString() {
    return this._valid ? _hslString(this._rgb) : undefined;
  };
  _proto.mix = function mix(color, weight) {
    if (color) {
      var c1 = this.rgb;
      var c2 = color.rgb;
      var w2;
      var p = weight === w2 ? 0.5 : weight;
      var w = 2 * p - 1;
      var a = c1.a - c2.a;
      var w1 = ((w * a === -1 ? w : (w + a) / (1 + w * a)) + 1) / 2.0;
      w2 = 1 - w1;
      c1.r = 0xFF & w1 * c1.r + w2 * c2.r + 0.5;
      c1.g = 0xFF & w1 * c1.g + w2 * c2.g + 0.5;
      c1.b = 0xFF & w1 * c1.b + w2 * c2.b + 0.5;
      c1.a = p * c1.a + (1 - p) * c2.a;
      this.rgb = c1;
    }
    return this;
  };
  _proto.interpolate = function interpolate(color, t) {
    if (color) {
      this._rgb = _interpolate(this._rgb, color._rgb, t);
    }
    return this;
  };
  _proto.clone = function clone() {
    return new Color(this.rgb);
  };
  _proto.alpha = function alpha(a) {
    this._rgb.a = n2b(a);
    return this;
  };
  _proto.clearer = function clearer(ratio) {
    var rgb = this._rgb;
    rgb.a *= 1 - ratio;
    return this;
  };
  _proto.greyscale = function greyscale() {
    var rgb = this._rgb;
    var val = round(rgb.r * 0.3 + rgb.g * 0.59 + rgb.b * 0.11);
    rgb.r = rgb.g = rgb.b = val;
    return this;
  };
  _proto.opaquer = function opaquer(ratio) {
    var rgb = this._rgb;
    rgb.a *= 1 + ratio;
    return this;
  };
  _proto.negate = function negate() {
    var v = this._rgb;
    v.r = 255 - v.r;
    v.g = 255 - v.g;
    v.b = 255 - v.b;
    return this;
  };
  _proto.lighten = function lighten(ratio) {
    modHSL(this._rgb, 2, ratio);
    return this;
  };
  _proto.darken = function darken(ratio) {
    modHSL(this._rgb, 2, -ratio);
    return this;
  };
  _proto.saturate = function saturate(ratio) {
    modHSL(this._rgb, 1, ratio);
    return this;
  };
  _proto.desaturate = function desaturate(ratio) {
    modHSL(this._rgb, 1, -ratio);
    return this;
  };
  _proto.rotate = function rotate(deg) {
    _rotate(this._rgb, deg);
    return this;
  };
  return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_0__["default"])(Color, [{
    key: "valid",
    get: function get() {
      return this._valid;
    }
  }, {
    key: "rgb",
    get: function get() {
      var v = clone(this._rgb);
      if (v) {
        v.a = b2n(v.a);
      }
      return v;
    },
    set: function set(obj) {
      this._rgb = fromObject(obj);
    }
  }]);
}();
function index_esm(input) {
  return new Color(input);
}


/***/ }),

/***/ "./node_modules/chart.js/auto/auto.js":
/*!********************************************!*\
  !*** ./node_modules/chart.js/auto/auto.js ***!
  \********************************************/
/*! exports provided: Animation, Animations, ArcElement, BarController, BarElement, BasePlatform, BasicPlatform, BubbleController, CategoryScale, Chart, Colors, DatasetController, Decimation, DomPlatform, DoughnutController, Element, Filler, Interaction, Legend, LineController, LineElement, LinearScale, LogarithmicScale, PieController, PointElement, PolarAreaController, RadarController, RadialLinearScale, Scale, ScatterController, SubTitle, Ticks, TimeScale, TimeSeriesScale, Title, Tooltip, _adapters, _detectPlatform, animator, controllers, defaults, elements, layouts, plugins, registerables, registry, scales, default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../dist/chart.js */ "./node_modules/chart.js/dist/chart.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Animation", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Animation"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Animations", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Animations"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ArcElement", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["ArcElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BarController", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["BarController"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BarElement", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["BarElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BasePlatform", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["BasePlatform"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BasicPlatform", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["BasicPlatform"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "BubbleController", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["BubbleController"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "CategoryScale", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["CategoryScale"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Chart", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Colors", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Colors"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DatasetController", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["DatasetController"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Decimation", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Decimation"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DomPlatform", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["DomPlatform"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "DoughnutController", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["DoughnutController"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Element", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Element"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Filler", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Filler"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Interaction", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Interaction"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Legend", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Legend"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LineController", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["LineController"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LineElement", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["LineElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LinearScale", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["LinearScale"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "LogarithmicScale", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["LogarithmicScale"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PieController", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["PieController"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PointElement", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["PointElement"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "PolarAreaController", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["PolarAreaController"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RadarController", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["RadarController"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "RadialLinearScale", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["RadialLinearScale"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Scale", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Scale"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "ScatterController", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["ScatterController"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "SubTitle", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["SubTitle"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Ticks", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Ticks"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TimeScale", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["TimeScale"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "TimeSeriesScale", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["TimeSeriesScale"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Title", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Title"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Tooltip", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Tooltip"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "_adapters", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["_adapters"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "_detectPlatform", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["_detectPlatform"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "animator", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["animator"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "controllers", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["controllers"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "defaults", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["defaults"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "elements", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["elements"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "layouts", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["layouts"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "plugins", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["plugins"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "registerables", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["registerables"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "registry", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["registry"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "scales", function() { return _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["scales"]; });


_dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"].register.apply(_dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"], _dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["registerables"]);

/* harmony default export */ __webpack_exports__["default"] = (_dist_chart_js__WEBPACK_IMPORTED_MODULE_0__["Chart"]);

/***/ }),

/***/ "./node_modules/chart.js/dist/chart.js":
/*!*********************************************!*\
  !*** ./node_modules/chart.js/dist/chart.js ***!
  \*********************************************/
/*! exports provided: Animation, Animations, ArcElement, BarController, BarElement, BasePlatform, BasicPlatform, BubbleController, CategoryScale, Chart, Colors, DatasetController, Decimation, DomPlatform, DoughnutController, Element, Filler, Interaction, Legend, LineController, LineElement, LinearScale, LogarithmicScale, PieController, PointElement, PolarAreaController, RadarController, RadialLinearScale, Scale, ScatterController, SubTitle, Ticks, TimeScale, TimeSeriesScale, Title, Tooltip, _adapters, _detectPlatform, animator, controllers, defaults, elements, layouts, plugins, registerables, registry, scales */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Animation", function() { return Animation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Animations", function() { return Animations; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ArcElement", function() { return ArcElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BarController", function() { return BarController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BarElement", function() { return BarElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BasePlatform", function() { return BasePlatform; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BasicPlatform", function() { return BasicPlatform; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "BubbleController", function() { return BubbleController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "CategoryScale", function() { return CategoryScale; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Chart", function() { return Chart; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Colors", function() { return plugin_colors; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DatasetController", function() { return DatasetController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Decimation", function() { return plugin_decimation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DomPlatform", function() { return DomPlatform; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "DoughnutController", function() { return DoughnutController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Element", function() { return Element; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Filler", function() { return index; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Interaction", function() { return Interaction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Legend", function() { return plugin_legend; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LineController", function() { return LineController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LineElement", function() { return LineElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LinearScale", function() { return LinearScale; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "LogarithmicScale", function() { return LogarithmicScale; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PieController", function() { return PieController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PointElement", function() { return PointElement; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "PolarAreaController", function() { return PolarAreaController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RadarController", function() { return RadarController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "RadialLinearScale", function() { return RadialLinearScale; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Scale", function() { return Scale; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ScatterController", function() { return ScatterController; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "SubTitle", function() { return plugin_subtitle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimeScale", function() { return TimeScale; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "TimeSeriesScale", function() { return TimeSeriesScale; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Title", function() { return plugin_title; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Tooltip", function() { return plugin_tooltip; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_adapters", function() { return adapters; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_detectPlatform", function() { return _detectPlatform; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "animator", function() { return animator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "controllers", function() { return controllers; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "elements", function() { return elements; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "layouts", function() { return layouts; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "plugins", function() { return plugins; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registerables", function() { return registerables; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "registry", function() { return registry; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "scales", function() { return scales; });
/* harmony import */ var _babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/extends */ "./node_modules/@babel/runtime/helpers/esm/extends.js");
/* harmony import */ var _babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @babel/runtime/helpers/esm/createClass */ "./node_modules/@babel/runtime/helpers/esm/createClass.js");
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./chunks/helpers.segment.js */ "./node_modules/chart.js/dist/chunks/helpers.segment.js");
/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "Ticks", function() { return _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aL"]; });

/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, "defaults", function() { return _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"]; });

/* harmony import */ var _kurkle_color__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @kurkle/color */ "./node_modules/@kurkle/color/dist/color.esm.js");



function _createForOfIteratorHelperLoose(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (t) return (t = t.call(r)).next.bind(t); if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var o = 0; return function () { return o >= r.length ? { done: !0 } : { done: !1, value: r[o++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */


var Animator = /*#__PURE__*/function () {
  function Animator() {
    this._request = null;
    this._charts = new Map();
    this._running = false;
    this._lastDate = undefined;
  }
  var _proto = Animator.prototype;
  _proto._notify = function _notify(chart, anims, date, type) {
    var callbacks = anims.listeners[type];
    var numSteps = anims.duration;
    callbacks.forEach(function (fn) {
      return fn({
        chart: chart,
        initial: anims.initial,
        numSteps: numSteps,
        currentStep: Math.min(date - anims.start, numSteps)
      });
    });
  };
  _proto._refresh = function _refresh() {
    var _this = this;
    if (this._request) {
      return;
    }
    this._running = true;
    this._request = _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["r"].call(window, function () {
      _this._update();
      _this._request = null;
      if (_this._running) {
        _this._refresh();
      }
    });
  };
  _proto._update = function _update(date) {
    var _this2 = this;
    if (date === void 0) {
      date = Date.now();
    }
    var remaining = 0;
    this._charts.forEach(function (anims, chart) {
      if (!anims.running || !anims.items.length) {
        return;
      }
      var items = anims.items;
      var i = items.length - 1;
      var draw = false;
      var item;
      for (; i >= 0; --i) {
        item = items[i];
        if (item._active) {
          if (item._total > anims.duration) {
            anims.duration = item._total;
          }
          item.tick(date);
          draw = true;
        } else {
          items[i] = items[items.length - 1];
          items.pop();
        }
      }
      if (draw) {
        chart.draw();
        _this2._notify(chart, anims, date, 'progress');
      }
      if (!items.length) {
        anims.running = false;
        _this2._notify(chart, anims, date, 'complete');
        anims.initial = false;
      }
      remaining += items.length;
    });
    this._lastDate = date;
    if (remaining === 0) {
      this._running = false;
    }
  };
  _proto._getAnims = function _getAnims(chart) {
    var charts = this._charts;
    var anims = charts.get(chart);
    if (!anims) {
      anims = {
        running: false,
        initial: true,
        items: [],
        listeners: {
          complete: [],
          progress: []
        }
      };
      charts.set(chart, anims);
    }
    return anims;
  };
  _proto.listen = function listen(chart, event, cb) {
    this._getAnims(chart).listeners[event].push(cb);
  };
  _proto.add = function add(chart, items) {
    var _this$_getAnims$items;
    if (!items || !items.length) {
      return;
    }
    (_this$_getAnims$items = this._getAnims(chart).items).push.apply(_this$_getAnims$items, items);
  };
  _proto.has = function has(chart) {
    return this._getAnims(chart).items.length > 0;
  };
  _proto.start = function start(chart) {
    var anims = this._charts.get(chart);
    if (!anims) {
      return;
    }
    anims.running = true;
    anims.start = Date.now();
    anims.duration = anims.items.reduce(function (acc, cur) {
      return Math.max(acc, cur._duration);
    }, 0);
    this._refresh();
  };
  _proto.running = function running(chart) {
    if (!this._running) {
      return false;
    }
    var anims = this._charts.get(chart);
    if (!anims || !anims.running || !anims.items.length) {
      return false;
    }
    return true;
  };
  _proto.stop = function stop(chart) {
    var anims = this._charts.get(chart);
    if (!anims || !anims.items.length) {
      return;
    }
    var items = anims.items;
    var i = items.length - 1;
    for (; i >= 0; --i) {
      items[i].cancel();
    }
    anims.items = [];
    this._notify(chart, anims, Date.now(), 'complete');
  };
  _proto.remove = function remove(chart) {
    return this._charts["delete"](chart);
  };
  return Animator;
}();
var animator = /* #__PURE__ */new Animator();
var transparent = 'transparent';
var interpolators = {
  "boolean": function boolean(from, to, factor) {
    return factor > 0.5 ? to : from;
  },
  color: function color(from, to, factor) {
    var c0 = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["c"])(from || transparent);
    var c1 = c0.valid && Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["c"])(to || transparent);
    return c1 && c1.valid ? c1.mix(c0, factor).hexString() : to;
  },
  number: function number(from, to, factor) {
    return from + (to - from) * factor;
  }
};
var Animation = /*#__PURE__*/function () {
  function Animation(cfg, target, prop, to) {
    var currentValue = target[prop];
    to = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a"])([cfg.to, to, currentValue, cfg.from]);
    var from = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a"])([cfg.from, currentValue, to]);
    this._active = true;
    this._fn = cfg.fn || interpolators[cfg.type || typeof from];
    this._easing = _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["e"][cfg.easing] || _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["e"].linear;
    this._start = Math.floor(Date.now() + (cfg.delay || 0));
    this._duration = this._total = Math.floor(cfg.duration);
    this._loop = !!cfg.loop;
    this._target = target;
    this._prop = prop;
    this._from = from;
    this._to = to;
    this._promises = undefined;
  }
  var _proto2 = Animation.prototype;
  _proto2.active = function active() {
    return this._active;
  };
  _proto2.update = function update(cfg, to, date) {
    if (this._active) {
      this._notify(false);
      var currentValue = this._target[this._prop];
      var elapsed = date - this._start;
      var remain = this._duration - elapsed;
      this._start = date;
      this._duration = Math.floor(Math.max(remain, cfg.duration));
      this._total += elapsed;
      this._loop = !!cfg.loop;
      this._to = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a"])([cfg.to, to, currentValue, cfg.from]);
      this._from = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a"])([cfg.from, currentValue, to]);
    }
  };
  _proto2.cancel = function cancel() {
    if (this._active) {
      this.tick(Date.now());
      this._active = false;
      this._notify(false);
    }
  };
  _proto2.tick = function tick(date) {
    var elapsed = date - this._start;
    var duration = this._duration;
    var prop = this._prop;
    var from = this._from;
    var loop = this._loop;
    var to = this._to;
    var factor;
    this._active = from !== to && (loop || elapsed < duration);
    if (!this._active) {
      this._target[prop] = to;
      this._notify(true);
      return;
    }
    if (elapsed < 0) {
      this._target[prop] = from;
      return;
    }
    factor = elapsed / duration % 2;
    factor = loop && factor > 1 ? 2 - factor : factor;
    factor = this._easing(Math.min(1, Math.max(0, factor)));
    this._target[prop] = this._fn(from, to, factor);
  };
  _proto2.wait = function wait() {
    var promises = this._promises || (this._promises = []);
    return new Promise(function (res, rej) {
      promises.push({
        res: res,
        rej: rej
      });
    });
  };
  _proto2._notify = function _notify(resolved) {
    var method = resolved ? 'res' : 'rej';
    var promises = this._promises || [];
    for (var i = 0; i < promises.length; i++) {
      promises[i][method]();
    }
  };
  return Animation;
}();
var Animations = /*#__PURE__*/function () {
  function Animations(chart, config) {
    this._chart = chart;
    this._properties = new Map();
    this.configure(config);
  }
  var _proto3 = Animations.prototype;
  _proto3.configure = function configure(config) {
    if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(config)) {
      return;
    }
    var animationOptions = Object.keys(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].animation);
    var animatedProps = this._properties;
    Object.getOwnPropertyNames(config).forEach(function (key) {
      var cfg = config[key];
      if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(cfg)) {
        return;
      }
      var resolved = {};
      for (var _i = 0, _animationOptions = animationOptions; _i < _animationOptions.length; _i++) {
        var option = _animationOptions[_i];
        resolved[option] = cfg[option];
      }
      (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["b"])(cfg.properties) && cfg.properties || [key]).forEach(function (prop) {
        if (prop === key || !animatedProps.has(prop)) {
          animatedProps.set(prop, resolved);
        }
      });
    });
  };
  _proto3._animateOptions = function _animateOptions(target, values) {
    var newOptions = values.options;
    var options = resolveTargetOptions(target, newOptions);
    if (!options) {
      return [];
    }
    var animations = this._createAnimations(options, newOptions);
    if (newOptions.$shared) {
      awaitAll(target.options.$animations, newOptions).then(function () {
        target.options = newOptions;
      }, function () {});
    }
    return animations;
  };
  _proto3._createAnimations = function _createAnimations(target, values) {
    var animatedProps = this._properties;
    var animations = [];
    var running = target.$animations || (target.$animations = {});
    var props = Object.keys(values);
    var date = Date.now();
    var i;
    for (i = props.length - 1; i >= 0; --i) {
      var prop = props[i];
      if (prop.charAt(0) === '$') {
        continue;
      }
      if (prop === 'options') {
        animations.push.apply(animations, this._animateOptions(target, values));
        continue;
      }
      var value = values[prop];
      var animation = running[prop];
      var cfg = animatedProps.get(prop);
      if (animation) {
        if (cfg && animation.active()) {
          animation.update(cfg, value, date);
          continue;
        } else {
          animation.cancel();
        }
      }
      if (!cfg || !cfg.duration) {
        target[prop] = value;
        continue;
      }
      running[prop] = animation = new Animation(cfg, target, prop, value);
      animations.push(animation);
    }
    return animations;
  };
  _proto3.update = function update(target, values) {
    if (this._properties.size === 0) {
      Object.assign(target, values);
      return;
    }
    var animations = this._createAnimations(target, values);
    if (animations.length) {
      animator.add(this._chart, animations);
      return true;
    }
  };
  return Animations;
}();
function awaitAll(animations, properties) {
  var running = [];
  var keys = Object.keys(properties);
  for (var i = 0; i < keys.length; i++) {
    var anim = animations[keys[i]];
    if (anim && anim.active()) {
      running.push(anim.wait());
    }
  }
  return Promise.all(running);
}
function resolveTargetOptions(target, newOptions) {
  if (!newOptions) {
    return;
  }
  var options = target.options;
  if (!options) {
    target.options = newOptions;
    return;
  }
  if (options.$shared) {
    target.options = options = Object.assign({}, options, {
      $shared: false,
      $animations: {}
    });
  }
  return options;
}
function scaleClip(scale, allowedOverflow) {
  var opts = scale && scale.options || {};
  var reverse = opts.reverse;
  var min = opts.min === undefined ? allowedOverflow : 0;
  var max = opts.max === undefined ? allowedOverflow : 0;
  return {
    start: reverse ? max : min,
    end: reverse ? min : max
  };
}
function defaultClip(xScale, yScale, allowedOverflow) {
  if (allowedOverflow === false) {
    return false;
  }
  var x = scaleClip(xScale, allowedOverflow);
  var y = scaleClip(yScale, allowedOverflow);
  return {
    top: y.end,
    right: x.end,
    bottom: y.start,
    left: x.start
  };
}
function toClip(value) {
  var t, r, b, l;
  if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(value)) {
    t = value.top;
    r = value.right;
    b = value.bottom;
    l = value.left;
  } else {
    t = r = b = l = value;
  }
  return {
    top: t,
    right: r,
    bottom: b,
    left: l,
    disabled: value === false
  };
}
function getSortedDatasetIndices(chart, filterVisible) {
  var keys = [];
  var metasets = chart._getSortedDatasetMetas(filterVisible);
  var i, ilen;
  for (i = 0, ilen = metasets.length; i < ilen; ++i) {
    keys.push(metasets[i].index);
  }
  return keys;
}
function _applyStack(stack, value, dsIndex, options) {
  if (options === void 0) {
    options = {};
  }
  var keys = stack.keys;
  var singleMode = options.mode === 'single';
  var i, ilen, datasetIndex, otherValue;
  if (value === null) {
    return;
  }
  var found = false;
  for (i = 0, ilen = keys.length; i < ilen; ++i) {
    datasetIndex = +keys[i];
    if (datasetIndex === dsIndex) {
      found = true;
      if (options.all) {
        continue;
      }
      break;
    }
    otherValue = stack.values[datasetIndex];
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(otherValue) && (singleMode || value === 0 || Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["s"])(value) === Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["s"])(otherValue))) {
      value += otherValue;
    }
  }
  if (!found && !options.all) {
    return 0;
  }
  return value;
}
function convertObjectDataToArray(data, meta) {
  var iScale = meta.iScale,
    vScale = meta.vScale;
  var iAxisKey = iScale.axis === 'x' ? 'x' : 'y';
  var vAxisKey = vScale.axis === 'x' ? 'x' : 'y';
  var keys = Object.keys(data);
  var adata = new Array(keys.length);
  var i, ilen, key;
  for (i = 0, ilen = keys.length; i < ilen; ++i) {
    var _adata$i;
    key = keys[i];
    adata[i] = (_adata$i = {}, _adata$i[iAxisKey] = key, _adata$i[vAxisKey] = data[key], _adata$i);
  }
  return adata;
}
function isStacked(scale, meta) {
  var stacked = scale && scale.options.stacked;
  return stacked || stacked === undefined && meta.stack !== undefined;
}
function getStackKey(indexScale, valueScale, meta) {
  return indexScale.id + "." + valueScale.id + "." + (meta.stack || meta.type);
}
function getUserBounds(scale) {
  var _scale$getUserBounds = scale.getUserBounds(),
    min = _scale$getUserBounds.min,
    max = _scale$getUserBounds.max,
    minDefined = _scale$getUserBounds.minDefined,
    maxDefined = _scale$getUserBounds.maxDefined;
  return {
    min: minDefined ? min : Number.NEGATIVE_INFINITY,
    max: maxDefined ? max : Number.POSITIVE_INFINITY
  };
}
function getOrCreateStack(stacks, stackKey, indexValue) {
  var subStack = stacks[stackKey] || (stacks[stackKey] = {});
  return subStack[indexValue] || (subStack[indexValue] = {});
}
function getLastIndexInStack(stack, vScale, positive, type) {
  for (var _iterator = _createForOfIteratorHelperLoose(vScale.getMatchingVisibleMetas(type).reverse()), _step; !(_step = _iterator()).done;) {
    var meta = _step.value;
    var value = stack[meta.index];
    if (positive && value > 0 || !positive && value < 0) {
      return meta.index;
    }
  }
  return null;
}
function updateStacks(controller, parsed) {
  var chart = controller.chart,
    meta = controller._cachedMeta;
  var stacks = chart._stacks || (chart._stacks = {});
  var iScale = meta.iScale,
    vScale = meta.vScale,
    datasetIndex = meta.index;
  var iAxis = iScale.axis;
  var vAxis = vScale.axis;
  var key = getStackKey(iScale, vScale, meta);
  var ilen = parsed.length;
  var stack;
  for (var i = 0; i < ilen; ++i) {
    var item = parsed[i];
    var _index = item[iAxis],
      value = item[vAxis];
    var itemStacks = item._stacks || (item._stacks = {});
    stack = itemStacks[vAxis] = getOrCreateStack(stacks, key, _index);
    stack[datasetIndex] = value;
    stack._top = getLastIndexInStack(stack, vScale, true, meta.type);
    stack._bottom = getLastIndexInStack(stack, vScale, false, meta.type);
    var visualValues = stack._visualValues || (stack._visualValues = {});
    visualValues[datasetIndex] = value;
  }
}
function getFirstScaleId(chart, axis) {
  var scales = chart.scales;
  return Object.keys(scales).filter(function (key) {
    return scales[key].axis === axis;
  }).shift();
}
function createDatasetContext(parent, index) {
  return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["j"])(parent, {
    active: false,
    dataset: undefined,
    datasetIndex: index,
    index: index,
    mode: 'default',
    type: 'dataset'
  });
}
function createDataContext(parent, index, element) {
  return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["j"])(parent, {
    active: false,
    dataIndex: index,
    parsed: undefined,
    raw: undefined,
    element: element,
    index: index,
    mode: 'default',
    type: 'data'
  });
}
function clearStacks(meta, items) {
  var datasetIndex = meta.controller.index;
  var axis = meta.vScale && meta.vScale.axis;
  if (!axis) {
    return;
  }
  items = items || meta._parsed;
  for (var _iterator2 = _createForOfIteratorHelperLoose(items), _step2; !(_step2 = _iterator2()).done;) {
    var parsed = _step2.value;
    var stacks = parsed._stacks;
    if (!stacks || stacks[axis] === undefined || stacks[axis][datasetIndex] === undefined) {
      return;
    }
    delete stacks[axis][datasetIndex];
    if (stacks[axis]._visualValues !== undefined && stacks[axis]._visualValues[datasetIndex] !== undefined) {
      delete stacks[axis]._visualValues[datasetIndex];
    }
  }
}
var isDirectUpdateMode = function isDirectUpdateMode(mode) {
  return mode === 'reset' || mode === 'none';
};
var cloneIfNotShared = function cloneIfNotShared(cached, shared) {
  return shared ? cached : Object.assign({}, cached);
};
var createStack = function createStack(canStack, meta, chart) {
  return canStack && !meta.hidden && meta._stacked && {
    keys: getSortedDatasetIndices(chart, true),
    values: null
  };
};
var DatasetController = /*#__PURE__*/function () {
  function DatasetController(chart, datasetIndex) {
    this.chart = chart;
    this._ctx = chart.ctx;
    this.index = datasetIndex;
    this._cachedDataOpts = {};
    this._cachedMeta = this.getMeta();
    this._type = this._cachedMeta.type;
    this.options = undefined;
    this._parsing = false;
    this._data = undefined;
    this._objectData = undefined;
    this._sharedOptions = undefined;
    this._drawStart = undefined;
    this._drawCount = undefined;
    this.enableOptionSharing = false;
    this.supportsDecimation = false;
    this.$context = undefined;
    this._syncList = [];
    this.datasetElementType = (this instanceof DatasetController ? this.constructor : void 0).datasetElementType;
    this.dataElementType = (this instanceof DatasetController ? this.constructor : void 0).dataElementType;
    this.initialize();
  }
  var _proto4 = DatasetController.prototype;
  _proto4.initialize = function initialize() {
    var meta = this._cachedMeta;
    this.configure();
    this.linkScales();
    meta._stacked = isStacked(meta.vScale, meta);
    this.addElements();
    if (this.options.fill && !this.chart.isPluginEnabled('filler')) {
      console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options");
    }
  };
  _proto4.updateIndex = function updateIndex(datasetIndex) {
    if (this.index !== datasetIndex) {
      clearStacks(this._cachedMeta);
    }
    this.index = datasetIndex;
  };
  _proto4.linkScales = function linkScales() {
    var chart = this.chart;
    var meta = this._cachedMeta;
    var dataset = this.getDataset();
    var chooseId = function chooseId(axis, x, y, r) {
      return axis === 'x' ? x : axis === 'r' ? r : y;
    };
    var xid = meta.xAxisID = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(dataset.xAxisID, getFirstScaleId(chart, 'x'));
    var yid = meta.yAxisID = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(dataset.yAxisID, getFirstScaleId(chart, 'y'));
    var rid = meta.rAxisID = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(dataset.rAxisID, getFirstScaleId(chart, 'r'));
    var indexAxis = meta.indexAxis;
    var iid = meta.iAxisID = chooseId(indexAxis, xid, yid, rid);
    var vid = meta.vAxisID = chooseId(indexAxis, yid, xid, rid);
    meta.xScale = this.getScaleForId(xid);
    meta.yScale = this.getScaleForId(yid);
    meta.rScale = this.getScaleForId(rid);
    meta.iScale = this.getScaleForId(iid);
    meta.vScale = this.getScaleForId(vid);
  };
  _proto4.getDataset = function getDataset() {
    return this.chart.data.datasets[this.index];
  };
  _proto4.getMeta = function getMeta() {
    return this.chart.getDatasetMeta(this.index);
  };
  _proto4.getScaleForId = function getScaleForId(scaleID) {
    return this.chart.scales[scaleID];
  };
  _proto4._getOtherScale = function _getOtherScale(scale) {
    var meta = this._cachedMeta;
    return scale === meta.iScale ? meta.vScale : meta.iScale;
  };
  _proto4.reset = function reset() {
    this._update('reset');
  };
  _proto4._destroy = function _destroy() {
    var meta = this._cachedMeta;
    if (this._data) {
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["u"])(this._data, this);
    }
    if (meta._stacked) {
      clearStacks(meta);
    }
  };
  _proto4._dataCheck = function _dataCheck() {
    var dataset = this.getDataset();
    var data = dataset.data || (dataset.data = []);
    var _data = this._data;
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(data)) {
      var meta = this._cachedMeta;
      this._data = convertObjectDataToArray(data, meta);
    } else if (_data !== data) {
      if (_data) {
        Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["u"])(_data, this);
        var _meta = this._cachedMeta;
        clearStacks(_meta);
        _meta._parsed = [];
      }
      if (data && Object.isExtensible(data)) {
        Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["l"])(data, this);
      }
      this._syncList = [];
      this._data = data;
    }
  };
  _proto4.addElements = function addElements() {
    var meta = this._cachedMeta;
    this._dataCheck();
    if (this.datasetElementType) {
      meta.dataset = new this.datasetElementType();
    }
  };
  _proto4.buildOrUpdateElements = function buildOrUpdateElements(resetNewElements) {
    var meta = this._cachedMeta;
    var dataset = this.getDataset();
    var stackChanged = false;
    this._dataCheck();
    var oldStacked = meta._stacked;
    meta._stacked = isStacked(meta.vScale, meta);
    if (meta.stack !== dataset.stack) {
      stackChanged = true;
      clearStacks(meta);
      meta.stack = dataset.stack;
    }
    this._resyncElements(resetNewElements);
    if (stackChanged || oldStacked !== meta._stacked) {
      updateStacks(this, meta._parsed);
      meta._stacked = isStacked(meta.vScale, meta);
    }
  };
  _proto4.configure = function configure() {
    var config = this.chart.config;
    var scopeKeys = config.datasetScopeKeys(this._type);
    var scopes = config.getOptionScopes(this.getDataset(), scopeKeys, true);
    this.options = config.createResolver(scopes, this.getContext());
    this._parsing = this.options.parsing;
    this._cachedDataOpts = {};
  };
  _proto4.parse = function parse(start, count) {
    var meta = this._cachedMeta,
      data = this._data;
    var iScale = meta.iScale,
      _stacked = meta._stacked;
    var iAxis = iScale.axis;
    var sorted = start === 0 && count === data.length ? true : meta._sorted;
    var prev = start > 0 && meta._parsed[start - 1];
    var i, cur, parsed;
    if (this._parsing === false) {
      meta._parsed = data;
      meta._sorted = true;
      parsed = data;
    } else {
      if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["b"])(data[start])) {
        parsed = this.parseArrayData(meta, data, start, count);
      } else if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(data[start])) {
        parsed = this.parseObjectData(meta, data, start, count);
      } else {
        parsed = this.parsePrimitiveData(meta, data, start, count);
      }
      var isNotInOrderComparedToPrev = function isNotInOrderComparedToPrev() {
        return cur[iAxis] === null || prev && cur[iAxis] < prev[iAxis];
      };
      for (i = 0; i < count; ++i) {
        meta._parsed[i + start] = cur = parsed[i];
        if (sorted) {
          if (isNotInOrderComparedToPrev()) {
            sorted = false;
          }
          prev = cur;
        }
      }
      meta._sorted = sorted;
    }
    if (_stacked) {
      updateStacks(this, parsed);
    }
  };
  _proto4.parsePrimitiveData = function parsePrimitiveData(meta, data, start, count) {
    var iScale = meta.iScale,
      vScale = meta.vScale;
    var iAxis = iScale.axis;
    var vAxis = vScale.axis;
    var labels = iScale.getLabels();
    var singleScale = iScale === vScale;
    var parsed = new Array(count);
    var i, ilen, index;
    for (i = 0, ilen = count; i < ilen; ++i) {
      var _parsed$i;
      index = i + start;
      parsed[i] = (_parsed$i = {}, _parsed$i[iAxis] = singleScale || iScale.parse(labels[index], index), _parsed$i[vAxis] = vScale.parse(data[index], index), _parsed$i);
    }
    return parsed;
  };
  _proto4.parseArrayData = function parseArrayData(meta, data, start, count) {
    var xScale = meta.xScale,
      yScale = meta.yScale;
    var parsed = new Array(count);
    var i, ilen, index, item;
    for (i = 0, ilen = count; i < ilen; ++i) {
      index = i + start;
      item = data[index];
      parsed[i] = {
        x: xScale.parse(item[0], index),
        y: yScale.parse(item[1], index)
      };
    }
    return parsed;
  };
  _proto4.parseObjectData = function parseObjectData(meta, data, start, count) {
    var xScale = meta.xScale,
      yScale = meta.yScale;
    var _this$_parsing = this._parsing,
      _this$_parsing$xAxisK = _this$_parsing.xAxisKey,
      xAxisKey = _this$_parsing$xAxisK === void 0 ? 'x' : _this$_parsing$xAxisK,
      _this$_parsing$yAxisK = _this$_parsing.yAxisKey,
      yAxisKey = _this$_parsing$yAxisK === void 0 ? 'y' : _this$_parsing$yAxisK;
    var parsed = new Array(count);
    var i, ilen, index, item;
    for (i = 0, ilen = count; i < ilen; ++i) {
      index = i + start;
      item = data[index];
      parsed[i] = {
        x: xScale.parse(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["f"])(item, xAxisKey), index),
        y: yScale.parse(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["f"])(item, yAxisKey), index)
      };
    }
    return parsed;
  };
  _proto4.getParsed = function getParsed(index) {
    return this._cachedMeta._parsed[index];
  };
  _proto4.getDataElement = function getDataElement(index) {
    return this._cachedMeta.data[index];
  };
  _proto4.applyStack = function applyStack(scale, parsed, mode) {
    var chart = this.chart;
    var meta = this._cachedMeta;
    var value = parsed[scale.axis];
    var stack = {
      keys: getSortedDatasetIndices(chart, true),
      values: parsed._stacks[scale.axis]._visualValues
    };
    return _applyStack(stack, value, meta.index, {
      mode: mode
    });
  };
  _proto4.updateRangeFromParsed = function updateRangeFromParsed(range, scale, parsed, stack) {
    var parsedValue = parsed[scale.axis];
    var value = parsedValue === null ? NaN : parsedValue;
    var values = stack && parsed._stacks[scale.axis];
    if (stack && values) {
      stack.values = values;
      value = _applyStack(stack, parsedValue, this._cachedMeta.index);
    }
    range.min = Math.min(range.min, value);
    range.max = Math.max(range.max, value);
  };
  _proto4.getMinMax = function getMinMax(scale, canStack) {
    var meta = this._cachedMeta;
    var _parsed = meta._parsed;
    var sorted = meta._sorted && scale === meta.iScale;
    var ilen = _parsed.length;
    var otherScale = this._getOtherScale(scale);
    var stack = createStack(canStack, meta, this.chart);
    var range = {
      min: Number.POSITIVE_INFINITY,
      max: Number.NEGATIVE_INFINITY
    };
    var _getUserBounds = getUserBounds(otherScale),
      otherMin = _getUserBounds.min,
      otherMax = _getUserBounds.max;
    var i, parsed;
    function _skip() {
      parsed = _parsed[i];
      var otherValue = parsed[otherScale.axis];
      return !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(parsed[scale.axis]) || otherMin > otherValue || otherMax < otherValue;
    }
    for (i = 0; i < ilen; ++i) {
      if (_skip()) {
        continue;
      }
      this.updateRangeFromParsed(range, scale, parsed, stack);
      if (sorted) {
        break;
      }
    }
    if (sorted) {
      for (i = ilen - 1; i >= 0; --i) {
        if (_skip()) {
          continue;
        }
        this.updateRangeFromParsed(range, scale, parsed, stack);
        break;
      }
    }
    return range;
  };
  _proto4.getAllParsedValues = function getAllParsedValues(scale) {
    var parsed = this._cachedMeta._parsed;
    var values = [];
    var i, ilen, value;
    for (i = 0, ilen = parsed.length; i < ilen; ++i) {
      value = parsed[i][scale.axis];
      if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(value)) {
        values.push(value);
      }
    }
    return values;
  };
  _proto4.getMaxOverflow = function getMaxOverflow() {
    return false;
  };
  _proto4.getLabelAndValue = function getLabelAndValue(index) {
    var meta = this._cachedMeta;
    var iScale = meta.iScale;
    var vScale = meta.vScale;
    var parsed = this.getParsed(index);
    return {
      label: iScale ? '' + iScale.getLabelForValue(parsed[iScale.axis]) : '',
      value: vScale ? '' + vScale.getLabelForValue(parsed[vScale.axis]) : ''
    };
  };
  _proto4._update = function _update(mode) {
    var meta = this._cachedMeta;
    this.update(mode || 'default');
    meta._clip = toClip(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(this.options.clip, defaultClip(meta.xScale, meta.yScale, this.getMaxOverflow())));
  };
  _proto4.update = function update(mode) {};
  _proto4.draw = function draw() {
    var ctx = this._ctx;
    var chart = this.chart;
    var meta = this._cachedMeta;
    var elements = meta.data || [];
    var area = chart.chartArea;
    var active = [];
    var start = this._drawStart || 0;
    var count = this._drawCount || elements.length - start;
    var drawActiveElementsOnTop = this.options.drawActiveElementsOnTop;
    var i;
    if (meta.dataset) {
      meta.dataset.draw(ctx, area, start, count);
    }
    for (i = start; i < start + count; ++i) {
      var element = elements[i];
      if (element.hidden) {
        continue;
      }
      if (element.active && drawActiveElementsOnTop) {
        active.push(element);
      } else {
        element.draw(ctx, area);
      }
    }
    for (i = 0; i < active.length; ++i) {
      active[i].draw(ctx, area);
    }
  };
  _proto4.getStyle = function getStyle(index, active) {
    var mode = active ? 'active' : 'default';
    return index === undefined && this._cachedMeta.dataset ? this.resolveDatasetElementOptions(mode) : this.resolveDataElementOptions(index || 0, mode);
  };
  _proto4.getContext = function getContext(index, active, mode) {
    var dataset = this.getDataset();
    var context;
    if (index >= 0 && index < this._cachedMeta.data.length) {
      var element = this._cachedMeta.data[index];
      context = element.$context || (element.$context = createDataContext(this.getContext(), index, element));
      context.parsed = this.getParsed(index);
      context.raw = dataset.data[index];
      context.index = context.dataIndex = index;
    } else {
      context = this.$context || (this.$context = createDatasetContext(this.chart.getContext(), this.index));
      context.dataset = dataset;
      context.index = context.datasetIndex = this.index;
    }
    context.active = !!active;
    context.mode = mode;
    return context;
  };
  _proto4.resolveDatasetElementOptions = function resolveDatasetElementOptions(mode) {
    return this._resolveElementOptions(this.datasetElementType.id, mode);
  };
  _proto4.resolveDataElementOptions = function resolveDataElementOptions(index, mode) {
    return this._resolveElementOptions(this.dataElementType.id, mode, index);
  };
  _proto4._resolveElementOptions = function _resolveElementOptions(elementType, mode, index) {
    var _this3 = this;
    if (mode === void 0) {
      mode = 'default';
    }
    var active = mode === 'active';
    var cache = this._cachedDataOpts;
    var cacheKey = elementType + '-' + mode;
    var cached = cache[cacheKey];
    var sharing = this.enableOptionSharing && Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["h"])(index);
    if (cached) {
      return cloneIfNotShared(cached, sharing);
    }
    var config = this.chart.config;
    var scopeKeys = config.datasetElementScopeKeys(this._type, elementType);
    var prefixes = active ? [elementType + "Hover", 'hover', elementType, ''] : [elementType, ''];
    var scopes = config.getOptionScopes(this.getDataset(), scopeKeys);
    var names = Object.keys(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].elements[elementType]);
    var context = function context() {
      return _this3.getContext(index, active, mode);
    };
    var values = config.resolveNamedOptions(scopes, names, context, prefixes);
    if (values.$shared) {
      values.$shared = sharing;
      cache[cacheKey] = Object.freeze(cloneIfNotShared(values, sharing));
    }
    return values;
  };
  _proto4._resolveAnimations = function _resolveAnimations(index, transition, active) {
    var chart = this.chart;
    var cache = this._cachedDataOpts;
    var cacheKey = "animation-" + transition;
    var cached = cache[cacheKey];
    if (cached) {
      return cached;
    }
    var options;
    if (chart.options.animation !== false) {
      var config = this.chart.config;
      var scopeKeys = config.datasetAnimationScopeKeys(this._type, transition);
      var scopes = config.getOptionScopes(this.getDataset(), scopeKeys);
      options = config.createResolver(scopes, this.getContext(index, active, transition));
    }
    var animations = new Animations(chart, options && options.animations);
    if (options && options._cacheable) {
      cache[cacheKey] = Object.freeze(animations);
    }
    return animations;
  };
  _proto4.getSharedOptions = function getSharedOptions(options) {
    if (!options.$shared) {
      return;
    }
    return this._sharedOptions || (this._sharedOptions = Object.assign({}, options));
  };
  _proto4.includeOptions = function includeOptions(mode, sharedOptions) {
    return !sharedOptions || isDirectUpdateMode(mode) || this.chart._animationsDisabled;
  };
  _proto4._getSharedOptions = function _getSharedOptions(start, mode) {
    var firstOpts = this.resolveDataElementOptions(start, mode);
    var previouslySharedOptions = this._sharedOptions;
    var sharedOptions = this.getSharedOptions(firstOpts);
    var includeOptions = this.includeOptions(mode, sharedOptions) || sharedOptions !== previouslySharedOptions;
    this.updateSharedOptions(sharedOptions, mode, firstOpts);
    return {
      sharedOptions: sharedOptions,
      includeOptions: includeOptions
    };
  };
  _proto4.updateElement = function updateElement(element, index, properties, mode) {
    if (isDirectUpdateMode(mode)) {
      Object.assign(element, properties);
    } else {
      this._resolveAnimations(index, mode).update(element, properties);
    }
  };
  _proto4.updateSharedOptions = function updateSharedOptions(sharedOptions, mode, newOptions) {
    if (sharedOptions && !isDirectUpdateMode(mode)) {
      this._resolveAnimations(undefined, mode).update(sharedOptions, newOptions);
    }
  };
  _proto4._setStyle = function _setStyle(element, index, mode, active) {
    element.active = active;
    var options = this.getStyle(index, active);
    this._resolveAnimations(index, mode, active).update(element, {
      options: !active && this.getSharedOptions(options) || options
    });
  };
  _proto4.removeHoverStyle = function removeHoverStyle(element, datasetIndex, index) {
    this._setStyle(element, index, 'active', false);
  };
  _proto4.setHoverStyle = function setHoverStyle(element, datasetIndex, index) {
    this._setStyle(element, index, 'active', true);
  };
  _proto4._removeDatasetHoverStyle = function _removeDatasetHoverStyle() {
    var element = this._cachedMeta.dataset;
    if (element) {
      this._setStyle(element, undefined, 'active', false);
    }
  };
  _proto4._setDatasetHoverStyle = function _setDatasetHoverStyle() {
    var element = this._cachedMeta.dataset;
    if (element) {
      this._setStyle(element, undefined, 'active', true);
    }
  };
  _proto4._resyncElements = function _resyncElements(resetNewElements) {
    var data = this._data;
    var elements = this._cachedMeta.data;
    for (var _iterator3 = _createForOfIteratorHelperLoose(this._syncList), _step3; !(_step3 = _iterator3()).done;) {
      var _step3$value = _step3.value,
        method = _step3$value[0],
        arg1 = _step3$value[1],
        arg2 = _step3$value[2];
      this[method](arg1, arg2);
    }
    this._syncList = [];
    var numMeta = elements.length;
    var numData = data.length;
    var count = Math.min(numData, numMeta);
    if (count) {
      this.parse(0, count);
    }
    if (numData > numMeta) {
      this._insertElements(numMeta, numData - numMeta, resetNewElements);
    } else if (numData < numMeta) {
      this._removeElements(numData, numMeta - numData);
    }
  };
  _proto4._insertElements = function _insertElements(start, count, resetNewElements) {
    if (resetNewElements === void 0) {
      resetNewElements = true;
    }
    var meta = this._cachedMeta;
    var data = meta.data;
    var end = start + count;
    var i;
    var move = function move(arr) {
      arr.length += count;
      for (i = arr.length - 1; i >= end; i--) {
        arr[i] = arr[i - count];
      }
    };
    move(data);
    for (i = start; i < end; ++i) {
      data[i] = new this.dataElementType();
    }
    if (this._parsing) {
      move(meta._parsed);
    }
    this.parse(start, count);
    if (resetNewElements) {
      this.updateElements(data, start, count, 'reset');
    }
  };
  _proto4.updateElements = function updateElements(element, start, count, mode) {};
  _proto4._removeElements = function _removeElements(start, count) {
    var meta = this._cachedMeta;
    if (this._parsing) {
      var removed = meta._parsed.splice(start, count);
      if (meta._stacked) {
        clearStacks(meta, removed);
      }
    }
    meta.data.splice(start, count);
  };
  _proto4._sync = function _sync(args) {
    if (this._parsing) {
      this._syncList.push(args);
    } else {
      var method = args[0],
        arg1 = args[1],
        arg2 = args[2];
      this[method](arg1, arg2);
    }
    this.chart._dataChanges.push([this.index].concat(args));
  };
  _proto4._onDataPush = function _onDataPush() {
    var count = arguments.length;
    this._sync(['_insertElements', this.getDataset().data.length - count, count]);
  };
  _proto4._onDataPop = function _onDataPop() {
    this._sync(['_removeElements', this._cachedMeta.data.length - 1, 1]);
  };
  _proto4._onDataShift = function _onDataShift() {
    this._sync(['_removeElements', 0, 1]);
  };
  _proto4._onDataSplice = function _onDataSplice(start, count) {
    if (count) {
      this._sync(['_removeElements', start, count]);
    }
    var newCount = arguments.length - 2;
    if (newCount) {
      this._sync(['_insertElements', start, newCount]);
    }
  };
  _proto4._onDataUnshift = function _onDataUnshift() {
    this._sync(['_insertElements', 0, arguments.length]);
  };
  return DatasetController;
}();
DatasetController.defaults = {};
DatasetController.datasetElementType = null;
DatasetController.dataElementType = null;
function getAllScaleValues(scale, type) {
  if (!scale._cache.$bar) {
    var visibleMetas = scale.getMatchingVisibleMetas(type);
    var values = [];
    for (var i = 0, ilen = visibleMetas.length; i < ilen; i++) {
      values = values.concat(visibleMetas[i].controller.getAllParsedValues(scale));
    }
    scale._cache.$bar = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["_"])(values.sort(function (a, b) {
      return a - b;
    }));
  }
  return scale._cache.$bar;
}
function computeMinSampleSize(meta) {
  var scale = meta.iScale;
  var values = getAllScaleValues(scale, meta.type);
  var min = scale._length;
  var i, ilen, curr, prev;
  var updateMinAndPrev = function updateMinAndPrev() {
    if (curr === 32767 || curr === -32768) {
      return;
    }
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["h"])(prev)) {
      min = Math.min(min, Math.abs(curr - prev) || min);
    }
    prev = curr;
  };
  for (i = 0, ilen = values.length; i < ilen; ++i) {
    curr = scale.getPixelForValue(values[i]);
    updateMinAndPrev();
  }
  prev = undefined;
  for (i = 0, ilen = scale.ticks.length; i < ilen; ++i) {
    curr = scale.getPixelForTick(i);
    updateMinAndPrev();
  }
  return min;
}
function computeFitCategoryTraits(index, ruler, options, stackCount) {
  var thickness = options.barThickness;
  var size, ratio;
  if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(thickness)) {
    size = ruler.min * options.categoryPercentage;
    ratio = options.barPercentage;
  } else {
    size = thickness * stackCount;
    ratio = 1;
  }
  return {
    chunk: size / stackCount,
    ratio: ratio,
    start: ruler.pixels[index] - size / 2
  };
}
function computeFlexCategoryTraits(index, ruler, options, stackCount) {
  var pixels = ruler.pixels;
  var curr = pixels[index];
  var prev = index > 0 ? pixels[index - 1] : null;
  var next = index < pixels.length - 1 ? pixels[index + 1] : null;
  var percent = options.categoryPercentage;
  if (prev === null) {
    prev = curr - (next === null ? ruler.end - ruler.start : next - curr);
  }
  if (next === null) {
    next = curr + curr - prev;
  }
  var start = curr - (curr - Math.min(prev, next)) / 2 * percent;
  var size = Math.abs(next - prev) / 2 * percent;
  return {
    chunk: size / stackCount,
    ratio: options.barPercentage,
    start: start
  };
}
function parseFloatBar(entry, item, vScale, i) {
  var startValue = vScale.parse(entry[0], i);
  var endValue = vScale.parse(entry[1], i);
  var min = Math.min(startValue, endValue);
  var max = Math.max(startValue, endValue);
  var barStart = min;
  var barEnd = max;
  if (Math.abs(min) > Math.abs(max)) {
    barStart = max;
    barEnd = min;
  }
  item[vScale.axis] = barEnd;
  item._custom = {
    barStart: barStart,
    barEnd: barEnd,
    start: startValue,
    end: endValue,
    min: min,
    max: max
  };
}
function parseValue(entry, item, vScale, i) {
  if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["b"])(entry)) {
    parseFloatBar(entry, item, vScale, i);
  } else {
    item[vScale.axis] = vScale.parse(entry, i);
  }
  return item;
}
function parseArrayOrPrimitive(meta, data, start, count) {
  var iScale = meta.iScale;
  var vScale = meta.vScale;
  var labels = iScale.getLabels();
  var singleScale = iScale === vScale;
  var parsed = [];
  var i, ilen, item, entry;
  for (i = start, ilen = start + count; i < ilen; ++i) {
    entry = data[i];
    item = {};
    item[iScale.axis] = singleScale || iScale.parse(labels[i], i);
    parsed.push(parseValue(entry, item, vScale, i));
  }
  return parsed;
}
function isFloatBar(custom) {
  return custom && custom.barStart !== undefined && custom.barEnd !== undefined;
}
function barSign(size, vScale, actualBase) {
  if (size !== 0) {
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["s"])(size);
  }
  return (vScale.isHorizontal() ? 1 : -1) * (vScale.min >= actualBase ? 1 : -1);
}
function borderProps(properties) {
  var reverse, start, end, top, bottom;
  if (properties.horizontal) {
    reverse = properties.base > properties.x;
    start = 'left';
    end = 'right';
  } else {
    reverse = properties.base < properties.y;
    start = 'bottom';
    end = 'top';
  }
  if (reverse) {
    top = 'end';
    bottom = 'start';
  } else {
    top = 'start';
    bottom = 'end';
  }
  return {
    start: start,
    end: end,
    reverse: reverse,
    top: top,
    bottom: bottom
  };
}
function setBorderSkipped(properties, options, stack, index) {
  var edge = options.borderSkipped;
  var res = {};
  if (!edge) {
    properties.borderSkipped = res;
    return;
  }
  if (edge === true) {
    properties.borderSkipped = {
      top: true,
      right: true,
      bottom: true,
      left: true
    };
    return;
  }
  var _borderProps = borderProps(properties),
    start = _borderProps.start,
    end = _borderProps.end,
    reverse = _borderProps.reverse,
    top = _borderProps.top,
    bottom = _borderProps.bottom;
  if (edge === 'middle' && stack) {
    properties.enableBorderRadius = true;
    if ((stack._top || 0) === index) {
      edge = top;
    } else if ((stack._bottom || 0) === index) {
      edge = bottom;
    } else {
      res[parseEdge(bottom, start, end, reverse)] = true;
      edge = top;
    }
  }
  res[parseEdge(edge, start, end, reverse)] = true;
  properties.borderSkipped = res;
}
function parseEdge(edge, a, b, reverse) {
  if (reverse) {
    edge = swap(edge, a, b);
    edge = startEnd(edge, b, a);
  } else {
    edge = startEnd(edge, a, b);
  }
  return edge;
}
function swap(orig, v1, v2) {
  return orig === v1 ? v2 : orig === v2 ? v1 : orig;
}
function startEnd(v, start, end) {
  return v === 'start' ? start : v === 'end' ? end : v;
}
function setInflateAmount(properties, _ref, ratio) {
  var inflateAmount = _ref.inflateAmount;
  properties.inflateAmount = inflateAmount === 'auto' ? ratio === 1 ? 0.33 : 0 : inflateAmount;
}
var BarController = /*#__PURE__*/function (_DatasetController2) {
  function BarController() {
    return _DatasetController2.apply(this, arguments) || this;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(BarController, _DatasetController2);
  var _proto5 = BarController.prototype;
  _proto5.parsePrimitiveData = function parsePrimitiveData(meta, data, start, count) {
    return parseArrayOrPrimitive(meta, data, start, count);
  };
  _proto5.parseArrayData = function parseArrayData(meta, data, start, count) {
    return parseArrayOrPrimitive(meta, data, start, count);
  };
  _proto5.parseObjectData = function parseObjectData(meta, data, start, count) {
    var iScale = meta.iScale,
      vScale = meta.vScale;
    var _this$_parsing2 = this._parsing,
      _this$_parsing2$xAxis = _this$_parsing2.xAxisKey,
      xAxisKey = _this$_parsing2$xAxis === void 0 ? 'x' : _this$_parsing2$xAxis,
      _this$_parsing2$yAxis = _this$_parsing2.yAxisKey,
      yAxisKey = _this$_parsing2$yAxis === void 0 ? 'y' : _this$_parsing2$yAxis;
    var iAxisKey = iScale.axis === 'x' ? xAxisKey : yAxisKey;
    var vAxisKey = vScale.axis === 'x' ? xAxisKey : yAxisKey;
    var parsed = [];
    var i, ilen, item, obj;
    for (i = start, ilen = start + count; i < ilen; ++i) {
      obj = data[i];
      item = {};
      item[iScale.axis] = iScale.parse(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["f"])(obj, iAxisKey), i);
      parsed.push(parseValue(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["f"])(obj, vAxisKey), item, vScale, i));
    }
    return parsed;
  };
  _proto5.updateRangeFromParsed = function updateRangeFromParsed(range, scale, parsed, stack) {
    _DatasetController2.prototype.updateRangeFromParsed.call(this, range, scale, parsed, stack);
    var custom = parsed._custom;
    if (custom && scale === this._cachedMeta.vScale) {
      range.min = Math.min(range.min, custom.min);
      range.max = Math.max(range.max, custom.max);
    }
  };
  _proto5.getMaxOverflow = function getMaxOverflow() {
    return 0;
  };
  _proto5.getLabelAndValue = function getLabelAndValue(index) {
    var meta = this._cachedMeta;
    var iScale = meta.iScale,
      vScale = meta.vScale;
    var parsed = this.getParsed(index);
    var custom = parsed._custom;
    var value = isFloatBar(custom) ? '[' + custom.start + ', ' + custom.end + ']' : '' + vScale.getLabelForValue(parsed[vScale.axis]);
    return {
      label: '' + iScale.getLabelForValue(parsed[iScale.axis]),
      value: value
    };
  };
  _proto5.initialize = function initialize() {
    this.enableOptionSharing = true;
    _DatasetController2.prototype.initialize.call(this);
    var meta = this._cachedMeta;
    meta.stack = this.getDataset().stack;
  };
  _proto5.update = function update(mode) {
    var meta = this._cachedMeta;
    this.updateElements(meta.data, 0, meta.data.length, mode);
  };
  _proto5.updateElements = function updateElements(bars, start, count, mode) {
    var reset = mode === 'reset';
    var index = this.index,
      vScale = this._cachedMeta.vScale;
    var base = vScale.getBasePixel();
    var horizontal = vScale.isHorizontal();
    var ruler = this._getRuler();
    var _this$_getSharedOptio = this._getSharedOptions(start, mode),
      sharedOptions = _this$_getSharedOptio.sharedOptions,
      includeOptions = _this$_getSharedOptio.includeOptions;
    for (var i = start; i < start + count; i++) {
      var parsed = this.getParsed(i);
      var vpixels = reset || Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(parsed[vScale.axis]) ? {
        base: base,
        head: base
      } : this._calculateBarValuePixels(i);
      var ipixels = this._calculateBarIndexPixels(i, ruler);
      var stack = (parsed._stacks || {})[vScale.axis];
      var properties = {
        horizontal: horizontal,
        base: vpixels.base,
        enableBorderRadius: !stack || isFloatBar(parsed._custom) || index === stack._top || index === stack._bottom,
        x: horizontal ? vpixels.head : ipixels.center,
        y: horizontal ? ipixels.center : vpixels.head,
        height: horizontal ? ipixels.size : Math.abs(vpixels.size),
        width: horizontal ? Math.abs(vpixels.size) : ipixels.size
      };
      if (includeOptions) {
        properties.options = sharedOptions || this.resolveDataElementOptions(i, bars[i].active ? 'active' : mode);
      }
      var options = properties.options || bars[i].options;
      setBorderSkipped(properties, options, stack, index);
      setInflateAmount(properties, options, ruler.ratio);
      this.updateElement(bars[i], i, properties, mode);
    }
  };
  _proto5._getStacks = function _getStacks(last, dataIndex) {
    var iScale = this._cachedMeta.iScale;
    var metasets = iScale.getMatchingVisibleMetas(this._type).filter(function (meta) {
      return meta.controller.options.grouped;
    });
    var stacked = iScale.options.stacked;
    var stacks = [];
    var currentParsed = this._cachedMeta.controller.getParsed(dataIndex);
    var iScaleValue = currentParsed && currentParsed[iScale.axis];
    var skipNull = function skipNull(meta) {
      var parsed = meta._parsed.find(function (item) {
        return item[iScale.axis] === iScaleValue;
      });
      var val = parsed && parsed[meta.vScale.axis];
      if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(val) || isNaN(val)) {
        return true;
      }
    };
    for (var _iterator4 = _createForOfIteratorHelperLoose(metasets), _step4; !(_step4 = _iterator4()).done;) {
      var meta = _step4.value;
      if (dataIndex !== undefined && skipNull(meta)) {
        continue;
      }
      if (stacked === false || stacks.indexOf(meta.stack) === -1 || stacked === undefined && meta.stack === undefined) {
        stacks.push(meta.stack);
      }
      if (meta.index === last) {
        break;
      }
    }
    if (!stacks.length) {
      stacks.push(undefined);
    }
    return stacks;
  };
  _proto5._getStackCount = function _getStackCount(index) {
    return this._getStacks(undefined, index).length;
  };
  _proto5._getStackIndex = function _getStackIndex(datasetIndex, name, dataIndex) {
    var stacks = this._getStacks(datasetIndex, dataIndex);
    var index = name !== undefined ? stacks.indexOf(name) : -1;
    return index === -1 ? stacks.length - 1 : index;
  };
  _proto5._getRuler = function _getRuler() {
    var opts = this.options;
    var meta = this._cachedMeta;
    var iScale = meta.iScale;
    var pixels = [];
    var i, ilen;
    for (i = 0, ilen = meta.data.length; i < ilen; ++i) {
      pixels.push(iScale.getPixelForValue(this.getParsed(i)[iScale.axis], i));
    }
    var barThickness = opts.barThickness;
    var min = barThickness || computeMinSampleSize(meta);
    return {
      min: min,
      pixels: pixels,
      start: iScale._startPixel,
      end: iScale._endPixel,
      stackCount: this._getStackCount(),
      scale: iScale,
      grouped: opts.grouped,
      ratio: barThickness ? 1 : opts.categoryPercentage * opts.barPercentage
    };
  };
  _proto5._calculateBarValuePixels = function _calculateBarValuePixels(index) {
    var _this$_cachedMeta = this._cachedMeta,
      vScale = _this$_cachedMeta.vScale,
      _stacked = _this$_cachedMeta._stacked,
      datasetIndex = _this$_cachedMeta.index,
      _this$options = this.options,
      baseValue = _this$options.base,
      minBarLength = _this$options.minBarLength;
    var actualBase = baseValue || 0;
    var parsed = this.getParsed(index);
    var custom = parsed._custom;
    var floating = isFloatBar(custom);
    var value = parsed[vScale.axis];
    var start = 0;
    var length = _stacked ? this.applyStack(vScale, parsed, _stacked) : value;
    var head, size;
    if (length !== value) {
      start = length - value;
      length = value;
    }
    if (floating) {
      value = custom.barStart;
      length = custom.barEnd - custom.barStart;
      if (value !== 0 && Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["s"])(value) !== Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["s"])(custom.barEnd)) {
        start = 0;
      }
      start += value;
    }
    var startValue = !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(baseValue) && !floating ? baseValue : start;
    var base = vScale.getPixelForValue(startValue);
    if (this.chart.getDataVisibility(index)) {
      head = vScale.getPixelForValue(start + length);
    } else {
      head = base;
    }
    size = head - base;
    if (Math.abs(size) < minBarLength) {
      size = barSign(size, vScale, actualBase) * minBarLength;
      if (value === actualBase) {
        base -= size / 2;
      }
      var startPixel = vScale.getPixelForDecimal(0);
      var endPixel = vScale.getPixelForDecimal(1);
      var min = Math.min(startPixel, endPixel);
      var max = Math.max(startPixel, endPixel);
      base = Math.max(Math.min(base, max), min);
      head = base + size;
      if (_stacked && !floating) {
        parsed._stacks[vScale.axis]._visualValues[datasetIndex] = vScale.getValueForPixel(head) - vScale.getValueForPixel(base);
      }
    }
    if (base === vScale.getPixelForValue(actualBase)) {
      var halfGrid = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["s"])(size) * vScale.getLineWidthForValue(actualBase) / 2;
      base += halfGrid;
      size -= halfGrid;
    }
    return {
      size: size,
      base: base,
      head: head,
      center: head + size / 2
    };
  };
  _proto5._calculateBarIndexPixels = function _calculateBarIndexPixels(index, ruler) {
    var scale = ruler.scale;
    var options = this.options;
    var skipNull = options.skipNull;
    var maxBarThickness = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(options.maxBarThickness, Infinity);
    var center, size;
    if (ruler.grouped) {
      var stackCount = skipNull ? this._getStackCount(index) : ruler.stackCount;
      var range = options.barThickness === 'flex' ? computeFlexCategoryTraits(index, ruler, options, stackCount) : computeFitCategoryTraits(index, ruler, options, stackCount);
      var stackIndex = this._getStackIndex(this.index, this._cachedMeta.stack, skipNull ? index : undefined);
      center = range.start + range.chunk * stackIndex + range.chunk / 2;
      size = Math.min(maxBarThickness, range.chunk * range.ratio);
    } else {
      center = scale.getPixelForValue(this.getParsed(index)[scale.axis], index);
      size = Math.min(maxBarThickness, ruler.min * ruler.ratio);
    }
    return {
      base: center - size / 2,
      head: center + size / 2,
      center: center,
      size: size
    };
  };
  _proto5.draw = function draw() {
    var meta = this._cachedMeta;
    var vScale = meta.vScale;
    var rects = meta.data;
    var ilen = rects.length;
    var i = 0;
    for (; i < ilen; ++i) {
      if (this.getParsed(i)[vScale.axis] !== null && !rects[i].hidden) {
        rects[i].draw(this._ctx);
      }
    }
  };
  return BarController;
}(DatasetController);
BarController.id = 'bar';
BarController.defaults = {
  datasetElementType: false,
  dataElementType: 'bar',
  categoryPercentage: 0.8,
  barPercentage: 0.9,
  grouped: true,
  animations: {
    numbers: {
      type: 'number',
      properties: ['x', 'y', 'base', 'width', 'height']
    }
  }
};
BarController.overrides = {
  scales: {
    _index_: {
      type: 'category',
      offset: true,
      grid: {
        offset: true
      }
    },
    _value_: {
      type: 'linear',
      beginAtZero: true
    }
  }
};
var BubbleController = /*#__PURE__*/function (_DatasetController3) {
  function BubbleController() {
    return _DatasetController3.apply(this, arguments) || this;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(BubbleController, _DatasetController3);
  var _proto6 = BubbleController.prototype;
  _proto6.initialize = function initialize() {
    this.enableOptionSharing = true;
    _DatasetController3.prototype.initialize.call(this);
  };
  _proto6.parsePrimitiveData = function parsePrimitiveData(meta, data, start, count) {
    var parsed = _DatasetController3.prototype.parsePrimitiveData.call(this, meta, data, start, count);
    for (var i = 0; i < parsed.length; i++) {
      parsed[i]._custom = this.resolveDataElementOptions(i + start).radius;
    }
    return parsed;
  };
  _proto6.parseArrayData = function parseArrayData(meta, data, start, count) {
    var parsed = _DatasetController3.prototype.parseArrayData.call(this, meta, data, start, count);
    for (var i = 0; i < parsed.length; i++) {
      var item = data[start + i];
      parsed[i]._custom = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(item[2], this.resolveDataElementOptions(i + start).radius);
    }
    return parsed;
  };
  _proto6.parseObjectData = function parseObjectData(meta, data, start, count) {
    var parsed = _DatasetController3.prototype.parseObjectData.call(this, meta, data, start, count);
    for (var i = 0; i < parsed.length; i++) {
      var item = data[start + i];
      parsed[i]._custom = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(item && item.r && +item.r, this.resolveDataElementOptions(i + start).radius);
    }
    return parsed;
  };
  _proto6.getMaxOverflow = function getMaxOverflow() {
    var data = this._cachedMeta.data;
    var max = 0;
    for (var i = data.length - 1; i >= 0; --i) {
      max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);
    }
    return max > 0 && max;
  };
  _proto6.getLabelAndValue = function getLabelAndValue(index) {
    var meta = this._cachedMeta;
    var labels = this.chart.data.labels || [];
    var xScale = meta.xScale,
      yScale = meta.yScale;
    var parsed = this.getParsed(index);
    var x = xScale.getLabelForValue(parsed.x);
    var y = yScale.getLabelForValue(parsed.y);
    var r = parsed._custom;
    return {
      label: labels[index] || '',
      value: '(' + x + ', ' + y + (r ? ', ' + r : '') + ')'
    };
  };
  _proto6.update = function update(mode) {
    var points = this._cachedMeta.data;
    this.updateElements(points, 0, points.length, mode);
  };
  _proto6.updateElements = function updateElements(points, start, count, mode) {
    var reset = mode === 'reset';
    var _this$_cachedMeta2 = this._cachedMeta,
      iScale = _this$_cachedMeta2.iScale,
      vScale = _this$_cachedMeta2.vScale;
    var _this$_getSharedOptio2 = this._getSharedOptions(start, mode),
      sharedOptions = _this$_getSharedOptio2.sharedOptions,
      includeOptions = _this$_getSharedOptio2.includeOptions;
    var iAxis = iScale.axis;
    var vAxis = vScale.axis;
    for (var i = start; i < start + count; i++) {
      var point = points[i];
      var parsed = !reset && this.getParsed(i);
      var properties = {};
      var iPixel = properties[iAxis] = reset ? iScale.getPixelForDecimal(0.5) : iScale.getPixelForValue(parsed[iAxis]);
      var vPixel = properties[vAxis] = reset ? vScale.getBasePixel() : vScale.getPixelForValue(parsed[vAxis]);
      properties.skip = isNaN(iPixel) || isNaN(vPixel);
      if (includeOptions) {
        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);
        if (reset) {
          properties.options.radius = 0;
        }
      }
      this.updateElement(point, i, properties, mode);
    }
  };
  _proto6.resolveDataElementOptions = function resolveDataElementOptions(index, mode) {
    var parsed = this.getParsed(index);
    var values = _DatasetController3.prototype.resolveDataElementOptions.call(this, index, mode);
    if (values.$shared) {
      values = Object.assign({}, values, {
        $shared: false
      });
    }
    var radius = values.radius;
    if (mode !== 'active') {
      values.radius = 0;
    }
    values.radius += Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(parsed && parsed._custom, radius);
    return values;
  };
  return BubbleController;
}(DatasetController);
BubbleController.id = 'bubble';
BubbleController.defaults = {
  datasetElementType: false,
  dataElementType: 'point',
  animations: {
    numbers: {
      type: 'number',
      properties: ['x', 'y', 'borderWidth', 'radius']
    }
  }
};
BubbleController.overrides = {
  scales: {
    x: {
      type: 'linear'
    },
    y: {
      type: 'linear'
    }
  }
};
function getRatioAndOffset(rotation, circumference, cutout) {
  var ratioX = 1;
  var ratioY = 1;
  var offsetX = 0;
  var offsetY = 0;
  if (circumference < _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"]) {
    var startAngle = rotation;
    var endAngle = startAngle + circumference;
    var startX = Math.cos(startAngle);
    var startY = Math.sin(startAngle);
    var endX = Math.cos(endAngle);
    var endY = Math.sin(endAngle);
    var calcMax = function calcMax(angle, a, b) {
      return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["p"])(angle, startAngle, endAngle, true) ? 1 : Math.max(a, a * cutout, b, b * cutout);
    };
    var calcMin = function calcMin(angle, a, b) {
      return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["p"])(angle, startAngle, endAngle, true) ? -1 : Math.min(a, a * cutout, b, b * cutout);
    };
    var maxX = calcMax(0, startX, endX);
    var maxY = calcMax(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["H"], startY, endY);
    var minX = calcMin(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["P"], startX, endX);
    var minY = calcMin(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["P"] + _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["H"], startY, endY);
    ratioX = (maxX - minX) / 2;
    ratioY = (maxY - minY) / 2;
    offsetX = -(maxX + minX) / 2;
    offsetY = -(maxY + minY) / 2;
  }
  return {
    ratioX: ratioX,
    ratioY: ratioY,
    offsetX: offsetX,
    offsetY: offsetY
  };
}
var DoughnutController = /*#__PURE__*/function (_DatasetController4) {
  function DoughnutController(chart, datasetIndex) {
    var _this4;
    _this4 = _DatasetController4.call(this, chart, datasetIndex) || this;
    _this4.enableOptionSharing = true;
    _this4.innerRadius = undefined;
    _this4.outerRadius = undefined;
    _this4.offsetX = undefined;
    _this4.offsetY = undefined;
    return _this4;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(DoughnutController, _DatasetController4);
  var _proto7 = DoughnutController.prototype;
  _proto7.linkScales = function linkScales() {};
  _proto7.parse = function parse(start, count) {
    var data = this.getDataset().data;
    var meta = this._cachedMeta;
    if (this._parsing === false) {
      meta._parsed = data;
    } else {
      var getter = function getter(i) {
        return +data[i];
      };
      if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(data[start])) {
        var _this$_parsing$key = this._parsing.key,
          key = _this$_parsing$key === void 0 ? 'value' : _this$_parsing$key;
        getter = function getter(i) {
          return +Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["f"])(data[i], key);
        };
      }
      var i, ilen;
      for (i = start, ilen = start + count; i < ilen; ++i) {
        meta._parsed[i] = getter(i);
      }
    }
  };
  _proto7._getRotation = function _getRotation() {
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["t"])(this.options.rotation - 90);
  };
  _proto7._getCircumference = function _getCircumference() {
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["t"])(this.options.circumference);
  };
  _proto7._getRotationExtents = function _getRotationExtents() {
    var min = _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"];
    var max = -_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"];
    for (var i = 0; i < this.chart.data.datasets.length; ++i) {
      if (this.chart.isDatasetVisible(i) && this.chart.getDatasetMeta(i).type === this._type) {
        var controller = this.chart.getDatasetMeta(i).controller;
        var rotation = controller._getRotation();
        var circumference = controller._getCircumference();
        min = Math.min(min, rotation);
        max = Math.max(max, rotation + circumference);
      }
    }
    return {
      rotation: min,
      circumference: max - min
    };
  };
  _proto7.update = function update(mode) {
    var chart = this.chart;
    var chartArea = chart.chartArea;
    var meta = this._cachedMeta;
    var arcs = meta.data;
    var spacing = this.getMaxBorderWidth() + this.getMaxOffset(arcs) + this.options.spacing;
    var maxSize = Math.max((Math.min(chartArea.width, chartArea.height) - spacing) / 2, 0);
    var cutout = Math.min(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["m"])(this.options.cutout, maxSize), 1);
    var chartWeight = this._getRingWeight(this.index);
    var _this$_getRotationExt = this._getRotationExtents(),
      circumference = _this$_getRotationExt.circumference,
      rotation = _this$_getRotationExt.rotation;
    var _getRatioAndOffset = getRatioAndOffset(rotation, circumference, cutout),
      ratioX = _getRatioAndOffset.ratioX,
      ratioY = _getRatioAndOffset.ratioY,
      offsetX = _getRatioAndOffset.offsetX,
      offsetY = _getRatioAndOffset.offsetY;
    var maxWidth = (chartArea.width - spacing) / ratioX;
    var maxHeight = (chartArea.height - spacing) / ratioY;
    var maxRadius = Math.max(Math.min(maxWidth, maxHeight) / 2, 0);
    var outerRadius = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["n"])(this.options.radius, maxRadius);
    var innerRadius = Math.max(outerRadius * cutout, 0);
    var radiusLength = (outerRadius - innerRadius) / this._getVisibleDatasetWeightTotal();
    this.offsetX = offsetX * outerRadius;
    this.offsetY = offsetY * outerRadius;
    meta.total = this.calculateTotal();
    this.outerRadius = outerRadius - radiusLength * this._getRingWeightOffset(this.index);
    this.innerRadius = Math.max(this.outerRadius - radiusLength * chartWeight, 0);
    this.updateElements(arcs, 0, arcs.length, mode);
  };
  _proto7._circumference = function _circumference(i, reset) {
    var opts = this.options;
    var meta = this._cachedMeta;
    var circumference = this._getCircumference();
    if (reset && opts.animation.animateRotate || !this.chart.getDataVisibility(i) || meta._parsed[i] === null || meta.data[i].hidden) {
      return 0;
    }
    return this.calculateCircumference(meta._parsed[i] * circumference / _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"]);
  };
  _proto7.updateElements = function updateElements(arcs, start, count, mode) {
    var reset = mode === 'reset';
    var chart = this.chart;
    var chartArea = chart.chartArea;
    var opts = chart.options;
    var animationOpts = opts.animation;
    var centerX = (chartArea.left + chartArea.right) / 2;
    var centerY = (chartArea.top + chartArea.bottom) / 2;
    var animateScale = reset && animationOpts.animateScale;
    var innerRadius = animateScale ? 0 : this.innerRadius;
    var outerRadius = animateScale ? 0 : this.outerRadius;
    var _this$_getSharedOptio3 = this._getSharedOptions(start, mode),
      sharedOptions = _this$_getSharedOptio3.sharedOptions,
      includeOptions = _this$_getSharedOptio3.includeOptions;
    var startAngle = this._getRotation();
    var i;
    for (i = 0; i < start; ++i) {
      startAngle += this._circumference(i, reset);
    }
    for (i = start; i < start + count; ++i) {
      var circumference = this._circumference(i, reset);
      var arc = arcs[i];
      var properties = {
        x: centerX + this.offsetX,
        y: centerY + this.offsetY,
        startAngle: startAngle,
        endAngle: startAngle + circumference,
        circumference: circumference,
        outerRadius: outerRadius,
        innerRadius: innerRadius
      };
      if (includeOptions) {
        properties.options = sharedOptions || this.resolveDataElementOptions(i, arc.active ? 'active' : mode);
      }
      startAngle += circumference;
      this.updateElement(arc, i, properties, mode);
    }
  };
  _proto7.calculateTotal = function calculateTotal() {
    var meta = this._cachedMeta;
    var metaData = meta.data;
    var total = 0;
    var i;
    for (i = 0; i < metaData.length; i++) {
      var value = meta._parsed[i];
      if (value !== null && !isNaN(value) && this.chart.getDataVisibility(i) && !metaData[i].hidden) {
        total += Math.abs(value);
      }
    }
    return total;
  };
  _proto7.calculateCircumference = function calculateCircumference(value) {
    var total = this._cachedMeta.total;
    if (total > 0 && !isNaN(value)) {
      return _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"] * (Math.abs(value) / total);
    }
    return 0;
  };
  _proto7.getLabelAndValue = function getLabelAndValue(index) {
    var meta = this._cachedMeta;
    var chart = this.chart;
    var labels = chart.data.labels || [];
    var value = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["o"])(meta._parsed[index], chart.options.locale);
    return {
      label: labels[index] || '',
      value: value
    };
  };
  _proto7.getMaxBorderWidth = function getMaxBorderWidth(arcs) {
    var max = 0;
    var chart = this.chart;
    var i, ilen, meta, controller, options;
    if (!arcs) {
      for (i = 0, ilen = chart.data.datasets.length; i < ilen; ++i) {
        if (chart.isDatasetVisible(i)) {
          meta = chart.getDatasetMeta(i);
          arcs = meta.data;
          controller = meta.controller;
          break;
        }
      }
    }
    if (!arcs) {
      return 0;
    }
    for (i = 0, ilen = arcs.length; i < ilen; ++i) {
      options = controller.resolveDataElementOptions(i);
      if (options.borderAlign !== 'inner') {
        max = Math.max(max, options.borderWidth || 0, options.hoverBorderWidth || 0);
      }
    }
    return max;
  };
  _proto7.getMaxOffset = function getMaxOffset(arcs) {
    var max = 0;
    for (var i = 0, ilen = arcs.length; i < ilen; ++i) {
      var options = this.resolveDataElementOptions(i);
      max = Math.max(max, options.offset || 0, options.hoverOffset || 0);
    }
    return max;
  };
  _proto7._getRingWeightOffset = function _getRingWeightOffset(datasetIndex) {
    var ringWeightOffset = 0;
    for (var i = 0; i < datasetIndex; ++i) {
      if (this.chart.isDatasetVisible(i)) {
        ringWeightOffset += this._getRingWeight(i);
      }
    }
    return ringWeightOffset;
  };
  _proto7._getRingWeight = function _getRingWeight(datasetIndex) {
    return Math.max(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(this.chart.data.datasets[datasetIndex].weight, 1), 0);
  };
  _proto7._getVisibleDatasetWeightTotal = function _getVisibleDatasetWeightTotal() {
    return this._getRingWeightOffset(this.chart.data.datasets.length) || 1;
  };
  return DoughnutController;
}(DatasetController);
DoughnutController.id = 'doughnut';
DoughnutController.defaults = {
  datasetElementType: false,
  dataElementType: 'arc',
  animation: {
    animateRotate: true,
    animateScale: false
  },
  animations: {
    numbers: {
      type: 'number',
      properties: ['circumference', 'endAngle', 'innerRadius', 'outerRadius', 'startAngle', 'x', 'y', 'offset', 'borderWidth', 'spacing']
    }
  },
  cutout: '50%',
  rotation: 0,
  circumference: 360,
  radius: '100%',
  spacing: 0,
  indexAxis: 'r'
};
DoughnutController.descriptors = {
  _scriptable: function _scriptable(name) {
    return name !== 'spacing';
  },
  _indexable: function _indexable(name) {
    return name !== 'spacing' && !name.startsWith('borderDash') && !name.startsWith('hoverBorderDash');
  }
};
DoughnutController.overrides = {
  aspectRatio: 1,
  plugins: {
    legend: {
      labels: {
        generateLabels: function generateLabels(chart) {
          var data = chart.data;
          if (data.labels.length && data.datasets.length) {
            var _chart$legend$options2 = chart.legend.options.labels,
              pointStyle = _chart$legend$options2.pointStyle,
              color = _chart$legend$options2.color;
            return data.labels.map(function (label, i) {
              var meta = chart.getDatasetMeta(0);
              var style = meta.controller.getStyle(i);
              return {
                text: label,
                fillStyle: style.backgroundColor,
                strokeStyle: style.borderColor,
                fontColor: color,
                lineWidth: style.borderWidth,
                pointStyle: pointStyle,
                hidden: !chart.getDataVisibility(i),
                index: i
              };
            });
          }
          return [];
        }
      },
      onClick: function onClick(e, legendItem, legend) {
        legend.chart.toggleDataVisibility(legendItem.index);
        legend.chart.update();
      }
    }
  }
};
var LineController = /*#__PURE__*/function (_DatasetController5) {
  function LineController() {
    return _DatasetController5.apply(this, arguments) || this;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(LineController, _DatasetController5);
  var _proto8 = LineController.prototype;
  _proto8.initialize = function initialize() {
    this.enableOptionSharing = true;
    this.supportsDecimation = true;
    _DatasetController5.prototype.initialize.call(this);
  };
  _proto8.update = function update(mode) {
    var meta = this._cachedMeta;
    var line = meta.dataset,
      _meta$data = meta.data,
      points = _meta$data === void 0 ? [] : _meta$data,
      _dataset = meta._dataset;
    var animationsDisabled = this.chart._animationsDisabled;
    var _getStartAndCountOfVi = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["q"])(meta, points, animationsDisabled),
      start = _getStartAndCountOfVi.start,
      count = _getStartAndCountOfVi.count;
    this._drawStart = start;
    this._drawCount = count;
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["w"])(meta)) {
      start = 0;
      count = points.length;
    }
    line._chart = this.chart;
    line._datasetIndex = this.index;
    line._decimated = !!_dataset._decimated;
    line.points = points;
    var options = this.resolveDatasetElementOptions(mode);
    if (!this.options.showLine) {
      options.borderWidth = 0;
    }
    options.segment = this.options.segment;
    this.updateElement(line, undefined, {
      animated: !animationsDisabled,
      options: options
    }, mode);
    this.updateElements(points, start, count, mode);
  };
  _proto8.updateElements = function updateElements(points, start, count, mode) {
    var reset = mode === 'reset';
    var _this$_cachedMeta3 = this._cachedMeta,
      iScale = _this$_cachedMeta3.iScale,
      vScale = _this$_cachedMeta3.vScale,
      _stacked = _this$_cachedMeta3._stacked,
      _dataset = _this$_cachedMeta3._dataset;
    var _this$_getSharedOptio4 = this._getSharedOptions(start, mode),
      sharedOptions = _this$_getSharedOptio4.sharedOptions,
      includeOptions = _this$_getSharedOptio4.includeOptions;
    var iAxis = iScale.axis;
    var vAxis = vScale.axis;
    var _this$options2 = this.options,
      spanGaps = _this$options2.spanGaps,
      segment = _this$options2.segment;
    var maxGapLength = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["x"])(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;
    var directUpdate = this.chart._animationsDisabled || reset || mode === 'none';
    var end = start + count;
    var pointsCount = points.length;
    var prevParsed = start > 0 && this.getParsed(start - 1);
    for (var i = 0; i < pointsCount; ++i) {
      var point = points[i];
      var properties = directUpdate ? point : {};
      if (i < start || i >= end) {
        properties.skip = true;
        continue;
      }
      var parsed = this.getParsed(i);
      var nullData = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(parsed[vAxis]);
      var iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);
      var vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);
      properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;
      properties.stop = i > 0 && Math.abs(parsed[iAxis] - prevParsed[iAxis]) > maxGapLength;
      if (segment) {
        properties.parsed = parsed;
        properties.raw = _dataset.data[i];
      }
      if (includeOptions) {
        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);
      }
      if (!directUpdate) {
        this.updateElement(point, i, properties, mode);
      }
      prevParsed = parsed;
    }
  };
  _proto8.getMaxOverflow = function getMaxOverflow() {
    var meta = this._cachedMeta;
    var dataset = meta.dataset;
    var border = dataset.options && dataset.options.borderWidth || 0;
    var data = meta.data || [];
    if (!data.length) {
      return border;
    }
    var firstPoint = data[0].size(this.resolveDataElementOptions(0));
    var lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));
    return Math.max(border, firstPoint, lastPoint) / 2;
  };
  _proto8.draw = function draw() {
    var meta = this._cachedMeta;
    meta.dataset.updateControlPoints(this.chart.chartArea, meta.iScale.axis);
    _DatasetController5.prototype.draw.call(this);
  };
  return LineController;
}(DatasetController);
LineController.id = 'line';
LineController.defaults = {
  datasetElementType: 'line',
  dataElementType: 'point',
  showLine: true,
  spanGaps: false
};
LineController.overrides = {
  scales: {
    _index_: {
      type: 'category'
    },
    _value_: {
      type: 'linear'
    }
  }
};
var PolarAreaController = /*#__PURE__*/function (_DatasetController6) {
  function PolarAreaController(chart, datasetIndex) {
    var _this5;
    _this5 = _DatasetController6.call(this, chart, datasetIndex) || this;
    _this5.innerRadius = undefined;
    _this5.outerRadius = undefined;
    return _this5;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(PolarAreaController, _DatasetController6);
  var _proto9 = PolarAreaController.prototype;
  _proto9.getLabelAndValue = function getLabelAndValue(index) {
    var meta = this._cachedMeta;
    var chart = this.chart;
    var labels = chart.data.labels || [];
    var value = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["o"])(meta._parsed[index].r, chart.options.locale);
    return {
      label: labels[index] || '',
      value: value
    };
  };
  _proto9.parseObjectData = function parseObjectData(meta, data, start, count) {
    return _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["y"].bind(this)(meta, data, start, count);
  };
  _proto9.update = function update(mode) {
    var arcs = this._cachedMeta.data;
    this._updateRadius();
    this.updateElements(arcs, 0, arcs.length, mode);
  };
  _proto9.getMinMax = function getMinMax() {
    var _this6 = this;
    var meta = this._cachedMeta;
    var range = {
      min: Number.POSITIVE_INFINITY,
      max: Number.NEGATIVE_INFINITY
    };
    meta.data.forEach(function (element, index) {
      var parsed = _this6.getParsed(index).r;
      if (!isNaN(parsed) && _this6.chart.getDataVisibility(index)) {
        if (parsed < range.min) {
          range.min = parsed;
        }
        if (parsed > range.max) {
          range.max = parsed;
        }
      }
    });
    return range;
  };
  _proto9._updateRadius = function _updateRadius() {
    var chart = this.chart;
    var chartArea = chart.chartArea;
    var opts = chart.options;
    var minSize = Math.min(chartArea.right - chartArea.left, chartArea.bottom - chartArea.top);
    var outerRadius = Math.max(minSize / 2, 0);
    var innerRadius = Math.max(opts.cutoutPercentage ? outerRadius / 100 * opts.cutoutPercentage : 1, 0);
    var radiusLength = (outerRadius - innerRadius) / chart.getVisibleDatasetCount();
    this.outerRadius = outerRadius - radiusLength * this.index;
    this.innerRadius = this.outerRadius - radiusLength;
  };
  _proto9.updateElements = function updateElements(arcs, start, count, mode) {
    var reset = mode === 'reset';
    var chart = this.chart;
    var opts = chart.options;
    var animationOpts = opts.animation;
    var scale = this._cachedMeta.rScale;
    var centerX = scale.xCenter;
    var centerY = scale.yCenter;
    var datasetStartAngle = scale.getIndexAngle(0) - 0.5 * _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["P"];
    var angle = datasetStartAngle;
    var i;
    var defaultAngle = 360 / this.countVisibleElements();
    for (i = 0; i < start; ++i) {
      angle += this._computeAngle(i, mode, defaultAngle);
    }
    for (i = start; i < start + count; i++) {
      var arc = arcs[i];
      var startAngle = angle;
      var endAngle = angle + this._computeAngle(i, mode, defaultAngle);
      var outerRadius = chart.getDataVisibility(i) ? scale.getDistanceFromCenterForValue(this.getParsed(i).r) : 0;
      angle = endAngle;
      if (reset) {
        if (animationOpts.animateScale) {
          outerRadius = 0;
        }
        if (animationOpts.animateRotate) {
          startAngle = endAngle = datasetStartAngle;
        }
      }
      var properties = {
        x: centerX,
        y: centerY,
        innerRadius: 0,
        outerRadius: outerRadius,
        startAngle: startAngle,
        endAngle: endAngle,
        options: this.resolveDataElementOptions(i, arc.active ? 'active' : mode)
      };
      this.updateElement(arc, i, properties, mode);
    }
  };
  _proto9.countVisibleElements = function countVisibleElements() {
    var _this7 = this;
    var meta = this._cachedMeta;
    var count = 0;
    meta.data.forEach(function (element, index) {
      if (!isNaN(_this7.getParsed(index).r) && _this7.chart.getDataVisibility(index)) {
        count++;
      }
    });
    return count;
  };
  _proto9._computeAngle = function _computeAngle(index, mode, defaultAngle) {
    return this.chart.getDataVisibility(index) ? Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["t"])(this.resolveDataElementOptions(index, mode).angle || defaultAngle) : 0;
  };
  return PolarAreaController;
}(DatasetController);
PolarAreaController.id = 'polarArea';
PolarAreaController.defaults = {
  dataElementType: 'arc',
  animation: {
    animateRotate: true,
    animateScale: true
  },
  animations: {
    numbers: {
      type: 'number',
      properties: ['x', 'y', 'startAngle', 'endAngle', 'innerRadius', 'outerRadius']
    }
  },
  indexAxis: 'r',
  startAngle: 0
};
PolarAreaController.overrides = {
  aspectRatio: 1,
  plugins: {
    legend: {
      labels: {
        generateLabels: function generateLabels(chart) {
          var data = chart.data;
          if (data.labels.length && data.datasets.length) {
            var _chart$legend$options3 = chart.legend.options.labels,
              pointStyle = _chart$legend$options3.pointStyle,
              color = _chart$legend$options3.color;
            return data.labels.map(function (label, i) {
              var meta = chart.getDatasetMeta(0);
              var style = meta.controller.getStyle(i);
              return {
                text: label,
                fillStyle: style.backgroundColor,
                strokeStyle: style.borderColor,
                fontColor: color,
                lineWidth: style.borderWidth,
                pointStyle: pointStyle,
                hidden: !chart.getDataVisibility(i),
                index: i
              };
            });
          }
          return [];
        }
      },
      onClick: function onClick(e, legendItem, legend) {
        legend.chart.toggleDataVisibility(legendItem.index);
        legend.chart.update();
      }
    }
  },
  scales: {
    r: {
      type: 'radialLinear',
      angleLines: {
        display: false
      },
      beginAtZero: true,
      grid: {
        circular: true
      },
      pointLabels: {
        display: false
      },
      startAngle: 0
    }
  }
};
var PieController = /*#__PURE__*/function (_DoughnutController2) {
  function PieController() {
    return _DoughnutController2.apply(this, arguments) || this;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(PieController, _DoughnutController2);
  return PieController;
}(DoughnutController);
PieController.id = 'pie';
PieController.defaults = {
  cutout: 0,
  rotation: 0,
  circumference: 360,
  radius: '100%'
};
var RadarController = /*#__PURE__*/function (_DatasetController7) {
  function RadarController() {
    return _DatasetController7.apply(this, arguments) || this;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(RadarController, _DatasetController7);
  var _proto10 = RadarController.prototype;
  _proto10.getLabelAndValue = function getLabelAndValue(index) {
    var vScale = this._cachedMeta.vScale;
    var parsed = this.getParsed(index);
    return {
      label: vScale.getLabels()[index],
      value: '' + vScale.getLabelForValue(parsed[vScale.axis])
    };
  };
  _proto10.parseObjectData = function parseObjectData(meta, data, start, count) {
    return _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["y"].bind(this)(meta, data, start, count);
  };
  _proto10.update = function update(mode) {
    var meta = this._cachedMeta;
    var line = meta.dataset;
    var points = meta.data || [];
    var labels = meta.iScale.getLabels();
    line.points = points;
    if (mode !== 'resize') {
      var options = this.resolveDatasetElementOptions(mode);
      if (!this.options.showLine) {
        options.borderWidth = 0;
      }
      var properties = {
        _loop: true,
        _fullLoop: labels.length === points.length,
        options: options
      };
      this.updateElement(line, undefined, properties, mode);
    }
    this.updateElements(points, 0, points.length, mode);
  };
  _proto10.updateElements = function updateElements(points, start, count, mode) {
    var scale = this._cachedMeta.rScale;
    var reset = mode === 'reset';
    for (var i = start; i < start + count; i++) {
      var point = points[i];
      var options = this.resolveDataElementOptions(i, point.active ? 'active' : mode);
      var pointPosition = scale.getPointPositionForValue(i, this.getParsed(i).r);
      var x = reset ? scale.xCenter : pointPosition.x;
      var y = reset ? scale.yCenter : pointPosition.y;
      var properties = {
        x: x,
        y: y,
        angle: pointPosition.angle,
        skip: isNaN(x) || isNaN(y),
        options: options
      };
      this.updateElement(point, i, properties, mode);
    }
  };
  return RadarController;
}(DatasetController);
RadarController.id = 'radar';
RadarController.defaults = {
  datasetElementType: 'line',
  dataElementType: 'point',
  indexAxis: 'r',
  showLine: true,
  elements: {
    line: {
      fill: 'start'
    }
  }
};
RadarController.overrides = {
  aspectRatio: 1,
  scales: {
    r: {
      type: 'radialLinear'
    }
  }
};
var ScatterController = /*#__PURE__*/function (_DatasetController8) {
  function ScatterController() {
    return _DatasetController8.apply(this, arguments) || this;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(ScatterController, _DatasetController8);
  var _proto11 = ScatterController.prototype;
  _proto11.getLabelAndValue = function getLabelAndValue(index) {
    var meta = this._cachedMeta;
    var labels = this.chart.data.labels || [];
    var xScale = meta.xScale,
      yScale = meta.yScale;
    var parsed = this.getParsed(index);
    var x = xScale.getLabelForValue(parsed.x);
    var y = yScale.getLabelForValue(parsed.y);
    return {
      label: labels[index] || '',
      value: '(' + x + ', ' + y + ')'
    };
  };
  _proto11.update = function update(mode) {
    var meta = this._cachedMeta;
    var _meta$data2 = meta.data,
      points = _meta$data2 === void 0 ? [] : _meta$data2;
    var animationsDisabled = this.chart._animationsDisabled;
    var _getStartAndCountOfVi2 = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["q"])(meta, points, animationsDisabled),
      start = _getStartAndCountOfVi2.start,
      count = _getStartAndCountOfVi2.count;
    this._drawStart = start;
    this._drawCount = count;
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["w"])(meta)) {
      start = 0;
      count = points.length;
    }
    if (this.options.showLine) {
      if (!this.datasetElementType) {
        this.addElements();
      }
      var line = meta.dataset,
        _dataset = meta._dataset;
      line._chart = this.chart;
      line._datasetIndex = this.index;
      line._decimated = !!_dataset._decimated;
      line.points = points;
      var options = this.resolveDatasetElementOptions(mode);
      options.segment = this.options.segment;
      this.updateElement(line, undefined, {
        animated: !animationsDisabled,
        options: options
      }, mode);
    } else if (this.datasetElementType) {
      delete meta.dataset;
      this.datasetElementType = false;
    }
    this.updateElements(points, start, count, mode);
  };
  _proto11.addElements = function addElements() {
    var showLine = this.options.showLine;
    if (!this.datasetElementType && showLine) {
      this.datasetElementType = this.chart.registry.getElement('line');
    }
    _DatasetController8.prototype.addElements.call(this);
  };
  _proto11.updateElements = function updateElements(points, start, count, mode) {
    var reset = mode === 'reset';
    var _this$_cachedMeta4 = this._cachedMeta,
      iScale = _this$_cachedMeta4.iScale,
      vScale = _this$_cachedMeta4.vScale,
      _stacked = _this$_cachedMeta4._stacked,
      _dataset = _this$_cachedMeta4._dataset;
    var firstOpts = this.resolveDataElementOptions(start, mode);
    var sharedOptions = this.getSharedOptions(firstOpts);
    var includeOptions = this.includeOptions(mode, sharedOptions);
    var iAxis = iScale.axis;
    var vAxis = vScale.axis;
    var _this$options3 = this.options,
      spanGaps = _this$options3.spanGaps,
      segment = _this$options3.segment;
    var maxGapLength = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["x"])(spanGaps) ? spanGaps : Number.POSITIVE_INFINITY;
    var directUpdate = this.chart._animationsDisabled || reset || mode === 'none';
    var prevParsed = start > 0 && this.getParsed(start - 1);
    for (var i = start; i < start + count; ++i) {
      var point = points[i];
      var parsed = this.getParsed(i);
      var properties = directUpdate ? point : {};
      var nullData = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(parsed[vAxis]);
      var iPixel = properties[iAxis] = iScale.getPixelForValue(parsed[iAxis], i);
      var vPixel = properties[vAxis] = reset || nullData ? vScale.getBasePixel() : vScale.getPixelForValue(_stacked ? this.applyStack(vScale, parsed, _stacked) : parsed[vAxis], i);
      properties.skip = isNaN(iPixel) || isNaN(vPixel) || nullData;
      properties.stop = i > 0 && Math.abs(parsed[iAxis] - prevParsed[iAxis]) > maxGapLength;
      if (segment) {
        properties.parsed = parsed;
        properties.raw = _dataset.data[i];
      }
      if (includeOptions) {
        properties.options = sharedOptions || this.resolveDataElementOptions(i, point.active ? 'active' : mode);
      }
      if (!directUpdate) {
        this.updateElement(point, i, properties, mode);
      }
      prevParsed = parsed;
    }
    this.updateSharedOptions(sharedOptions, mode, firstOpts);
  };
  _proto11.getMaxOverflow = function getMaxOverflow() {
    var meta = this._cachedMeta;
    var data = meta.data || [];
    if (!this.options.showLine) {
      var max = 0;
      for (var i = data.length - 1; i >= 0; --i) {
        max = Math.max(max, data[i].size(this.resolveDataElementOptions(i)) / 2);
      }
      return max > 0 && max;
    }
    var dataset = meta.dataset;
    var border = dataset.options && dataset.options.borderWidth || 0;
    if (!data.length) {
      return border;
    }
    var firstPoint = data[0].size(this.resolveDataElementOptions(0));
    var lastPoint = data[data.length - 1].size(this.resolveDataElementOptions(data.length - 1));
    return Math.max(border, firstPoint, lastPoint) / 2;
  };
  return ScatterController;
}(DatasetController);
ScatterController.id = 'scatter';
ScatterController.defaults = {
  datasetElementType: false,
  dataElementType: 'point',
  showLine: false,
  fill: false
};
ScatterController.overrides = {
  interaction: {
    mode: 'point'
  },
  scales: {
    x: {
      type: 'linear'
    },
    y: {
      type: 'linear'
    }
  }
};
var controllers = /*#__PURE__*/Object.freeze({
  __proto__: null,
  BarController: BarController,
  BubbleController: BubbleController,
  DoughnutController: DoughnutController,
  LineController: LineController,
  PieController: PieController,
  PolarAreaController: PolarAreaController,
  RadarController: RadarController,
  ScatterController: ScatterController
});

/**
 * @namespace Chart._adapters
 * @since 2.8.0
 * @private
 */
function _abstract() {
  throw new Error('This method is not implemented: Check that a complete date adapter is provided.');
}
/**
 * Date adapter (current used by the time scale)
 * @namespace Chart._adapters._date
 * @memberof Chart._adapters
 * @private
 */
var DateAdapterBase = /*#__PURE__*/function () {
  function DateAdapterBase(options) {
    this.options = void 0;
    this.options = options || {};
  }
  // eslint-disable-next-line @typescript-eslint/no-empty-function
  /**
  * Override default date adapter methods.
  * Accepts type parameter to define options type.
  * @example
  * Chart._adapters._date.override<{myAdapterOption: string}>({
  *   init() {
  *     console.log(this.options.myAdapterOption);
  *   }
  * })
  */
  DateAdapterBase.override = function override(members) {
    Object.assign(DateAdapterBase.prototype, members);
  };
  var _proto12 = DateAdapterBase.prototype;
  _proto12.init = function init() {};
  _proto12.formats = function formats() {
    return _abstract();
  };
  _proto12.parse = function parse() {
    return _abstract();
  };
  _proto12.format = function format() {
    return _abstract();
  };
  _proto12.add = function add() {
    return _abstract();
  };
  _proto12.diff = function diff() {
    return _abstract();
  };
  _proto12.startOf = function startOf() {
    return _abstract();
  };
  _proto12.endOf = function endOf() {
    return _abstract();
  };
  return DateAdapterBase;
}();
var adapters = {
  _date: DateAdapterBase
};
function binarySearch(metaset, axis, value, intersect) {
  var controller = metaset.controller,
    data = metaset.data,
    _sorted = metaset._sorted;
  var iScale = controller._cachedMeta.iScale;
  if (iScale && axis === iScale.axis && axis !== 'r' && _sorted && data.length) {
    var lookupMethod = iScale._reversePixels ? _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["A"] : _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["B"];
    if (!intersect) {
      return lookupMethod(data, axis, value);
    } else if (controller._sharedOptions) {
      var el = data[0];
      var range = typeof el.getRange === 'function' && el.getRange(axis);
      if (range) {
        var start = lookupMethod(data, axis, value - range);
        var end = lookupMethod(data, axis, value + range);
        return {
          lo: start.lo,
          hi: end.hi
        };
      }
    }
  }
  return {
    lo: 0,
    hi: data.length - 1
  };
}
function evaluateInteractionItems(chart, axis, position, handler, intersect) {
  var metasets = chart.getSortedVisibleDatasetMetas();
  var value = position[axis];
  for (var i = 0, ilen = metasets.length; i < ilen; ++i) {
    var _metasets$i = metasets[i],
      _index2 = _metasets$i.index,
      data = _metasets$i.data;
    var _binarySearch = binarySearch(metasets[i], axis, value, intersect),
      lo = _binarySearch.lo,
      hi = _binarySearch.hi;
    for (var j = lo; j <= hi; ++j) {
      var element = data[j];
      if (!element.skip) {
        handler(element, _index2, j);
      }
    }
  }
}
function getDistanceMetricForAxis(axis) {
  var useX = axis.indexOf('x') !== -1;
  var useY = axis.indexOf('y') !== -1;
  return function (pt1, pt2) {
    var deltaX = useX ? Math.abs(pt1.x - pt2.x) : 0;
    var deltaY = useY ? Math.abs(pt1.y - pt2.y) : 0;
    return Math.sqrt(Math.pow(deltaX, 2) + Math.pow(deltaY, 2));
  };
}
function getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) {
  var items = [];
  if (!includeInvisible && !chart.isPointInArea(position)) {
    return items;
  }
  var evaluationFunc = function evaluationFunc(element, datasetIndex, index) {
    if (!includeInvisible && !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["C"])(element, chart.chartArea, 0)) {
      return;
    }
    if (element.inRange(position.x, position.y, useFinalPosition)) {
      items.push({
        element: element,
        datasetIndex: datasetIndex,
        index: index
      });
    }
  };
  evaluateInteractionItems(chart, axis, position, evaluationFunc, true);
  return items;
}
function getNearestRadialItems(chart, position, axis, useFinalPosition) {
  var items = [];
  function evaluationFunc(element, datasetIndex, index) {
    var _element$getProps = element.getProps(['startAngle', 'endAngle'], useFinalPosition),
      startAngle = _element$getProps.startAngle,
      endAngle = _element$getProps.endAngle;
    var _getAngleFromPoint = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["D"])(element, {
        x: position.x,
        y: position.y
      }),
      angle = _getAngleFromPoint.angle;
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["p"])(angle, startAngle, endAngle)) {
      items.push({
        element: element,
        datasetIndex: datasetIndex,
        index: index
      });
    }
  }
  evaluateInteractionItems(chart, axis, position, evaluationFunc);
  return items;
}
function getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {
  var items = [];
  var distanceMetric = getDistanceMetricForAxis(axis);
  var minDistance = Number.POSITIVE_INFINITY;
  function evaluationFunc(element, datasetIndex, index) {
    var inRange = element.inRange(position.x, position.y, useFinalPosition);
    if (intersect && !inRange) {
      return;
    }
    var center = element.getCenterPoint(useFinalPosition);
    var pointInArea = !!includeInvisible || chart.isPointInArea(center);
    if (!pointInArea && !inRange) {
      return;
    }
    var distance = distanceMetric(position, center);
    if (distance < minDistance) {
      items = [{
        element: element,
        datasetIndex: datasetIndex,
        index: index
      }];
      minDistance = distance;
    } else if (distance === minDistance) {
      items.push({
        element: element,
        datasetIndex: datasetIndex,
        index: index
      });
    }
  }
  evaluateInteractionItems(chart, axis, position, evaluationFunc);
  return items;
}
function getNearestItems(chart, position, axis, intersect, useFinalPosition, includeInvisible) {
  if (!includeInvisible && !chart.isPointInArea(position)) {
    return [];
  }
  return axis === 'r' && !intersect ? getNearestRadialItems(chart, position, axis, useFinalPosition) : getNearestCartesianItems(chart, position, axis, intersect, useFinalPosition, includeInvisible);
}
function getAxisItems(chart, position, axis, intersect, useFinalPosition) {
  var items = [];
  var rangeMethod = axis === 'x' ? 'inXRange' : 'inYRange';
  var intersectsItem = false;
  evaluateInteractionItems(chart, axis, position, function (element, datasetIndex, index) {
    if (element[rangeMethod] && element[rangeMethod](position[axis], useFinalPosition)) {
      items.push({
        element: element,
        datasetIndex: datasetIndex,
        index: index
      });
      intersectsItem = intersectsItem || element.inRange(position.x, position.y, useFinalPosition);
    }
  });
  if (intersect && !intersectsItem) {
    return [];
  }
  return items;
}
var Interaction = {
  evaluateInteractionItems: evaluateInteractionItems,
  modes: {
    index: function index(chart, e, options, useFinalPosition) {
      var position = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["z"])(e, chart);
      var axis = options.axis || 'x';
      var includeInvisible = options.includeInvisible || false;
      var items = options.intersect ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);
      var elements = [];
      if (!items.length) {
        return [];
      }
      chart.getSortedVisibleDatasetMetas().forEach(function (meta) {
        var index = items[0].index;
        var element = meta.data[index];
        if (element && !element.skip) {
          elements.push({
            element: element,
            datasetIndex: meta.index,
            index: index
          });
        }
      });
      return elements;
    },
    dataset: function dataset(chart, e, options, useFinalPosition) {
      var position = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["z"])(e, chart);
      var axis = options.axis || 'xy';
      var includeInvisible = options.includeInvisible || false;
      var items = options.intersect ? getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible) : getNearestItems(chart, position, axis, false, useFinalPosition, includeInvisible);
      if (items.length > 0) {
        var datasetIndex = items[0].datasetIndex;
        var data = chart.getDatasetMeta(datasetIndex).data;
        items = [];
        for (var i = 0; i < data.length; ++i) {
          items.push({
            element: data[i],
            datasetIndex: datasetIndex,
            index: i
          });
        }
      }
      return items;
    },
    point: function point(chart, e, options, useFinalPosition) {
      var position = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["z"])(e, chart);
      var axis = options.axis || 'xy';
      var includeInvisible = options.includeInvisible || false;
      return getIntersectItems(chart, position, axis, useFinalPosition, includeInvisible);
    },
    nearest: function nearest(chart, e, options, useFinalPosition) {
      var position = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["z"])(e, chart);
      var axis = options.axis || 'xy';
      var includeInvisible = options.includeInvisible || false;
      return getNearestItems(chart, position, axis, options.intersect, useFinalPosition, includeInvisible);
    },
    x: function x(chart, e, options, useFinalPosition) {
      var position = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["z"])(e, chart);
      return getAxisItems(chart, position, 'x', options.intersect, useFinalPosition);
    },
    y: function y(chart, e, options, useFinalPosition) {
      var position = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["z"])(e, chart);
      return getAxisItems(chart, position, 'y', options.intersect, useFinalPosition);
    }
  }
};
var STATIC_POSITIONS = ['left', 'top', 'right', 'bottom'];
function filterByPosition(array, position) {
  return array.filter(function (v) {
    return v.pos === position;
  });
}
function filterDynamicPositionByAxis(array, axis) {
  return array.filter(function (v) {
    return STATIC_POSITIONS.indexOf(v.pos) === -1 && v.box.axis === axis;
  });
}
function sortByWeight(array, reverse) {
  return array.sort(function (a, b) {
    var v0 = reverse ? b : a;
    var v1 = reverse ? a : b;
    return v0.weight === v1.weight ? v0.index - v1.index : v0.weight - v1.weight;
  });
}
function wrapBoxes(boxes) {
  var layoutBoxes = [];
  var i, ilen, box, pos, stack, stackWeight;
  for (i = 0, ilen = (boxes || []).length; i < ilen; ++i) {
    box = boxes[i];
    var _box = box;
    pos = _box.position;
    var _box$options = _box.options;
    stack = _box$options.stack;
    var _box$options$stackWei = _box$options.stackWeight;
    stackWeight = _box$options$stackWei === void 0 ? 1 : _box$options$stackWei;
    layoutBoxes.push({
      index: i,
      box: box,
      pos: pos,
      horizontal: box.isHorizontal(),
      weight: box.weight,
      stack: stack && pos + stack,
      stackWeight: stackWeight
    });
  }
  return layoutBoxes;
}
function buildStacks(layouts) {
  var stacks = {};
  for (var _iterator5 = _createForOfIteratorHelperLoose(layouts), _step5; !(_step5 = _iterator5()).done;) {
    var wrap = _step5.value;
    var stack = wrap.stack,
      pos = wrap.pos,
      stackWeight = wrap.stackWeight;
    if (!stack || !STATIC_POSITIONS.includes(pos)) {
      continue;
    }
    var _stack = stacks[stack] || (stacks[stack] = {
      count: 0,
      placed: 0,
      weight: 0,
      size: 0
    });
    _stack.count++;
    _stack.weight += stackWeight;
  }
  return stacks;
}
function setLayoutDims(layouts, params) {
  var stacks = buildStacks(layouts);
  var vBoxMaxWidth = params.vBoxMaxWidth,
    hBoxMaxHeight = params.hBoxMaxHeight;
  var i, ilen, layout;
  for (i = 0, ilen = layouts.length; i < ilen; ++i) {
    layout = layouts[i];
    var fullSize = layout.box.fullSize;
    var stack = stacks[layout.stack];
    var factor = stack && layout.stackWeight / stack.weight;
    if (layout.horizontal) {
      layout.width = factor ? factor * vBoxMaxWidth : fullSize && params.availableWidth;
      layout.height = hBoxMaxHeight;
    } else {
      layout.width = vBoxMaxWidth;
      layout.height = factor ? factor * hBoxMaxHeight : fullSize && params.availableHeight;
    }
  }
  return stacks;
}
function buildLayoutBoxes(boxes) {
  var layoutBoxes = wrapBoxes(boxes);
  var fullSize = sortByWeight(layoutBoxes.filter(function (wrap) {
    return wrap.box.fullSize;
  }), true);
  var left = sortByWeight(filterByPosition(layoutBoxes, 'left'), true);
  var right = sortByWeight(filterByPosition(layoutBoxes, 'right'));
  var top = sortByWeight(filterByPosition(layoutBoxes, 'top'), true);
  var bottom = sortByWeight(filterByPosition(layoutBoxes, 'bottom'));
  var centerHorizontal = filterDynamicPositionByAxis(layoutBoxes, 'x');
  var centerVertical = filterDynamicPositionByAxis(layoutBoxes, 'y');
  return {
    fullSize: fullSize,
    leftAndTop: left.concat(top),
    rightAndBottom: right.concat(centerVertical).concat(bottom).concat(centerHorizontal),
    chartArea: filterByPosition(layoutBoxes, 'chartArea'),
    vertical: left.concat(right).concat(centerVertical),
    horizontal: top.concat(bottom).concat(centerHorizontal)
  };
}
function getCombinedMax(maxPadding, chartArea, a, b) {
  return Math.max(maxPadding[a], chartArea[a]) + Math.max(maxPadding[b], chartArea[b]);
}
function updateMaxPadding(maxPadding, boxPadding) {
  maxPadding.top = Math.max(maxPadding.top, boxPadding.top);
  maxPadding.left = Math.max(maxPadding.left, boxPadding.left);
  maxPadding.bottom = Math.max(maxPadding.bottom, boxPadding.bottom);
  maxPadding.right = Math.max(maxPadding.right, boxPadding.right);
}
function updateDims(chartArea, params, layout, stacks) {
  var pos = layout.pos,
    box = layout.box;
  var maxPadding = chartArea.maxPadding;
  if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(pos)) {
    if (layout.size) {
      chartArea[pos] -= layout.size;
    }
    var stack = stacks[layout.stack] || {
      size: 0,
      count: 1
    };
    stack.size = Math.max(stack.size, layout.horizontal ? box.height : box.width);
    layout.size = stack.size / stack.count;
    chartArea[pos] += layout.size;
  }
  if (box.getPadding) {
    updateMaxPadding(maxPadding, box.getPadding());
  }
  var newWidth = Math.max(0, params.outerWidth - getCombinedMax(maxPadding, chartArea, 'left', 'right'));
  var newHeight = Math.max(0, params.outerHeight - getCombinedMax(maxPadding, chartArea, 'top', 'bottom'));
  var widthChanged = newWidth !== chartArea.w;
  var heightChanged = newHeight !== chartArea.h;
  chartArea.w = newWidth;
  chartArea.h = newHeight;
  return layout.horizontal ? {
    same: widthChanged,
    other: heightChanged
  } : {
    same: heightChanged,
    other: widthChanged
  };
}
function handleMaxPadding(chartArea) {
  var maxPadding = chartArea.maxPadding;
  function updatePos(pos) {
    var change = Math.max(maxPadding[pos] - chartArea[pos], 0);
    chartArea[pos] += change;
    return change;
  }
  chartArea.y += updatePos('top');
  chartArea.x += updatePos('left');
  updatePos('right');
  updatePos('bottom');
}
function getMargins(horizontal, chartArea) {
  var maxPadding = chartArea.maxPadding;
  function marginForPositions(positions) {
    var margin = {
      left: 0,
      top: 0,
      right: 0,
      bottom: 0
    };
    positions.forEach(function (pos) {
      margin[pos] = Math.max(chartArea[pos], maxPadding[pos]);
    });
    return margin;
  }
  return horizontal ? marginForPositions(['left', 'right']) : marginForPositions(['top', 'bottom']);
}
function fitBoxes(boxes, chartArea, params, stacks) {
  var refitBoxes = [];
  var i, ilen, layout, box, refit, changed;
  for (i = 0, ilen = boxes.length, refit = 0; i < ilen; ++i) {
    layout = boxes[i];
    box = layout.box;
    box.update(layout.width || chartArea.w, layout.height || chartArea.h, getMargins(layout.horizontal, chartArea));
    var _updateDims = updateDims(chartArea, params, layout, stacks),
      same = _updateDims.same,
      other = _updateDims.other;
    refit |= same && refitBoxes.length;
    changed = changed || other;
    if (!box.fullSize) {
      refitBoxes.push(layout);
    }
  }
  return refit && fitBoxes(refitBoxes, chartArea, params, stacks) || changed;
}
function setBoxDims(box, left, top, width, height) {
  box.top = top;
  box.left = left;
  box.right = left + width;
  box.bottom = top + height;
  box.width = width;
  box.height = height;
}
function placeBoxes(boxes, chartArea, params, stacks) {
  var userPadding = params.padding;
  var x = chartArea.x,
    y = chartArea.y;
  for (var _iterator6 = _createForOfIteratorHelperLoose(boxes), _step6; !(_step6 = _iterator6()).done;) {
    var layout = _step6.value;
    var box = layout.box;
    var stack = stacks[layout.stack] || {
      count: 1,
      placed: 0,
      weight: 1
    };
    var weight = layout.stackWeight / stack.weight || 1;
    if (layout.horizontal) {
      var width = chartArea.w * weight;
      var height = stack.size || box.height;
      if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["h"])(stack.start)) {
        y = stack.start;
      }
      if (box.fullSize) {
        setBoxDims(box, userPadding.left, y, params.outerWidth - userPadding.right - userPadding.left, height);
      } else {
        setBoxDims(box, chartArea.left + stack.placed, y, width, height);
      }
      stack.start = y;
      stack.placed += width;
      y = box.bottom;
    } else {
      var _height = chartArea.h * weight;
      var _width = stack.size || box.width;
      if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["h"])(stack.start)) {
        x = stack.start;
      }
      if (box.fullSize) {
        setBoxDims(box, x, userPadding.top, _width, params.outerHeight - userPadding.bottom - userPadding.top);
      } else {
        setBoxDims(box, x, chartArea.top + stack.placed, _width, _height);
      }
      stack.start = x;
      stack.placed += _height;
      x = box.right;
    }
  }
  chartArea.x = x;
  chartArea.y = y;
}
var layouts = {
  addBox: function addBox(chart, item) {
    if (!chart.boxes) {
      chart.boxes = [];
    }
    item.fullSize = item.fullSize || false;
    item.position = item.position || 'top';
    item.weight = item.weight || 0;
    item._layers = item._layers || function () {
      return [{
        z: 0,
        draw: function draw(chartArea) {
          item.draw(chartArea);
        }
      }];
    };
    chart.boxes.push(item);
  },
  removeBox: function removeBox(chart, layoutItem) {
    var index = chart.boxes ? chart.boxes.indexOf(layoutItem) : -1;
    if (index !== -1) {
      chart.boxes.splice(index, 1);
    }
  },
  configure: function configure(chart, item, options) {
    item.fullSize = options.fullSize;
    item.position = options.position;
    item.weight = options.weight;
  },
  update: function update(chart, width, height, minPadding) {
    if (!chart) {
      return;
    }
    var padding = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(chart.options.layout.padding);
    var availableWidth = Math.max(width - padding.width, 0);
    var availableHeight = Math.max(height - padding.height, 0);
    var boxes = buildLayoutBoxes(chart.boxes);
    var verticalBoxes = boxes.vertical;
    var horizontalBoxes = boxes.horizontal;
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(chart.boxes, function (box) {
      if (typeof box.beforeLayout === 'function') {
        box.beforeLayout();
      }
    });
    var visibleVerticalBoxCount = verticalBoxes.reduce(function (total, wrap) {
      return wrap.box.options && wrap.box.options.display === false ? total : total + 1;
    }, 0) || 1;
    var params = Object.freeze({
      outerWidth: width,
      outerHeight: height,
      padding: padding,
      availableWidth: availableWidth,
      availableHeight: availableHeight,
      vBoxMaxWidth: availableWidth / 2 / visibleVerticalBoxCount,
      hBoxMaxHeight: availableHeight / 2
    });
    var maxPadding = Object.assign({}, padding);
    updateMaxPadding(maxPadding, Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(minPadding));
    var chartArea = Object.assign({
      maxPadding: maxPadding,
      w: availableWidth,
      h: availableHeight,
      x: padding.left,
      y: padding.top
    }, padding);
    var stacks = setLayoutDims(verticalBoxes.concat(horizontalBoxes), params);
    fitBoxes(boxes.fullSize, chartArea, params, stacks);
    fitBoxes(verticalBoxes, chartArea, params, stacks);
    if (fitBoxes(horizontalBoxes, chartArea, params, stacks)) {
      fitBoxes(verticalBoxes, chartArea, params, stacks);
    }
    handleMaxPadding(chartArea);
    placeBoxes(boxes.leftAndTop, chartArea, params, stacks);
    chartArea.x += chartArea.w;
    chartArea.y += chartArea.h;
    placeBoxes(boxes.rightAndBottom, chartArea, params, stacks);
    chart.chartArea = {
      left: chartArea.left,
      top: chartArea.top,
      right: chartArea.left + chartArea.w,
      bottom: chartArea.top + chartArea.h,
      height: chartArea.h,
      width: chartArea.w
    };
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(boxes.chartArea, function (layout) {
      var box = layout.box;
      Object.assign(box, chart.chartArea);
      box.update(chartArea.w, chartArea.h, {
        left: 0,
        top: 0,
        right: 0,
        bottom: 0
      });
    });
  }
};
var BasePlatform = /*#__PURE__*/function () {
  function BasePlatform() {}
  var _proto13 = BasePlatform.prototype;
  _proto13.acquireContext = function acquireContext(canvas, aspectRatio) {};
  _proto13.releaseContext = function releaseContext(context) {
    return false;
  };
  _proto13.addEventListener = function addEventListener(chart, type, listener) {};
  _proto13.removeEventListener = function removeEventListener(chart, type, listener) {};
  _proto13.getDevicePixelRatio = function getDevicePixelRatio() {
    return 1;
  };
  _proto13.getMaximumSize = function getMaximumSize(element, width, height, aspectRatio) {
    width = Math.max(0, width || element.width);
    height = height || element.height;
    return {
      width: width,
      height: Math.max(0, aspectRatio ? Math.floor(width / aspectRatio) : height)
    };
  };
  _proto13.isAttached = function isAttached(canvas) {
    return true;
  };
  _proto13.updateConfig = function updateConfig(config) {};
  return BasePlatform;
}();
var BasicPlatform = /*#__PURE__*/function (_BasePlatform) {
  function BasicPlatform() {
    return _BasePlatform.apply(this, arguments) || this;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(BasicPlatform, _BasePlatform);
  var _proto14 = BasicPlatform.prototype;
  _proto14.acquireContext = function acquireContext(item) {
    return item && item.getContext && item.getContext('2d') || null;
  };
  _proto14.updateConfig = function updateConfig(config) {
    config.options.animation = false;
  };
  return BasicPlatform;
}(BasePlatform);
var EXPANDO_KEY = '$chartjs';
var EVENT_TYPES = {
  touchstart: 'mousedown',
  touchmove: 'mousemove',
  touchend: 'mouseup',
  pointerenter: 'mouseenter',
  pointerdown: 'mousedown',
  pointermove: 'mousemove',
  pointerup: 'mouseup',
  pointerleave: 'mouseout',
  pointerout: 'mouseout'
};
var isNullOrEmpty = function isNullOrEmpty(value) {
  return value === null || value === '';
};
function initCanvas(canvas, aspectRatio) {
  var style = canvas.style;
  var renderHeight = canvas.getAttribute('height');
  var renderWidth = canvas.getAttribute('width');
  canvas[EXPANDO_KEY] = {
    initial: {
      height: renderHeight,
      width: renderWidth,
      style: {
        display: style.display,
        height: style.height,
        width: style.width
      }
    }
  };
  style.display = style.display || 'block';
  style.boxSizing = style.boxSizing || 'border-box';
  if (isNullOrEmpty(renderWidth)) {
    var displayWidth = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["J"])(canvas, 'width');
    if (displayWidth !== undefined) {
      canvas.width = displayWidth;
    }
  }
  if (isNullOrEmpty(renderHeight)) {
    if (canvas.style.height === '') {
      canvas.height = canvas.width / (aspectRatio || 2);
    } else {
      var displayHeight = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["J"])(canvas, 'height');
      if (displayHeight !== undefined) {
        canvas.height = displayHeight;
      }
    }
  }
  return canvas;
}
var eventListenerOptions = _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["K"] ? {
  passive: true
} : false;
function addListener(node, type, listener) {
  if (node) {
    node.addEventListener(type, listener, eventListenerOptions);
  }
}
function removeListener(chart, type, listener) {
  if (chart && chart.canvas) {
    chart.canvas.removeEventListener(type, listener, eventListenerOptions);
  }
}
function fromNativeEvent(event, chart) {
  var type = EVENT_TYPES[event.type] || event.type;
  var _getRelativePosition = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["z"])(event, chart),
    x = _getRelativePosition.x,
    y = _getRelativePosition.y;
  return {
    type: type,
    chart: chart,
    "native": event,
    x: x !== undefined ? x : null,
    y: y !== undefined ? y : null
  };
}
function nodeListContains(nodeList, canvas) {
  for (var _iterator7 = _createForOfIteratorHelperLoose(nodeList), _step7; !(_step7 = _iterator7()).done;) {
    var node = _step7.value;
    if (node === canvas || node.contains(canvas)) {
      return true;
    }
  }
}
function createAttachObserver(chart, type, listener) {
  var canvas = chart.canvas;
  var observer = new MutationObserver(function (entries) {
    var trigger = false;
    for (var _iterator8 = _createForOfIteratorHelperLoose(entries), _step8; !(_step8 = _iterator8()).done;) {
      var entry = _step8.value;
      trigger = trigger || nodeListContains(entry.addedNodes, canvas);
      trigger = trigger && !nodeListContains(entry.removedNodes, canvas);
    }
    if (trigger) {
      listener();
    }
  });
  observer.observe(document, {
    childList: true,
    subtree: true
  });
  return observer;
}
function createDetachObserver(chart, type, listener) {
  var canvas = chart.canvas;
  var observer = new MutationObserver(function (entries) {
    var trigger = false;
    for (var _iterator9 = _createForOfIteratorHelperLoose(entries), _step9; !(_step9 = _iterator9()).done;) {
      var entry = _step9.value;
      trigger = trigger || nodeListContains(entry.removedNodes, canvas);
      trigger = trigger && !nodeListContains(entry.addedNodes, canvas);
    }
    if (trigger) {
      listener();
    }
  });
  observer.observe(document, {
    childList: true,
    subtree: true
  });
  return observer;
}
var drpListeningCharts = new Map();
var oldDevicePixelRatio = 0;
function onWindowResize() {
  var dpr = window.devicePixelRatio;
  if (dpr === oldDevicePixelRatio) {
    return;
  }
  oldDevicePixelRatio = dpr;
  drpListeningCharts.forEach(function (resize, chart) {
    if (chart.currentDevicePixelRatio !== dpr) {
      resize();
    }
  });
}
function listenDevicePixelRatioChanges(chart, resize) {
  if (!drpListeningCharts.size) {
    window.addEventListener('resize', onWindowResize);
  }
  drpListeningCharts.set(chart, resize);
}
function unlistenDevicePixelRatioChanges(chart) {
  drpListeningCharts["delete"](chart);
  if (!drpListeningCharts.size) {
    window.removeEventListener('resize', onWindowResize);
  }
}
function createResizeObserver(chart, type, listener) {
  var canvas = chart.canvas;
  var container = canvas && Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["I"])(canvas);
  if (!container) {
    return;
  }
  var resize = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["L"])(function (width, height) {
    var w = container.clientWidth;
    listener(width, height);
    if (w < container.clientWidth) {
      listener();
    }
  }, window);
  var observer = new ResizeObserver(function (entries) {
    var entry = entries[0];
    var width = entry.contentRect.width;
    var height = entry.contentRect.height;
    if (width === 0 && height === 0) {
      return;
    }
    resize(width, height);
  });
  observer.observe(container);
  listenDevicePixelRatioChanges(chart, resize);
  return observer;
}
function releaseObserver(chart, type, observer) {
  if (observer) {
    observer.disconnect();
  }
  if (type === 'resize') {
    unlistenDevicePixelRatioChanges(chart);
  }
}
function createProxyAndListen(chart, type, listener) {
  var canvas = chart.canvas;
  var proxy = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["L"])(function (event) {
    if (chart.ctx !== null) {
      listener(fromNativeEvent(event, chart));
    }
  }, chart);
  addListener(canvas, type, proxy);
  return proxy;
}
var DomPlatform = /*#__PURE__*/function (_BasePlatform2) {
  function DomPlatform() {
    return _BasePlatform2.apply(this, arguments) || this;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(DomPlatform, _BasePlatform2);
  var _proto15 = DomPlatform.prototype;
  _proto15.acquireContext = function acquireContext(canvas, aspectRatio) {
    var context = canvas && canvas.getContext && canvas.getContext('2d');
    if (context && context.canvas === canvas) {
      initCanvas(canvas, aspectRatio);
      return context;
    }
    return null;
  };
  _proto15.releaseContext = function releaseContext(context) {
    var canvas = context.canvas;
    if (!canvas[EXPANDO_KEY]) {
      return false;
    }
    var initial = canvas[EXPANDO_KEY].initial;
    ['height', 'width'].forEach(function (prop) {
      var value = initial[prop];
      if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(value)) {
        canvas.removeAttribute(prop);
      } else {
        canvas.setAttribute(prop, value);
      }
    });
    var style = initial.style || {};
    Object.keys(style).forEach(function (key) {
      canvas.style[key] = style[key];
    });
    canvas.width = canvas.width;
    delete canvas[EXPANDO_KEY];
    return true;
  };
  _proto15.addEventListener = function addEventListener(chart, type, listener) {
    this.removeEventListener(chart, type);
    var proxies = chart.$proxies || (chart.$proxies = {});
    var handlers = {
      attach: createAttachObserver,
      detach: createDetachObserver,
      resize: createResizeObserver
    };
    var handler = handlers[type] || createProxyAndListen;
    proxies[type] = handler(chart, type, listener);
  };
  _proto15.removeEventListener = function removeEventListener(chart, type) {
    var proxies = chart.$proxies || (chart.$proxies = {});
    var proxy = proxies[type];
    if (!proxy) {
      return;
    }
    var handlers = {
      attach: releaseObserver,
      detach: releaseObserver,
      resize: releaseObserver
    };
    var handler = handlers[type] || removeListener;
    handler(chart, type, proxy);
    proxies[type] = undefined;
  };
  _proto15.getDevicePixelRatio = function getDevicePixelRatio() {
    return window.devicePixelRatio;
  };
  _proto15.getMaximumSize = function getMaximumSize(canvas, width, height, aspectRatio) {
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["G"])(canvas, width, height, aspectRatio);
  };
  _proto15.isAttached = function isAttached(canvas) {
    var container = canvas && Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["I"])(canvas);
    return !!(container && container.isConnected);
  };
  return DomPlatform;
}(BasePlatform);
function _detectPlatform(canvas) {
  if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["M"])() || typeof OffscreenCanvas !== 'undefined' && canvas instanceof OffscreenCanvas) {
    return BasicPlatform;
  }
  return DomPlatform;
}
var Element = /*#__PURE__*/function () {
  function Element() {
    this.x = void 0;
    this.y = void 0;
    this.active = false;
    this.options = void 0;
    this.$animations = void 0;
  }
  var _proto16 = Element.prototype;
  _proto16.tooltipPosition = function tooltipPosition(useFinalPosition) {
    var _this$getProps = this.getProps(['x', 'y'], useFinalPosition),
      x = _this$getProps.x,
      y = _this$getProps.y;
    return {
      x: x,
      y: y
    };
  };
  _proto16.hasValue = function hasValue() {
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["x"])(this.x) && Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["x"])(this.y);
  };
  _proto16.getProps = function getProps(props, _final) {
    var _this8 = this;
    var anims = this.$animations;
    if (!_final || !anims) {
      // let's not create an object, if not needed
      return this;
    }
    var ret = {};
    props.forEach(function (prop) {
      ret[prop] = anims[prop] && anims[prop].active() ? anims[prop]._to : _this8[prop];
    });
    return ret;
  };
  return Element;
}();
Element.defaults = {};
Element.defaultRoutes = undefined;
function autoSkip(scale, ticks) {
  var tickOpts = scale.options.ticks;
  var determinedMaxTicks = determineMaxTicks(scale);
  var ticksLimit = Math.min(tickOpts.maxTicksLimit || determinedMaxTicks, determinedMaxTicks);
  var majorIndices = tickOpts.major.enabled ? getMajorIndices(ticks) : [];
  var numMajorIndices = majorIndices.length;
  var first = majorIndices[0];
  var last = majorIndices[numMajorIndices - 1];
  var newTicks = [];
  if (numMajorIndices > ticksLimit) {
    skipMajors(ticks, newTicks, majorIndices, numMajorIndices / ticksLimit);
    return newTicks;
  }
  var spacing = calculateSpacing(majorIndices, ticks, ticksLimit);
  if (numMajorIndices > 0) {
    var i, ilen;
    var avgMajorSpacing = numMajorIndices > 1 ? Math.round((last - first) / (numMajorIndices - 1)) : null;
    skip(ticks, newTicks, spacing, Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(avgMajorSpacing) ? 0 : first - avgMajorSpacing, first);
    for (i = 0, ilen = numMajorIndices - 1; i < ilen; i++) {
      skip(ticks, newTicks, spacing, majorIndices[i], majorIndices[i + 1]);
    }
    skip(ticks, newTicks, spacing, last, Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(avgMajorSpacing) ? ticks.length : last + avgMajorSpacing);
    return newTicks;
  }
  skip(ticks, newTicks, spacing);
  return newTicks;
}
function determineMaxTicks(scale) {
  var offset = scale.options.offset;
  var tickLength = scale._tickSize();
  var maxScale = scale._length / tickLength + (offset ? 0 : 1);
  var maxChart = scale._maxLength / tickLength;
  return Math.floor(Math.min(maxScale, maxChart));
}
function calculateSpacing(majorIndices, ticks, ticksLimit) {
  var evenMajorSpacing = getEvenSpacing(majorIndices);
  var spacing = ticks.length / ticksLimit;
  if (!evenMajorSpacing) {
    return Math.max(spacing, 1);
  }
  var factors = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["N"])(evenMajorSpacing);
  for (var i = 0, ilen = factors.length - 1; i < ilen; i++) {
    var factor = factors[i];
    if (factor > spacing) {
      return factor;
    }
  }
  return Math.max(spacing, 1);
}
function getMajorIndices(ticks) {
  var result = [];
  var i, ilen;
  for (i = 0, ilen = ticks.length; i < ilen; i++) {
    if (ticks[i].major) {
      result.push(i);
    }
  }
  return result;
}
function skipMajors(ticks, newTicks, majorIndices, spacing) {
  var count = 0;
  var next = majorIndices[0];
  var i;
  spacing = Math.ceil(spacing);
  for (i = 0; i < ticks.length; i++) {
    if (i === next) {
      newTicks.push(ticks[i]);
      count++;
      next = majorIndices[count * spacing];
    }
  }
}
function skip(ticks, newTicks, spacing, majorStart, majorEnd) {
  var start = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(majorStart, 0);
  var end = Math.min(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(majorEnd, ticks.length), ticks.length);
  var count = 0;
  var length, i, next;
  spacing = Math.ceil(spacing);
  if (majorEnd) {
    length = majorEnd - majorStart;
    spacing = length / Math.floor(length / spacing);
  }
  next = start;
  while (next < 0) {
    count++;
    next = Math.round(start + count * spacing);
  }
  for (i = Math.max(start, 0); i < end; i++) {
    if (i === next) {
      newTicks.push(ticks[i]);
      count++;
      next = Math.round(start + count * spacing);
    }
  }
}
function getEvenSpacing(arr) {
  var len = arr.length;
  var i, diff;
  if (len < 2) {
    return false;
  }
  for (diff = arr[0], i = 1; i < len; ++i) {
    if (arr[i] - arr[i - 1] !== diff) {
      return false;
    }
  }
  return diff;
}
var reverseAlign = function reverseAlign(align) {
  return align === 'left' ? 'right' : align === 'right' ? 'left' : align;
};
var offsetFromEdge = function offsetFromEdge(scale, edge, offset) {
  return edge === 'top' || edge === 'left' ? scale[edge] + offset : scale[edge] - offset;
};
var getTicksLimit = function getTicksLimit(ticksLength, maxTicksLimit) {
  return Math.min(maxTicksLimit || ticksLength, ticksLength);
};
function sample(arr, numItems) {
  var result = [];
  var increment = arr.length / numItems;
  var len = arr.length;
  var i = 0;
  for (; i < len; i += increment) {
    result.push(arr[Math.floor(i)]);
  }
  return result;
}
function getPixelForGridLine(scale, index, offsetGridLines) {
  var length = scale.ticks.length;
  var validIndex = Math.min(index, length - 1);
  var start = scale._startPixel;
  var end = scale._endPixel;
  var epsilon = 1e-6;
  var lineValue = scale.getPixelForTick(validIndex);
  var offset;
  if (offsetGridLines) {
    if (length === 1) {
      offset = Math.max(lineValue - start, end - lineValue);
    } else if (index === 0) {
      offset = (scale.getPixelForTick(1) - lineValue) / 2;
    } else {
      offset = (lineValue - scale.getPixelForTick(validIndex - 1)) / 2;
    }
    lineValue += validIndex < index ? offset : -offset;
    if (lineValue < start - epsilon || lineValue > end + epsilon) {
      return;
    }
  }
  return lineValue;
}
function garbageCollect(caches, length) {
  Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(caches, function (cache) {
    var gc = cache.gc;
    var gcLen = gc.length / 2;
    var i;
    if (gcLen > length) {
      for (i = 0; i < gcLen; ++i) {
        delete cache.data[gc[i]];
      }
      gc.splice(0, gcLen);
    }
  });
}
function getTickMarkLength(options) {
  return options.drawTicks ? options.tickLength : 0;
}
function getTitleHeight(options, fallback) {
  if (!options.display) {
    return 0;
  }
  var font = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(options.font, fallback);
  var padding = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(options.padding);
  var lines = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["b"])(options.text) ? options.text.length : 1;
  return lines * font.lineHeight + padding.height;
}
function createScaleContext(parent, scale) {
  return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["j"])(parent, {
    scale: scale,
    type: 'scale'
  });
}
function createTickContext(parent, index, tick) {
  return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["j"])(parent, {
    tick: tick,
    index: index,
    type: 'tick'
  });
}
function titleAlign(align, position, reverse) {
  var ret = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a1"])(align);
  if (reverse && position !== 'right' || !reverse && position === 'right') {
    ret = reverseAlign(ret);
  }
  return ret;
}
function titleArgs(scale, offset, position, align) {
  var top = scale.top,
    left = scale.left,
    bottom = scale.bottom,
    right = scale.right,
    chart = scale.chart;
  var chartArea = chart.chartArea,
    scales = chart.scales;
  var rotation = 0;
  var maxWidth, titleX, titleY;
  var height = bottom - top;
  var width = right - left;
  if (scale.isHorizontal()) {
    titleX = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(align, left, right);
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(position)) {
      var positionAxisID = Object.keys(position)[0];
      var value = position[positionAxisID];
      titleY = scales[positionAxisID].getPixelForValue(value) + height - offset;
    } else if (position === 'center') {
      titleY = (chartArea.bottom + chartArea.top) / 2 + height - offset;
    } else {
      titleY = offsetFromEdge(scale, position, offset);
    }
    maxWidth = right - left;
  } else {
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(position)) {
      var _positionAxisID = Object.keys(position)[0];
      var _value = position[_positionAxisID];
      titleX = scales[_positionAxisID].getPixelForValue(_value) - width + offset;
    } else if (position === 'center') {
      titleX = (chartArea.left + chartArea.right) / 2 - width + offset;
    } else {
      titleX = offsetFromEdge(scale, position, offset);
    }
    titleY = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(align, bottom, top);
    rotation = position === 'left' ? -_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["H"] : _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["H"];
  }
  return {
    titleX: titleX,
    titleY: titleY,
    maxWidth: maxWidth,
    rotation: rotation
  };
}
var Scale = /*#__PURE__*/function (_Element2) {
  function Scale(cfg) {
    var _this9;
    _this9 = _Element2.call(this) || this;
    _this9.id = cfg.id;
    _this9.type = cfg.type;
    _this9.options = undefined;
    _this9.ctx = cfg.ctx;
    _this9.chart = cfg.chart;
    _this9.top = undefined;
    _this9.bottom = undefined;
    _this9.left = undefined;
    _this9.right = undefined;
    _this9.width = undefined;
    _this9.height = undefined;
    _this9._margins = {
      left: 0,
      right: 0,
      top: 0,
      bottom: 0
    };
    _this9.maxWidth = undefined;
    _this9.maxHeight = undefined;
    _this9.paddingTop = undefined;
    _this9.paddingBottom = undefined;
    _this9.paddingLeft = undefined;
    _this9.paddingRight = undefined;
    _this9.axis = undefined;
    _this9.labelRotation = undefined;
    _this9.min = undefined;
    _this9.max = undefined;
    _this9._range = undefined;
    _this9.ticks = [];
    _this9._gridLineItems = null;
    _this9._labelItems = null;
    _this9._labelSizes = null;
    _this9._length = 0;
    _this9._maxLength = 0;
    _this9._longestTextCache = {};
    _this9._startPixel = undefined;
    _this9._endPixel = undefined;
    _this9._reversePixels = false;
    _this9._userMax = undefined;
    _this9._userMin = undefined;
    _this9._suggestedMax = undefined;
    _this9._suggestedMin = undefined;
    _this9._ticksLength = 0;
    _this9._borderValue = 0;
    _this9._cache = {};
    _this9._dataLimitsCached = false;
    _this9.$context = undefined;
    return _this9;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(Scale, _Element2);
  var _proto17 = Scale.prototype;
  _proto17.init = function init(options) {
    this.options = options.setContext(this.getContext());
    this.axis = options.axis;
    this._userMin = this.parse(options.min);
    this._userMax = this.parse(options.max);
    this._suggestedMin = this.parse(options.suggestedMin);
    this._suggestedMax = this.parse(options.suggestedMax);
  };
  _proto17.parse = function parse(raw, index) {
    return raw;
  };
  _proto17.getUserBounds = function getUserBounds() {
    var _userMin = this._userMin,
      _userMax = this._userMax,
      _suggestedMin = this._suggestedMin,
      _suggestedMax = this._suggestedMax;
    _userMin = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["O"])(_userMin, Number.POSITIVE_INFINITY);
    _userMax = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["O"])(_userMax, Number.NEGATIVE_INFINITY);
    _suggestedMin = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["O"])(_suggestedMin, Number.POSITIVE_INFINITY);
    _suggestedMax = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["O"])(_suggestedMax, Number.NEGATIVE_INFINITY);
    return {
      min: Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["O"])(_userMin, _suggestedMin),
      max: Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["O"])(_userMax, _suggestedMax),
      minDefined: Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(_userMin),
      maxDefined: Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(_userMax)
    };
  };
  _proto17.getMinMax = function getMinMax(canStack) {
    var _this$getUserBounds = this.getUserBounds(),
      min = _this$getUserBounds.min,
      max = _this$getUserBounds.max,
      minDefined = _this$getUserBounds.minDefined,
      maxDefined = _this$getUserBounds.maxDefined;
    var range;
    if (minDefined && maxDefined) {
      return {
        min: min,
        max: max
      };
    }
    var metas = this.getMatchingVisibleMetas();
    for (var i = 0, ilen = metas.length; i < ilen; ++i) {
      range = metas[i].controller.getMinMax(this, canStack);
      if (!minDefined) {
        min = Math.min(min, range.min);
      }
      if (!maxDefined) {
        max = Math.max(max, range.max);
      }
    }
    min = maxDefined && min > max ? max : min;
    max = minDefined && min > max ? min : max;
    return {
      min: Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["O"])(min, Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["O"])(max, min)),
      max: Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["O"])(max, Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["O"])(min, max))
    };
  };
  _proto17.getPadding = function getPadding() {
    return {
      left: this.paddingLeft || 0,
      top: this.paddingTop || 0,
      right: this.paddingRight || 0,
      bottom: this.paddingBottom || 0
    };
  };
  _proto17.getTicks = function getTicks() {
    return this.ticks;
  };
  _proto17.getLabels = function getLabels() {
    var data = this.chart.data;
    return this.options.labels || (this.isHorizontal() ? data.xLabels : data.yLabels) || data.labels || [];
  };
  _proto17.getLabelItems = function getLabelItems(chartArea) {
    if (chartArea === void 0) {
      chartArea = this.chart.chartArea;
    }
    var items = this._labelItems || (this._labelItems = this._computeLabelItems(chartArea));
    return items;
  };
  _proto17.beforeLayout = function beforeLayout() {
    this._cache = {};
    this._dataLimitsCached = false;
  };
  _proto17.beforeUpdate = function beforeUpdate() {
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(this.options.beforeUpdate, [this]);
  };
  _proto17.update = function update(maxWidth, maxHeight, margins) {
    var _this$options4 = this.options,
      beginAtZero = _this$options4.beginAtZero,
      grace = _this$options4.grace,
      tickOpts = _this$options4.ticks;
    var sampleSize = tickOpts.sampleSize;
    this.beforeUpdate();
    this.maxWidth = maxWidth;
    this.maxHeight = maxHeight;
    this._margins = margins = Object.assign({
      left: 0,
      right: 0,
      top: 0,
      bottom: 0
    }, margins);
    this.ticks = null;
    this._labelSizes = null;
    this._gridLineItems = null;
    this._labelItems = null;
    this.beforeSetDimensions();
    this.setDimensions();
    this.afterSetDimensions();
    this._maxLength = this.isHorizontal() ? this.width + margins.left + margins.right : this.height + margins.top + margins.bottom;
    if (!this._dataLimitsCached) {
      this.beforeDataLimits();
      this.determineDataLimits();
      this.afterDataLimits();
      this._range = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["R"])(this, grace, beginAtZero);
      this._dataLimitsCached = true;
    }
    this.beforeBuildTicks();
    this.ticks = this.buildTicks() || [];
    this.afterBuildTicks();
    var samplingEnabled = sampleSize < this.ticks.length;
    this._convertTicksToLabels(samplingEnabled ? sample(this.ticks, sampleSize) : this.ticks);
    this.configure();
    this.beforeCalculateLabelRotation();
    this.calculateLabelRotation();
    this.afterCalculateLabelRotation();
    if (tickOpts.display && (tickOpts.autoSkip || tickOpts.source === 'auto')) {
      this.ticks = autoSkip(this, this.ticks);
      this._labelSizes = null;
      this.afterAutoSkip();
    }
    if (samplingEnabled) {
      this._convertTicksToLabels(this.ticks);
    }
    this.beforeFit();
    this.fit();
    this.afterFit();
    this.afterUpdate();
  };
  _proto17.configure = function configure() {
    var reversePixels = this.options.reverse;
    var startPixel, endPixel;
    if (this.isHorizontal()) {
      startPixel = this.left;
      endPixel = this.right;
    } else {
      startPixel = this.top;
      endPixel = this.bottom;
      reversePixels = !reversePixels;
    }
    this._startPixel = startPixel;
    this._endPixel = endPixel;
    this._reversePixels = reversePixels;
    this._length = endPixel - startPixel;
    this._alignToPixels = this.options.alignToPixels;
  };
  _proto17.afterUpdate = function afterUpdate() {
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(this.options.afterUpdate, [this]);
  };
  _proto17.beforeSetDimensions = function beforeSetDimensions() {
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(this.options.beforeSetDimensions, [this]);
  };
  _proto17.setDimensions = function setDimensions() {
    if (this.isHorizontal()) {
      this.width = this.maxWidth;
      this.left = 0;
      this.right = this.width;
    } else {
      this.height = this.maxHeight;
      this.top = 0;
      this.bottom = this.height;
    }
    this.paddingLeft = 0;
    this.paddingTop = 0;
    this.paddingRight = 0;
    this.paddingBottom = 0;
  };
  _proto17.afterSetDimensions = function afterSetDimensions() {
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(this.options.afterSetDimensions, [this]);
  };
  _proto17._callHooks = function _callHooks(name) {
    this.chart.notifyPlugins(name, this.getContext());
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(this.options[name], [this]);
  };
  _proto17.beforeDataLimits = function beforeDataLimits() {
    this._callHooks('beforeDataLimits');
  };
  _proto17.determineDataLimits = function determineDataLimits() {};
  _proto17.afterDataLimits = function afterDataLimits() {
    this._callHooks('afterDataLimits');
  };
  _proto17.beforeBuildTicks = function beforeBuildTicks() {
    this._callHooks('beforeBuildTicks');
  };
  _proto17.buildTicks = function buildTicks() {
    return [];
  };
  _proto17.afterBuildTicks = function afterBuildTicks() {
    this._callHooks('afterBuildTicks');
  };
  _proto17.beforeTickToLabelConversion = function beforeTickToLabelConversion() {
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(this.options.beforeTickToLabelConversion, [this]);
  };
  _proto17.generateTickLabels = function generateTickLabels(ticks) {
    var tickOpts = this.options.ticks;
    var i, ilen, tick;
    for (i = 0, ilen = ticks.length; i < ilen; i++) {
      tick = ticks[i];
      tick.label = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(tickOpts.callback, [tick.value, i, ticks], this);
    }
  };
  _proto17.afterTickToLabelConversion = function afterTickToLabelConversion() {
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(this.options.afterTickToLabelConversion, [this]);
  };
  _proto17.beforeCalculateLabelRotation = function beforeCalculateLabelRotation() {
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(this.options.beforeCalculateLabelRotation, [this]);
  };
  _proto17.calculateLabelRotation = function calculateLabelRotation() {
    var options = this.options;
    var tickOpts = options.ticks;
    var numTicks = getTicksLimit(this.ticks.length, options.ticks.maxTicksLimit);
    var minRotation = tickOpts.minRotation || 0;
    var maxRotation = tickOpts.maxRotation;
    var labelRotation = minRotation;
    var tickWidth, maxHeight, maxLabelDiagonal;
    if (!this._isVisible() || !tickOpts.display || minRotation >= maxRotation || numTicks <= 1 || !this.isHorizontal()) {
      this.labelRotation = minRotation;
      return;
    }
    var labelSizes = this._getLabelSizes();
    var maxLabelWidth = labelSizes.widest.width;
    var maxLabelHeight = labelSizes.highest.height;
    var maxWidth = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])(this.chart.width - maxLabelWidth, 0, this.maxWidth);
    tickWidth = options.offset ? this.maxWidth / numTicks : maxWidth / (numTicks - 1);
    if (maxLabelWidth + 6 > tickWidth) {
      tickWidth = maxWidth / (numTicks - (options.offset ? 0.5 : 1));
      maxHeight = this.maxHeight - getTickMarkLength(options.grid) - tickOpts.padding - getTitleHeight(options.title, this.chart.options.font);
      maxLabelDiagonal = Math.sqrt(maxLabelWidth * maxLabelWidth + maxLabelHeight * maxLabelHeight);
      labelRotation = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["U"])(Math.min(Math.asin(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])((labelSizes.highest.height + 6) / tickWidth, -1, 1)), Math.asin(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])(maxHeight / maxLabelDiagonal, -1, 1)) - Math.asin(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])(maxLabelHeight / maxLabelDiagonal, -1, 1))));
      labelRotation = Math.max(minRotation, Math.min(maxRotation, labelRotation));
    }
    this.labelRotation = labelRotation;
  };
  _proto17.afterCalculateLabelRotation = function afterCalculateLabelRotation() {
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(this.options.afterCalculateLabelRotation, [this]);
  };
  _proto17.afterAutoSkip = function afterAutoSkip() {};
  _proto17.beforeFit = function beforeFit() {
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(this.options.beforeFit, [this]);
  };
  _proto17.fit = function fit() {
    var minSize = {
      width: 0,
      height: 0
    };
    var chart = this.chart,
      _this$options5 = this.options,
      tickOpts = _this$options5.ticks,
      titleOpts = _this$options5.title,
      gridOpts = _this$options5.grid;
    var display = this._isVisible();
    var isHorizontal = this.isHorizontal();
    if (display) {
      var titleHeight = getTitleHeight(titleOpts, chart.options.font);
      if (isHorizontal) {
        minSize.width = this.maxWidth;
        minSize.height = getTickMarkLength(gridOpts) + titleHeight;
      } else {
        minSize.height = this.maxHeight;
        minSize.width = getTickMarkLength(gridOpts) + titleHeight;
      }
      if (tickOpts.display && this.ticks.length) {
        var _this$_getLabelSizes = this._getLabelSizes(),
          first = _this$_getLabelSizes.first,
          last = _this$_getLabelSizes.last,
          widest = _this$_getLabelSizes.widest,
          highest = _this$_getLabelSizes.highest;
        var tickPadding = tickOpts.padding * 2;
        var angleRadians = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["t"])(this.labelRotation);
        var cos = Math.cos(angleRadians);
        var sin = Math.sin(angleRadians);
        if (isHorizontal) {
          var labelHeight = tickOpts.mirror ? 0 : sin * widest.width + cos * highest.height;
          minSize.height = Math.min(this.maxHeight, minSize.height + labelHeight + tickPadding);
        } else {
          var labelWidth = tickOpts.mirror ? 0 : cos * widest.width + sin * highest.height;
          minSize.width = Math.min(this.maxWidth, minSize.width + labelWidth + tickPadding);
        }
        this._calculatePadding(first, last, sin, cos);
      }
    }
    this._handleMargins();
    if (isHorizontal) {
      this.width = this._length = chart.width - this._margins.left - this._margins.right;
      this.height = minSize.height;
    } else {
      this.width = minSize.width;
      this.height = this._length = chart.height - this._margins.top - this._margins.bottom;
    }
  };
  _proto17._calculatePadding = function _calculatePadding(first, last, sin, cos) {
    var _this$options6 = this.options,
      _this$options6$ticks = _this$options6.ticks,
      align = _this$options6$ticks.align,
      padding = _this$options6$ticks.padding,
      position = _this$options6.position;
    var isRotated = this.labelRotation !== 0;
    var labelsBelowTicks = position !== 'top' && this.axis === 'x';
    if (this.isHorizontal()) {
      var offsetLeft = this.getPixelForTick(0) - this.left;
      var offsetRight = this.right - this.getPixelForTick(this.ticks.length - 1);
      var paddingLeft = 0;
      var paddingRight = 0;
      if (isRotated) {
        if (labelsBelowTicks) {
          paddingLeft = cos * first.width;
          paddingRight = sin * last.height;
        } else {
          paddingLeft = sin * first.height;
          paddingRight = cos * last.width;
        }
      } else if (align === 'start') {
        paddingRight = last.width;
      } else if (align === 'end') {
        paddingLeft = first.width;
      } else if (align !== 'inner') {
        paddingLeft = first.width / 2;
        paddingRight = last.width / 2;
      }
      this.paddingLeft = Math.max((paddingLeft - offsetLeft + padding) * this.width / (this.width - offsetLeft), 0);
      this.paddingRight = Math.max((paddingRight - offsetRight + padding) * this.width / (this.width - offsetRight), 0);
    } else {
      var paddingTop = last.height / 2;
      var paddingBottom = first.height / 2;
      if (align === 'start') {
        paddingTop = 0;
        paddingBottom = first.height;
      } else if (align === 'end') {
        paddingTop = last.height;
        paddingBottom = 0;
      }
      this.paddingTop = paddingTop + padding;
      this.paddingBottom = paddingBottom + padding;
    }
  };
  _proto17._handleMargins = function _handleMargins() {
    if (this._margins) {
      this._margins.left = Math.max(this.paddingLeft, this._margins.left);
      this._margins.top = Math.max(this.paddingTop, this._margins.top);
      this._margins.right = Math.max(this.paddingRight, this._margins.right);
      this._margins.bottom = Math.max(this.paddingBottom, this._margins.bottom);
    }
  };
  _proto17.afterFit = function afterFit() {
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(this.options.afterFit, [this]);
  };
  _proto17.isHorizontal = function isHorizontal() {
    var _this$options7 = this.options,
      axis = _this$options7.axis,
      position = _this$options7.position;
    return position === 'top' || position === 'bottom' || axis === 'x';
  };
  _proto17.isFullSize = function isFullSize() {
    return this.options.fullSize;
  };
  _proto17._convertTicksToLabels = function _convertTicksToLabels(ticks) {
    this.beforeTickToLabelConversion();
    this.generateTickLabels(ticks);
    var i, ilen;
    for (i = 0, ilen = ticks.length; i < ilen; i++) {
      if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(ticks[i].label)) {
        ticks.splice(i, 1);
        ilen--;
        i--;
      }
    }
    this.afterTickToLabelConversion();
  };
  _proto17._getLabelSizes = function _getLabelSizes() {
    var labelSizes = this._labelSizes;
    if (!labelSizes) {
      var sampleSize = this.options.ticks.sampleSize;
      var ticks = this.ticks;
      if (sampleSize < ticks.length) {
        ticks = sample(ticks, sampleSize);
      }
      this._labelSizes = labelSizes = this._computeLabelSizes(ticks, ticks.length, this.options.ticks.maxTicksLimit);
    }
    return labelSizes;
  };
  _proto17._computeLabelSizes = function _computeLabelSizes(ticks, length, maxTicksLimit) {
    var ctx = this.ctx,
      caches = this._longestTextCache;
    var widths = [];
    var heights = [];
    var increment = Math.floor(length / getTicksLimit(length, maxTicksLimit));
    var widestLabelSize = 0;
    var highestLabelSize = 0;
    var i, j, jlen, label, tickFont, fontString, cache, lineHeight, width, height, nestedLabel;
    for (i = 0; i < length; i += increment) {
      label = ticks[i].label;
      tickFont = this._resolveTickFontOptions(i);
      ctx.font = fontString = tickFont.string;
      cache = caches[fontString] = caches[fontString] || {
        data: {},
        gc: []
      };
      lineHeight = tickFont.lineHeight;
      width = height = 0;
      if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(label) && !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["b"])(label)) {
        width = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["V"])(ctx, cache.data, cache.gc, width, label);
        height = lineHeight;
      } else if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["b"])(label)) {
        for (j = 0, jlen = label.length; j < jlen; ++j) {
          nestedLabel = label[j];
          if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(nestedLabel) && !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["b"])(nestedLabel)) {
            width = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["V"])(ctx, cache.data, cache.gc, width, nestedLabel);
            height += lineHeight;
          }
        }
      }
      widths.push(width);
      heights.push(height);
      widestLabelSize = Math.max(width, widestLabelSize);
      highestLabelSize = Math.max(height, highestLabelSize);
    }
    garbageCollect(caches, length);
    var widest = widths.indexOf(widestLabelSize);
    var highest = heights.indexOf(highestLabelSize);
    var valueAt = function valueAt(idx) {
      return {
        width: widths[idx] || 0,
        height: heights[idx] || 0
      };
    };
    return {
      first: valueAt(0),
      last: valueAt(length - 1),
      widest: valueAt(widest),
      highest: valueAt(highest),
      widths: widths,
      heights: heights
    };
  };
  _proto17.getLabelForValue = function getLabelForValue(value) {
    return value;
  };
  _proto17.getPixelForValue = function getPixelForValue(value, index) {
    return NaN;
  };
  _proto17.getValueForPixel = function getValueForPixel(pixel) {};
  _proto17.getPixelForTick = function getPixelForTick(index) {
    var ticks = this.ticks;
    if (index < 0 || index > ticks.length - 1) {
      return null;
    }
    return this.getPixelForValue(ticks[index].value);
  };
  _proto17.getPixelForDecimal = function getPixelForDecimal(decimal) {
    if (this._reversePixels) {
      decimal = 1 - decimal;
    }
    var pixel = this._startPixel + decimal * this._length;
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["W"])(this._alignToPixels ? Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["X"])(this.chart, pixel, 0) : pixel);
  };
  _proto17.getDecimalForPixel = function getDecimalForPixel(pixel) {
    var decimal = (pixel - this._startPixel) / this._length;
    return this._reversePixels ? 1 - decimal : decimal;
  };
  _proto17.getBasePixel = function getBasePixel() {
    return this.getPixelForValue(this.getBaseValue());
  };
  _proto17.getBaseValue = function getBaseValue() {
    var min = this.min,
      max = this.max;
    return min < 0 && max < 0 ? max : min > 0 && max > 0 ? min : 0;
  };
  _proto17.getContext = function getContext(index) {
    var ticks = this.ticks || [];
    if (index >= 0 && index < ticks.length) {
      var tick = ticks[index];
      return tick.$context || (tick.$context = createTickContext(this.getContext(), index, tick));
    }
    return this.$context || (this.$context = createScaleContext(this.chart.getContext(), this));
  };
  _proto17._tickSize = function _tickSize() {
    var optionTicks = this.options.ticks;
    var rot = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["t"])(this.labelRotation);
    var cos = Math.abs(Math.cos(rot));
    var sin = Math.abs(Math.sin(rot));
    var labelSizes = this._getLabelSizes();
    var padding = optionTicks.autoSkipPadding || 0;
    var w = labelSizes ? labelSizes.widest.width + padding : 0;
    var h = labelSizes ? labelSizes.highest.height + padding : 0;
    return this.isHorizontal() ? h * cos > w * sin ? w / cos : h / sin : h * sin < w * cos ? h / cos : w / sin;
  };
  _proto17._isVisible = function _isVisible() {
    var display = this.options.display;
    if (display !== 'auto') {
      return !!display;
    }
    return this.getMatchingVisibleMetas().length > 0;
  };
  _proto17._computeGridLineItems = function _computeGridLineItems(chartArea) {
    var axis = this.axis;
    var chart = this.chart;
    var options = this.options;
    var grid = options.grid,
      position = options.position,
      border = options.border;
    var offset = grid.offset;
    var isHorizontal = this.isHorizontal();
    var ticks = this.ticks;
    var ticksLength = ticks.length + (offset ? 1 : 0);
    var tl = getTickMarkLength(grid);
    var items = [];
    var borderOpts = border.setContext(this.getContext());
    var axisWidth = borderOpts.display ? borderOpts.width : 0;
    var axisHalfWidth = axisWidth / 2;
    var alignBorderValue = function alignBorderValue(pixel) {
      return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["X"])(chart, pixel, axisWidth);
    };
    var borderValue, i, lineValue, alignedLineValue;
    var tx1, ty1, tx2, ty2, x1, y1, x2, y2;
    if (position === 'top') {
      borderValue = alignBorderValue(this.bottom);
      ty1 = this.bottom - tl;
      ty2 = borderValue - axisHalfWidth;
      y1 = alignBorderValue(chartArea.top) + axisHalfWidth;
      y2 = chartArea.bottom;
    } else if (position === 'bottom') {
      borderValue = alignBorderValue(this.top);
      y1 = chartArea.top;
      y2 = alignBorderValue(chartArea.bottom) - axisHalfWidth;
      ty1 = borderValue + axisHalfWidth;
      ty2 = this.top + tl;
    } else if (position === 'left') {
      borderValue = alignBorderValue(this.right);
      tx1 = this.right - tl;
      tx2 = borderValue - axisHalfWidth;
      x1 = alignBorderValue(chartArea.left) + axisHalfWidth;
      x2 = chartArea.right;
    } else if (position === 'right') {
      borderValue = alignBorderValue(this.left);
      x1 = chartArea.left;
      x2 = alignBorderValue(chartArea.right) - axisHalfWidth;
      tx1 = borderValue + axisHalfWidth;
      tx2 = this.left + tl;
    } else if (axis === 'x') {
      if (position === 'center') {
        borderValue = alignBorderValue((chartArea.top + chartArea.bottom) / 2 + 0.5);
      } else if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(position)) {
        var positionAxisID = Object.keys(position)[0];
        var value = position[positionAxisID];
        borderValue = alignBorderValue(this.chart.scales[positionAxisID].getPixelForValue(value));
      }
      y1 = chartArea.top;
      y2 = chartArea.bottom;
      ty1 = borderValue + axisHalfWidth;
      ty2 = ty1 + tl;
    } else if (axis === 'y') {
      if (position === 'center') {
        borderValue = alignBorderValue((chartArea.left + chartArea.right) / 2);
      } else if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(position)) {
        var _positionAxisID2 = Object.keys(position)[0];
        var _value2 = position[_positionAxisID2];
        borderValue = alignBorderValue(this.chart.scales[_positionAxisID2].getPixelForValue(_value2));
      }
      tx1 = borderValue - axisHalfWidth;
      tx2 = tx1 - tl;
      x1 = chartArea.left;
      x2 = chartArea.right;
    }
    var limit = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(options.ticks.maxTicksLimit, ticksLength);
    var step = Math.max(1, Math.ceil(ticksLength / limit));
    for (i = 0; i < ticksLength; i += step) {
      var context = this.getContext(i);
      var optsAtIndex = grid.setContext(context);
      var optsAtIndexBorder = border.setContext(context);
      var lineWidth = optsAtIndex.lineWidth;
      var lineColor = optsAtIndex.color;
      var borderDash = optsAtIndexBorder.dash || [];
      var borderDashOffset = optsAtIndexBorder.dashOffset;
      var tickWidth = optsAtIndex.tickWidth;
      var tickColor = optsAtIndex.tickColor;
      var tickBorderDash = optsAtIndex.tickBorderDash || [];
      var tickBorderDashOffset = optsAtIndex.tickBorderDashOffset;
      lineValue = getPixelForGridLine(this, i, offset);
      if (lineValue === undefined) {
        continue;
      }
      alignedLineValue = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["X"])(chart, lineValue, lineWidth);
      if (isHorizontal) {
        tx1 = tx2 = x1 = x2 = alignedLineValue;
      } else {
        ty1 = ty2 = y1 = y2 = alignedLineValue;
      }
      items.push({
        tx1: tx1,
        ty1: ty1,
        tx2: tx2,
        ty2: ty2,
        x1: x1,
        y1: y1,
        x2: x2,
        y2: y2,
        width: lineWidth,
        color: lineColor,
        borderDash: borderDash,
        borderDashOffset: borderDashOffset,
        tickWidth: tickWidth,
        tickColor: tickColor,
        tickBorderDash: tickBorderDash,
        tickBorderDashOffset: tickBorderDashOffset
      });
    }
    this._ticksLength = ticksLength;
    this._borderValue = borderValue;
    return items;
  };
  _proto17._computeLabelItems = function _computeLabelItems(chartArea) {
    var axis = this.axis;
    var options = this.options;
    var position = options.position,
      optionTicks = options.ticks;
    var isHorizontal = this.isHorizontal();
    var ticks = this.ticks;
    var align = optionTicks.align,
      crossAlign = optionTicks.crossAlign,
      padding = optionTicks.padding,
      mirror = optionTicks.mirror;
    var tl = getTickMarkLength(options.grid);
    var tickAndPadding = tl + padding;
    var hTickAndPadding = mirror ? -padding : tickAndPadding;
    var rotation = -Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["t"])(this.labelRotation);
    var items = [];
    var i, ilen, tick, label, x, y, textAlign, pixel, font, lineHeight, lineCount, textOffset;
    var textBaseline = 'middle';
    if (position === 'top') {
      y = this.bottom - hTickAndPadding;
      textAlign = this._getXAxisLabelAlignment();
    } else if (position === 'bottom') {
      y = this.top + hTickAndPadding;
      textAlign = this._getXAxisLabelAlignment();
    } else if (position === 'left') {
      var ret = this._getYAxisLabelAlignment(tl);
      textAlign = ret.textAlign;
      x = ret.x;
    } else if (position === 'right') {
      var _ret = this._getYAxisLabelAlignment(tl);
      textAlign = _ret.textAlign;
      x = _ret.x;
    } else if (axis === 'x') {
      if (position === 'center') {
        y = (chartArea.top + chartArea.bottom) / 2 + tickAndPadding;
      } else if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(position)) {
        var positionAxisID = Object.keys(position)[0];
        var value = position[positionAxisID];
        y = this.chart.scales[positionAxisID].getPixelForValue(value) + tickAndPadding;
      }
      textAlign = this._getXAxisLabelAlignment();
    } else if (axis === 'y') {
      if (position === 'center') {
        x = (chartArea.left + chartArea.right) / 2 - tickAndPadding;
      } else if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(position)) {
        var _positionAxisID3 = Object.keys(position)[0];
        var _value3 = position[_positionAxisID3];
        x = this.chart.scales[_positionAxisID3].getPixelForValue(_value3);
      }
      textAlign = this._getYAxisLabelAlignment(tl).textAlign;
    }
    if (axis === 'y') {
      if (align === 'start') {
        textBaseline = 'top';
      } else if (align === 'end') {
        textBaseline = 'bottom';
      }
    }
    var labelSizes = this._getLabelSizes();
    for (i = 0, ilen = ticks.length; i < ilen; ++i) {
      tick = ticks[i];
      label = tick.label;
      var optsAtIndex = optionTicks.setContext(this.getContext(i));
      pixel = this.getPixelForTick(i) + optionTicks.labelOffset;
      font = this._resolveTickFontOptions(i);
      lineHeight = font.lineHeight;
      lineCount = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["b"])(label) ? label.length : 1;
      var halfCount = lineCount / 2;
      var color = optsAtIndex.color;
      var strokeColor = optsAtIndex.textStrokeColor;
      var strokeWidth = optsAtIndex.textStrokeWidth;
      var tickTextAlign = textAlign;
      if (isHorizontal) {
        x = pixel;
        if (textAlign === 'inner') {
          if (i === ilen - 1) {
            tickTextAlign = !this.options.reverse ? 'right' : 'left';
          } else if (i === 0) {
            tickTextAlign = !this.options.reverse ? 'left' : 'right';
          } else {
            tickTextAlign = 'center';
          }
        }
        if (position === 'top') {
          if (crossAlign === 'near' || rotation !== 0) {
            textOffset = -lineCount * lineHeight + lineHeight / 2;
          } else if (crossAlign === 'center') {
            textOffset = -labelSizes.highest.height / 2 - halfCount * lineHeight + lineHeight;
          } else {
            textOffset = -labelSizes.highest.height + lineHeight / 2;
          }
        } else {
          if (crossAlign === 'near' || rotation !== 0) {
            textOffset = lineHeight / 2;
          } else if (crossAlign === 'center') {
            textOffset = labelSizes.highest.height / 2 - halfCount * lineHeight;
          } else {
            textOffset = labelSizes.highest.height - lineCount * lineHeight;
          }
        }
        if (mirror) {
          textOffset *= -1;
        }
        if (rotation !== 0 && !optsAtIndex.showLabelBackdrop) {
          x += lineHeight / 2 * Math.sin(rotation);
        }
      } else {
        y = pixel;
        textOffset = (1 - lineCount) * lineHeight / 2;
      }
      var backdrop = void 0;
      if (optsAtIndex.showLabelBackdrop) {
        var labelPadding = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(optsAtIndex.backdropPadding);
        var height = labelSizes.heights[i];
        var width = labelSizes.widths[i];
        var top = textOffset - labelPadding.top;
        var left = 0 - labelPadding.left;
        switch (textBaseline) {
          case 'middle':
            top -= height / 2;
            break;
          case 'bottom':
            top -= height;
            break;
        }
        switch (textAlign) {
          case 'center':
            left -= width / 2;
            break;
          case 'right':
            left -= width;
            break;
          case 'inner':
            if (i === ilen - 1) {
              left -= width;
            } else if (i > 0) {
              left -= width / 2;
            }
            break;
        }
        backdrop = {
          left: left,
          top: top,
          width: width + labelPadding.width,
          height: height + labelPadding.height,
          color: optsAtIndex.backdropColor
        };
      }
      items.push({
        label: label,
        font: font,
        textOffset: textOffset,
        options: {
          rotation: rotation,
          color: color,
          strokeColor: strokeColor,
          strokeWidth: strokeWidth,
          textAlign: tickTextAlign,
          textBaseline: textBaseline,
          translation: [x, y],
          backdrop: backdrop
        }
      });
    }
    return items;
  };
  _proto17._getXAxisLabelAlignment = function _getXAxisLabelAlignment() {
    var _this$options8 = this.options,
      position = _this$options8.position,
      ticks = _this$options8.ticks;
    var rotation = -Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["t"])(this.labelRotation);
    if (rotation) {
      return position === 'top' ? 'left' : 'right';
    }
    var align = 'center';
    if (ticks.align === 'start') {
      align = 'left';
    } else if (ticks.align === 'end') {
      align = 'right';
    } else if (ticks.align === 'inner') {
      align = 'inner';
    }
    return align;
  };
  _proto17._getYAxisLabelAlignment = function _getYAxisLabelAlignment(tl) {
    var _this$options9 = this.options,
      position = _this$options9.position,
      _this$options9$ticks = _this$options9.ticks,
      crossAlign = _this$options9$ticks.crossAlign,
      mirror = _this$options9$ticks.mirror,
      padding = _this$options9$ticks.padding;
    var labelSizes = this._getLabelSizes();
    var tickAndPadding = tl + padding;
    var widest = labelSizes.widest.width;
    var textAlign;
    var x;
    if (position === 'left') {
      if (mirror) {
        x = this.right + padding;
        if (crossAlign === 'near') {
          textAlign = 'left';
        } else if (crossAlign === 'center') {
          textAlign = 'center';
          x += widest / 2;
        } else {
          textAlign = 'right';
          x += widest;
        }
      } else {
        x = this.right - tickAndPadding;
        if (crossAlign === 'near') {
          textAlign = 'right';
        } else if (crossAlign === 'center') {
          textAlign = 'center';
          x -= widest / 2;
        } else {
          textAlign = 'left';
          x = this.left;
        }
      }
    } else if (position === 'right') {
      if (mirror) {
        x = this.left + padding;
        if (crossAlign === 'near') {
          textAlign = 'right';
        } else if (crossAlign === 'center') {
          textAlign = 'center';
          x -= widest / 2;
        } else {
          textAlign = 'left';
          x -= widest;
        }
      } else {
        x = this.left + tickAndPadding;
        if (crossAlign === 'near') {
          textAlign = 'left';
        } else if (crossAlign === 'center') {
          textAlign = 'center';
          x += widest / 2;
        } else {
          textAlign = 'right';
          x = this.right;
        }
      }
    } else {
      textAlign = 'right';
    }
    return {
      textAlign: textAlign,
      x: x
    };
  };
  _proto17._computeLabelArea = function _computeLabelArea() {
    if (this.options.ticks.mirror) {
      return;
    }
    var chart = this.chart;
    var position = this.options.position;
    if (position === 'left' || position === 'right') {
      return {
        top: 0,
        left: this.left,
        bottom: chart.height,
        right: this.right
      };
    }
    if (position === 'top' || position === 'bottom') {
      return {
        top: this.top,
        left: 0,
        bottom: this.bottom,
        right: chart.width
      };
    }
  };
  _proto17.drawBackground = function drawBackground() {
    var ctx = this.ctx,
      backgroundColor = this.options.backgroundColor,
      left = this.left,
      top = this.top,
      width = this.width,
      height = this.height;
    if (backgroundColor) {
      ctx.save();
      ctx.fillStyle = backgroundColor;
      ctx.fillRect(left, top, width, height);
      ctx.restore();
    }
  };
  _proto17.getLineWidthForValue = function getLineWidthForValue(value) {
    var grid = this.options.grid;
    if (!this._isVisible() || !grid.display) {
      return 0;
    }
    var ticks = this.ticks;
    var index = ticks.findIndex(function (t) {
      return t.value === value;
    });
    if (index >= 0) {
      var opts = grid.setContext(this.getContext(index));
      return opts.lineWidth;
    }
    return 0;
  };
  _proto17.drawGrid = function drawGrid(chartArea) {
    var grid = this.options.grid;
    var ctx = this.ctx;
    var items = this._gridLineItems || (this._gridLineItems = this._computeGridLineItems(chartArea));
    var i, ilen;
    var drawLine = function drawLine(p1, p2, style) {
      if (!style.width || !style.color) {
        return;
      }
      ctx.save();
      ctx.lineWidth = style.width;
      ctx.strokeStyle = style.color;
      ctx.setLineDash(style.borderDash || []);
      ctx.lineDashOffset = style.borderDashOffset;
      ctx.beginPath();
      ctx.moveTo(p1.x, p1.y);
      ctx.lineTo(p2.x, p2.y);
      ctx.stroke();
      ctx.restore();
    };
    if (grid.display) {
      for (i = 0, ilen = items.length; i < ilen; ++i) {
        var item = items[i];
        if (grid.drawOnChartArea) {
          drawLine({
            x: item.x1,
            y: item.y1
          }, {
            x: item.x2,
            y: item.y2
          }, item);
        }
        if (grid.drawTicks) {
          drawLine({
            x: item.tx1,
            y: item.ty1
          }, {
            x: item.tx2,
            y: item.ty2
          }, {
            color: item.tickColor,
            width: item.tickWidth,
            borderDash: item.tickBorderDash,
            borderDashOffset: item.tickBorderDashOffset
          });
        }
      }
    }
  };
  _proto17.drawBorder = function drawBorder() {
    var chart = this.chart,
      ctx = this.ctx,
      _this$options10 = this.options,
      border = _this$options10.border,
      grid = _this$options10.grid;
    var borderOpts = border.setContext(this.getContext());
    var axisWidth = border.display ? borderOpts.width : 0;
    if (!axisWidth) {
      return;
    }
    var lastLineWidth = grid.setContext(this.getContext(0)).lineWidth;
    var borderValue = this._borderValue;
    var x1, x2, y1, y2;
    if (this.isHorizontal()) {
      x1 = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["X"])(chart, this.left, axisWidth) - axisWidth / 2;
      x2 = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["X"])(chart, this.right, lastLineWidth) + lastLineWidth / 2;
      y1 = y2 = borderValue;
    } else {
      y1 = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["X"])(chart, this.top, axisWidth) - axisWidth / 2;
      y2 = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["X"])(chart, this.bottom, lastLineWidth) + lastLineWidth / 2;
      x1 = x2 = borderValue;
    }
    ctx.save();
    ctx.lineWidth = borderOpts.width;
    ctx.strokeStyle = borderOpts.color;
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.stroke();
    ctx.restore();
  };
  _proto17.drawLabels = function drawLabels(chartArea) {
    var optionTicks = this.options.ticks;
    if (!optionTicks.display) {
      return;
    }
    var ctx = this.ctx;
    var area = this._computeLabelArea();
    if (area) {
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Y"])(ctx, area);
    }
    var items = this.getLabelItems(chartArea);
    for (var _iterator10 = _createForOfIteratorHelperLoose(items), _step10; !(_step10 = _iterator10()).done;) {
      var item = _step10.value;
      var renderTextOptions = item.options;
      var tickFont = item.font;
      var label = item.label;
      var y = item.textOffset;
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Z"])(ctx, label, 0, y, tickFont, renderTextOptions);
    }
    if (area) {
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["$"])(ctx);
    }
  };
  _proto17.drawTitle = function drawTitle() {
    var ctx = this.ctx,
      _this$options11 = this.options,
      position = _this$options11.position,
      title = _this$options11.title,
      reverse = _this$options11.reverse;
    if (!title.display) {
      return;
    }
    var font = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(title.font);
    var padding = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(title.padding);
    var align = title.align;
    var offset = font.lineHeight / 2;
    if (position === 'bottom' || position === 'center' || Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(position)) {
      offset += padding.bottom;
      if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["b"])(title.text)) {
        offset += font.lineHeight * (title.text.length - 1);
      }
    } else {
      offset += padding.top;
    }
    var _titleArgs = titleArgs(this, offset, position, align),
      titleX = _titleArgs.titleX,
      titleY = _titleArgs.titleY,
      maxWidth = _titleArgs.maxWidth,
      rotation = _titleArgs.rotation;
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Z"])(ctx, title.text, 0, 0, font, {
      color: title.color,
      maxWidth: maxWidth,
      rotation: rotation,
      textAlign: titleAlign(align, position, reverse),
      textBaseline: 'middle',
      translation: [titleX, titleY]
    });
  };
  _proto17.draw = function draw(chartArea) {
    if (!this._isVisible()) {
      return;
    }
    this.drawBackground();
    this.drawGrid(chartArea);
    this.drawBorder();
    this.drawTitle();
    this.drawLabels(chartArea);
  };
  _proto17._layers = function _layers() {
    var _this10 = this;
    var opts = this.options;
    var tz = opts.ticks && opts.ticks.z || 0;
    var gz = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(opts.grid && opts.grid.z, -1);
    var bz = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(opts.border && opts.border.z, 0);
    if (!this._isVisible() || this.draw !== Scale.prototype.draw) {
      return [{
        z: tz,
        draw: function draw(chartArea) {
          _this10.draw(chartArea);
        }
      }];
    }
    return [{
      z: gz,
      draw: function draw(chartArea) {
        _this10.drawBackground();
        _this10.drawGrid(chartArea);
        _this10.drawTitle();
      }
    }, {
      z: bz,
      draw: function draw() {
        _this10.drawBorder();
      }
    }, {
      z: tz,
      draw: function draw(chartArea) {
        _this10.drawLabels(chartArea);
      }
    }];
  };
  _proto17.getMatchingVisibleMetas = function getMatchingVisibleMetas(type) {
    var metas = this.chart.getSortedVisibleDatasetMetas();
    var axisID = this.axis + 'AxisID';
    var result = [];
    var i, ilen;
    for (i = 0, ilen = metas.length; i < ilen; ++i) {
      var meta = metas[i];
      if (meta[axisID] === this.id && (!type || meta.type === type)) {
        result.push(meta);
      }
    }
    return result;
  };
  _proto17._resolveTickFontOptions = function _resolveTickFontOptions(index) {
    var opts = this.options.ticks.setContext(this.getContext(index));
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(opts.font);
  };
  _proto17._maxDigits = function _maxDigits() {
    var fontSize = this._resolveTickFontOptions(0).lineHeight;
    return (this.isHorizontal() ? this.width : this.height) / fontSize;
  };
  return Scale;
}(Element);
var TypedRegistry = /*#__PURE__*/function () {
  function TypedRegistry(type, scope, override) {
    this.type = type;
    this.scope = scope;
    this.override = override;
    this.items = Object.create(null);
  }
  var _proto18 = TypedRegistry.prototype;
  _proto18.isForType = function isForType(type) {
    return Object.prototype.isPrototypeOf.call(this.type.prototype, type.prototype);
  };
  _proto18.register = function register(item) {
    var proto = Object.getPrototypeOf(item);
    var parentScope;
    if (isIChartComponent(proto)) {
      parentScope = this.register(proto);
    }
    var items = this.items;
    var id = item.id;
    var scope = this.scope + '.' + id;
    if (!id) {
      throw new Error('class does not have id: ' + item);
    }
    if (id in items) {
      return scope;
    }
    items[id] = item;
    registerDefaults(item, scope, parentScope);
    if (this.override) {
      _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].override(item.id, item.overrides);
    }
    return scope;
  };
  _proto18.get = function get(id) {
    return this.items[id];
  };
  _proto18.unregister = function unregister(item) {
    var items = this.items;
    var id = item.id;
    var scope = this.scope;
    if (id in items) {
      delete items[id];
    }
    if (scope && id in _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"][scope]) {
      delete _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"][scope][id];
      if (this.override) {
        delete _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a3"][id];
      }
    }
  };
  return TypedRegistry;
}();
function registerDefaults(item, scope, parentScope) {
  var itemDefaults = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a4"])(Object.create(null), [parentScope ? _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].get(parentScope) : {}, _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].get(scope), item.defaults]);
  _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].set(scope, itemDefaults);
  if (item.defaultRoutes) {
    routeDefaults(scope, item.defaultRoutes);
  }
  if (item.descriptors) {
    _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].describe(scope, item.descriptors);
  }
}
function routeDefaults(scope, routes) {
  Object.keys(routes).forEach(function (property) {
    var propertyParts = property.split('.');
    var sourceName = propertyParts.pop();
    var sourceScope = [scope].concat(propertyParts).join('.');
    var parts = routes[property].split('.');
    var targetName = parts.pop();
    var targetScope = parts.join('.');
    _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].route(sourceScope, sourceName, targetScope, targetName);
  });
}
function isIChartComponent(proto) {
  return 'id' in proto && 'defaults' in proto;
}
var Registry = /*#__PURE__*/function () {
  function Registry() {
    this.controllers = new TypedRegistry(DatasetController, 'datasets', true);
    this.elements = new TypedRegistry(Element, 'elements');
    this.plugins = new TypedRegistry(Object, 'plugins');
    this.scales = new TypedRegistry(Scale, 'scales');
    this._typedRegistries = [this.controllers, this.scales, this.elements];
  }
  var _proto19 = Registry.prototype;
  _proto19.add = function add() {
    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }
    this._each('register', args);
  };
  _proto19.remove = function remove() {
    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }
    this._each('unregister', args);
  };
  _proto19.addControllers = function addControllers() {
    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }
    this._each('register', args, this.controllers);
  };
  _proto19.addElements = function addElements() {
    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
      args[_key4] = arguments[_key4];
    }
    this._each('register', args, this.elements);
  };
  _proto19.addPlugins = function addPlugins() {
    for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {
      args[_key5] = arguments[_key5];
    }
    this._each('register', args, this.plugins);
  };
  _proto19.addScales = function addScales() {
    for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {
      args[_key6] = arguments[_key6];
    }
    this._each('register', args, this.scales);
  };
  _proto19.getController = function getController(id) {
    return this._get(id, this.controllers, 'controller');
  };
  _proto19.getElement = function getElement(id) {
    return this._get(id, this.elements, 'element');
  };
  _proto19.getPlugin = function getPlugin(id) {
    return this._get(id, this.plugins, 'plugin');
  };
  _proto19.getScale = function getScale(id) {
    return this._get(id, this.scales, 'scale');
  };
  _proto19.removeControllers = function removeControllers() {
    for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) {
      args[_key7] = arguments[_key7];
    }
    this._each('unregister', args, this.controllers);
  };
  _proto19.removeElements = function removeElements() {
    for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) {
      args[_key8] = arguments[_key8];
    }
    this._each('unregister', args, this.elements);
  };
  _proto19.removePlugins = function removePlugins() {
    for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) {
      args[_key9] = arguments[_key9];
    }
    this._each('unregister', args, this.plugins);
  };
  _proto19.removeScales = function removeScales() {
    for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) {
      args[_key10] = arguments[_key10];
    }
    this._each('unregister', args, this.scales);
  };
  _proto19._each = function _each(method, args, typedRegistry) {
    var _this11 = this;
    [].concat(args).forEach(function (arg) {
      var reg = typedRegistry || _this11._getRegistryForType(arg);
      if (typedRegistry || reg.isForType(arg) || reg === _this11.plugins && arg.id) {
        _this11._exec(method, reg, arg);
      } else {
        Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(arg, function (item) {
          var itemReg = typedRegistry || _this11._getRegistryForType(item);
          _this11._exec(method, itemReg, item);
        });
      }
    });
  };
  _proto19._exec = function _exec(method, registry, component) {
    var camelMethod = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a5"])(method);
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(component['before' + camelMethod], [], component);
    registry[method](component);
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(component['after' + camelMethod], [], component);
  };
  _proto19._getRegistryForType = function _getRegistryForType(type) {
    for (var i = 0; i < this._typedRegistries.length; i++) {
      var reg = this._typedRegistries[i];
      if (reg.isForType(type)) {
        return reg;
      }
    }
    return this.plugins;
  };
  _proto19._get = function _get(id, typedRegistry, type) {
    var item = typedRegistry.get(id);
    if (item === undefined) {
      throw new Error('"' + id + '" is not a registered ' + type + '.');
    }
    return item;
  };
  return Registry;
}();
var registry = /* #__PURE__ */new Registry();
var PluginService = /*#__PURE__*/function () {
  function PluginService() {
    this._init = [];
  }
  var _proto20 = PluginService.prototype;
  _proto20.notify = function notify(chart, hook, args, filter) {
    if (hook === 'beforeInit') {
      this._init = this._createDescriptors(chart, true);
      this._notify(this._init, chart, 'install');
    }
    var descriptors = filter ? this._descriptors(chart).filter(filter) : this._descriptors(chart);
    var result = this._notify(descriptors, chart, hook, args);
    if (hook === 'afterDestroy') {
      this._notify(descriptors, chart, 'stop');
      this._notify(this._init, chart, 'uninstall');
    }
    return result;
  };
  _proto20._notify = function _notify(descriptors, chart, hook, args) {
    args = args || {};
    for (var _iterator11 = _createForOfIteratorHelperLoose(descriptors), _step11; !(_step11 = _iterator11()).done;) {
      var descriptor = _step11.value;
      var plugin = descriptor.plugin;
      var method = plugin[hook];
      var params = [chart, args, descriptor.options];
      if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(method, params, plugin) === false && args.cancelable) {
        return false;
      }
    }
    return true;
  };
  _proto20.invalidate = function invalidate() {
    if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(this._cache)) {
      this._oldCache = this._cache;
      this._cache = undefined;
    }
  };
  _proto20._descriptors = function _descriptors(chart) {
    if (this._cache) {
      return this._cache;
    }
    var descriptors = this._cache = this._createDescriptors(chart);
    this._notifyStateChanges(chart);
    return descriptors;
  };
  _proto20._createDescriptors = function _createDescriptors(chart, all) {
    var config = chart && chart.config;
    var options = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(config.options && config.options.plugins, {});
    var plugins = allPlugins(config);
    return options === false && !all ? [] : createDescriptors(chart, plugins, options, all);
  };
  _proto20._notifyStateChanges = function _notifyStateChanges(chart) {
    var previousDescriptors = this._oldCache || [];
    var descriptors = this._cache;
    var diff = function diff(a, b) {
      return a.filter(function (x) {
        return !b.some(function (y) {
          return x.plugin.id === y.plugin.id;
        });
      });
    };
    this._notify(diff(previousDescriptors, descriptors), chart, 'stop');
    this._notify(diff(descriptors, previousDescriptors), chart, 'start');
  };
  return PluginService;
}();
function allPlugins(config) {
  var localIds = {};
  var plugins = [];
  var keys = Object.keys(registry.plugins.items);
  for (var i = 0; i < keys.length; i++) {
    plugins.push(registry.getPlugin(keys[i]));
  }
  var local = config.plugins || [];
  for (var _i2 = 0; _i2 < local.length; _i2++) {
    var plugin = local[_i2];
    if (plugins.indexOf(plugin) === -1) {
      plugins.push(plugin);
      localIds[plugin.id] = true;
    }
  }
  return {
    plugins: plugins,
    localIds: localIds
  };
}
function getOpts(options, all) {
  if (!all && options === false) {
    return null;
  }
  if (options === true) {
    return {};
  }
  return options;
}
function createDescriptors(chart, _ref2, options, all) {
  var plugins = _ref2.plugins,
    localIds = _ref2.localIds;
  var result = [];
  var context = chart.getContext();
  for (var _iterator12 = _createForOfIteratorHelperLoose(plugins), _step12; !(_step12 = _iterator12()).done;) {
    var plugin = _step12.value;
    var id = plugin.id;
    var opts = getOpts(options[id], all);
    if (opts === null) {
      continue;
    }
    result.push({
      plugin: plugin,
      options: pluginOpts(chart.config, {
        plugin: plugin,
        local: localIds[id]
      }, opts, context)
    });
  }
  return result;
}
function pluginOpts(config, _ref3, opts, context) {
  var plugin = _ref3.plugin,
    local = _ref3.local;
  var keys = config.pluginScopeKeys(plugin);
  var scopes = config.getOptionScopes(opts, keys);
  if (local && plugin.defaults) {
    scopes.push(plugin.defaults);
  }
  return config.createResolver(scopes, context, [''], {
    scriptable: false,
    indexable: false,
    allKeys: true
  });
}
function getIndexAxis(type, options) {
  var datasetDefaults = _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].datasets[type] || {};
  var datasetOptions = (options.datasets || {})[type] || {};
  return datasetOptions.indexAxis || options.indexAxis || datasetDefaults.indexAxis || 'x';
}
function getAxisFromDefaultScaleID(id, indexAxis) {
  var axis = id;
  if (id === '_index_') {
    axis = indexAxis;
  } else if (id === '_value_') {
    axis = indexAxis === 'x' ? 'y' : 'x';
  }
  return axis;
}
function getDefaultScaleIDFromAxis(axis, indexAxis) {
  return axis === indexAxis ? '_index_' : '_value_';
}
function idMatchesAxis(id) {
  if (id === 'x' || id === 'y' || id === 'r') {
    return id;
  }
}
function axisFromPosition(position) {
  if (position === 'top' || position === 'bottom') {
    return 'x';
  }
  if (position === 'left' || position === 'right') {
    return 'y';
  }
}
function determineAxis(id) {
  if (idMatchesAxis(id)) {
    return id;
  }
  for (var _len11 = arguments.length, scaleOptions = new Array(_len11 > 1 ? _len11 - 1 : 0), _key11 = 1; _key11 < _len11; _key11++) {
    scaleOptions[_key11 - 1] = arguments[_key11];
  }
  for (var _i3 = 0, _scaleOptions = scaleOptions; _i3 < _scaleOptions.length; _i3++) {
    var opts = _scaleOptions[_i3];
    var axis = opts.axis || axisFromPosition(opts.position) || id.length > 1 && idMatchesAxis(id[0].toLowerCase());
    if (axis) {
      return axis;
    }
  }
  throw new Error("Cannot determine type of '" + id + "' axis. Please provide 'axis' or 'position' option.");
}
function getAxisFromDataset(id, axis, dataset) {
  if (dataset[axis + 'AxisID'] === id) {
    return {
      axis: axis
    };
  }
}
function retrieveAxisFromDatasets(id, config) {
  if (config.data && config.data.datasets) {
    var boundDs = config.data.datasets.filter(function (d) {
      return d.xAxisID === id || d.yAxisID === id;
    });
    if (boundDs.length) {
      return getAxisFromDataset(id, 'x', boundDs[0]) || getAxisFromDataset(id, 'y', boundDs[0]);
    }
  }
  return {};
}
function mergeScaleConfig(config, options) {
  var chartDefaults = _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a3"][config.type] || {
    scales: {}
  };
  var configScales = options.scales || {};
  var chartIndexAxis = getIndexAxis(config.type, options);
  var scales = Object.create(null);
  Object.keys(configScales).forEach(function (id) {
    var scaleConf = configScales[id];
    if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(scaleConf)) {
      return console.error("Invalid scale configuration for scale: " + id);
    }
    if (scaleConf._proxy) {
      return console.warn("Ignoring resolver passed as options for scale: " + id);
    }
    var axis = determineAxis(id, scaleConf, retrieveAxisFromDatasets(id, config), _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].scales[scaleConf.type]);
    var defaultId = getDefaultScaleIDFromAxis(axis, chartIndexAxis);
    var defaultScaleOptions = chartDefaults.scales || {};
    scales[id] = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ab"])(Object.create(null), [{
      axis: axis
    }, scaleConf, defaultScaleOptions[axis], defaultScaleOptions[defaultId]]);
  });
  config.data.datasets.forEach(function (dataset) {
    var type = dataset.type || config.type;
    var indexAxis = dataset.indexAxis || getIndexAxis(type, options);
    var datasetDefaults = _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a3"][type] || {};
    var defaultScaleOptions = datasetDefaults.scales || {};
    Object.keys(defaultScaleOptions).forEach(function (defaultID) {
      var axis = getAxisFromDefaultScaleID(defaultID, indexAxis);
      var id = dataset[axis + 'AxisID'] || axis;
      scales[id] = scales[id] || Object.create(null);
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ab"])(scales[id], [{
        axis: axis
      }, configScales[id], defaultScaleOptions[defaultID]]);
    });
  });
  Object.keys(scales).forEach(function (key) {
    var scale = scales[key];
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ab"])(scale, [_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].scales[scale.type], _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].scale]);
  });
  return scales;
}
function initOptions(config) {
  var options = config.options || (config.options = {});
  options.plugins = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(options.plugins, {});
  options.scales = mergeScaleConfig(config, options);
}
function initData(data) {
  data = data || {};
  data.datasets = data.datasets || [];
  data.labels = data.labels || [];
  return data;
}
function initConfig(config) {
  config = config || {};
  config.data = initData(config.data);
  initOptions(config);
  return config;
}
var keyCache = new Map();
var keysCached = new Set();
function cachedKeys(cacheKey, generate) {
  var keys = keyCache.get(cacheKey);
  if (!keys) {
    keys = generate();
    keyCache.set(cacheKey, keys);
    keysCached.add(keys);
  }
  return keys;
}
var addIfFound = function addIfFound(set, obj, key) {
  var opts = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["f"])(obj, key);
  if (opts !== undefined) {
    set.add(opts);
  }
};
var Config = /*#__PURE__*/function () {
  function Config(config) {
    this._config = initConfig(config);
    this._scopeCache = new Map();
    this._resolverCache = new Map();
  }
  var _proto21 = Config.prototype;
  _proto21.update = function update() {
    var config = this._config;
    this.clearCache();
    initOptions(config);
  };
  _proto21.clearCache = function clearCache() {
    this._scopeCache.clear();
    this._resolverCache.clear();
  };
  _proto21.datasetScopeKeys = function datasetScopeKeys(datasetType) {
    return cachedKeys(datasetType, function () {
      return [["datasets." + datasetType, '']];
    });
  };
  _proto21.datasetAnimationScopeKeys = function datasetAnimationScopeKeys(datasetType, transition) {
    return cachedKeys(datasetType + ".transition." + transition, function () {
      return [["datasets." + datasetType + ".transitions." + transition, "transitions." + transition], ["datasets." + datasetType, '']];
    });
  };
  _proto21.datasetElementScopeKeys = function datasetElementScopeKeys(datasetType, elementType) {
    return cachedKeys(datasetType + "-" + elementType, function () {
      return [["datasets." + datasetType + ".elements." + elementType, "datasets." + datasetType, "elements." + elementType, '']];
    });
  };
  _proto21.pluginScopeKeys = function pluginScopeKeys(plugin) {
    var id = plugin.id;
    var type = this.type;
    return cachedKeys(type + "-plugin-" + id, function () {
      return [["plugins." + id].concat(plugin.additionalOptionScopes || [])];
    });
  };
  _proto21._cachedScopes = function _cachedScopes(mainScope, resetCache) {
    var _scopeCache = this._scopeCache;
    var cache = _scopeCache.get(mainScope);
    if (!cache || resetCache) {
      cache = new Map();
      _scopeCache.set(mainScope, cache);
    }
    return cache;
  };
  _proto21.getOptionScopes = function getOptionScopes(mainScope, keyLists, resetCache) {
    var options = this.options,
      type = this.type;
    var cache = this._cachedScopes(mainScope, resetCache);
    var cached = cache.get(keyLists);
    if (cached) {
      return cached;
    }
    var scopes = new Set();
    keyLists.forEach(function (keys) {
      if (mainScope) {
        scopes.add(mainScope);
        keys.forEach(function (key) {
          return addIfFound(scopes, mainScope, key);
        });
      }
      keys.forEach(function (key) {
        return addIfFound(scopes, options, key);
      });
      keys.forEach(function (key) {
        return addIfFound(scopes, _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a3"][type] || {}, key);
      });
      keys.forEach(function (key) {
        return addIfFound(scopes, _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"], key);
      });
      keys.forEach(function (key) {
        return addIfFound(scopes, _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a6"], key);
      });
    });
    var array = Array.from(scopes);
    if (array.length === 0) {
      array.push(Object.create(null));
    }
    if (keysCached.has(keyLists)) {
      cache.set(keyLists, array);
    }
    return array;
  };
  _proto21.chartOptionScopes = function chartOptionScopes() {
    var options = this.options,
      type = this.type;
    return [options, _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a3"][type] || {}, _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].datasets[type] || {}, {
      type: type
    }, _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"], _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a6"]];
  };
  _proto21.resolveNamedOptions = function resolveNamedOptions(scopes, names, context, prefixes) {
    if (prefixes === void 0) {
      prefixes = [''];
    }
    var result = {
      $shared: true
    };
    var _getResolver = getResolver(this._resolverCache, scopes, prefixes),
      resolver = _getResolver.resolver,
      subPrefixes = _getResolver.subPrefixes;
    var options = resolver;
    if (needContext(resolver, names)) {
      result.$shared = false;
      context = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a7"])(context) ? context() : context;
      var subResolver = this.createResolver(scopes, context, subPrefixes);
      options = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a8"])(resolver, context, subResolver);
    }
    for (var _iterator13 = _createForOfIteratorHelperLoose(names), _step13; !(_step13 = _iterator13()).done;) {
      var prop = _step13.value;
      result[prop] = options[prop];
    }
    return result;
  };
  _proto21.createResolver = function createResolver(scopes, context, prefixes, descriptorDefaults) {
    if (prefixes === void 0) {
      prefixes = [''];
    }
    var _getResolver2 = getResolver(this._resolverCache, scopes, prefixes),
      resolver = _getResolver2.resolver;
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(context) ? Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a8"])(resolver, context, undefined, descriptorDefaults) : resolver;
  };
  return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Config, [{
    key: "platform",
    get: function get() {
      return this._config.platform;
    }
  }, {
    key: "type",
    get: function get() {
      return this._config.type;
    },
    set: function set(type) {
      this._config.type = type;
    }
  }, {
    key: "data",
    get: function get() {
      return this._config.data;
    },
    set: function set(data) {
      this._config.data = initData(data);
    }
  }, {
    key: "options",
    get: function get() {
      return this._config.options;
    },
    set: function set(options) {
      this._config.options = options;
    }
  }, {
    key: "plugins",
    get: function get() {
      return this._config.plugins;
    }
  }]);
}();
function getResolver(resolverCache, scopes, prefixes) {
  var cache = resolverCache.get(scopes);
  if (!cache) {
    cache = new Map();
    resolverCache.set(scopes, cache);
  }
  var cacheKey = prefixes.join();
  var cached = cache.get(cacheKey);
  if (!cached) {
    var resolver = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a9"])(scopes, prefixes);
    cached = {
      resolver: resolver,
      subPrefixes: prefixes.filter(function (p) {
        return !p.toLowerCase().includes('hover');
      })
    };
    cache.set(cacheKey, cached);
  }
  return cached;
}
var hasFunction = function hasFunction(value) {
  return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(value) && Object.getOwnPropertyNames(value).some(function (key) {
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a7"])(value[key]);
  });
};
function needContext(proxy, names) {
  var _descriptors2 = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aa"])(proxy),
    isScriptable = _descriptors2.isScriptable,
    isIndexable = _descriptors2.isIndexable;
  for (var _iterator14 = _createForOfIteratorHelperLoose(names), _step14; !(_step14 = _iterator14()).done;) {
    var prop = _step14.value;
    var scriptable = isScriptable(prop);
    var indexable = isIndexable(prop);
    var value = (indexable || scriptable) && proxy[prop];
    if (scriptable && (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a7"])(value) || hasFunction(value)) || indexable && Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["b"])(value)) {
      return true;
    }
  }
  return false;
}
var version = "4.4.7";
var KNOWN_POSITIONS = ['top', 'bottom', 'left', 'right', 'chartArea'];
function positionIsHorizontal(position, axis) {
  return position === 'top' || position === 'bottom' || KNOWN_POSITIONS.indexOf(position) === -1 && axis === 'x';
}
function compare2Level(l1, l2) {
  return function (a, b) {
    return a[l1] === b[l1] ? a[l2] - b[l2] : a[l1] - b[l1];
  };
}
function onAnimationsComplete(context) {
  var chart = context.chart;
  var animationOptions = chart.options.animation;
  chart.notifyPlugins('afterRender');
  Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(animationOptions && animationOptions.onComplete, [context], chart);
}
function onAnimationProgress(context) {
  var chart = context.chart;
  var animationOptions = chart.options.animation;
  Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(animationOptions && animationOptions.onProgress, [context], chart);
}
function getCanvas(item) {
  if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["M"])() && typeof item === 'string') {
    item = document.getElementById(item);
  } else if (item && item.length) {
    item = item[0];
  }
  if (item && item.canvas) {
    item = item.canvas;
  }
  return item;
}
var instances = {};
var getChart = function getChart(key) {
  var canvas = getCanvas(key);
  return Object.values(instances).filter(function (c) {
    return c.canvas === canvas;
  }).pop();
};
function moveNumericKeys(obj, start, move) {
  var keys = Object.keys(obj);
  for (var _i4 = 0, _keys = keys; _i4 < _keys.length; _i4++) {
    var key = _keys[_i4];
    var intKey = +key;
    if (intKey >= start) {
      var value = obj[key];
      delete obj[key];
      if (move > 0 || intKey > start) {
        obj[intKey + move] = value;
      }
    }
  }
}
function determineLastEvent(e, lastEvent, inChartArea, isClick) {
  if (!inChartArea || e.type === 'mouseout') {
    return null;
  }
  if (isClick) {
    return lastEvent;
  }
  return e;
}
function getSizeForArea(scale, chartArea, field) {
  return scale.options.clip ? scale[field] : chartArea[field];
}
function getDatasetArea(meta, chartArea) {
  var xScale = meta.xScale,
    yScale = meta.yScale;
  if (xScale && yScale) {
    return {
      left: getSizeForArea(xScale, chartArea, 'left'),
      right: getSizeForArea(xScale, chartArea, 'right'),
      top: getSizeForArea(yScale, chartArea, 'top'),
      bottom: getSizeForArea(yScale, chartArea, 'bottom')
    };
  }
  return chartArea;
}
var Chart = /*#__PURE__*/function () {
  function Chart(item, userConfig) {
    var _this12 = this;
    var config = this.config = new Config(userConfig);
    var initialCanvas = getCanvas(item);
    var existingChart = getChart(initialCanvas);
    if (existingChart) {
      throw new Error('Canvas is already in use. Chart with ID \'' + existingChart.id + '\'' + ' must be destroyed before the canvas with ID \'' + existingChart.canvas.id + '\' can be reused.');
    }
    var options = config.createResolver(config.chartOptionScopes(), this.getContext());
    this.platform = new (config.platform || _detectPlatform(initialCanvas))();
    this.platform.updateConfig(config);
    var context = this.platform.acquireContext(initialCanvas, options.aspectRatio);
    var canvas = context && context.canvas;
    var height = canvas && canvas.height;
    var width = canvas && canvas.width;
    this.id = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ac"])();
    this.ctx = context;
    this.canvas = canvas;
    this.width = width;
    this.height = height;
    this._options = options;
    this._aspectRatio = this.aspectRatio;
    this._layers = [];
    this._metasets = [];
    this._stacks = undefined;
    this.boxes = [];
    this.currentDevicePixelRatio = undefined;
    this.chartArea = undefined;
    this._active = [];
    this._lastEvent = undefined;
    this._listeners = {};
    this._responsiveListeners = undefined;
    this._sortedMetasets = [];
    this.scales = {};
    this._plugins = new PluginService();
    this.$proxies = {};
    this._hiddenIndices = {};
    this.attached = false;
    this._animationsDisabled = undefined;
    this.$context = undefined;
    this._doResize = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ad"])(function (mode) {
      return _this12.update(mode);
    }, options.resizeDelay || 0);
    this._dataChanges = [];
    instances[this.id] = this;
    if (!context || !canvas) {
      console.error("Failed to create chart: can't acquire context from the given item");
      return;
    }
    animator.listen(this, 'complete', onAnimationsComplete);
    animator.listen(this, 'progress', onAnimationProgress);
    this._initialize();
    if (this.attached) {
      this.update();
    }
  }
  Chart.register = function register() {
    registry.add.apply(registry, arguments);
    invalidatePlugins();
  };
  Chart.unregister = function unregister() {
    registry.remove.apply(registry, arguments);
    invalidatePlugins();
  };
  var _proto22 = Chart.prototype;
  _proto22._initialize = function _initialize() {
    this.notifyPlugins('beforeInit');
    if (this.options.responsive) {
      this.resize();
    } else {
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ae"])(this, this.options.devicePixelRatio);
    }
    this.bindEvents();
    this.notifyPlugins('afterInit');
    return this;
  };
  _proto22.clear = function clear() {
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["af"])(this.canvas, this.ctx);
    return this;
  };
  _proto22.stop = function stop() {
    animator.stop(this);
    return this;
  };
  _proto22.resize = function resize(width, height) {
    if (!animator.running(this)) {
      this._resize(width, height);
    } else {
      this._resizeBeforeDraw = {
        width: width,
        height: height
      };
    }
  };
  _proto22._resize = function _resize(width, height) {
    var options = this.options;
    var canvas = this.canvas;
    var aspectRatio = options.maintainAspectRatio && this.aspectRatio;
    var newSize = this.platform.getMaximumSize(canvas, width, height, aspectRatio);
    var newRatio = options.devicePixelRatio || this.platform.getDevicePixelRatio();
    var mode = this.width ? 'resize' : 'attach';
    this.width = newSize.width;
    this.height = newSize.height;
    this._aspectRatio = this.aspectRatio;
    if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ae"])(this, newRatio, true)) {
      return;
    }
    this.notifyPlugins('resize', {
      size: newSize
    });
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(options.onResize, [this, newSize], this);
    if (this.attached) {
      if (this._doResize(mode)) {
        this.render();
      }
    }
  };
  _proto22.ensureScalesHaveIDs = function ensureScalesHaveIDs() {
    var options = this.options;
    var scalesOptions = options.scales || {};
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(scalesOptions, function (axisOptions, axisID) {
      axisOptions.id = axisID;
    });
  };
  _proto22.buildOrUpdateScales = function buildOrUpdateScales() {
    var _this13 = this;
    var options = this.options;
    var scaleOpts = options.scales;
    var scales = this.scales;
    var updated = Object.keys(scales).reduce(function (obj, id) {
      obj[id] = false;
      return obj;
    }, {});
    var items = [];
    if (scaleOpts) {
      items = items.concat(Object.keys(scaleOpts).map(function (id) {
        var scaleOptions = scaleOpts[id];
        var axis = determineAxis(id, scaleOptions);
        var isRadial = axis === 'r';
        var isHorizontal = axis === 'x';
        return {
          options: scaleOptions,
          dposition: isRadial ? 'chartArea' : isHorizontal ? 'bottom' : 'left',
          dtype: isRadial ? 'radialLinear' : isHorizontal ? 'category' : 'linear'
        };
      }));
    }
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(items, function (item) {
      var scaleOptions = item.options;
      var id = scaleOptions.id;
      var axis = determineAxis(id, scaleOptions);
      var scaleType = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(scaleOptions.type, item.dtype);
      if (scaleOptions.position === undefined || positionIsHorizontal(scaleOptions.position, axis) !== positionIsHorizontal(item.dposition)) {
        scaleOptions.position = item.dposition;
      }
      updated[id] = true;
      var scale = null;
      if (id in scales && scales[id].type === scaleType) {
        scale = scales[id];
      } else {
        var scaleClass = registry.getScale(scaleType);
        scale = new scaleClass({
          id: id,
          type: scaleType,
          ctx: _this13.ctx,
          chart: _this13
        });
        scales[scale.id] = scale;
      }
      scale.init(scaleOptions, options);
    });
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(updated, function (hasUpdated, id) {
      if (!hasUpdated) {
        delete scales[id];
      }
    });
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(scales, function (scale) {
      layouts.configure(_this13, scale, scale.options);
      layouts.addBox(_this13, scale);
    });
  };
  _proto22._updateMetasets = function _updateMetasets() {
    var metasets = this._metasets;
    var numData = this.data.datasets.length;
    var numMeta = metasets.length;
    metasets.sort(function (a, b) {
      return a.index - b.index;
    });
    if (numMeta > numData) {
      for (var i = numData; i < numMeta; ++i) {
        this._destroyDatasetMeta(i);
      }
      metasets.splice(numData, numMeta - numData);
    }
    this._sortedMetasets = metasets.slice(0).sort(compare2Level('order', 'index'));
  };
  _proto22._removeUnreferencedMetasets = function _removeUnreferencedMetasets() {
    var _this14 = this;
    var metasets = this._metasets,
      datasets = this.data.datasets;
    if (metasets.length > datasets.length) {
      delete this._stacks;
    }
    metasets.forEach(function (meta, index) {
      if (datasets.filter(function (x) {
        return x === meta._dataset;
      }).length === 0) {
        _this14._destroyDatasetMeta(index);
      }
    });
  };
  _proto22.buildOrUpdateControllers = function buildOrUpdateControllers() {
    var newControllers = [];
    var datasets = this.data.datasets;
    var i, ilen;
    this._removeUnreferencedMetasets();
    for (i = 0, ilen = datasets.length; i < ilen; i++) {
      var dataset = datasets[i];
      var meta = this.getDatasetMeta(i);
      var type = dataset.type || this.config.type;
      if (meta.type && meta.type !== type) {
        this._destroyDatasetMeta(i);
        meta = this.getDatasetMeta(i);
      }
      meta.type = type;
      meta.indexAxis = dataset.indexAxis || getIndexAxis(type, this.options);
      meta.order = dataset.order || 0;
      meta.index = i;
      meta.label = '' + dataset.label;
      meta.visible = this.isDatasetVisible(i);
      if (meta.controller) {
        meta.controller.updateIndex(i);
        meta.controller.linkScales();
      } else {
        var ControllerClass = registry.getController(type);
        var _defaults$datasets$ty = _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].datasets[type],
          datasetElementType = _defaults$datasets$ty.datasetElementType,
          dataElementType = _defaults$datasets$ty.dataElementType;
        Object.assign(ControllerClass, {
          dataElementType: registry.getElement(dataElementType),
          datasetElementType: datasetElementType && registry.getElement(datasetElementType)
        });
        meta.controller = new ControllerClass(this, i);
        newControllers.push(meta.controller);
      }
    }
    this._updateMetasets();
    return newControllers;
  };
  _proto22._resetElements = function _resetElements() {
    var _this15 = this;
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(this.data.datasets, function (dataset, datasetIndex) {
      _this15.getDatasetMeta(datasetIndex).controller.reset();
    }, this);
  };
  _proto22.reset = function reset() {
    this._resetElements();
    this.notifyPlugins('reset');
  };
  _proto22.update = function update(mode) {
    var config = this.config;
    config.update();
    var options = this._options = config.createResolver(config.chartOptionScopes(), this.getContext());
    var animsDisabled = this._animationsDisabled = !options.animation;
    this._updateScales();
    this._checkEventBindings();
    this._updateHiddenIndices();
    this._plugins.invalidate();
    if (this.notifyPlugins('beforeUpdate', {
      mode: mode,
      cancelable: true
    }) === false) {
      return;
    }
    var newControllers = this.buildOrUpdateControllers();
    this.notifyPlugins('beforeElementsUpdate');
    var minPadding = 0;
    for (var i = 0, ilen = this.data.datasets.length; i < ilen; i++) {
      var _this$getDatasetMeta = this.getDatasetMeta(i),
        controller = _this$getDatasetMeta.controller;
      var reset = !animsDisabled && newControllers.indexOf(controller) === -1;
      controller.buildOrUpdateElements(reset);
      minPadding = Math.max(+controller.getMaxOverflow(), minPadding);
    }
    minPadding = this._minPadding = options.layout.autoPadding ? minPadding : 0;
    this._updateLayout(minPadding);
    if (!animsDisabled) {
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(newControllers, function (controller) {
        controller.reset();
      });
    }
    this._updateDatasets(mode);
    this.notifyPlugins('afterUpdate', {
      mode: mode
    });
    this._layers.sort(compare2Level('z', '_idx'));
    var _active = this._active,
      _lastEvent = this._lastEvent;
    if (_lastEvent) {
      this._eventHandler(_lastEvent, true);
    } else if (_active.length) {
      this._updateHoverStyles(_active, _active, true);
    }
    this.render();
  };
  _proto22._updateScales = function _updateScales() {
    var _this16 = this;
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(this.scales, function (scale) {
      layouts.removeBox(_this16, scale);
    });
    this.ensureScalesHaveIDs();
    this.buildOrUpdateScales();
  };
  _proto22._checkEventBindings = function _checkEventBindings() {
    var options = this.options;
    var existingEvents = new Set(Object.keys(this._listeners));
    var newEvents = new Set(options.events);
    if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ag"])(existingEvents, newEvents) || !!this._responsiveListeners !== options.responsive) {
      this.unbindEvents();
      this.bindEvents();
    }
  };
  _proto22._updateHiddenIndices = function _updateHiddenIndices() {
    var _hiddenIndices = this._hiddenIndices;
    var changes = this._getUniformDataChanges() || [];
    for (var _iterator15 = _createForOfIteratorHelperLoose(changes), _step15; !(_step15 = _iterator15()).done;) {
      var _step15$value = _step15.value,
        method = _step15$value.method,
        start = _step15$value.start,
        count = _step15$value.count;
      var move = method === '_removeElements' ? -count : count;
      moveNumericKeys(_hiddenIndices, start, move);
    }
  };
  _proto22._getUniformDataChanges = function _getUniformDataChanges() {
    var _dataChanges = this._dataChanges;
    if (!_dataChanges || !_dataChanges.length) {
      return;
    }
    this._dataChanges = [];
    var datasetCount = this.data.datasets.length;
    var makeSet = function makeSet(idx) {
      return new Set(_dataChanges.filter(function (c) {
        return c[0] === idx;
      }).map(function (c, i) {
        return i + ',' + c.splice(1).join(',');
      }));
    };
    var changeSet = makeSet(0);
    for (var i = 1; i < datasetCount; i++) {
      if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ag"])(changeSet, makeSet(i))) {
        return;
      }
    }
    return Array.from(changeSet).map(function (c) {
      return c.split(',');
    }).map(function (a) {
      return {
        method: a[1],
        start: +a[2],
        count: +a[3]
      };
    });
  };
  _proto22._updateLayout = function _updateLayout(minPadding) {
    var _this17 = this;
    if (this.notifyPlugins('beforeLayout', {
      cancelable: true
    }) === false) {
      return;
    }
    layouts.update(this, this.width, this.height, minPadding);
    var area = this.chartArea;
    var noArea = area.width <= 0 || area.height <= 0;
    this._layers = [];
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(this.boxes, function (box) {
      var _this17$_layers;
      if (noArea && box.position === 'chartArea') {
        return;
      }
      if (box.configure) {
        box.configure();
      }
      (_this17$_layers = _this17._layers).push.apply(_this17$_layers, box._layers());
    }, this);
    this._layers.forEach(function (item, index) {
      item._idx = index;
    });
    this.notifyPlugins('afterLayout');
  };
  _proto22._updateDatasets = function _updateDatasets(mode) {
    if (this.notifyPlugins('beforeDatasetsUpdate', {
      mode: mode,
      cancelable: true
    }) === false) {
      return;
    }
    for (var i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {
      this.getDatasetMeta(i).controller.configure();
    }
    for (var _i5 = 0, _ilen = this.data.datasets.length; _i5 < _ilen; ++_i5) {
      this._updateDataset(_i5, Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a7"])(mode) ? mode({
        datasetIndex: _i5
      }) : mode);
    }
    this.notifyPlugins('afterDatasetsUpdate', {
      mode: mode
    });
  };
  _proto22._updateDataset = function _updateDataset(index, mode) {
    var meta = this.getDatasetMeta(index);
    var args = {
      meta: meta,
      index: index,
      mode: mode,
      cancelable: true
    };
    if (this.notifyPlugins('beforeDatasetUpdate', args) === false) {
      return;
    }
    meta.controller._update(mode);
    args.cancelable = false;
    this.notifyPlugins('afterDatasetUpdate', args);
  };
  _proto22.render = function render() {
    if (this.notifyPlugins('beforeRender', {
      cancelable: true
    }) === false) {
      return;
    }
    if (animator.has(this)) {
      if (this.attached && !animator.running(this)) {
        animator.start(this);
      }
    } else {
      this.draw();
      onAnimationsComplete({
        chart: this
      });
    }
  };
  _proto22.draw = function draw() {
    var i;
    if (this._resizeBeforeDraw) {
      var _this$_resizeBeforeDr = this._resizeBeforeDraw,
        width = _this$_resizeBeforeDr.width,
        height = _this$_resizeBeforeDr.height;
      this._resizeBeforeDraw = null;
      this._resize(width, height);
    }
    this.clear();
    if (this.width <= 0 || this.height <= 0) {
      return;
    }
    if (this.notifyPlugins('beforeDraw', {
      cancelable: true
    }) === false) {
      return;
    }
    var layers = this._layers;
    for (i = 0; i < layers.length && layers[i].z <= 0; ++i) {
      layers[i].draw(this.chartArea);
    }
    this._drawDatasets();
    for (; i < layers.length; ++i) {
      layers[i].draw(this.chartArea);
    }
    this.notifyPlugins('afterDraw');
  };
  _proto22._getSortedDatasetMetas = function _getSortedDatasetMetas(filterVisible) {
    var metasets = this._sortedMetasets;
    var result = [];
    var i, ilen;
    for (i = 0, ilen = metasets.length; i < ilen; ++i) {
      var meta = metasets[i];
      if (!filterVisible || meta.visible) {
        result.push(meta);
      }
    }
    return result;
  };
  _proto22.getSortedVisibleDatasetMetas = function getSortedVisibleDatasetMetas() {
    return this._getSortedDatasetMetas(true);
  };
  _proto22._drawDatasets = function _drawDatasets() {
    if (this.notifyPlugins('beforeDatasetsDraw', {
      cancelable: true
    }) === false) {
      return;
    }
    var metasets = this.getSortedVisibleDatasetMetas();
    for (var i = metasets.length - 1; i >= 0; --i) {
      this._drawDataset(metasets[i]);
    }
    this.notifyPlugins('afterDatasetsDraw');
  };
  _proto22._drawDataset = function _drawDataset(meta) {
    var ctx = this.ctx;
    var clip = meta._clip;
    var useClip = !clip.disabled;
    var area = getDatasetArea(meta, this.chartArea);
    var args = {
      meta: meta,
      index: meta.index,
      cancelable: true
    };
    if (this.notifyPlugins('beforeDatasetDraw', args) === false) {
      return;
    }
    if (useClip) {
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Y"])(ctx, {
        left: clip.left === false ? 0 : area.left - clip.left,
        right: clip.right === false ? this.width : area.right + clip.right,
        top: clip.top === false ? 0 : area.top - clip.top,
        bottom: clip.bottom === false ? this.height : area.bottom + clip.bottom
      });
    }
    meta.controller.draw();
    if (useClip) {
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["$"])(ctx);
    }
    args.cancelable = false;
    this.notifyPlugins('afterDatasetDraw', args);
  };
  _proto22.isPointInArea = function isPointInArea(point) {
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["C"])(point, this.chartArea, this._minPadding);
  };
  _proto22.getElementsAtEventForMode = function getElementsAtEventForMode(e, mode, options, useFinalPosition) {
    var method = Interaction.modes[mode];
    if (typeof method === 'function') {
      return method(this, e, options, useFinalPosition);
    }
    return [];
  };
  _proto22.getDatasetMeta = function getDatasetMeta(datasetIndex) {
    var dataset = this.data.datasets[datasetIndex];
    var metasets = this._metasets;
    var meta = metasets.filter(function (x) {
      return x && x._dataset === dataset;
    }).pop();
    if (!meta) {
      meta = {
        type: null,
        data: [],
        dataset: null,
        controller: null,
        hidden: null,
        xAxisID: null,
        yAxisID: null,
        order: dataset && dataset.order || 0,
        index: datasetIndex,
        _dataset: dataset,
        _parsed: [],
        _sorted: false
      };
      metasets.push(meta);
    }
    return meta;
  };
  _proto22.getContext = function getContext() {
    return this.$context || (this.$context = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["j"])(null, {
      chart: this,
      type: 'chart'
    }));
  };
  _proto22.getVisibleDatasetCount = function getVisibleDatasetCount() {
    return this.getSortedVisibleDatasetMetas().length;
  };
  _proto22.isDatasetVisible = function isDatasetVisible(datasetIndex) {
    var dataset = this.data.datasets[datasetIndex];
    if (!dataset) {
      return false;
    }
    var meta = this.getDatasetMeta(datasetIndex);
    return typeof meta.hidden === 'boolean' ? !meta.hidden : !dataset.hidden;
  };
  _proto22.setDatasetVisibility = function setDatasetVisibility(datasetIndex, visible) {
    var meta = this.getDatasetMeta(datasetIndex);
    meta.hidden = !visible;
  };
  _proto22.toggleDataVisibility = function toggleDataVisibility(index) {
    this._hiddenIndices[index] = !this._hiddenIndices[index];
  };
  _proto22.getDataVisibility = function getDataVisibility(index) {
    return !this._hiddenIndices[index];
  };
  _proto22._updateVisibility = function _updateVisibility(datasetIndex, dataIndex, visible) {
    var mode = visible ? 'show' : 'hide';
    var meta = this.getDatasetMeta(datasetIndex);
    var anims = meta.controller._resolveAnimations(undefined, mode);
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["h"])(dataIndex)) {
      meta.data[dataIndex].hidden = !visible;
      this.update();
    } else {
      this.setDatasetVisibility(datasetIndex, visible);
      anims.update(meta, {
        visible: visible
      });
      this.update(function (ctx) {
        return ctx.datasetIndex === datasetIndex ? mode : undefined;
      });
    }
  };
  _proto22.hide = function hide(datasetIndex, dataIndex) {
    this._updateVisibility(datasetIndex, dataIndex, false);
  };
  _proto22.show = function show(datasetIndex, dataIndex) {
    this._updateVisibility(datasetIndex, dataIndex, true);
  };
  _proto22._destroyDatasetMeta = function _destroyDatasetMeta(datasetIndex) {
    var meta = this._metasets[datasetIndex];
    if (meta && meta.controller) {
      meta.controller._destroy();
    }
    delete this._metasets[datasetIndex];
  };
  _proto22._stop = function _stop() {
    var i, ilen;
    this.stop();
    animator.remove(this);
    for (i = 0, ilen = this.data.datasets.length; i < ilen; ++i) {
      this._destroyDatasetMeta(i);
    }
  };
  _proto22.destroy = function destroy() {
    this.notifyPlugins('beforeDestroy');
    var canvas = this.canvas,
      ctx = this.ctx;
    this._stop();
    this.config.clearCache();
    if (canvas) {
      this.unbindEvents();
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["af"])(canvas, ctx);
      this.platform.releaseContext(ctx);
      this.canvas = null;
      this.ctx = null;
    }
    delete instances[this.id];
    this.notifyPlugins('afterDestroy');
  };
  _proto22.toBase64Image = function toBase64Image() {
    var _this$canvas;
    return (_this$canvas = this.canvas).toDataURL.apply(_this$canvas, arguments);
  };
  _proto22.bindEvents = function bindEvents() {
    this.bindUserEvents();
    if (this.options.responsive) {
      this.bindResponsiveEvents();
    } else {
      this.attached = true;
    }
  };
  _proto22.bindUserEvents = function bindUserEvents() {
    var _this18 = this;
    var listeners = this._listeners;
    var platform = this.platform;
    var _add = function _add(type, listener) {
      platform.addEventListener(_this18, type, listener);
      listeners[type] = listener;
    };
    var listener = function listener(e, x, y) {
      e.offsetX = x;
      e.offsetY = y;
      _this18._eventHandler(e);
    };
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(this.options.events, function (type) {
      return _add(type, listener);
    });
  };
  _proto22.bindResponsiveEvents = function bindResponsiveEvents() {
    var _this19 = this;
    if (!this._responsiveListeners) {
      this._responsiveListeners = {};
    }
    var listeners = this._responsiveListeners;
    var platform = this.platform;
    var _add = function _add(type, listener) {
      platform.addEventListener(_this19, type, listener);
      listeners[type] = listener;
    };
    var _remove = function _remove(type, listener) {
      if (listeners[type]) {
        platform.removeEventListener(_this19, type, listener);
        delete listeners[type];
      }
    };
    var listener = function listener(width, height) {
      if (_this19.canvas) {
        _this19.resize(width, height);
      }
    };
    var detached;
    var _attached = function attached() {
      _remove('attach', _attached);
      _this19.attached = true;
      _this19.resize();
      _add('resize', listener);
      _add('detach', detached);
    };
    detached = function detached() {
      _this19.attached = false;
      _remove('resize', listener);
      _this19._stop();
      _this19._resize(0, 0);
      _add('attach', _attached);
    };
    if (platform.isAttached(this.canvas)) {
      _attached();
    } else {
      detached();
    }
  };
  _proto22.unbindEvents = function unbindEvents() {
    var _this20 = this;
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(this._listeners, function (listener, type) {
      _this20.platform.removeEventListener(_this20, type, listener);
    });
    this._listeners = {};
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(this._responsiveListeners, function (listener, type) {
      _this20.platform.removeEventListener(_this20, type, listener);
    });
    this._responsiveListeners = undefined;
  };
  _proto22.updateHoverStyle = function updateHoverStyle(items, mode, enabled) {
    var prefix = enabled ? 'set' : 'remove';
    var meta, item, i, ilen;
    if (mode === 'dataset') {
      meta = this.getDatasetMeta(items[0].datasetIndex);
      meta.controller['_' + prefix + 'DatasetHoverStyle']();
    }
    for (i = 0, ilen = items.length; i < ilen; ++i) {
      item = items[i];
      var controller = item && this.getDatasetMeta(item.datasetIndex).controller;
      if (controller) {
        controller[prefix + 'HoverStyle'](item.element, item.datasetIndex, item.index);
      }
    }
  };
  _proto22.getActiveElements = function getActiveElements() {
    return this._active || [];
  };
  _proto22.setActiveElements = function setActiveElements(activeElements) {
    var _this21 = this;
    var lastActive = this._active || [];
    var active = activeElements.map(function (_ref4) {
      var datasetIndex = _ref4.datasetIndex,
        index = _ref4.index;
      var meta = _this21.getDatasetMeta(datasetIndex);
      if (!meta) {
        throw new Error('No dataset found at index ' + datasetIndex);
      }
      return {
        datasetIndex: datasetIndex,
        element: meta.data[index],
        index: index
      };
    });
    var changed = !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ah"])(active, lastActive);
    if (changed) {
      this._active = active;
      this._lastEvent = null;
      this._updateHoverStyles(active, lastActive);
    }
  };
  _proto22.notifyPlugins = function notifyPlugins(hook, args, filter) {
    return this._plugins.notify(this, hook, args, filter);
  };
  _proto22.isPluginEnabled = function isPluginEnabled(pluginId) {
    return this._plugins._cache.filter(function (p) {
      return p.plugin.id === pluginId;
    }).length === 1;
  };
  _proto22._updateHoverStyles = function _updateHoverStyles(active, lastActive, replay) {
    var hoverOptions = this.options.hover;
    var diff = function diff(a, b) {
      return a.filter(function (x) {
        return !b.some(function (y) {
          return x.datasetIndex === y.datasetIndex && x.index === y.index;
        });
      });
    };
    var deactivated = diff(lastActive, active);
    var activated = replay ? active : diff(active, lastActive);
    if (deactivated.length) {
      this.updateHoverStyle(deactivated, hoverOptions.mode, false);
    }
    if (activated.length && hoverOptions.mode) {
      this.updateHoverStyle(activated, hoverOptions.mode, true);
    }
  };
  _proto22._eventHandler = function _eventHandler(e, replay) {
    var _this22 = this;
    var args = {
      event: e,
      replay: replay,
      cancelable: true,
      inChartArea: this.isPointInArea(e)
    };
    var eventFilter = function eventFilter(plugin) {
      return (plugin.options.events || _this22.options.events).includes(e["native"].type);
    };
    if (this.notifyPlugins('beforeEvent', args, eventFilter) === false) {
      return;
    }
    var changed = this._handleEvent(e, replay, args.inChartArea);
    args.cancelable = false;
    this.notifyPlugins('afterEvent', args, eventFilter);
    if (changed || args.changed) {
      this.render();
    }
    return this;
  };
  _proto22._handleEvent = function _handleEvent(e, replay, inChartArea) {
    var _this$_active = this._active,
      lastActive = _this$_active === void 0 ? [] : _this$_active,
      options = this.options;
    var useFinalPosition = replay;
    var active = this._getActiveElements(e, lastActive, inChartArea, useFinalPosition);
    var isClick = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ai"])(e);
    var lastEvent = determineLastEvent(e, this._lastEvent, inChartArea, isClick);
    if (inChartArea) {
      this._lastEvent = null;
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(options.onHover, [e, active, this], this);
      if (isClick) {
        Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(options.onClick, [e, active, this], this);
      }
    }
    var changed = !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ah"])(active, lastActive);
    if (changed || replay) {
      this._active = active;
      this._updateHoverStyles(active, lastActive, replay);
    }
    this._lastEvent = lastEvent;
    return changed;
  };
  _proto22._getActiveElements = function _getActiveElements(e, lastActive, inChartArea, useFinalPosition) {
    if (e.type === 'mouseout') {
      return [];
    }
    if (!inChartArea) {
      return lastActive;
    }
    var hoverOptions = this.options.hover;
    return this.getElementsAtEventForMode(e, hoverOptions.mode, hoverOptions, useFinalPosition);
  };
  return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(Chart, [{
    key: "aspectRatio",
    get: function get() {
      var _this$options12 = this.options,
        aspectRatio = _this$options12.aspectRatio,
        maintainAspectRatio = _this$options12.maintainAspectRatio,
        width = this.width,
        height = this.height,
        _aspectRatio = this._aspectRatio;
      if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(aspectRatio)) {
        return aspectRatio;
      }
      if (maintainAspectRatio && _aspectRatio) {
        return _aspectRatio;
      }
      return height ? width / height : null;
    }
  }, {
    key: "data",
    get: function get() {
      return this.config.data;
    },
    set: function set(data) {
      this.config.data = data;
    }
  }, {
    key: "options",
    get: function get() {
      return this._options;
    },
    set: function set(options) {
      this.config.options = options;
    }
  }, {
    key: "registry",
    get: function get() {
      return registry;
    }
  }]);
}();
Chart.defaults = _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"];
Chart.instances = instances;
Chart.overrides = _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a3"];
Chart.registry = registry;
Chart.version = version;
Chart.getChart = getChart;
function invalidatePlugins() {
  return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(Chart.instances, function (chart) {
    return chart._plugins.invalidate();
  });
}
function clipArc(ctx, element, endAngle) {
  var startAngle = element.startAngle,
    pixelMargin = element.pixelMargin,
    x = element.x,
    y = element.y,
    outerRadius = element.outerRadius,
    innerRadius = element.innerRadius;
  var angleMargin = pixelMargin / outerRadius;
  // Draw an inner border by clipping the arc and drawing a double-width border
  // Enlarge the clipping arc by 0.33 pixels to eliminate glitches between borders
  ctx.beginPath();
  ctx.arc(x, y, outerRadius, startAngle - angleMargin, endAngle + angleMargin);
  if (innerRadius > pixelMargin) {
    angleMargin = pixelMargin / innerRadius;
    ctx.arc(x, y, innerRadius, endAngle + angleMargin, startAngle - angleMargin, true);
  } else {
    ctx.arc(x, y, pixelMargin, endAngle + _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["H"], startAngle - _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["H"]);
  }
  ctx.closePath();
  ctx.clip();
}
function toRadiusCorners(value) {
  return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ak"])(value, ['outerStart', 'outerEnd', 'innerStart', 'innerEnd']);
}
/**
 * Parse border radius from the provided options
 */
function parseBorderRadius$1(arc, innerRadius, outerRadius, angleDelta) {
  var o = toRadiusCorners(arc.options.borderRadius);
  var halfThickness = (outerRadius - innerRadius) / 2;
  var innerLimit = Math.min(halfThickness, angleDelta * innerRadius / 2);
  // Outer limits are complicated. We want to compute the available angular distance at
  // a radius of outerRadius - borderRadius because for small angular distances, this term limits.
  // We compute at r = outerRadius - borderRadius because this circle defines the center of the border corners.
  //
  // If the borderRadius is large, that value can become negative.
  // This causes the outer borders to lose their radius entirely, which is rather unexpected. To solve that, if borderRadius > outerRadius
  // we know that the thickness term will dominate and compute the limits at that point
  var computeOuterLimit = function computeOuterLimit(val) {
    var outerArcLimit = (outerRadius - Math.min(halfThickness, val)) * angleDelta / 2;
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])(val, 0, Math.min(halfThickness, outerArcLimit));
  };
  return {
    outerStart: computeOuterLimit(o.outerStart),
    outerEnd: computeOuterLimit(o.outerEnd),
    innerStart: Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])(o.innerStart, 0, innerLimit),
    innerEnd: Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])(o.innerEnd, 0, innerLimit)
  };
}
/**
 * Convert (r, ð) to (x, y)
 */
function rThetaToXY(r, theta, x, y) {
  return {
    x: x + r * Math.cos(theta),
    y: y + r * Math.sin(theta)
  };
}
/**
 * Path the arc, respecting border radius by separating into left and right halves.
 *
 *   Start      End
 *
 *    1--->a--->2    Outer
 *   /           \
 *   8           3
 *   |           |
 *   |           |
 *   7           4
 *   \           /
 *    6<---b<---5    Inner
 */
function pathArc(ctx, element, offset, spacing, end, circular) {
  var x = element.x,
    y = element.y,
    start = element.startAngle,
    pixelMargin = element.pixelMargin,
    innerR = element.innerRadius;
  var outerRadius = Math.max(element.outerRadius + spacing + offset - pixelMargin, 0);
  var innerRadius = innerR > 0 ? innerR + spacing + offset + pixelMargin : 0;
  var spacingOffset = 0;
  var alpha = end - start;
  if (spacing) {
    // When spacing is present, it is the same for all items
    // So we adjust the start and end angle of the arc such that
    // the distance is the same as it would be without the spacing
    var noSpacingInnerRadius = innerR > 0 ? innerR - spacing : 0;
    var noSpacingOuterRadius = outerRadius > 0 ? outerRadius - spacing : 0;
    var avNogSpacingRadius = (noSpacingInnerRadius + noSpacingOuterRadius) / 2;
    var adjustedAngle = avNogSpacingRadius !== 0 ? alpha * avNogSpacingRadius / (avNogSpacingRadius + spacing) : alpha;
    spacingOffset = (alpha - adjustedAngle) / 2;
  }
  var beta = Math.max(0.001, alpha * outerRadius - offset / _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["P"]) / outerRadius;
  var angleOffset = (alpha - beta) / 2;
  var startAngle = start + angleOffset + spacingOffset;
  var endAngle = end - angleOffset - spacingOffset;
  var _parseBorderRadius$ = parseBorderRadius$1(element, innerRadius, outerRadius, endAngle - startAngle),
    outerStart = _parseBorderRadius$.outerStart,
    outerEnd = _parseBorderRadius$.outerEnd,
    innerStart = _parseBorderRadius$.innerStart,
    innerEnd = _parseBorderRadius$.innerEnd;
  var outerStartAdjustedRadius = outerRadius - outerStart;
  var outerEndAdjustedRadius = outerRadius - outerEnd;
  var outerStartAdjustedAngle = startAngle + outerStart / outerStartAdjustedRadius;
  var outerEndAdjustedAngle = endAngle - outerEnd / outerEndAdjustedRadius;
  var innerStartAdjustedRadius = innerRadius + innerStart;
  var innerEndAdjustedRadius = innerRadius + innerEnd;
  var innerStartAdjustedAngle = startAngle + innerStart / innerStartAdjustedRadius;
  var innerEndAdjustedAngle = endAngle - innerEnd / innerEndAdjustedRadius;
  ctx.beginPath();
  if (circular) {
    // The first arc segments from point 1 to point a to point 2
    var outerMidAdjustedAngle = (outerStartAdjustedAngle + outerEndAdjustedAngle) / 2;
    ctx.arc(x, y, outerRadius, outerStartAdjustedAngle, outerMidAdjustedAngle);
    ctx.arc(x, y, outerRadius, outerMidAdjustedAngle, outerEndAdjustedAngle);
    // The corner segment from point 2 to point 3
    if (outerEnd > 0) {
      var pCenter = rThetaToXY(outerEndAdjustedRadius, outerEndAdjustedAngle, x, y);
      ctx.arc(pCenter.x, pCenter.y, outerEnd, outerEndAdjustedAngle, endAngle + _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["H"]);
    }
    // The line from point 3 to point 4
    var p4 = rThetaToXY(innerEndAdjustedRadius, endAngle, x, y);
    ctx.lineTo(p4.x, p4.y);
    // The corner segment from point 4 to point 5
    if (innerEnd > 0) {
      var _pCenter = rThetaToXY(innerEndAdjustedRadius, innerEndAdjustedAngle, x, y);
      ctx.arc(_pCenter.x, _pCenter.y, innerEnd, endAngle + _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["H"], innerEndAdjustedAngle + Math.PI);
    }
    // The inner arc from point 5 to point b to point 6
    var innerMidAdjustedAngle = (endAngle - innerEnd / innerRadius + (startAngle + innerStart / innerRadius)) / 2;
    ctx.arc(x, y, innerRadius, endAngle - innerEnd / innerRadius, innerMidAdjustedAngle, true);
    ctx.arc(x, y, innerRadius, innerMidAdjustedAngle, startAngle + innerStart / innerRadius, true);
    // The corner segment from point 6 to point 7
    if (innerStart > 0) {
      var _pCenter2 = rThetaToXY(innerStartAdjustedRadius, innerStartAdjustedAngle, x, y);
      ctx.arc(_pCenter2.x, _pCenter2.y, innerStart, innerStartAdjustedAngle + Math.PI, startAngle - _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["H"]);
    }
    // The line from point 7 to point 8
    var p8 = rThetaToXY(outerStartAdjustedRadius, startAngle, x, y);
    ctx.lineTo(p8.x, p8.y);
    // The corner segment from point 8 to point 1
    if (outerStart > 0) {
      var _pCenter3 = rThetaToXY(outerStartAdjustedRadius, outerStartAdjustedAngle, x, y);
      ctx.arc(_pCenter3.x, _pCenter3.y, outerStart, startAngle - _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["H"], outerStartAdjustedAngle);
    }
  } else {
    ctx.moveTo(x, y);
    var outerStartX = Math.cos(outerStartAdjustedAngle) * outerRadius + x;
    var outerStartY = Math.sin(outerStartAdjustedAngle) * outerRadius + y;
    ctx.lineTo(outerStartX, outerStartY);
    var outerEndX = Math.cos(outerEndAdjustedAngle) * outerRadius + x;
    var outerEndY = Math.sin(outerEndAdjustedAngle) * outerRadius + y;
    ctx.lineTo(outerEndX, outerEndY);
  }
  ctx.closePath();
}
function drawArc(ctx, element, offset, spacing, circular) {
  var fullCircles = element.fullCircles,
    startAngle = element.startAngle,
    circumference = element.circumference;
  var endAngle = element.endAngle;
  if (fullCircles) {
    pathArc(ctx, element, offset, spacing, endAngle, circular);
    for (var i = 0; i < fullCircles; ++i) {
      ctx.fill();
    }
    if (!isNaN(circumference)) {
      endAngle = startAngle + (circumference % _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"] || _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"]);
    }
  }
  pathArc(ctx, element, offset, spacing, endAngle, circular);
  ctx.fill();
  return endAngle;
}
function drawBorder(ctx, element, offset, spacing, circular) {
  var fullCircles = element.fullCircles,
    startAngle = element.startAngle,
    circumference = element.circumference,
    options = element.options;
  var borderWidth = options.borderWidth,
    borderJoinStyle = options.borderJoinStyle,
    borderDash = options.borderDash,
    borderDashOffset = options.borderDashOffset;
  var inner = options.borderAlign === 'inner';
  if (!borderWidth) {
    return;
  }
  ctx.setLineDash(borderDash || []);
  ctx.lineDashOffset = borderDashOffset;
  if (inner) {
    ctx.lineWidth = borderWidth * 2;
    ctx.lineJoin = borderJoinStyle || 'round';
  } else {
    ctx.lineWidth = borderWidth;
    ctx.lineJoin = borderJoinStyle || 'bevel';
  }
  var endAngle = element.endAngle;
  if (fullCircles) {
    pathArc(ctx, element, offset, spacing, endAngle, circular);
    for (var i = 0; i < fullCircles; ++i) {
      ctx.stroke();
    }
    if (!isNaN(circumference)) {
      endAngle = startAngle + (circumference % _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"] || _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"]);
    }
  }
  if (inner) {
    clipArc(ctx, element, endAngle);
  }
  if (!fullCircles) {
    pathArc(ctx, element, offset, spacing, endAngle, circular);
    ctx.stroke();
  }
}
var ArcElement = /*#__PURE__*/function (_Element3) {
  function ArcElement(cfg) {
    var _this23;
    _this23 = _Element3.call(this) || this;
    _this23.circumference = void 0;
    _this23.endAngle = void 0;
    _this23.fullCircles = void 0;
    _this23.innerRadius = void 0;
    _this23.outerRadius = void 0;
    _this23.pixelMargin = void 0;
    _this23.startAngle = void 0;
    _this23.options = undefined;
    _this23.circumference = undefined;
    _this23.startAngle = undefined;
    _this23.endAngle = undefined;
    _this23.innerRadius = undefined;
    _this23.outerRadius = undefined;
    _this23.pixelMargin = 0;
    _this23.fullCircles = 0;
    if (cfg) {
      Object.assign(_this23, cfg);
    }
    return _this23;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(ArcElement, _Element3);
  var _proto23 = ArcElement.prototype;
  _proto23.inRange = function inRange(chartX, chartY, useFinalPosition) {
    var point = this.getProps(['x', 'y'], useFinalPosition);
    var _getAngleFromPoint2 = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["D"])(point, {
        x: chartX,
        y: chartY
      }),
      angle = _getAngleFromPoint2.angle,
      distance = _getAngleFromPoint2.distance;
    var _this$getProps2 = this.getProps(['startAngle', 'endAngle', 'innerRadius', 'outerRadius', 'circumference'], useFinalPosition),
      startAngle = _this$getProps2.startAngle,
      endAngle = _this$getProps2.endAngle,
      innerRadius = _this$getProps2.innerRadius,
      outerRadius = _this$getProps2.outerRadius,
      circumference = _this$getProps2.circumference;
    var rAdjust = (this.options.spacing + this.options.borderWidth) / 2;
    var _circumference = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(circumference, endAngle - startAngle);
    var nonZeroBetween = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["p"])(angle, startAngle, endAngle) && startAngle !== endAngle;
    var betweenAngles = _circumference >= _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"] || nonZeroBetween;
    var withinRadius = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aj"])(distance, innerRadius + rAdjust, outerRadius + rAdjust);
    return betweenAngles && withinRadius;
  };
  _proto23.getCenterPoint = function getCenterPoint(useFinalPosition) {
    var _this$getProps3 = this.getProps(['x', 'y', 'startAngle', 'endAngle', 'innerRadius', 'outerRadius'], useFinalPosition),
      x = _this$getProps3.x,
      y = _this$getProps3.y,
      startAngle = _this$getProps3.startAngle,
      endAngle = _this$getProps3.endAngle,
      innerRadius = _this$getProps3.innerRadius,
      outerRadius = _this$getProps3.outerRadius;
    var _this$options13 = this.options,
      offset = _this$options13.offset,
      spacing = _this$options13.spacing;
    var halfAngle = (startAngle + endAngle) / 2;
    var halfRadius = (innerRadius + outerRadius + spacing + offset) / 2;
    return {
      x: x + Math.cos(halfAngle) * halfRadius,
      y: y + Math.sin(halfAngle) * halfRadius
    };
  };
  _proto23.tooltipPosition = function tooltipPosition(useFinalPosition) {
    return this.getCenterPoint(useFinalPosition);
  };
  _proto23.draw = function draw(ctx) {
    var options = this.options,
      circumference = this.circumference;
    var offset = (options.offset || 0) / 4;
    var spacing = (options.spacing || 0) / 2;
    var circular = options.circular;
    this.pixelMargin = options.borderAlign === 'inner' ? 0.33 : 0;
    this.fullCircles = circumference > _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"] ? Math.floor(circumference / _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"]) : 0;
    if (circumference === 0 || this.innerRadius < 0 || this.outerRadius < 0) {
      return;
    }
    ctx.save();
    var halfAngle = (this.startAngle + this.endAngle) / 2;
    ctx.translate(Math.cos(halfAngle) * offset, Math.sin(halfAngle) * offset);
    var fix = 1 - Math.sin(Math.min(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["P"], circumference || 0));
    var radiusOffset = offset * fix;
    ctx.fillStyle = options.backgroundColor;
    ctx.strokeStyle = options.borderColor;
    drawArc(ctx, this, radiusOffset, spacing, circular);
    drawBorder(ctx, this, radiusOffset, spacing, circular);
    ctx.restore();
  };
  return ArcElement;
}(Element);
ArcElement.id = 'arc';
ArcElement.defaults = {
  borderAlign: 'center',
  borderColor: '#fff',
  borderDash: [],
  borderDashOffset: 0,
  borderJoinStyle: undefined,
  borderRadius: 0,
  borderWidth: 2,
  offset: 0,
  spacing: 0,
  angle: undefined,
  circular: true
};
ArcElement.defaultRoutes = {
  backgroundColor: 'backgroundColor'
};
ArcElement.descriptors = {
  _scriptable: true,
  _indexable: function _indexable(name) {
    return name !== 'borderDash';
  }
};
function setStyle(ctx, options, style) {
  if (style === void 0) {
    style = options;
  }
  ctx.lineCap = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(style.borderCapStyle, options.borderCapStyle);
  ctx.setLineDash(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(style.borderDash, options.borderDash));
  ctx.lineDashOffset = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(style.borderDashOffset, options.borderDashOffset);
  ctx.lineJoin = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(style.borderJoinStyle, options.borderJoinStyle);
  ctx.lineWidth = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(style.borderWidth, options.borderWidth);
  ctx.strokeStyle = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(style.borderColor, options.borderColor);
}
function lineTo(ctx, previous, target) {
  ctx.lineTo(target.x, target.y);
}
function getLineMethod(options) {
  if (options.stepped) {
    return _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ar"];
  }
  if (options.tension || options.cubicInterpolationMode === 'monotone') {
    return _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["as"];
  }
  return lineTo;
}
function pathVars(points, segment, params) {
  if (params === void 0) {
    params = {};
  }
  var count = points.length;
  var _params = params,
    _params$start = _params.start,
    paramsStart = _params$start === void 0 ? 0 : _params$start,
    _params$end = _params.end,
    paramsEnd = _params$end === void 0 ? count - 1 : _params$end;
  var segmentStart = segment.start,
    segmentEnd = segment.end;
  var start = Math.max(paramsStart, segmentStart);
  var end = Math.min(paramsEnd, segmentEnd);
  var outside = paramsStart < segmentStart && paramsEnd < segmentStart || paramsStart > segmentEnd && paramsEnd > segmentEnd;
  return {
    count: count,
    start: start,
    loop: segment.loop,
    ilen: end < start && !outside ? count + end - start : end - start
  };
}
function pathSegment(ctx, line, segment, params) {
  var points = line.points,
    options = line.options;
  var _pathVars = pathVars(points, segment, params),
    count = _pathVars.count,
    start = _pathVars.start,
    loop = _pathVars.loop,
    ilen = _pathVars.ilen;
  var lineMethod = getLineMethod(options);
  var _ref5 = params || {},
    _ref5$move = _ref5.move,
    move = _ref5$move === void 0 ? true : _ref5$move,
    reverse = _ref5.reverse;
  var i, point, prev;
  for (i = 0; i <= ilen; ++i) {
    point = points[(start + (reverse ? ilen - i : i)) % count];
    if (point.skip) {
      continue;
    } else if (move) {
      ctx.moveTo(point.x, point.y);
      move = false;
    } else {
      lineMethod(ctx, prev, point, reverse, options.stepped);
    }
    prev = point;
  }
  if (loop) {
    point = points[(start + (reverse ? ilen : 0)) % count];
    lineMethod(ctx, prev, point, reverse, options.stepped);
  }
  return !!loop;
}
function fastPathSegment(ctx, line, segment, params) {
  var points = line.points;
  var _pathVars2 = pathVars(points, segment, params),
    count = _pathVars2.count,
    start = _pathVars2.start,
    ilen = _pathVars2.ilen;
  var _ref6 = params || {},
    _ref6$move = _ref6.move,
    move = _ref6$move === void 0 ? true : _ref6$move,
    reverse = _ref6.reverse;
  var avgX = 0;
  var countX = 0;
  var i, point, prevX, minY, maxY, lastY;
  var pointIndex = function pointIndex(index) {
    return (start + (reverse ? ilen - index : index)) % count;
  };
  var drawX = function drawX() {
    if (minY !== maxY) {
      ctx.lineTo(avgX, maxY);
      ctx.lineTo(avgX, minY);
      ctx.lineTo(avgX, lastY);
    }
  };
  if (move) {
    point = points[pointIndex(0)];
    ctx.moveTo(point.x, point.y);
  }
  for (i = 0; i <= ilen; ++i) {
    point = points[pointIndex(i)];
    if (point.skip) {
      continue;
    }
    var x = point.x;
    var y = point.y;
    var truncX = x | 0;
    if (truncX === prevX) {
      if (y < minY) {
        minY = y;
      } else if (y > maxY) {
        maxY = y;
      }
      avgX = (countX * avgX + x) / ++countX;
    } else {
      drawX();
      ctx.lineTo(x, y);
      prevX = truncX;
      countX = 0;
      minY = maxY = y;
    }
    lastY = y;
  }
  drawX();
}
function _getSegmentMethod(line) {
  var opts = line.options;
  var borderDash = opts.borderDash && opts.borderDash.length;
  var useFastPath = !line._decimated && !line._loop && !opts.tension && opts.cubicInterpolationMode !== 'monotone' && !opts.stepped && !borderDash;
  return useFastPath ? fastPathSegment : pathSegment;
}
function _getInterpolationMethod(options) {
  if (options.stepped) {
    return _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ao"];
  }
  if (options.tension || options.cubicInterpolationMode === 'monotone') {
    return _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ap"];
  }
  return _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aq"];
}
function strokePathWithCache(ctx, line, start, count) {
  var path = line._path;
  if (!path) {
    path = line._path = new Path2D();
    if (line.path(path, start, count)) {
      path.closePath();
    }
  }
  setStyle(ctx, line.options);
  ctx.stroke(path);
}
function strokePathDirect(ctx, line, start, count) {
  var segments = line.segments,
    options = line.options;
  var segmentMethod = _getSegmentMethod(line);
  for (var _iterator16 = _createForOfIteratorHelperLoose(segments), _step16; !(_step16 = _iterator16()).done;) {
    var segment = _step16.value;
    setStyle(ctx, options, segment.style);
    ctx.beginPath();
    if (segmentMethod(ctx, line, segment, {
      start: start,
      end: start + count - 1
    })) {
      ctx.closePath();
    }
    ctx.stroke();
  }
}
var usePath2D = typeof Path2D === 'function';
function _draw(ctx, line, start, count) {
  if (usePath2D && !line.options.segment) {
    strokePathWithCache(ctx, line, start, count);
  } else {
    strokePathDirect(ctx, line, start, count);
  }
}
var LineElement = /*#__PURE__*/function (_Element4) {
  function LineElement(cfg) {
    var _this24;
    _this24 = _Element4.call(this) || this;
    _this24.animated = true;
    _this24.options = undefined;
    _this24._chart = undefined;
    _this24._loop = undefined;
    _this24._fullLoop = undefined;
    _this24._path = undefined;
    _this24._points = undefined;
    _this24._segments = undefined;
    _this24._decimated = false;
    _this24._pointsUpdated = false;
    _this24._datasetIndex = undefined;
    if (cfg) {
      Object.assign(_this24, cfg);
    }
    return _this24;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(LineElement, _Element4);
  var _proto24 = LineElement.prototype;
  _proto24.updateControlPoints = function updateControlPoints(chartArea, indexAxis) {
    var options = this.options;
    if ((options.tension || options.cubicInterpolationMode === 'monotone') && !options.stepped && !this._pointsUpdated) {
      var loop = options.spanGaps ? this._loop : this._fullLoop;
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["al"])(this._points, options, chartArea, loop, indexAxis);
      this._pointsUpdated = true;
    }
  };
  _proto24.first = function first() {
    var segments = this.segments;
    var points = this.points;
    return segments.length && points[segments[0].start];
  };
  _proto24.last = function last() {
    var segments = this.segments;
    var points = this.points;
    var count = segments.length;
    return count && points[segments[count - 1].end];
  };
  _proto24.interpolate = function interpolate(point, property) {
    var options = this.options;
    var value = point[property];
    var points = this.points;
    var segments = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["an"])(this, {
      property: property,
      start: value,
      end: value
    });
    if (!segments.length) {
      return;
    }
    var result = [];
    var _interpolate = _getInterpolationMethod(options);
    var i, ilen;
    for (i = 0, ilen = segments.length; i < ilen; ++i) {
      var _segments$i = segments[i],
        start = _segments$i.start,
        end = _segments$i.end;
      var p1 = points[start];
      var p2 = points[end];
      if (p1 === p2) {
        result.push(p1);
        continue;
      }
      var t = Math.abs((value - p1[property]) / (p2[property] - p1[property]));
      var interpolated = _interpolate(p1, p2, t, options.stepped);
      interpolated[property] = point[property];
      result.push(interpolated);
    }
    return result.length === 1 ? result[0] : result;
  };
  _proto24.pathSegment = function pathSegment(ctx, segment, params) {
    var segmentMethod = _getSegmentMethod(this);
    return segmentMethod(ctx, this, segment, params);
  };
  _proto24.path = function path(ctx, start, count) {
    var segments = this.segments;
    var segmentMethod = _getSegmentMethod(this);
    var loop = this._loop;
    start = start || 0;
    count = count || this.points.length - start;
    for (var _iterator17 = _createForOfIteratorHelperLoose(segments), _step17; !(_step17 = _iterator17()).done;) {
      var segment = _step17.value;
      loop &= segmentMethod(ctx, this, segment, {
        start: start,
        end: start + count - 1
      });
    }
    return !!loop;
  };
  _proto24.draw = function draw(ctx, chartArea, start, count) {
    var options = this.options || {};
    var points = this.points || [];
    if (points.length && options.borderWidth) {
      ctx.save();
      _draw(ctx, this, start, count);
      ctx.restore();
    }
    if (this.animated) {
      this._pointsUpdated = false;
      this._path = undefined;
    }
  };
  return Object(_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_1__["default"])(LineElement, [{
    key: "points",
    get: function get() {
      return this._points;
    },
    set: function set(points) {
      this._points = points;
      delete this._segments;
      delete this._path;
      this._pointsUpdated = false;
    }
  }, {
    key: "segments",
    get: function get() {
      return this._segments || (this._segments = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["am"])(this, this.options.segment));
    }
  }]);
}(Element);
LineElement.id = 'line';
LineElement.defaults = {
  borderCapStyle: 'butt',
  borderDash: [],
  borderDashOffset: 0,
  borderJoinStyle: 'miter',
  borderWidth: 3,
  capBezierPoints: true,
  cubicInterpolationMode: 'default',
  fill: false,
  spanGaps: false,
  stepped: false,
  tension: 0
};
LineElement.defaultRoutes = {
  backgroundColor: 'backgroundColor',
  borderColor: 'borderColor'
};
LineElement.descriptors = {
  _scriptable: true,
  _indexable: function _indexable(name) {
    return name !== 'borderDash' && name !== 'fill';
  }
};
function inRange$1(el, pos, axis, useFinalPosition) {
  var options = el.options;
  var _el$getProps = el.getProps([axis], useFinalPosition),
    value = _el$getProps[axis];
  return Math.abs(pos - value) < options.radius + options.hitRadius;
}
var PointElement = /*#__PURE__*/function (_Element5) {
  function PointElement(cfg) {
    var _this25;
    _this25 = _Element5.call(this) || this;
    _this25.parsed = void 0;
    _this25.skip = void 0;
    _this25.stop = void 0;
    _this25.options = undefined;
    _this25.parsed = undefined;
    _this25.skip = undefined;
    _this25.stop = undefined;
    if (cfg) {
      Object.assign(_this25, cfg);
    }
    return _this25;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(PointElement, _Element5);
  var _proto25 = PointElement.prototype;
  _proto25.inRange = function inRange(mouseX, mouseY, useFinalPosition) {
    var options = this.options;
    var _this$getProps4 = this.getProps(['x', 'y'], useFinalPosition),
      x = _this$getProps4.x,
      y = _this$getProps4.y;
    return Math.pow(mouseX - x, 2) + Math.pow(mouseY - y, 2) < Math.pow(options.hitRadius + options.radius, 2);
  };
  _proto25.inXRange = function inXRange(mouseX, useFinalPosition) {
    return inRange$1(this, mouseX, 'x', useFinalPosition);
  };
  _proto25.inYRange = function inYRange(mouseY, useFinalPosition) {
    return inRange$1(this, mouseY, 'y', useFinalPosition);
  };
  _proto25.getCenterPoint = function getCenterPoint(useFinalPosition) {
    var _this$getProps5 = this.getProps(['x', 'y'], useFinalPosition),
      x = _this$getProps5.x,
      y = _this$getProps5.y;
    return {
      x: x,
      y: y
    };
  };
  _proto25.size = function size(options) {
    options = options || this.options || {};
    var radius = options.radius || 0;
    radius = Math.max(radius, radius && options.hoverRadius || 0);
    var borderWidth = radius && options.borderWidth || 0;
    return (radius + borderWidth) * 2;
  };
  _proto25.draw = function draw(ctx, area) {
    var options = this.options;
    if (this.skip || options.radius < 0.1 || !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["C"])(this, area, this.size(options) / 2)) {
      return;
    }
    ctx.strokeStyle = options.borderColor;
    ctx.lineWidth = options.borderWidth;
    ctx.fillStyle = options.backgroundColor;
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["at"])(ctx, options, this.x, this.y);
  };
  _proto25.getRange = function getRange() {
    var options = this.options || {};
    // @ts-expect-error Fallbacks should never be hit in practice
    return options.radius + options.hitRadius;
  };
  return PointElement;
}(Element);
PointElement.id = 'point';
/**
* @type {any}
*/
PointElement.defaults = {
  borderWidth: 1,
  hitRadius: 1,
  hoverBorderWidth: 1,
  hoverRadius: 4,
  pointStyle: 'circle',
  radius: 3,
  rotation: 0
};
/**
* @type {any}
*/
PointElement.defaultRoutes = {
  backgroundColor: 'backgroundColor',
  borderColor: 'borderColor'
};
function getBarBounds(bar, useFinalPosition) {
  var _bar$getProps = bar.getProps(['x', 'y', 'base', 'width', 'height'], useFinalPosition),
    x = _bar$getProps.x,
    y = _bar$getProps.y,
    base = _bar$getProps.base,
    width = _bar$getProps.width,
    height = _bar$getProps.height;
  var left, right, top, bottom, half;
  if (bar.horizontal) {
    half = height / 2;
    left = Math.min(x, base);
    right = Math.max(x, base);
    top = y - half;
    bottom = y + half;
  } else {
    half = width / 2;
    left = x - half;
    right = x + half;
    top = Math.min(y, base);
    bottom = Math.max(y, base);
  }
  return {
    left: left,
    top: top,
    right: right,
    bottom: bottom
  };
}
function skipOrLimit(skip, value, min, max) {
  return skip ? 0 : Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])(value, min, max);
}
function parseBorderWidth(bar, maxW, maxH) {
  var value = bar.options.borderWidth;
  var skip = bar.borderSkipped;
  var o = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["av"])(value);
  return {
    t: skipOrLimit(skip.top, o.top, 0, maxH),
    r: skipOrLimit(skip.right, o.right, 0, maxW),
    b: skipOrLimit(skip.bottom, o.bottom, 0, maxH),
    l: skipOrLimit(skip.left, o.left, 0, maxW)
  };
}
function parseBorderRadius(bar, maxW, maxH) {
  var _bar$getProps2 = bar.getProps(['enableBorderRadius']),
    enableBorderRadius = _bar$getProps2.enableBorderRadius;
  var value = bar.options.borderRadius;
  var o = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aw"])(value);
  var maxR = Math.min(maxW, maxH);
  var skip = bar.borderSkipped;
  var enableBorder = enableBorderRadius || Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(value);
  return {
    topLeft: skipOrLimit(!enableBorder || skip.top || skip.left, o.topLeft, 0, maxR),
    topRight: skipOrLimit(!enableBorder || skip.top || skip.right, o.topRight, 0, maxR),
    bottomLeft: skipOrLimit(!enableBorder || skip.bottom || skip.left, o.bottomLeft, 0, maxR),
    bottomRight: skipOrLimit(!enableBorder || skip.bottom || skip.right, o.bottomRight, 0, maxR)
  };
}
function boundingRects(bar) {
  var bounds = getBarBounds(bar);
  var width = bounds.right - bounds.left;
  var height = bounds.bottom - bounds.top;
  var border = parseBorderWidth(bar, width / 2, height / 2);
  var radius = parseBorderRadius(bar, width / 2, height / 2);
  return {
    outer: {
      x: bounds.left,
      y: bounds.top,
      w: width,
      h: height,
      radius: radius
    },
    inner: {
      x: bounds.left + border.l,
      y: bounds.top + border.t,
      w: width - border.l - border.r,
      h: height - border.t - border.b,
      radius: {
        topLeft: Math.max(0, radius.topLeft - Math.max(border.t, border.l)),
        topRight: Math.max(0, radius.topRight - Math.max(border.t, border.r)),
        bottomLeft: Math.max(0, radius.bottomLeft - Math.max(border.b, border.l)),
        bottomRight: Math.max(0, radius.bottomRight - Math.max(border.b, border.r))
      }
    }
  };
}
function _inRange(bar, x, y, useFinalPosition) {
  var skipX = x === null;
  var skipY = y === null;
  var skipBoth = skipX && skipY;
  var bounds = bar && !skipBoth && getBarBounds(bar, useFinalPosition);
  return bounds && (skipX || Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aj"])(x, bounds.left, bounds.right)) && (skipY || Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aj"])(y, bounds.top, bounds.bottom));
}
function hasRadius(radius) {
  return radius.topLeft || radius.topRight || radius.bottomLeft || radius.bottomRight;
}
function addNormalRectPath(ctx, rect) {
  ctx.rect(rect.x, rect.y, rect.w, rect.h);
}
function inflateRect(rect, amount, refRect) {
  if (refRect === void 0) {
    refRect = {};
  }
  var x = rect.x !== refRect.x ? -amount : 0;
  var y = rect.y !== refRect.y ? -amount : 0;
  var w = (rect.x + rect.w !== refRect.x + refRect.w ? amount : 0) - x;
  var h = (rect.y + rect.h !== refRect.y + refRect.h ? amount : 0) - y;
  return {
    x: rect.x + x,
    y: rect.y + y,
    w: rect.w + w,
    h: rect.h + h,
    radius: rect.radius
  };
}
var BarElement = /*#__PURE__*/function (_Element6) {
  function BarElement(cfg) {
    var _this26;
    _this26 = _Element6.call(this) || this;
    _this26.options = undefined;
    _this26.horizontal = undefined;
    _this26.base = undefined;
    _this26.width = undefined;
    _this26.height = undefined;
    _this26.inflateAmount = undefined;
    if (cfg) {
      Object.assign(_this26, cfg);
    }
    return _this26;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(BarElement, _Element6);
  var _proto26 = BarElement.prototype;
  _proto26.draw = function draw(ctx) {
    var inflateAmount = this.inflateAmount,
      _this$options14 = this.options,
      borderColor = _this$options14.borderColor,
      backgroundColor = _this$options14.backgroundColor;
    var _boundingRects = boundingRects(this),
      inner = _boundingRects.inner,
      outer = _boundingRects.outer;
    var addRectPath = hasRadius(outer.radius) ? _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["au"] : addNormalRectPath;
    ctx.save();
    if (outer.w !== inner.w || outer.h !== inner.h) {
      ctx.beginPath();
      addRectPath(ctx, inflateRect(outer, inflateAmount, inner));
      ctx.clip();
      addRectPath(ctx, inflateRect(inner, -inflateAmount, outer));
      ctx.fillStyle = borderColor;
      ctx.fill('evenodd');
    }
    ctx.beginPath();
    addRectPath(ctx, inflateRect(inner, inflateAmount));
    ctx.fillStyle = backgroundColor;
    ctx.fill();
    ctx.restore();
  };
  _proto26.inRange = function inRange(mouseX, mouseY, useFinalPosition) {
    return _inRange(this, mouseX, mouseY, useFinalPosition);
  };
  _proto26.inXRange = function inXRange(mouseX, useFinalPosition) {
    return _inRange(this, mouseX, null, useFinalPosition);
  };
  _proto26.inYRange = function inYRange(mouseY, useFinalPosition) {
    return _inRange(this, null, mouseY, useFinalPosition);
  };
  _proto26.getCenterPoint = function getCenterPoint(useFinalPosition) {
    var _this$getProps6 = this.getProps(['x', 'y', 'base', 'horizontal'], useFinalPosition),
      x = _this$getProps6.x,
      y = _this$getProps6.y,
      base = _this$getProps6.base,
      horizontal = _this$getProps6.horizontal;
    return {
      x: horizontal ? (x + base) / 2 : x,
      y: horizontal ? y : (y + base) / 2
    };
  };
  _proto26.getRange = function getRange(axis) {
    return axis === 'x' ? this.width / 2 : this.height / 2;
  };
  return BarElement;
}(Element);
BarElement.id = 'bar';
BarElement.defaults = {
  borderSkipped: 'start',
  borderWidth: 0,
  borderRadius: 0,
  inflateAmount: 'auto',
  pointStyle: undefined
};
BarElement.defaultRoutes = {
  backgroundColor: 'backgroundColor',
  borderColor: 'borderColor'
};
var elements = /*#__PURE__*/Object.freeze({
  __proto__: null,
  ArcElement: ArcElement,
  BarElement: BarElement,
  LineElement: LineElement,
  PointElement: PointElement
});
var BORDER_COLORS = ['rgb(54, 162, 235)', 'rgb(255, 99, 132)', 'rgb(255, 159, 64)', 'rgb(255, 205, 86)', 'rgb(75, 192, 192)', 'rgb(153, 102, 255)', 'rgb(201, 203, 207)' // grey
];
// Border colors with 50% transparency
var BACKGROUND_COLORS = /* #__PURE__ */BORDER_COLORS.map(function (color) {
  return color.replace('rgb(', 'rgba(').replace(')', ', 0.5)');
});
function getBorderColor(i) {
  return BORDER_COLORS[i % BORDER_COLORS.length];
}
function getBackgroundColor(i) {
  return BACKGROUND_COLORS[i % BACKGROUND_COLORS.length];
}
function colorizeDefaultDataset(dataset, i) {
  dataset.borderColor = getBorderColor(i);
  dataset.backgroundColor = getBackgroundColor(i);
  return ++i;
}
function colorizeDoughnutDataset(dataset, i) {
  dataset.backgroundColor = dataset.data.map(function () {
    return getBorderColor(i++);
  });
  return i;
}
function colorizePolarAreaDataset(dataset, i) {
  dataset.backgroundColor = dataset.data.map(function () {
    return getBackgroundColor(i++);
  });
  return i;
}
function getColorizer(chart) {
  var i = 0;
  return function (dataset, datasetIndex) {
    var controller = chart.getDatasetMeta(datasetIndex).controller;
    if (controller instanceof DoughnutController) {
      i = colorizeDoughnutDataset(dataset, i);
    } else if (controller instanceof PolarAreaController) {
      i = colorizePolarAreaDataset(dataset, i);
    } else if (controller) {
      i = colorizeDefaultDataset(dataset, i);
    }
  };
}
function containsColorsDefinitions(descriptors) {
  var k;
  for (k in descriptors) {
    if (descriptors[k].borderColor || descriptors[k].backgroundColor) {
      return true;
    }
  }
  return false;
}
function containsColorsDefinition(descriptor) {
  return descriptor && (descriptor.borderColor || descriptor.backgroundColor);
}
function containsDefaultColorsDefenitions() {
  return _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].borderColor !== 'rgba(0,0,0,0.1)' || _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].backgroundColor !== 'rgba(0,0,0,0.1)';
}
var plugin_colors = {
  id: 'colors',
  defaults: {
    enabled: true,
    forceOverride: false
  },
  beforeLayout: function beforeLayout(chart, _args, options) {
    if (!options.enabled) {
      return;
    }
    var _chart$config = chart.config,
      datasets = _chart$config.data.datasets,
      chartOptions = _chart$config.options;
    var elements = chartOptions.elements;
    var containsColorDefenition = containsColorsDefinitions(datasets) || containsColorsDefinition(chartOptions) || elements && containsColorsDefinitions(elements) || containsDefaultColorsDefenitions();
    if (!options.forceOverride && containsColorDefenition) {
      return;
    }
    var colorizer = getColorizer(chart);
    datasets.forEach(colorizer);
  }
};
function lttbDecimation(data, start, count, availableWidth, options) {
  var samples = options.samples || availableWidth;
  if (samples >= count) {
    return data.slice(start, start + count);
  }
  var decimated = [];
  var bucketWidth = (count - 2) / (samples - 2);
  var sampledIndex = 0;
  var endIndex = start + count - 1;
  var a = start;
  var i, maxAreaPoint, maxArea, area, nextA;
  decimated[sampledIndex++] = data[a];
  for (i = 0; i < samples - 2; i++) {
    var avgX = 0;
    var avgY = 0;
    var j = void 0;
    var avgRangeStart = Math.floor((i + 1) * bucketWidth) + 1 + start;
    var avgRangeEnd = Math.min(Math.floor((i + 2) * bucketWidth) + 1, count) + start;
    var avgRangeLength = avgRangeEnd - avgRangeStart;
    for (j = avgRangeStart; j < avgRangeEnd; j++) {
      avgX += data[j].x;
      avgY += data[j].y;
    }
    avgX /= avgRangeLength;
    avgY /= avgRangeLength;
    var rangeOffs = Math.floor(i * bucketWidth) + 1 + start;
    var rangeTo = Math.min(Math.floor((i + 1) * bucketWidth) + 1, count) + start;
    var _data$a = data[a],
      pointAx = _data$a.x,
      pointAy = _data$a.y;
    maxArea = area = -1;
    for (j = rangeOffs; j < rangeTo; j++) {
      area = 0.5 * Math.abs((pointAx - avgX) * (data[j].y - pointAy) - (pointAx - data[j].x) * (avgY - pointAy));
      if (area > maxArea) {
        maxArea = area;
        maxAreaPoint = data[j];
        nextA = j;
      }
    }
    decimated[sampledIndex++] = maxAreaPoint;
    a = nextA;
  }
  decimated[sampledIndex++] = data[endIndex];
  return decimated;
}
function minMaxDecimation(data, start, count, availableWidth) {
  var avgX = 0;
  var countX = 0;
  var i, point, x, y, prevX, minIndex, maxIndex, startIndex, minY, maxY;
  var decimated = [];
  var endIndex = start + count - 1;
  var xMin = data[start].x;
  var xMax = data[endIndex].x;
  var dx = xMax - xMin;
  for (i = start; i < start + count; ++i) {
    point = data[i];
    x = (point.x - xMin) / dx * availableWidth;
    y = point.y;
    var truncX = x | 0;
    if (truncX === prevX) {
      if (y < minY) {
        minY = y;
        minIndex = i;
      } else if (y > maxY) {
        maxY = y;
        maxIndex = i;
      }
      avgX = (countX * avgX + point.x) / ++countX;
    } else {
      var lastIndex = i - 1;
      if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(minIndex) && !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(maxIndex)) {
        var intermediateIndex1 = Math.min(minIndex, maxIndex);
        var intermediateIndex2 = Math.max(minIndex, maxIndex);
        if (intermediateIndex1 !== startIndex && intermediateIndex1 !== lastIndex) {
          decimated.push(Object(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, data[intermediateIndex1], {
            x: avgX
          }));
        }
        if (intermediateIndex2 !== startIndex && intermediateIndex2 !== lastIndex) {
          decimated.push(Object(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, data[intermediateIndex2], {
            x: avgX
          }));
        }
      }
      if (i > 0 && lastIndex !== startIndex) {
        decimated.push(data[lastIndex]);
      }
      decimated.push(point);
      prevX = truncX;
      countX = 0;
      minY = maxY = y;
      minIndex = maxIndex = startIndex = i;
    }
  }
  return decimated;
}
function cleanDecimatedDataset(dataset) {
  if (dataset._decimated) {
    var data = dataset._data;
    delete dataset._decimated;
    delete dataset._data;
    Object.defineProperty(dataset, 'data', {
      configurable: true,
      enumerable: true,
      writable: true,
      value: data
    });
  }
}
function cleanDecimatedData(chart) {
  chart.data.datasets.forEach(function (dataset) {
    cleanDecimatedDataset(dataset);
  });
}
function getStartAndCountOfVisiblePointsSimplified(meta, points) {
  var pointCount = points.length;
  var start = 0;
  var count;
  var iScale = meta.iScale;
  var _iScale$getUserBounds = iScale.getUserBounds(),
    min = _iScale$getUserBounds.min,
    max = _iScale$getUserBounds.max,
    minDefined = _iScale$getUserBounds.minDefined,
    maxDefined = _iScale$getUserBounds.maxDefined;
  if (minDefined) {
    start = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["B"])(points, iScale.axis, min).lo, 0, pointCount - 1);
  }
  if (maxDefined) {
    count = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["B"])(points, iScale.axis, max).hi + 1, start, pointCount) - start;
  } else {
    count = pointCount - start;
  }
  return {
    start: start,
    count: count
  };
}
var plugin_decimation = {
  id: 'decimation',
  defaults: {
    algorithm: 'min-max',
    enabled: false
  },
  beforeElementsUpdate: function beforeElementsUpdate(chart, args, options) {
    if (!options.enabled) {
      cleanDecimatedData(chart);
      return;
    }
    var availableWidth = chart.width;
    chart.data.datasets.forEach(function (dataset, datasetIndex) {
      var _data = dataset._data,
        indexAxis = dataset.indexAxis;
      var meta = chart.getDatasetMeta(datasetIndex);
      var data = _data || dataset.data;
      if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a"])([indexAxis, chart.options.indexAxis]) === 'y') {
        return;
      }
      if (!meta.controller.supportsDecimation) {
        return;
      }
      var xAxis = chart.scales[meta.xAxisID];
      if (xAxis.type !== 'linear' && xAxis.type !== 'time') {
        return;
      }
      if (chart.options.parsing) {
        return;
      }
      var _getStartAndCountOfVi3 = getStartAndCountOfVisiblePointsSimplified(meta, data),
        start = _getStartAndCountOfVi3.start,
        count = _getStartAndCountOfVi3.count;
      var threshold = options.threshold || 4 * availableWidth;
      if (count <= threshold) {
        cleanDecimatedDataset(dataset);
        return;
      }
      if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(_data)) {
        dataset._data = data;
        delete dataset.data;
        Object.defineProperty(dataset, 'data', {
          configurable: true,
          enumerable: true,
          get: function get() {
            return this._decimated;
          },
          set: function set(d) {
            this._data = d;
          }
        });
      }
      var decimated;
      switch (options.algorithm) {
        case 'lttb':
          decimated = lttbDecimation(data, start, count, availableWidth, options);
          break;
        case 'min-max':
          decimated = minMaxDecimation(data, start, count, availableWidth);
          break;
        default:
          throw new Error("Unsupported decimation algorithm '" + options.algorithm + "'");
      }
      dataset._decimated = decimated;
    });
  },
  destroy: function destroy(chart) {
    cleanDecimatedData(chart);
  }
};
function _segments(line, target, property) {
  var segments = line.segments;
  var points = line.points;
  var tpoints = target.points;
  var parts = [];
  for (var _iterator18 = _createForOfIteratorHelperLoose(segments), _step18; !(_step18 = _iterator18()).done;) {
    var segment = _step18.value;
    var start = segment.start,
      end = segment.end;
    end = _findSegmentEnd(start, end, points);
    var bounds = _getBounds(property, points[start], points[end], segment.loop);
    if (!target.segments) {
      parts.push({
        source: segment,
        target: bounds,
        start: points[start],
        end: points[end]
      });
      continue;
    }
    var targetSegments = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["an"])(target, bounds);
    for (var _iterator19 = _createForOfIteratorHelperLoose(targetSegments), _step19; !(_step19 = _iterator19()).done;) {
      var tgt = _step19.value;
      var subBounds = _getBounds(property, tpoints[tgt.start], tpoints[tgt.end], tgt.loop);
      var fillSources = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ax"])(segment, points, subBounds);
      for (var _iterator20 = _createForOfIteratorHelperLoose(fillSources), _step20; !(_step20 = _iterator20()).done;) {
        var _start, _end;
        var fillSource = _step20.value;
        parts.push({
          source: fillSource,
          target: tgt,
          start: (_start = {}, _start[property] = _getEdge(bounds, subBounds, 'start', Math.max), _start),
          end: (_end = {}, _end[property] = _getEdge(bounds, subBounds, 'end', Math.min), _end)
        });
      }
    }
  }
  return parts;
}
function _getBounds(property, first, last, loop) {
  if (loop) {
    return;
  }
  var start = first[property];
  var end = last[property];
  if (property === 'angle') {
    start = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ay"])(start);
    end = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ay"])(end);
  }
  return {
    property: property,
    start: start,
    end: end
  };
}
function _pointsFromSegments(boundary, line) {
  var _ref7 = boundary || {},
    _ref7$x = _ref7.x,
    x = _ref7$x === void 0 ? null : _ref7$x,
    _ref7$y = _ref7.y,
    y = _ref7$y === void 0 ? null : _ref7$y;
  var linePoints = line.points;
  var points = [];
  line.segments.forEach(function (_ref8) {
    var start = _ref8.start,
      end = _ref8.end;
    end = _findSegmentEnd(start, end, linePoints);
    var first = linePoints[start];
    var last = linePoints[end];
    if (y !== null) {
      points.push({
        x: first.x,
        y: y
      });
      points.push({
        x: last.x,
        y: y
      });
    } else if (x !== null) {
      points.push({
        x: x,
        y: first.y
      });
      points.push({
        x: x,
        y: last.y
      });
    }
  });
  return points;
}
function _findSegmentEnd(start, end, points) {
  for (; end > start; end--) {
    var point = points[end];
    if (!isNaN(point.x) && !isNaN(point.y)) {
      break;
    }
  }
  return end;
}
function _getEdge(a, b, prop, fn) {
  if (a && b) {
    return fn(a[prop], b[prop]);
  }
  return a ? a[prop] : b ? b[prop] : 0;
}
function _createBoundaryLine(boundary, line) {
  var points = [];
  var _loop = false;
  if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["b"])(boundary)) {
    _loop = true;
    points = boundary;
  } else {
    points = _pointsFromSegments(boundary, line);
  }
  return points.length ? new LineElement({
    points: points,
    options: {
      tension: 0
    },
    _loop: _loop,
    _fullLoop: _loop
  }) : null;
}
function _shouldApplyFill(source) {
  return source && source.fill !== false;
}
function _resolveTarget(sources, index, propagate) {
  var source = sources[index];
  var fill = source.fill;
  var visited = [index];
  var target;
  if (!propagate) {
    return fill;
  }
  while (fill !== false && visited.indexOf(fill) === -1) {
    if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(fill)) {
      return fill;
    }
    target = sources[fill];
    if (!target) {
      return false;
    }
    if (target.visible) {
      return fill;
    }
    visited.push(fill);
    fill = target.fill;
  }
  return false;
}
function _decodeFill(line, index, count) {
  var fill = parseFillOption(line);
  if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(fill)) {
    return isNaN(fill.value) ? false : fill;
  }
  var target = parseFloat(fill);
  if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(target) && Math.floor(target) === target) {
    return decodeTargetIndex(fill[0], index, target, count);
  }
  return ['origin', 'start', 'end', 'stack', 'shape'].indexOf(fill) >= 0 && fill;
}
function decodeTargetIndex(firstCh, index, target, count) {
  if (firstCh === '-' || firstCh === '+') {
    target = index + target;
  }
  if (target === index || target < 0 || target >= count) {
    return false;
  }
  return target;
}
function _getTargetPixel(fill, scale) {
  var pixel = null;
  if (fill === 'start') {
    pixel = scale.bottom;
  } else if (fill === 'end') {
    pixel = scale.top;
  } else if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(fill)) {
    pixel = scale.getPixelForValue(fill.value);
  } else if (scale.getBasePixel) {
    pixel = scale.getBasePixel();
  }
  return pixel;
}
function _getTargetValue(fill, scale, startValue) {
  var value;
  if (fill === 'start') {
    value = startValue;
  } else if (fill === 'end') {
    value = scale.options.reverse ? scale.min : scale.max;
  } else if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(fill)) {
    value = fill.value;
  } else {
    value = scale.getBaseValue();
  }
  return value;
}
function parseFillOption(line) {
  var options = line.options;
  var fillOption = options.fill;
  var fill = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(fillOption && fillOption.target, fillOption);
  if (fill === undefined) {
    fill = !!options.backgroundColor;
  }
  if (fill === false || fill === null) {
    return false;
  }
  if (fill === true) {
    return 'origin';
  }
  return fill;
}
function _buildStackLine(source) {
  var scale = source.scale,
    index = source.index,
    line = source.line;
  var points = [];
  var segments = line.segments;
  var sourcePoints = line.points;
  var linesBelow = getLinesBelow(scale, index);
  linesBelow.push(_createBoundaryLine({
    x: null,
    y: scale.bottom
  }, line));
  for (var i = 0; i < segments.length; i++) {
    var segment = segments[i];
    for (var j = segment.start; j <= segment.end; j++) {
      addPointsBelow(points, sourcePoints[j], linesBelow);
    }
  }
  return new LineElement({
    points: points,
    options: {}
  });
}
function getLinesBelow(scale, index) {
  var below = [];
  var metas = scale.getMatchingVisibleMetas('line');
  for (var i = 0; i < metas.length; i++) {
    var meta = metas[i];
    if (meta.index === index) {
      break;
    }
    if (!meta.hidden) {
      below.unshift(meta.dataset);
    }
  }
  return below;
}
function addPointsBelow(points, sourcePoint, linesBelow) {
  var postponed = [];
  for (var j = 0; j < linesBelow.length; j++) {
    var line = linesBelow[j];
    var _findPoint = findPoint(line, sourcePoint, 'x'),
      first = _findPoint.first,
      last = _findPoint.last,
      point = _findPoint.point;
    if (!point || first && last) {
      continue;
    }
    if (first) {
      postponed.unshift(point);
    } else {
      points.push(point);
      if (!last) {
        break;
      }
    }
  }
  points.push.apply(points, postponed);
}
function findPoint(line, sourcePoint, property) {
  var point = line.interpolate(sourcePoint, property);
  if (!point) {
    return {};
  }
  var pointValue = point[property];
  var segments = line.segments;
  var linePoints = line.points;
  var first = false;
  var last = false;
  for (var i = 0; i < segments.length; i++) {
    var segment = segments[i];
    var firstValue = linePoints[segment.start][property];
    var lastValue = linePoints[segment.end][property];
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aj"])(pointValue, firstValue, lastValue)) {
      first = pointValue === firstValue;
      last = pointValue === lastValue;
      break;
    }
  }
  return {
    first: first,
    last: last,
    point: point
  };
}
var simpleArc = /*#__PURE__*/function () {
  function simpleArc(opts) {
    this.x = opts.x;
    this.y = opts.y;
    this.radius = opts.radius;
  }
  var _proto27 = simpleArc.prototype;
  _proto27.pathSegment = function pathSegment(ctx, bounds, opts) {
    var x = this.x,
      y = this.y,
      radius = this.radius;
    bounds = bounds || {
      start: 0,
      end: _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"]
    };
    ctx.arc(x, y, radius, bounds.end, bounds.start, true);
    return !opts.bounds;
  };
  _proto27.interpolate = function interpolate(point) {
    var x = this.x,
      y = this.y,
      radius = this.radius;
    var angle = point.angle;
    return {
      x: x + Math.cos(angle) * radius,
      y: y + Math.sin(angle) * radius,
      angle: angle
    };
  };
  return simpleArc;
}();
function _getTarget(source) {
  var chart = source.chart,
    fill = source.fill,
    line = source.line;
  if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(fill)) {
    return getLineByIndex(chart, fill);
  }
  if (fill === 'stack') {
    return _buildStackLine(source);
  }
  if (fill === 'shape') {
    return true;
  }
  var boundary = computeBoundary(source);
  if (boundary instanceof simpleArc) {
    return boundary;
  }
  return _createBoundaryLine(boundary, line);
}
function getLineByIndex(chart, index) {
  var meta = chart.getDatasetMeta(index);
  var visible = meta && chart.isDatasetVisible(index);
  return visible ? meta.dataset : null;
}
function computeBoundary(source) {
  var scale = source.scale || {};
  if (scale.getPointPositionForValue) {
    return computeCircularBoundary(source);
  }
  return computeLinearBoundary(source);
}
function computeLinearBoundary(source) {
  var _source$scale = source.scale,
    scale = _source$scale === void 0 ? {} : _source$scale,
    fill = source.fill;
  var pixel = _getTargetPixel(fill, scale);
  if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(pixel)) {
    var horizontal = scale.isHorizontal();
    return {
      x: horizontal ? pixel : null,
      y: horizontal ? null : pixel
    };
  }
  return null;
}
function computeCircularBoundary(source) {
  var scale = source.scale,
    fill = source.fill;
  var options = scale.options;
  var length = scale.getLabels().length;
  var start = options.reverse ? scale.max : scale.min;
  var value = _getTargetValue(fill, scale, start);
  var target = [];
  if (options.grid.circular) {
    var center = scale.getPointPositionForValue(0, start);
    return new simpleArc({
      x: center.x,
      y: center.y,
      radius: scale.getDistanceFromCenterForValue(value)
    });
  }
  for (var i = 0; i < length; ++i) {
    target.push(scale.getPointPositionForValue(i, value));
  }
  return target;
}
function _drawfill(ctx, source, area) {
  var target = _getTarget(source);
  var line = source.line,
    scale = source.scale,
    axis = source.axis;
  var lineOpts = line.options;
  var fillOption = lineOpts.fill;
  var color = lineOpts.backgroundColor;
  var _ref9 = fillOption || {},
    _ref9$above = _ref9.above,
    above = _ref9$above === void 0 ? color : _ref9$above,
    _ref9$below = _ref9.below,
    below = _ref9$below === void 0 ? color : _ref9$below;
  if (target && line.points.length) {
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Y"])(ctx, area);
    doFill(ctx, {
      line: line,
      target: target,
      above: above,
      below: below,
      area: area,
      scale: scale,
      axis: axis
    });
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["$"])(ctx);
  }
}
function doFill(ctx, cfg) {
  var line = cfg.line,
    target = cfg.target,
    above = cfg.above,
    below = cfg.below,
    area = cfg.area,
    scale = cfg.scale;
  var property = line._loop ? 'angle' : cfg.axis;
  ctx.save();
  if (property === 'x' && below !== above) {
    clipVertical(ctx, target, area.top);
    fill(ctx, {
      line: line,
      target: target,
      color: above,
      scale: scale,
      property: property
    });
    ctx.restore();
    ctx.save();
    clipVertical(ctx, target, area.bottom);
  }
  fill(ctx, {
    line: line,
    target: target,
    color: below,
    scale: scale,
    property: property
  });
  ctx.restore();
}
function clipVertical(ctx, target, clipY) {
  var segments = target.segments,
    points = target.points;
  var first = true;
  var lineLoop = false;
  ctx.beginPath();
  for (var _iterator21 = _createForOfIteratorHelperLoose(segments), _step21; !(_step21 = _iterator21()).done;) {
    var segment = _step21.value;
    var start = segment.start,
      end = segment.end;
    var firstPoint = points[start];
    var lastPoint = points[_findSegmentEnd(start, end, points)];
    if (first) {
      ctx.moveTo(firstPoint.x, firstPoint.y);
      first = false;
    } else {
      ctx.lineTo(firstPoint.x, clipY);
      ctx.lineTo(firstPoint.x, firstPoint.y);
    }
    lineLoop = !!target.pathSegment(ctx, segment, {
      move: lineLoop
    });
    if (lineLoop) {
      ctx.closePath();
    } else {
      ctx.lineTo(lastPoint.x, clipY);
    }
  }
  ctx.lineTo(target.first().x, clipY);
  ctx.closePath();
  ctx.clip();
}
function fill(ctx, cfg) {
  var line = cfg.line,
    target = cfg.target,
    property = cfg.property,
    color = cfg.color,
    scale = cfg.scale;
  var segments = _segments(line, target, property);
  for (var _iterator22 = _createForOfIteratorHelperLoose(segments), _step22; !(_step22 = _iterator22()).done;) {
    var _step22$value = _step22.value,
      src = _step22$value.source,
      tgt = _step22$value.target,
      start = _step22$value.start,
      end = _step22$value.end;
    var _src$style = src.style,
      _src$style2 = _src$style === void 0 ? {} : _src$style,
      _src$style2$backgroun = _src$style2.backgroundColor,
      backgroundColor = _src$style2$backgroun === void 0 ? color : _src$style2$backgroun;
    var notShape = target !== true;
    ctx.save();
    ctx.fillStyle = backgroundColor;
    clipBounds(ctx, scale, notShape && _getBounds(property, start, end));
    ctx.beginPath();
    var lineLoop = !!line.pathSegment(ctx, src);
    var loop = void 0;
    if (notShape) {
      if (lineLoop) {
        ctx.closePath();
      } else {
        interpolatedLineTo(ctx, target, end, property);
      }
      var targetLoop = !!target.pathSegment(ctx, tgt, {
        move: lineLoop,
        reverse: true
      });
      loop = lineLoop && targetLoop;
      if (!loop) {
        interpolatedLineTo(ctx, target, start, property);
      }
    }
    ctx.closePath();
    ctx.fill(loop ? 'evenodd' : 'nonzero');
    ctx.restore();
  }
}
function clipBounds(ctx, scale, bounds) {
  var _scale$chart$chartAre = scale.chart.chartArea,
    top = _scale$chart$chartAre.top,
    bottom = _scale$chart$chartAre.bottom;
  var _ref10 = bounds || {},
    property = _ref10.property,
    start = _ref10.start,
    end = _ref10.end;
  if (property === 'x') {
    ctx.beginPath();
    ctx.rect(start, top, end - start, bottom - top);
    ctx.clip();
  }
}
function interpolatedLineTo(ctx, target, point, property) {
  var interpolatedPoint = target.interpolate(point, property);
  if (interpolatedPoint) {
    ctx.lineTo(interpolatedPoint.x, interpolatedPoint.y);
  }
}
var index = {
  id: 'filler',
  afterDatasetsUpdate: function afterDatasetsUpdate(chart, _args, options) {
    var count = (chart.data.datasets || []).length;
    var sources = [];
    var meta, i, line, source;
    for (i = 0; i < count; ++i) {
      meta = chart.getDatasetMeta(i);
      line = meta.dataset;
      source = null;
      if (line && line.options && line instanceof LineElement) {
        source = {
          visible: chart.isDatasetVisible(i),
          index: i,
          fill: _decodeFill(line, i, count),
          chart: chart,
          axis: meta.controller.options.indexAxis,
          scale: meta.vScale,
          line: line
        };
      }
      meta.$filler = source;
      sources.push(source);
    }
    for (i = 0; i < count; ++i) {
      source = sources[i];
      if (!source || source.fill === false) {
        continue;
      }
      source.fill = _resolveTarget(sources, i, options.propagate);
    }
  },
  beforeDraw: function beforeDraw(chart, _args, options) {
    var draw = options.drawTime === 'beforeDraw';
    var metasets = chart.getSortedVisibleDatasetMetas();
    var area = chart.chartArea;
    for (var i = metasets.length - 1; i >= 0; --i) {
      var source = metasets[i].$filler;
      if (!source) {
        continue;
      }
      source.line.updateControlPoints(area, source.axis);
      if (draw && source.fill) {
        _drawfill(chart.ctx, source, area);
      }
    }
  },
  beforeDatasetsDraw: function beforeDatasetsDraw(chart, _args, options) {
    if (options.drawTime !== 'beforeDatasetsDraw') {
      return;
    }
    var metasets = chart.getSortedVisibleDatasetMetas();
    for (var i = metasets.length - 1; i >= 0; --i) {
      var source = metasets[i].$filler;
      if (_shouldApplyFill(source)) {
        _drawfill(chart.ctx, source, chart.chartArea);
      }
    }
  },
  beforeDatasetDraw: function beforeDatasetDraw(chart, args, options) {
    var source = args.meta.$filler;
    if (!_shouldApplyFill(source) || options.drawTime !== 'beforeDatasetDraw') {
      return;
    }
    _drawfill(chart.ctx, source, chart.chartArea);
  },
  defaults: {
    propagate: true,
    drawTime: 'beforeDatasetDraw'
  }
};
var getBoxSize = function getBoxSize(labelOpts, fontSize) {
  var _labelOpts$boxHeight = labelOpts.boxHeight,
    boxHeight = _labelOpts$boxHeight === void 0 ? fontSize : _labelOpts$boxHeight,
    _labelOpts$boxWidth = labelOpts.boxWidth,
    boxWidth = _labelOpts$boxWidth === void 0 ? fontSize : _labelOpts$boxWidth;
  if (labelOpts.usePointStyle) {
    boxHeight = Math.min(boxHeight, fontSize);
    boxWidth = labelOpts.pointStyleWidth || Math.min(boxWidth, fontSize);
  }
  return {
    boxWidth: boxWidth,
    boxHeight: boxHeight,
    itemHeight: Math.max(fontSize, boxHeight)
  };
};
var itemsEqual = function itemsEqual(a, b) {
  return a !== null && b !== null && a.datasetIndex === b.datasetIndex && a.index === b.index;
};
var Legend = /*#__PURE__*/function (_Element7) {
  function Legend(config) {
    var _this27;
    _this27 = _Element7.call(this) || this;
    _this27._added = false;
    _this27.legendHitBoxes = [];
    _this27._hoveredItem = null;
    _this27.doughnutMode = false;
    _this27.chart = config.chart;
    _this27.options = config.options;
    _this27.ctx = config.ctx;
    _this27.legendItems = undefined;
    _this27.columnSizes = undefined;
    _this27.lineWidths = undefined;
    _this27.maxHeight = undefined;
    _this27.maxWidth = undefined;
    _this27.top = undefined;
    _this27.bottom = undefined;
    _this27.left = undefined;
    _this27.right = undefined;
    _this27.height = undefined;
    _this27.width = undefined;
    _this27._margins = undefined;
    _this27.position = undefined;
    _this27.weight = undefined;
    _this27.fullSize = undefined;
    return _this27;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(Legend, _Element7);
  var _proto28 = Legend.prototype;
  _proto28.update = function update(maxWidth, maxHeight, margins) {
    this.maxWidth = maxWidth;
    this.maxHeight = maxHeight;
    this._margins = margins;
    this.setDimensions();
    this.buildLabels();
    this.fit();
  };
  _proto28.setDimensions = function setDimensions() {
    if (this.isHorizontal()) {
      this.width = this.maxWidth;
      this.left = this._margins.left;
      this.right = this.width;
    } else {
      this.height = this.maxHeight;
      this.top = this._margins.top;
      this.bottom = this.height;
    }
  };
  _proto28.buildLabels = function buildLabels() {
    var _this28 = this;
    var labelOpts = this.options.labels || {};
    var legendItems = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(labelOpts.generateLabels, [this.chart], this) || [];
    if (labelOpts.filter) {
      legendItems = legendItems.filter(function (item) {
        return labelOpts.filter(item, _this28.chart.data);
      });
    }
    if (labelOpts.sort) {
      legendItems = legendItems.sort(function (a, b) {
        return labelOpts.sort(a, b, _this28.chart.data);
      });
    }
    if (this.options.reverse) {
      legendItems.reverse();
    }
    this.legendItems = legendItems;
  };
  _proto28.fit = function fit() {
    var options = this.options,
      ctx = this.ctx;
    if (!options.display) {
      this.width = this.height = 0;
      return;
    }
    var labelOpts = options.labels;
    var labelFont = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(labelOpts.font);
    var fontSize = labelFont.size;
    var titleHeight = this._computeTitleHeight();
    var _getBoxSize = getBoxSize(labelOpts, fontSize),
      boxWidth = _getBoxSize.boxWidth,
      itemHeight = _getBoxSize.itemHeight;
    var width, height;
    ctx.font = labelFont.string;
    if (this.isHorizontal()) {
      width = this.maxWidth;
      height = this._fitRows(titleHeight, fontSize, boxWidth, itemHeight) + 10;
    } else {
      height = this.maxHeight;
      width = this._fitCols(titleHeight, labelFont, boxWidth, itemHeight) + 10;
    }
    this.width = Math.min(width, options.maxWidth || this.maxWidth);
    this.height = Math.min(height, options.maxHeight || this.maxHeight);
  };
  _proto28._fitRows = function _fitRows(titleHeight, fontSize, boxWidth, itemHeight) {
    var ctx = this.ctx,
      maxWidth = this.maxWidth,
      padding = this.options.labels.padding;
    var hitboxes = this.legendHitBoxes = [];
    var lineWidths = this.lineWidths = [0];
    var lineHeight = itemHeight + padding;
    var totalHeight = titleHeight;
    ctx.textAlign = 'left';
    ctx.textBaseline = 'middle';
    var row = -1;
    var top = -lineHeight;
    this.legendItems.forEach(function (legendItem, i) {
      var itemWidth = boxWidth + fontSize / 2 + ctx.measureText(legendItem.text).width;
      if (i === 0 || lineWidths[lineWidths.length - 1] + itemWidth + 2 * padding > maxWidth) {
        totalHeight += lineHeight;
        lineWidths[lineWidths.length - (i > 0 ? 0 : 1)] = 0;
        top += lineHeight;
        row++;
      }
      hitboxes[i] = {
        left: 0,
        top: top,
        row: row,
        width: itemWidth,
        height: itemHeight
      };
      lineWidths[lineWidths.length - 1] += itemWidth + padding;
    });
    return totalHeight;
  };
  _proto28._fitCols = function _fitCols(titleHeight, labelFont, boxWidth, _itemHeight) {
    var ctx = this.ctx,
      maxHeight = this.maxHeight,
      padding = this.options.labels.padding;
    var hitboxes = this.legendHitBoxes = [];
    var columnSizes = this.columnSizes = [];
    var heightLimit = maxHeight - titleHeight;
    var totalWidth = padding;
    var currentColWidth = 0;
    var currentColHeight = 0;
    var left = 0;
    var col = 0;
    this.legendItems.forEach(function (legendItem, i) {
      var _calculateItemSize = calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight),
        itemWidth = _calculateItemSize.itemWidth,
        itemHeight = _calculateItemSize.itemHeight;
      if (i > 0 && currentColHeight + itemHeight + 2 * padding > heightLimit) {
        totalWidth += currentColWidth + padding;
        columnSizes.push({
          width: currentColWidth,
          height: currentColHeight
        });
        left += currentColWidth + padding;
        col++;
        currentColWidth = currentColHeight = 0;
      }
      hitboxes[i] = {
        left: left,
        top: currentColHeight,
        col: col,
        width: itemWidth,
        height: itemHeight
      };
      currentColWidth = Math.max(currentColWidth, itemWidth);
      currentColHeight += itemHeight + padding;
    });
    totalWidth += currentColWidth;
    columnSizes.push({
      width: currentColWidth,
      height: currentColHeight
    });
    return totalWidth;
  };
  _proto28.adjustHitBoxes = function adjustHitBoxes() {
    if (!this.options.display) {
      return;
    }
    var titleHeight = this._computeTitleHeight();
    var hitboxes = this.legendHitBoxes,
      _this$options15 = this.options,
      align = _this$options15.align,
      padding = _this$options15.labels.padding,
      rtl = _this$options15.rtl;
    var rtlHelper = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["az"])(rtl, this.left, this.width);
    if (this.isHorizontal()) {
      var row = 0;
      var left = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(align, this.left + padding, this.right - this.lineWidths[row]);
      for (var _iterator23 = _createForOfIteratorHelperLoose(hitboxes), _step23; !(_step23 = _iterator23()).done;) {
        var hitbox = _step23.value;
        if (row !== hitbox.row) {
          row = hitbox.row;
          left = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(align, this.left + padding, this.right - this.lineWidths[row]);
        }
        hitbox.top += this.top + titleHeight + padding;
        hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(left), hitbox.width);
        left += hitbox.width + padding;
      }
    } else {
      var col = 0;
      var top = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);
      for (var _iterator24 = _createForOfIteratorHelperLoose(hitboxes), _step24; !(_step24 = _iterator24()).done;) {
        var _hitbox = _step24.value;
        if (_hitbox.col !== col) {
          col = _hitbox.col;
          top = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(align, this.top + titleHeight + padding, this.bottom - this.columnSizes[col].height);
        }
        _hitbox.top = top;
        _hitbox.left += this.left + padding;
        _hitbox.left = rtlHelper.leftForLtr(rtlHelper.x(_hitbox.left), _hitbox.width);
        top += _hitbox.height + padding;
      }
    }
  };
  _proto28.isHorizontal = function isHorizontal() {
    return this.options.position === 'top' || this.options.position === 'bottom';
  };
  _proto28.draw = function draw() {
    if (this.options.display) {
      var ctx = this.ctx;
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Y"])(ctx, this);
      this._draw();
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["$"])(ctx);
    }
  };
  _proto28._draw = function _draw() {
    var _this29 = this;
    var opts = this.options,
      columnSizes = this.columnSizes,
      lineWidths = this.lineWidths,
      ctx = this.ctx;
    var align = opts.align,
      labelOpts = opts.labels;
    var defaultColor = _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].color;
    var rtlHelper = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["az"])(opts.rtl, this.left, this.width);
    var labelFont = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(labelOpts.font);
    var padding = labelOpts.padding;
    var fontSize = labelFont.size;
    var halfFontSize = fontSize / 2;
    var cursor;
    this.drawTitle();
    ctx.textAlign = rtlHelper.textAlign('left');
    ctx.textBaseline = 'middle';
    ctx.lineWidth = 0.5;
    ctx.font = labelFont.string;
    var _getBoxSize2 = getBoxSize(labelOpts, fontSize),
      boxWidth = _getBoxSize2.boxWidth,
      boxHeight = _getBoxSize2.boxHeight,
      itemHeight = _getBoxSize2.itemHeight;
    var drawLegendBox = function drawLegendBox(x, y, legendItem) {
      if (isNaN(boxWidth) || boxWidth <= 0 || isNaN(boxHeight) || boxHeight < 0) {
        return;
      }
      ctx.save();
      var lineWidth = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(legendItem.lineWidth, 1);
      ctx.fillStyle = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(legendItem.fillStyle, defaultColor);
      ctx.lineCap = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(legendItem.lineCap, 'butt');
      ctx.lineDashOffset = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(legendItem.lineDashOffset, 0);
      ctx.lineJoin = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(legendItem.lineJoin, 'miter');
      ctx.lineWidth = lineWidth;
      ctx.strokeStyle = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(legendItem.strokeStyle, defaultColor);
      ctx.setLineDash(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(legendItem.lineDash, []));
      if (labelOpts.usePointStyle) {
        var drawOptions = {
          radius: boxHeight * Math.SQRT2 / 2,
          pointStyle: legendItem.pointStyle,
          rotation: legendItem.rotation,
          borderWidth: lineWidth
        };
        var centerX = rtlHelper.xPlus(x, boxWidth / 2);
        var centerY = y + halfFontSize;
        Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aD"])(ctx, drawOptions, centerX, centerY, labelOpts.pointStyleWidth && boxWidth);
      } else {
        var yBoxTop = y + Math.max((fontSize - boxHeight) / 2, 0);
        var xBoxLeft = rtlHelper.leftForLtr(x, boxWidth);
        var borderRadius = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aw"])(legendItem.borderRadius);
        ctx.beginPath();
        if (Object.values(borderRadius).some(function (v) {
          return v !== 0;
        })) {
          Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["au"])(ctx, {
            x: xBoxLeft,
            y: yBoxTop,
            w: boxWidth,
            h: boxHeight,
            radius: borderRadius
          });
        } else {
          ctx.rect(xBoxLeft, yBoxTop, boxWidth, boxHeight);
        }
        ctx.fill();
        if (lineWidth !== 0) {
          ctx.stroke();
        }
      }
      ctx.restore();
    };
    var fillText = function fillText(x, y, legendItem) {
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Z"])(ctx, legendItem.text, x, y + itemHeight / 2, labelFont, {
        strikethrough: legendItem.hidden,
        textAlign: rtlHelper.textAlign(legendItem.textAlign)
      });
    };
    var isHorizontal = this.isHorizontal();
    var titleHeight = this._computeTitleHeight();
    if (isHorizontal) {
      cursor = {
        x: Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(align, this.left + padding, this.right - lineWidths[0]),
        y: this.top + padding + titleHeight,
        line: 0
      };
    } else {
      cursor = {
        x: this.left + padding,
        y: Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(align, this.top + titleHeight + padding, this.bottom - columnSizes[0].height),
        line: 0
      };
    }
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aA"])(this.ctx, opts.textDirection);
    var lineHeight = itemHeight + padding;
    this.legendItems.forEach(function (legendItem, i) {
      ctx.strokeStyle = legendItem.fontColor;
      ctx.fillStyle = legendItem.fontColor;
      var textWidth = ctx.measureText(legendItem.text).width;
      var textAlign = rtlHelper.textAlign(legendItem.textAlign || (legendItem.textAlign = labelOpts.textAlign));
      var width = boxWidth + halfFontSize + textWidth;
      var x = cursor.x;
      var y = cursor.y;
      rtlHelper.setWidth(_this29.width);
      if (isHorizontal) {
        if (i > 0 && x + width + padding > _this29.right) {
          y = cursor.y += lineHeight;
          cursor.line++;
          x = cursor.x = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(align, _this29.left + padding, _this29.right - lineWidths[cursor.line]);
        }
      } else if (i > 0 && y + lineHeight > _this29.bottom) {
        x = cursor.x = x + columnSizes[cursor.line].width + padding;
        cursor.line++;
        y = cursor.y = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(align, _this29.top + titleHeight + padding, _this29.bottom - columnSizes[cursor.line].height);
      }
      var realX = rtlHelper.x(x);
      drawLegendBox(realX, y, legendItem);
      x = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aB"])(textAlign, x + boxWidth + halfFontSize, isHorizontal ? x + width : _this29.right, opts.rtl);
      fillText(rtlHelper.x(x), y, legendItem);
      if (isHorizontal) {
        cursor.x += width + padding;
      } else if (typeof legendItem.text !== 'string') {
        var fontLineHeight = labelFont.lineHeight;
        cursor.y += calculateLegendItemHeight(legendItem, fontLineHeight) + padding;
      } else {
        cursor.y += lineHeight;
      }
    });
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aC"])(this.ctx, opts.textDirection);
  };
  _proto28.drawTitle = function drawTitle() {
    var opts = this.options;
    var titleOpts = opts.title;
    var titleFont = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(titleOpts.font);
    var titlePadding = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(titleOpts.padding);
    if (!titleOpts.display) {
      return;
    }
    var rtlHelper = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["az"])(opts.rtl, this.left, this.width);
    var ctx = this.ctx;
    var position = titleOpts.position;
    var halfFontSize = titleFont.size / 2;
    var topPaddingPlusHalfFontSize = titlePadding.top + halfFontSize;
    var y;
    var left = this.left;
    var maxWidth = this.width;
    if (this.isHorizontal()) {
      maxWidth = Math.max.apply(Math, this.lineWidths);
      y = this.top + topPaddingPlusHalfFontSize;
      left = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(opts.align, left, this.right - maxWidth);
    } else {
      var maxHeight = this.columnSizes.reduce(function (acc, size) {
        return Math.max(acc, size.height);
      }, 0);
      y = topPaddingPlusHalfFontSize + Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(opts.align, this.top, this.bottom - maxHeight - opts.labels.padding - this._computeTitleHeight());
    }
    var x = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(position, left, left + maxWidth);
    ctx.textAlign = rtlHelper.textAlign(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a1"])(position));
    ctx.textBaseline = 'middle';
    ctx.strokeStyle = titleOpts.color;
    ctx.fillStyle = titleOpts.color;
    ctx.font = titleFont.string;
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Z"])(ctx, titleOpts.text, x, y, titleFont);
  };
  _proto28._computeTitleHeight = function _computeTitleHeight() {
    var titleOpts = this.options.title;
    var titleFont = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(titleOpts.font);
    var titlePadding = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(titleOpts.padding);
    return titleOpts.display ? titleFont.lineHeight + titlePadding.height : 0;
  };
  _proto28._getLegendItemAt = function _getLegendItemAt(x, y) {
    var i, hitBox, lh;
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aj"])(x, this.left, this.right) && Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aj"])(y, this.top, this.bottom)) {
      lh = this.legendHitBoxes;
      for (i = 0; i < lh.length; ++i) {
        hitBox = lh[i];
        if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aj"])(x, hitBox.left, hitBox.left + hitBox.width) && Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aj"])(y, hitBox.top, hitBox.top + hitBox.height)) {
          return this.legendItems[i];
        }
      }
    }
    return null;
  };
  _proto28.handleEvent = function handleEvent(e) {
    var opts = this.options;
    if (!isListened(e.type, opts)) {
      return;
    }
    var hoveredItem = this._getLegendItemAt(e.x, e.y);
    if (e.type === 'mousemove' || e.type === 'mouseout') {
      var previous = this._hoveredItem;
      var sameItem = itemsEqual(previous, hoveredItem);
      if (previous && !sameItem) {
        Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(opts.onLeave, [e, previous, this], this);
      }
      this._hoveredItem = hoveredItem;
      if (hoveredItem && !sameItem) {
        Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(opts.onHover, [e, hoveredItem, this], this);
      }
    } else if (hoveredItem) {
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(opts.onClick, [e, hoveredItem, this], this);
    }
  };
  return Legend;
}(Element);
function calculateItemSize(boxWidth, labelFont, ctx, legendItem, _itemHeight) {
  var itemWidth = calculateItemWidth(legendItem, boxWidth, labelFont, ctx);
  var itemHeight = calculateItemHeight(_itemHeight, legendItem, labelFont.lineHeight);
  return {
    itemWidth: itemWidth,
    itemHeight: itemHeight
  };
}
function calculateItemWidth(legendItem, boxWidth, labelFont, ctx) {
  var legendItemText = legendItem.text;
  if (legendItemText && typeof legendItemText !== 'string') {
    legendItemText = legendItemText.reduce(function (a, b) {
      return a.length > b.length ? a : b;
    });
  }
  return boxWidth + labelFont.size / 2 + ctx.measureText(legendItemText).width;
}
function calculateItemHeight(_itemHeight, legendItem, fontLineHeight) {
  var itemHeight = _itemHeight;
  if (typeof legendItem.text !== 'string') {
    itemHeight = calculateLegendItemHeight(legendItem, fontLineHeight);
  }
  return itemHeight;
}
function calculateLegendItemHeight(legendItem, fontLineHeight) {
  var labelHeight = legendItem.text ? legendItem.text.length : 0;
  return fontLineHeight * labelHeight;
}
function isListened(type, opts) {
  if ((type === 'mousemove' || type === 'mouseout') && (opts.onHover || opts.onLeave)) {
    return true;
  }
  if (opts.onClick && (type === 'click' || type === 'mouseup')) {
    return true;
  }
  return false;
}
var plugin_legend = {
  id: 'legend',
  _element: Legend,
  start: function start(chart, _args, options) {
    var legend = chart.legend = new Legend({
      ctx: chart.ctx,
      options: options,
      chart: chart
    });
    layouts.configure(chart, legend, options);
    layouts.addBox(chart, legend);
  },
  stop: function stop(chart) {
    layouts.removeBox(chart, chart.legend);
    delete chart.legend;
  },
  beforeUpdate: function beforeUpdate(chart, _args, options) {
    var legend = chart.legend;
    layouts.configure(chart, legend, options);
    legend.options = options;
  },
  afterUpdate: function afterUpdate(chart) {
    var legend = chart.legend;
    legend.buildLabels();
    legend.adjustHitBoxes();
  },
  afterEvent: function afterEvent(chart, args) {
    if (!args.replay) {
      chart.legend.handleEvent(args.event);
    }
  },
  defaults: {
    display: true,
    position: 'top',
    align: 'center',
    fullSize: true,
    reverse: false,
    weight: 1000,
    onClick: function onClick(e, legendItem, legend) {
      var index = legendItem.datasetIndex;
      var ci = legend.chart;
      if (ci.isDatasetVisible(index)) {
        ci.hide(index);
        legendItem.hidden = true;
      } else {
        ci.show(index);
        legendItem.hidden = false;
      }
    },
    onHover: null,
    onLeave: null,
    labels: {
      color: function color(ctx) {
        return ctx.chart.options.color;
      },
      boxWidth: 40,
      padding: 10,
      generateLabels: function generateLabels(chart) {
        var datasets = chart.data.datasets;
        var _chart$legend$options = chart.legend.options.labels,
          usePointStyle = _chart$legend$options.usePointStyle,
          pointStyle = _chart$legend$options.pointStyle,
          textAlign = _chart$legend$options.textAlign,
          color = _chart$legend$options.color,
          useBorderRadius = _chart$legend$options.useBorderRadius,
          borderRadius = _chart$legend$options.borderRadius;
        return chart._getSortedDatasetMetas().map(function (meta) {
          var style = meta.controller.getStyle(usePointStyle ? 0 : undefined);
          var borderWidth = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(style.borderWidth);
          return {
            text: datasets[meta.index].label,
            fillStyle: style.backgroundColor,
            fontColor: color,
            hidden: !meta.visible,
            lineCap: style.borderCapStyle,
            lineDash: style.borderDash,
            lineDashOffset: style.borderDashOffset,
            lineJoin: style.borderJoinStyle,
            lineWidth: (borderWidth.width + borderWidth.height) / 4,
            strokeStyle: style.borderColor,
            pointStyle: pointStyle || style.pointStyle,
            rotation: style.rotation,
            textAlign: textAlign || style.textAlign,
            borderRadius: useBorderRadius && (borderRadius || style.borderRadius),
            datasetIndex: meta.index
          };
        }, this);
      }
    },
    title: {
      color: function color(ctx) {
        return ctx.chart.options.color;
      },
      display: false,
      position: 'center',
      text: ''
    }
  },
  descriptors: {
    _scriptable: function _scriptable(name) {
      return !name.startsWith('on');
    },
    labels: {
      _scriptable: function _scriptable(name) {
        return !['generateLabels', 'filter', 'sort'].includes(name);
      }
    }
  }
};
var Title = /*#__PURE__*/function (_Element8) {
  function Title(config) {
    var _this30;
    _this30 = _Element8.call(this) || this;
    _this30.chart = config.chart;
    _this30.options = config.options;
    _this30.ctx = config.ctx;
    _this30._padding = undefined;
    _this30.top = undefined;
    _this30.bottom = undefined;
    _this30.left = undefined;
    _this30.right = undefined;
    _this30.width = undefined;
    _this30.height = undefined;
    _this30.position = undefined;
    _this30.weight = undefined;
    _this30.fullSize = undefined;
    return _this30;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(Title, _Element8);
  var _proto29 = Title.prototype;
  _proto29.update = function update(maxWidth, maxHeight) {
    var opts = this.options;
    this.left = 0;
    this.top = 0;
    if (!opts.display) {
      this.width = this.height = this.right = this.bottom = 0;
      return;
    }
    this.width = this.right = maxWidth;
    this.height = this.bottom = maxHeight;
    var lineCount = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["b"])(opts.text) ? opts.text.length : 1;
    this._padding = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(opts.padding);
    var textSize = lineCount * Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(opts.font).lineHeight + this._padding.height;
    if (this.isHorizontal()) {
      this.height = textSize;
    } else {
      this.width = textSize;
    }
  };
  _proto29.isHorizontal = function isHorizontal() {
    var pos = this.options.position;
    return pos === 'top' || pos === 'bottom';
  };
  _proto29._drawArgs = function _drawArgs(offset) {
    var top = this.top,
      left = this.left,
      bottom = this.bottom,
      right = this.right,
      options = this.options;
    var align = options.align;
    var rotation = 0;
    var maxWidth, titleX, titleY;
    if (this.isHorizontal()) {
      titleX = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(align, left, right);
      titleY = top + offset;
      maxWidth = right - left;
    } else {
      if (options.position === 'left') {
        titleX = left + offset;
        titleY = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(align, bottom, top);
        rotation = _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["P"] * -0.5;
      } else {
        titleX = right - offset;
        titleY = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a2"])(align, top, bottom);
        rotation = _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["P"] * 0.5;
      }
      maxWidth = bottom - top;
    }
    return {
      titleX: titleX,
      titleY: titleY,
      maxWidth: maxWidth,
      rotation: rotation
    };
  };
  _proto29.draw = function draw() {
    var ctx = this.ctx;
    var opts = this.options;
    if (!opts.display) {
      return;
    }
    var fontOpts = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(opts.font);
    var lineHeight = fontOpts.lineHeight;
    var offset = lineHeight / 2 + this._padding.top;
    var _this$_drawArgs = this._drawArgs(offset),
      titleX = _this$_drawArgs.titleX,
      titleY = _this$_drawArgs.titleY,
      maxWidth = _this$_drawArgs.maxWidth,
      rotation = _this$_drawArgs.rotation;
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Z"])(ctx, opts.text, 0, 0, fontOpts, {
      color: opts.color,
      maxWidth: maxWidth,
      rotation: rotation,
      textAlign: Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a1"])(opts.align),
      textBaseline: 'middle',
      translation: [titleX, titleY]
    });
  };
  return Title;
}(Element);
function createTitle(chart, titleOpts) {
  var title = new Title({
    ctx: chart.ctx,
    options: titleOpts,
    chart: chart
  });
  layouts.configure(chart, title, titleOpts);
  layouts.addBox(chart, title);
  chart.titleBlock = title;
}
var plugin_title = {
  id: 'title',
  _element: Title,
  start: function start(chart, _args, options) {
    createTitle(chart, options);
  },
  stop: function stop(chart) {
    var titleBlock = chart.titleBlock;
    layouts.removeBox(chart, titleBlock);
    delete chart.titleBlock;
  },
  beforeUpdate: function beforeUpdate(chart, _args, options) {
    var title = chart.titleBlock;
    layouts.configure(chart, title, options);
    title.options = options;
  },
  defaults: {
    align: 'center',
    display: false,
    font: {
      weight: 'bold'
    },
    fullSize: true,
    padding: 10,
    position: 'top',
    text: '',
    weight: 2000
  },
  defaultRoutes: {
    color: 'color'
  },
  descriptors: {
    _scriptable: true,
    _indexable: false
  }
};
var map = new WeakMap();
var plugin_subtitle = {
  id: 'subtitle',
  start: function start(chart, _args, options) {
    var title = new Title({
      ctx: chart.ctx,
      options: options,
      chart: chart
    });
    layouts.configure(chart, title, options);
    layouts.addBox(chart, title);
    map.set(chart, title);
  },
  stop: function stop(chart) {
    layouts.removeBox(chart, map.get(chart));
    map["delete"](chart);
  },
  beforeUpdate: function beforeUpdate(chart, _args, options) {
    var title = map.get(chart);
    layouts.configure(chart, title, options);
    title.options = options;
  },
  defaults: {
    align: 'center',
    display: false,
    font: {
      weight: 'normal'
    },
    fullSize: true,
    padding: 0,
    position: 'top',
    text: '',
    weight: 1500
  },
  defaultRoutes: {
    color: 'color'
  },
  descriptors: {
    _scriptable: true,
    _indexable: false
  }
};
var positioners = {
  average: function average(items) {
    if (!items.length) {
      return false;
    }
    var i, len;
    var xSet = new Set();
    var y = 0;
    var count = 0;
    for (i = 0, len = items.length; i < len; ++i) {
      var el = items[i].element;
      if (el && el.hasValue()) {
        var pos = el.tooltipPosition();
        xSet.add(pos.x);
        y += pos.y;
        ++count;
      }
    }
    if (count === 0 || xSet.size === 0) {
      return false;
    }
    var xAverage = [].concat(xSet).reduce(function (a, b) {
      return a + b;
    }) / xSet.size;
    return {
      x: xAverage,
      y: y / count
    };
  },
  nearest: function nearest(items, eventPosition) {
    if (!items.length) {
      return false;
    }
    var x = eventPosition.x;
    var y = eventPosition.y;
    var minDistance = Number.POSITIVE_INFINITY;
    var i, len, nearestElement;
    for (i = 0, len = items.length; i < len; ++i) {
      var el = items[i].element;
      if (el && el.hasValue()) {
        var center = el.getCenterPoint();
        var d = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aE"])(eventPosition, center);
        if (d < minDistance) {
          minDistance = d;
          nearestElement = el;
        }
      }
    }
    if (nearestElement) {
      var tp = nearestElement.tooltipPosition();
      x = tp.x;
      y = tp.y;
    }
    return {
      x: x,
      y: y
    };
  }
};
function pushOrConcat(base, toPush) {
  if (toPush) {
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["b"])(toPush)) {
      Array.prototype.push.apply(base, toPush);
    } else {
      base.push(toPush);
    }
  }
  return base;
}
function splitNewlines(str) {
  if ((typeof str === 'string' || str instanceof String) && str.indexOf('\n') > -1) {
    return str.split('\n');
  }
  return str;
}
function createTooltipItem(chart, item) {
  var element = item.element,
    datasetIndex = item.datasetIndex,
    index = item.index;
  var controller = chart.getDatasetMeta(datasetIndex).controller;
  var _controller$getLabelA = controller.getLabelAndValue(index),
    label = _controller$getLabelA.label,
    value = _controller$getLabelA.value;
  return {
    chart: chart,
    label: label,
    parsed: controller.getParsed(index),
    raw: chart.data.datasets[datasetIndex].data[index],
    formattedValue: value,
    dataset: controller.getDataset(),
    dataIndex: index,
    datasetIndex: datasetIndex,
    element: element
  };
}
function getTooltipSize(tooltip, options) {
  var ctx = tooltip.chart.ctx;
  var body = tooltip.body,
    footer = tooltip.footer,
    title = tooltip.title;
  var boxWidth = options.boxWidth,
    boxHeight = options.boxHeight;
  var bodyFont = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(options.bodyFont);
  var titleFont = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(options.titleFont);
  var footerFont = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(options.footerFont);
  var titleLineCount = title.length;
  var footerLineCount = footer.length;
  var bodyLineItemCount = body.length;
  var padding = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(options.padding);
  var height = padding.height;
  var width = 0;
  var combinedBodyLength = body.reduce(function (count, bodyItem) {
    return count + bodyItem.before.length + bodyItem.lines.length + bodyItem.after.length;
  }, 0);
  combinedBodyLength += tooltip.beforeBody.length + tooltip.afterBody.length;
  if (titleLineCount) {
    height += titleLineCount * titleFont.lineHeight + (titleLineCount - 1) * options.titleSpacing + options.titleMarginBottom;
  }
  if (combinedBodyLength) {
    var bodyLineHeight = options.displayColors ? Math.max(boxHeight, bodyFont.lineHeight) : bodyFont.lineHeight;
    height += bodyLineItemCount * bodyLineHeight + (combinedBodyLength - bodyLineItemCount) * bodyFont.lineHeight + (combinedBodyLength - 1) * options.bodySpacing;
  }
  if (footerLineCount) {
    height += options.footerMarginTop + footerLineCount * footerFont.lineHeight + (footerLineCount - 1) * options.footerSpacing;
  }
  var widthPadding = 0;
  var maxLineWidth = function maxLineWidth(line) {
    width = Math.max(width, ctx.measureText(line).width + widthPadding);
  };
  ctx.save();
  ctx.font = titleFont.string;
  Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(tooltip.title, maxLineWidth);
  ctx.font = bodyFont.string;
  Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(tooltip.beforeBody.concat(tooltip.afterBody), maxLineWidth);
  widthPadding = options.displayColors ? boxWidth + 2 + options.boxPadding : 0;
  Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(body, function (bodyItem) {
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(bodyItem.before, maxLineWidth);
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(bodyItem.lines, maxLineWidth);
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(bodyItem.after, maxLineWidth);
  });
  widthPadding = 0;
  ctx.font = footerFont.string;
  Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(tooltip.footer, maxLineWidth);
  ctx.restore();
  width += padding.width;
  return {
    width: width,
    height: height
  };
}
function determineYAlign(chart, size) {
  var y = size.y,
    height = size.height;
  if (y < height / 2) {
    return 'top';
  } else if (y > chart.height - height / 2) {
    return 'bottom';
  }
  return 'center';
}
function doesNotFitWithAlign(xAlign, chart, options, size) {
  var x = size.x,
    width = size.width;
  var caret = options.caretSize + options.caretPadding;
  if (xAlign === 'left' && x + width + caret > chart.width) {
    return true;
  }
  if (xAlign === 'right' && x - width - caret < 0) {
    return true;
  }
}
function determineXAlign(chart, options, size, yAlign) {
  var x = size.x,
    width = size.width;
  var chartWidth = chart.width,
    _chart$chartArea = chart.chartArea,
    left = _chart$chartArea.left,
    right = _chart$chartArea.right;
  var xAlign = 'center';
  if (yAlign === 'center') {
    xAlign = x <= (left + right) / 2 ? 'left' : 'right';
  } else if (x <= width / 2) {
    xAlign = 'left';
  } else if (x >= chartWidth - width / 2) {
    xAlign = 'right';
  }
  if (doesNotFitWithAlign(xAlign, chart, options, size)) {
    xAlign = 'center';
  }
  return xAlign;
}
function determineAlignment(chart, options, size) {
  var yAlign = size.yAlign || options.yAlign || determineYAlign(chart, size);
  return {
    xAlign: size.xAlign || options.xAlign || determineXAlign(chart, options, size, yAlign),
    yAlign: yAlign
  };
}
function alignX(size, xAlign) {
  var x = size.x,
    width = size.width;
  if (xAlign === 'right') {
    x -= width;
  } else if (xAlign === 'center') {
    x -= width / 2;
  }
  return x;
}
function alignY(size, yAlign, paddingAndSize) {
  var y = size.y,
    height = size.height;
  if (yAlign === 'top') {
    y += paddingAndSize;
  } else if (yAlign === 'bottom') {
    y -= height + paddingAndSize;
  } else {
    y -= height / 2;
  }
  return y;
}
function getBackgroundPoint(options, size, alignment, chart) {
  var caretSize = options.caretSize,
    caretPadding = options.caretPadding,
    cornerRadius = options.cornerRadius;
  var xAlign = alignment.xAlign,
    yAlign = alignment.yAlign;
  var paddingAndSize = caretSize + caretPadding;
  var _toTRBLCorners = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aw"])(cornerRadius),
    topLeft = _toTRBLCorners.topLeft,
    topRight = _toTRBLCorners.topRight,
    bottomLeft = _toTRBLCorners.bottomLeft,
    bottomRight = _toTRBLCorners.bottomRight;
  var x = alignX(size, xAlign);
  var y = alignY(size, yAlign, paddingAndSize);
  if (yAlign === 'center') {
    if (xAlign === 'left') {
      x += paddingAndSize;
    } else if (xAlign === 'right') {
      x -= paddingAndSize;
    }
  } else if (xAlign === 'left') {
    x -= Math.max(topLeft, bottomLeft) + caretSize;
  } else if (xAlign === 'right') {
    x += Math.max(topRight, bottomRight) + caretSize;
  }
  return {
    x: Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])(x, 0, chart.width - size.width),
    y: Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])(y, 0, chart.height - size.height)
  };
}
function getAlignedX(tooltip, align, options) {
  var padding = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(options.padding);
  return align === 'center' ? tooltip.x + tooltip.width / 2 : align === 'right' ? tooltip.x + tooltip.width - padding.right : tooltip.x + padding.left;
}
function getBeforeAfterBodyLines(callback) {
  return pushOrConcat([], splitNewlines(callback));
}
function createTooltipContext(parent, tooltip, tooltipItems) {
  return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["j"])(parent, {
    tooltip: tooltip,
    tooltipItems: tooltipItems,
    type: 'tooltip'
  });
}
function overrideCallbacks(callbacks, context) {
  var override = context && context.dataset && context.dataset.tooltip && context.dataset.tooltip.callbacks;
  return override ? callbacks.override(override) : callbacks;
}
var defaultCallbacks = {
  beforeTitle: _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aF"],
  title: function title(tooltipItems) {
    if (tooltipItems.length > 0) {
      var item = tooltipItems[0];
      var labels = item.chart.data.labels;
      var labelCount = labels ? labels.length : 0;
      if (this && this.options && this.options.mode === 'dataset') {
        return item.dataset.label || '';
      } else if (item.label) {
        return item.label;
      } else if (labelCount > 0 && item.dataIndex < labelCount) {
        return labels[item.dataIndex];
      }
    }
    return '';
  },
  afterTitle: _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aF"],
  beforeBody: _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aF"],
  beforeLabel: _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aF"],
  label: function label(tooltipItem) {
    if (this && this.options && this.options.mode === 'dataset') {
      return tooltipItem.label + ': ' + tooltipItem.formattedValue || tooltipItem.formattedValue;
    }
    var label = tooltipItem.dataset.label || '';
    if (label) {
      label += ': ';
    }
    var value = tooltipItem.formattedValue;
    if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(value)) {
      label += value;
    }
    return label;
  },
  labelColor: function labelColor(tooltipItem) {
    var meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);
    var options = meta.controller.getStyle(tooltipItem.dataIndex);
    return {
      borderColor: options.borderColor,
      backgroundColor: options.backgroundColor,
      borderWidth: options.borderWidth,
      borderDash: options.borderDash,
      borderDashOffset: options.borderDashOffset,
      borderRadius: 0
    };
  },
  labelTextColor: function labelTextColor() {
    return this.options.bodyColor;
  },
  labelPointStyle: function labelPointStyle(tooltipItem) {
    var meta = tooltipItem.chart.getDatasetMeta(tooltipItem.datasetIndex);
    var options = meta.controller.getStyle(tooltipItem.dataIndex);
    return {
      pointStyle: options.pointStyle,
      rotation: options.rotation
    };
  },
  afterLabel: _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aF"],
  afterBody: _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aF"],
  beforeFooter: _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aF"],
  footer: _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aF"],
  afterFooter: _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aF"]
};
function invokeCallbackWithFallback(callbacks, name, ctx, arg) {
  var result = callbacks[name].call(ctx, arg);
  if (typeof result === 'undefined') {
    return defaultCallbacks[name].call(ctx, arg);
  }
  return result;
}
var Tooltip = /*#__PURE__*/function (_Element9) {
  function Tooltip(config) {
    var _this31;
    _this31 = _Element9.call(this) || this;
    _this31.opacity = 0;
    _this31._active = [];
    _this31._eventPosition = undefined;
    _this31._size = undefined;
    _this31._cachedAnimations = undefined;
    _this31._tooltipItems = [];
    _this31.$animations = undefined;
    _this31.$context = undefined;
    _this31.chart = config.chart;
    _this31.options = config.options;
    _this31.dataPoints = undefined;
    _this31.title = undefined;
    _this31.beforeBody = undefined;
    _this31.body = undefined;
    _this31.afterBody = undefined;
    _this31.footer = undefined;
    _this31.xAlign = undefined;
    _this31.yAlign = undefined;
    _this31.x = undefined;
    _this31.y = undefined;
    _this31.height = undefined;
    _this31.width = undefined;
    _this31.caretX = undefined;
    _this31.caretY = undefined;
    _this31.labelColors = undefined;
    _this31.labelPointStyles = undefined;
    _this31.labelTextColors = undefined;
    return _this31;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(Tooltip, _Element9);
  var _proto30 = Tooltip.prototype;
  _proto30.initialize = function initialize(options) {
    this.options = options;
    this._cachedAnimations = undefined;
    this.$context = undefined;
  };
  _proto30._resolveAnimations = function _resolveAnimations() {
    var cached = this._cachedAnimations;
    if (cached) {
      return cached;
    }
    var chart = this.chart;
    var options = this.options.setContext(this.getContext());
    var opts = options.enabled && chart.options.animation && options.animations;
    var animations = new Animations(this.chart, opts);
    if (opts._cacheable) {
      this._cachedAnimations = Object.freeze(animations);
    }
    return animations;
  };
  _proto30.getContext = function getContext() {
    return this.$context || (this.$context = createTooltipContext(this.chart.getContext(), this, this._tooltipItems));
  };
  _proto30.getTitle = function getTitle(context, options) {
    var callbacks = options.callbacks;
    var beforeTitle = invokeCallbackWithFallback(callbacks, 'beforeTitle', this, context);
    var title = invokeCallbackWithFallback(callbacks, 'title', this, context);
    var afterTitle = invokeCallbackWithFallback(callbacks, 'afterTitle', this, context);
    var lines = [];
    lines = pushOrConcat(lines, splitNewlines(beforeTitle));
    lines = pushOrConcat(lines, splitNewlines(title));
    lines = pushOrConcat(lines, splitNewlines(afterTitle));
    return lines;
  };
  _proto30.getBeforeBody = function getBeforeBody(tooltipItems, options) {
    return getBeforeAfterBodyLines(invokeCallbackWithFallback(options.callbacks, 'beforeBody', this, tooltipItems));
  };
  _proto30.getBody = function getBody(tooltipItems, options) {
    var _this32 = this;
    var callbacks = options.callbacks;
    var bodyItems = [];
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(tooltipItems, function (context) {
      var bodyItem = {
        before: [],
        lines: [],
        after: []
      };
      var scoped = overrideCallbacks(callbacks, context);
      pushOrConcat(bodyItem.before, splitNewlines(invokeCallbackWithFallback(scoped, 'beforeLabel', _this32, context)));
      pushOrConcat(bodyItem.lines, invokeCallbackWithFallback(scoped, 'label', _this32, context));
      pushOrConcat(bodyItem.after, splitNewlines(invokeCallbackWithFallback(scoped, 'afterLabel', _this32, context)));
      bodyItems.push(bodyItem);
    });
    return bodyItems;
  };
  _proto30.getAfterBody = function getAfterBody(tooltipItems, options) {
    return getBeforeAfterBodyLines(invokeCallbackWithFallback(options.callbacks, 'afterBody', this, tooltipItems));
  };
  _proto30.getFooter = function getFooter(tooltipItems, options) {
    var callbacks = options.callbacks;
    var beforeFooter = invokeCallbackWithFallback(callbacks, 'beforeFooter', this, tooltipItems);
    var footer = invokeCallbackWithFallback(callbacks, 'footer', this, tooltipItems);
    var afterFooter = invokeCallbackWithFallback(callbacks, 'afterFooter', this, tooltipItems);
    var lines = [];
    lines = pushOrConcat(lines, splitNewlines(beforeFooter));
    lines = pushOrConcat(lines, splitNewlines(footer));
    lines = pushOrConcat(lines, splitNewlines(afterFooter));
    return lines;
  };
  _proto30._createItems = function _createItems(options) {
    var _this33 = this;
    var active = this._active;
    var data = this.chart.data;
    var labelColors = [];
    var labelPointStyles = [];
    var labelTextColors = [];
    var tooltipItems = [];
    var i, len;
    for (i = 0, len = active.length; i < len; ++i) {
      tooltipItems.push(createTooltipItem(this.chart, active[i]));
    }
    if (options.filter) {
      tooltipItems = tooltipItems.filter(function (element, index, array) {
        return options.filter(element, index, array, data);
      });
    }
    if (options.itemSort) {
      tooltipItems = tooltipItems.sort(function (a, b) {
        return options.itemSort(a, b, data);
      });
    }
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(tooltipItems, function (context) {
      var scoped = overrideCallbacks(options.callbacks, context);
      labelColors.push(invokeCallbackWithFallback(scoped, 'labelColor', _this33, context));
      labelPointStyles.push(invokeCallbackWithFallback(scoped, 'labelPointStyle', _this33, context));
      labelTextColors.push(invokeCallbackWithFallback(scoped, 'labelTextColor', _this33, context));
    });
    this.labelColors = labelColors;
    this.labelPointStyles = labelPointStyles;
    this.labelTextColors = labelTextColors;
    this.dataPoints = tooltipItems;
    return tooltipItems;
  };
  _proto30.update = function update(changed, replay) {
    var options = this.options.setContext(this.getContext());
    var active = this._active;
    var properties;
    var tooltipItems = [];
    if (!active.length) {
      if (this.opacity !== 0) {
        properties = {
          opacity: 0
        };
      }
    } else {
      var position = positioners[options.position].call(this, active, this._eventPosition);
      tooltipItems = this._createItems(options);
      this.title = this.getTitle(tooltipItems, options);
      this.beforeBody = this.getBeforeBody(tooltipItems, options);
      this.body = this.getBody(tooltipItems, options);
      this.afterBody = this.getAfterBody(tooltipItems, options);
      this.footer = this.getFooter(tooltipItems, options);
      var size = this._size = getTooltipSize(this, options);
      var positionAndSize = Object.assign({}, position, size);
      var alignment = determineAlignment(this.chart, options, positionAndSize);
      var backgroundPoint = getBackgroundPoint(options, positionAndSize, alignment, this.chart);
      this.xAlign = alignment.xAlign;
      this.yAlign = alignment.yAlign;
      properties = {
        opacity: 1,
        x: backgroundPoint.x,
        y: backgroundPoint.y,
        width: size.width,
        height: size.height,
        caretX: position.x,
        caretY: position.y
      };
    }
    this._tooltipItems = tooltipItems;
    this.$context = undefined;
    if (properties) {
      this._resolveAnimations().update(this, properties);
    }
    if (changed && options.external) {
      options.external.call(this, {
        chart: this.chart,
        tooltip: this,
        replay: replay
      });
    }
  };
  _proto30.drawCaret = function drawCaret(tooltipPoint, ctx, size, options) {
    var caretPosition = this.getCaretPosition(tooltipPoint, size, options);
    ctx.lineTo(caretPosition.x1, caretPosition.y1);
    ctx.lineTo(caretPosition.x2, caretPosition.y2);
    ctx.lineTo(caretPosition.x3, caretPosition.y3);
  };
  _proto30.getCaretPosition = function getCaretPosition(tooltipPoint, size, options) {
    var xAlign = this.xAlign,
      yAlign = this.yAlign;
    var caretSize = options.caretSize,
      cornerRadius = options.cornerRadius;
    var _toTRBLCorners2 = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aw"])(cornerRadius),
      topLeft = _toTRBLCorners2.topLeft,
      topRight = _toTRBLCorners2.topRight,
      bottomLeft = _toTRBLCorners2.bottomLeft,
      bottomRight = _toTRBLCorners2.bottomRight;
    var ptX = tooltipPoint.x,
      ptY = tooltipPoint.y;
    var width = size.width,
      height = size.height;
    var x1, x2, x3, y1, y2, y3;
    if (yAlign === 'center') {
      y2 = ptY + height / 2;
      if (xAlign === 'left') {
        x1 = ptX;
        x2 = x1 - caretSize;
        y1 = y2 + caretSize;
        y3 = y2 - caretSize;
      } else {
        x1 = ptX + width;
        x2 = x1 + caretSize;
        y1 = y2 - caretSize;
        y3 = y2 + caretSize;
      }
      x3 = x1;
    } else {
      if (xAlign === 'left') {
        x2 = ptX + Math.max(topLeft, bottomLeft) + caretSize;
      } else if (xAlign === 'right') {
        x2 = ptX + width - Math.max(topRight, bottomRight) - caretSize;
      } else {
        x2 = this.caretX;
      }
      if (yAlign === 'top') {
        y1 = ptY;
        y2 = y1 - caretSize;
        x1 = x2 - caretSize;
        x3 = x2 + caretSize;
      } else {
        y1 = ptY + height;
        y2 = y1 + caretSize;
        x1 = x2 + caretSize;
        x3 = x2 - caretSize;
      }
      y3 = y1;
    }
    return {
      x1: x1,
      x2: x2,
      x3: x3,
      y1: y1,
      y2: y2,
      y3: y3
    };
  };
  _proto30.drawTitle = function drawTitle(pt, ctx, options) {
    var title = this.title;
    var length = title.length;
    var titleFont, titleSpacing, i;
    if (length) {
      var rtlHelper = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["az"])(options.rtl, this.x, this.width);
      pt.x = getAlignedX(this, options.titleAlign, options);
      ctx.textAlign = rtlHelper.textAlign(options.titleAlign);
      ctx.textBaseline = 'middle';
      titleFont = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(options.titleFont);
      titleSpacing = options.titleSpacing;
      ctx.fillStyle = options.titleColor;
      ctx.font = titleFont.string;
      for (i = 0; i < length; ++i) {
        ctx.fillText(title[i], rtlHelper.x(pt.x), pt.y + titleFont.lineHeight / 2);
        pt.y += titleFont.lineHeight + titleSpacing;
        if (i + 1 === length) {
          pt.y += options.titleMarginBottom - titleSpacing;
        }
      }
    }
  };
  _proto30._drawColorBox = function _drawColorBox(ctx, pt, i, rtlHelper, options) {
    var labelColor = this.labelColors[i];
    var labelPointStyle = this.labelPointStyles[i];
    var boxHeight = options.boxHeight,
      boxWidth = options.boxWidth;
    var bodyFont = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(options.bodyFont);
    var colorX = getAlignedX(this, 'left', options);
    var rtlColorX = rtlHelper.x(colorX);
    var yOffSet = boxHeight < bodyFont.lineHeight ? (bodyFont.lineHeight - boxHeight) / 2 : 0;
    var colorY = pt.y + yOffSet;
    if (options.usePointStyle) {
      var drawOptions = {
        radius: Math.min(boxWidth, boxHeight) / 2,
        pointStyle: labelPointStyle.pointStyle,
        rotation: labelPointStyle.rotation,
        borderWidth: 1
      };
      var centerX = rtlHelper.leftForLtr(rtlColorX, boxWidth) + boxWidth / 2;
      var centerY = colorY + boxHeight / 2;
      ctx.strokeStyle = options.multiKeyBackground;
      ctx.fillStyle = options.multiKeyBackground;
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["at"])(ctx, drawOptions, centerX, centerY);
      ctx.strokeStyle = labelColor.borderColor;
      ctx.fillStyle = labelColor.backgroundColor;
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["at"])(ctx, drawOptions, centerX, centerY);
    } else {
      ctx.lineWidth = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["i"])(labelColor.borderWidth) ? Math.max.apply(Math, Object.values(labelColor.borderWidth)) : labelColor.borderWidth || 1;
      ctx.strokeStyle = labelColor.borderColor;
      ctx.setLineDash(labelColor.borderDash || []);
      ctx.lineDashOffset = labelColor.borderDashOffset || 0;
      var outerX = rtlHelper.leftForLtr(rtlColorX, boxWidth);
      var innerX = rtlHelper.leftForLtr(rtlHelper.xPlus(rtlColorX, 1), boxWidth - 2);
      var borderRadius = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aw"])(labelColor.borderRadius);
      if (Object.values(borderRadius).some(function (v) {
        return v !== 0;
      })) {
        ctx.beginPath();
        ctx.fillStyle = options.multiKeyBackground;
        Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["au"])(ctx, {
          x: outerX,
          y: colorY,
          w: boxWidth,
          h: boxHeight,
          radius: borderRadius
        });
        ctx.fill();
        ctx.stroke();
        ctx.fillStyle = labelColor.backgroundColor;
        ctx.beginPath();
        Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["au"])(ctx, {
          x: innerX,
          y: colorY + 1,
          w: boxWidth - 2,
          h: boxHeight - 2,
          radius: borderRadius
        });
        ctx.fill();
      } else {
        ctx.fillStyle = options.multiKeyBackground;
        ctx.fillRect(outerX, colorY, boxWidth, boxHeight);
        ctx.strokeRect(outerX, colorY, boxWidth, boxHeight);
        ctx.fillStyle = labelColor.backgroundColor;
        ctx.fillRect(innerX, colorY + 1, boxWidth - 2, boxHeight - 2);
      }
    }
    ctx.fillStyle = this.labelTextColors[i];
  };
  _proto30.drawBody = function drawBody(pt, ctx, options) {
    var body = this.body;
    var bodySpacing = options.bodySpacing,
      bodyAlign = options.bodyAlign,
      displayColors = options.displayColors,
      boxHeight = options.boxHeight,
      boxWidth = options.boxWidth,
      boxPadding = options.boxPadding;
    var bodyFont = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(options.bodyFont);
    var bodyLineHeight = bodyFont.lineHeight;
    var xLinePadding = 0;
    var rtlHelper = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["az"])(options.rtl, this.x, this.width);
    var fillLineOfText = function fillLineOfText(line) {
      ctx.fillText(line, rtlHelper.x(pt.x + xLinePadding), pt.y + bodyLineHeight / 2);
      pt.y += bodyLineHeight + bodySpacing;
    };
    var bodyAlignForCalculation = rtlHelper.textAlign(bodyAlign);
    var bodyItem, textColor, lines, i, j, ilen, jlen;
    ctx.textAlign = bodyAlign;
    ctx.textBaseline = 'middle';
    ctx.font = bodyFont.string;
    pt.x = getAlignedX(this, bodyAlignForCalculation, options);
    ctx.fillStyle = options.bodyColor;
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(this.beforeBody, fillLineOfText);
    xLinePadding = displayColors && bodyAlignForCalculation !== 'right' ? bodyAlign === 'center' ? boxWidth / 2 + boxPadding : boxWidth + 2 + boxPadding : 0;
    for (i = 0, ilen = body.length; i < ilen; ++i) {
      bodyItem = body[i];
      textColor = this.labelTextColors[i];
      ctx.fillStyle = textColor;
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(bodyItem.before, fillLineOfText);
      lines = bodyItem.lines;
      if (displayColors && lines.length) {
        this._drawColorBox(ctx, pt, i, rtlHelper, options);
        bodyLineHeight = Math.max(bodyFont.lineHeight, boxHeight);
      }
      for (j = 0, jlen = lines.length; j < jlen; ++j) {
        fillLineOfText(lines[j]);
        bodyLineHeight = bodyFont.lineHeight;
      }
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(bodyItem.after, fillLineOfText);
    }
    xLinePadding = 0;
    bodyLineHeight = bodyFont.lineHeight;
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["F"])(this.afterBody, fillLineOfText);
    pt.y -= bodySpacing;
  };
  _proto30.drawFooter = function drawFooter(pt, ctx, options) {
    var footer = this.footer;
    var length = footer.length;
    var footerFont, i;
    if (length) {
      var rtlHelper = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["az"])(options.rtl, this.x, this.width);
      pt.x = getAlignedX(this, options.footerAlign, options);
      pt.y += options.footerMarginTop;
      ctx.textAlign = rtlHelper.textAlign(options.footerAlign);
      ctx.textBaseline = 'middle';
      footerFont = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(options.footerFont);
      ctx.fillStyle = options.footerColor;
      ctx.font = footerFont.string;
      for (i = 0; i < length; ++i) {
        ctx.fillText(footer[i], rtlHelper.x(pt.x), pt.y + footerFont.lineHeight / 2);
        pt.y += footerFont.lineHeight + options.footerSpacing;
      }
    }
  };
  _proto30.drawBackground = function drawBackground(pt, ctx, tooltipSize, options) {
    var xAlign = this.xAlign,
      yAlign = this.yAlign;
    var x = pt.x,
      y = pt.y;
    var width = tooltipSize.width,
      height = tooltipSize.height;
    var _toTRBLCorners3 = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aw"])(options.cornerRadius),
      topLeft = _toTRBLCorners3.topLeft,
      topRight = _toTRBLCorners3.topRight,
      bottomLeft = _toTRBLCorners3.bottomLeft,
      bottomRight = _toTRBLCorners3.bottomRight;
    ctx.fillStyle = options.backgroundColor;
    ctx.strokeStyle = options.borderColor;
    ctx.lineWidth = options.borderWidth;
    ctx.beginPath();
    ctx.moveTo(x + topLeft, y);
    if (yAlign === 'top') {
      this.drawCaret(pt, ctx, tooltipSize, options);
    }
    ctx.lineTo(x + width - topRight, y);
    ctx.quadraticCurveTo(x + width, y, x + width, y + topRight);
    if (yAlign === 'center' && xAlign === 'right') {
      this.drawCaret(pt, ctx, tooltipSize, options);
    }
    ctx.lineTo(x + width, y + height - bottomRight);
    ctx.quadraticCurveTo(x + width, y + height, x + width - bottomRight, y + height);
    if (yAlign === 'bottom') {
      this.drawCaret(pt, ctx, tooltipSize, options);
    }
    ctx.lineTo(x + bottomLeft, y + height);
    ctx.quadraticCurveTo(x, y + height, x, y + height - bottomLeft);
    if (yAlign === 'center' && xAlign === 'left') {
      this.drawCaret(pt, ctx, tooltipSize, options);
    }
    ctx.lineTo(x, y + topLeft);
    ctx.quadraticCurveTo(x, y, x + topLeft, y);
    ctx.closePath();
    ctx.fill();
    if (options.borderWidth > 0) {
      ctx.stroke();
    }
  };
  _proto30._updateAnimationTarget = function _updateAnimationTarget(options) {
    var chart = this.chart;
    var anims = this.$animations;
    var animX = anims && anims.x;
    var animY = anims && anims.y;
    if (animX || animY) {
      var position = positioners[options.position].call(this, this._active, this._eventPosition);
      if (!position) {
        return;
      }
      var size = this._size = getTooltipSize(this, options);
      var positionAndSize = Object.assign({}, position, this._size);
      var alignment = determineAlignment(chart, options, positionAndSize);
      var point = getBackgroundPoint(options, positionAndSize, alignment, chart);
      if (animX._to !== point.x || animY._to !== point.y) {
        this.xAlign = alignment.xAlign;
        this.yAlign = alignment.yAlign;
        this.width = size.width;
        this.height = size.height;
        this.caretX = position.x;
        this.caretY = position.y;
        this._resolveAnimations().update(this, point);
      }
    }
  };
  _proto30._willRender = function _willRender() {
    return !!this.opacity;
  };
  _proto30.draw = function draw(ctx) {
    var options = this.options.setContext(this.getContext());
    var opacity = this.opacity;
    if (!opacity) {
      return;
    }
    this._updateAnimationTarget(options);
    var tooltipSize = {
      width: this.width,
      height: this.height
    };
    var pt = {
      x: this.x,
      y: this.y
    };
    opacity = Math.abs(opacity) < 1e-3 ? 0 : opacity;
    var padding = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(options.padding);
    var hasTooltipContent = this.title.length || this.beforeBody.length || this.body.length || this.afterBody.length || this.footer.length;
    if (options.enabled && hasTooltipContent) {
      ctx.save();
      ctx.globalAlpha = opacity;
      this.drawBackground(pt, ctx, tooltipSize, options);
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aA"])(ctx, options.textDirection);
      pt.y += padding.top;
      this.drawTitle(pt, ctx, options);
      this.drawBody(pt, ctx, options);
      this.drawFooter(pt, ctx, options);
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aC"])(ctx, options.textDirection);
      ctx.restore();
    }
  };
  _proto30.getActiveElements = function getActiveElements() {
    return this._active || [];
  };
  _proto30.setActiveElements = function setActiveElements(activeElements, eventPosition) {
    var _this34 = this;
    var lastActive = this._active;
    var active = activeElements.map(function (_ref11) {
      var datasetIndex = _ref11.datasetIndex,
        index = _ref11.index;
      var meta = _this34.chart.getDatasetMeta(datasetIndex);
      if (!meta) {
        throw new Error('Cannot find a dataset at index ' + datasetIndex);
      }
      return {
        datasetIndex: datasetIndex,
        element: meta.data[index],
        index: index
      };
    });
    var changed = !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ah"])(lastActive, active);
    var positionChanged = this._positionChanged(active, eventPosition);
    if (changed || positionChanged) {
      this._active = active;
      this._eventPosition = eventPosition;
      this._ignoreReplayEvents = true;
      this.update(true);
    }
  };
  _proto30.handleEvent = function handleEvent(e, replay, inChartArea) {
    if (inChartArea === void 0) {
      inChartArea = true;
    }
    if (replay && this._ignoreReplayEvents) {
      return false;
    }
    this._ignoreReplayEvents = false;
    var options = this.options;
    var lastActive = this._active || [];
    var active = this._getActiveElements(e, lastActive, replay, inChartArea);
    var positionChanged = this._positionChanged(active, e);
    var changed = replay || !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ah"])(active, lastActive) || positionChanged;
    if (changed) {
      this._active = active;
      if (options.enabled || options.external) {
        this._eventPosition = {
          x: e.x,
          y: e.y
        };
        this.update(true, replay);
      }
    }
    return changed;
  };
  _proto30._getActiveElements = function _getActiveElements(e, lastActive, replay, inChartArea) {
    var _this35 = this;
    var options = this.options;
    if (e.type === 'mouseout') {
      return [];
    }
    if (!inChartArea) {
      return lastActive.filter(function (i) {
        return _this35.chart.data.datasets[i.datasetIndex] && _this35.chart.getDatasetMeta(i.datasetIndex).controller.getParsed(i.index) !== undefined;
      });
    }
    var active = this.chart.getElementsAtEventForMode(e, options.mode, options, replay);
    if (options.reverse) {
      active.reverse();
    }
    return active;
  };
  _proto30._positionChanged = function _positionChanged(active, e) {
    var caretX = this.caretX,
      caretY = this.caretY,
      options = this.options;
    var position = positioners[options.position].call(this, active, e);
    return position !== false && (caretX !== position.x || caretY !== position.y);
  };
  return Tooltip;
}(Element);
Tooltip.positioners = positioners;
var plugin_tooltip = {
  id: 'tooltip',
  _element: Tooltip,
  positioners: positioners,
  afterInit: function afterInit(chart, _args, options) {
    if (options) {
      chart.tooltip = new Tooltip({
        chart: chart,
        options: options
      });
    }
  },
  beforeUpdate: function beforeUpdate(chart, _args, options) {
    if (chart.tooltip) {
      chart.tooltip.initialize(options);
    }
  },
  reset: function reset(chart, _args, options) {
    if (chart.tooltip) {
      chart.tooltip.initialize(options);
    }
  },
  afterDraw: function afterDraw(chart) {
    var tooltip = chart.tooltip;
    if (tooltip && tooltip._willRender()) {
      var args = {
        tooltip: tooltip
      };
      if (chart.notifyPlugins('beforeTooltipDraw', Object(_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_0__["default"])({}, args, {
        cancelable: true
      })) === false) {
        return;
      }
      tooltip.draw(chart.ctx);
      chart.notifyPlugins('afterTooltipDraw', args);
    }
  },
  afterEvent: function afterEvent(chart, args) {
    if (chart.tooltip) {
      var useFinalPosition = args.replay;
      if (chart.tooltip.handleEvent(args.event, useFinalPosition, args.inChartArea)) {
        args.changed = true;
      }
    }
  },
  defaults: {
    enabled: true,
    external: null,
    position: 'average',
    backgroundColor: 'rgba(0,0,0,0.8)',
    titleColor: '#fff',
    titleFont: {
      weight: 'bold'
    },
    titleSpacing: 2,
    titleMarginBottom: 6,
    titleAlign: 'left',
    bodyColor: '#fff',
    bodySpacing: 2,
    bodyFont: {},
    bodyAlign: 'left',
    footerColor: '#fff',
    footerSpacing: 2,
    footerMarginTop: 6,
    footerFont: {
      weight: 'bold'
    },
    footerAlign: 'left',
    padding: 6,
    caretPadding: 2,
    caretSize: 5,
    cornerRadius: 6,
    boxHeight: function boxHeight(ctx, opts) {
      return opts.bodyFont.size;
    },
    boxWidth: function boxWidth(ctx, opts) {
      return opts.bodyFont.size;
    },
    multiKeyBackground: '#fff',
    displayColors: true,
    boxPadding: 0,
    borderColor: 'rgba(0,0,0,0)',
    borderWidth: 0,
    animation: {
      duration: 400,
      easing: 'easeOutQuart'
    },
    animations: {
      numbers: {
        type: 'number',
        properties: ['x', 'y', 'width', 'height', 'caretX', 'caretY']
      },
      opacity: {
        easing: 'linear',
        duration: 200
      }
    },
    callbacks: defaultCallbacks
  },
  defaultRoutes: {
    bodyFont: 'font',
    footerFont: 'font',
    titleFont: 'font'
  },
  descriptors: {
    _scriptable: function _scriptable(name) {
      return name !== 'filter' && name !== 'itemSort' && name !== 'external';
    },
    _indexable: false,
    callbacks: {
      _scriptable: false,
      _indexable: false
    },
    animation: {
      _fallback: false
    },
    animations: {
      _fallback: 'animation'
    }
  },
  additionalOptionScopes: ['interaction']
};
var plugins = /*#__PURE__*/Object.freeze({
  __proto__: null,
  Colors: plugin_colors,
  Decimation: plugin_decimation,
  Filler: index,
  Legend: plugin_legend,
  SubTitle: plugin_subtitle,
  Title: plugin_title,
  Tooltip: plugin_tooltip
});
var addIfString = function addIfString(labels, raw, index, addedLabels) {
  if (typeof raw === 'string') {
    index = labels.push(raw) - 1;
    addedLabels.unshift({
      index: index,
      label: raw
    });
  } else if (isNaN(raw)) {
    index = null;
  }
  return index;
};
function findOrAddLabel(labels, raw, index, addedLabels) {
  var first = labels.indexOf(raw);
  if (first === -1) {
    return addIfString(labels, raw, index, addedLabels);
  }
  var last = labels.lastIndexOf(raw);
  return first !== last ? index : first;
}
var validIndex = function validIndex(index, max) {
  return index === null ? null : Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])(Math.round(index), 0, max);
};
function _getLabelForValue(value) {
  var labels = this.getLabels();
  if (value >= 0 && value < labels.length) {
    return labels[value];
  }
  return value;
}
var CategoryScale = /*#__PURE__*/function (_Scale) {
  function CategoryScale(cfg) {
    var _this36;
    _this36 = _Scale.call(this, cfg) || this;
    _this36._startValue = undefined;
    _this36._valueRange = 0;
    _this36._addedLabels = [];
    return _this36;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(CategoryScale, _Scale);
  var _proto31 = CategoryScale.prototype;
  _proto31.init = function init(scaleOptions) {
    var added = this._addedLabels;
    if (added.length) {
      var labels = this.getLabels();
      for (var _iterator25 = _createForOfIteratorHelperLoose(added), _step25; !(_step25 = _iterator25()).done;) {
        var _step25$value = _step25.value,
          _index3 = _step25$value.index,
          label = _step25$value.label;
        if (labels[_index3] === label) {
          labels.splice(_index3, 1);
        }
      }
      this._addedLabels = [];
    }
    _Scale.prototype.init.call(this, scaleOptions);
  };
  _proto31.parse = function parse(raw, index) {
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(raw)) {
      return null;
    }
    var labels = this.getLabels();
    index = isFinite(index) && labels[index] === raw ? index : findOrAddLabel(labels, raw, Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(index, raw), this._addedLabels);
    return validIndex(index, labels.length - 1);
  };
  _proto31.determineDataLimits = function determineDataLimits() {
    var _this$getUserBounds2 = this.getUserBounds(),
      minDefined = _this$getUserBounds2.minDefined,
      maxDefined = _this$getUserBounds2.maxDefined;
    var _this$getMinMax = this.getMinMax(true),
      min = _this$getMinMax.min,
      max = _this$getMinMax.max;
    if (this.options.bounds === 'ticks') {
      if (!minDefined) {
        min = 0;
      }
      if (!maxDefined) {
        max = this.getLabels().length - 1;
      }
    }
    this.min = min;
    this.max = max;
  };
  _proto31.buildTicks = function buildTicks() {
    var min = this.min;
    var max = this.max;
    var offset = this.options.offset;
    var ticks = [];
    var labels = this.getLabels();
    labels = min === 0 && max === labels.length - 1 ? labels : labels.slice(min, max + 1);
    this._valueRange = Math.max(labels.length - (offset ? 0 : 1), 1);
    this._startValue = this.min - (offset ? 0.5 : 0);
    for (var value = min; value <= max; value++) {
      ticks.push({
        value: value
      });
    }
    return ticks;
  };
  _proto31.getLabelForValue = function getLabelForValue(value) {
    return _getLabelForValue.call(this, value);
  };
  _proto31.configure = function configure() {
    _Scale.prototype.configure.call(this);
    if (!this.isHorizontal()) {
      this._reversePixels = !this._reversePixels;
    }
  };
  _proto31.getPixelForValue = function getPixelForValue(value) {
    if (typeof value !== 'number') {
      value = this.parse(value);
    }
    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);
  };
  _proto31.getPixelForTick = function getPixelForTick(index) {
    var ticks = this.ticks;
    if (index < 0 || index > ticks.length - 1) {
      return null;
    }
    return this.getPixelForValue(ticks[index].value);
  };
  _proto31.getValueForPixel = function getValueForPixel(pixel) {
    return Math.round(this._startValue + this.getDecimalForPixel(pixel) * this._valueRange);
  };
  _proto31.getBasePixel = function getBasePixel() {
    return this.bottom;
  };
  return CategoryScale;
}(Scale);
CategoryScale.id = 'category';
CategoryScale.defaults = {
  ticks: {
    callback: _getLabelForValue
  }
};
function generateTicks$1(generationOptions, dataRange) {
  var ticks = [];
  var MIN_SPACING = 1e-14;
  var bounds = generationOptions.bounds,
    step = generationOptions.step,
    min = generationOptions.min,
    max = generationOptions.max,
    precision = generationOptions.precision,
    count = generationOptions.count,
    maxTicks = generationOptions.maxTicks,
    maxDigits = generationOptions.maxDigits,
    includeBounds = generationOptions.includeBounds;
  var unit = step || 1;
  var maxSpaces = maxTicks - 1;
  var rmin = dataRange.min,
    rmax = dataRange.max;
  var minDefined = !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(min);
  var maxDefined = !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(max);
  var countDefined = !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(count);
  var minSpacing = (rmax - rmin) / (maxDigits + 1);
  var spacing = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aH"])((rmax - rmin) / maxSpaces / unit) * unit;
  var factor, niceMin, niceMax, numSpaces;
  if (spacing < MIN_SPACING && !minDefined && !maxDefined) {
    return [{
      value: rmin
    }, {
      value: rmax
    }];
  }
  numSpaces = Math.ceil(rmax / spacing) - Math.floor(rmin / spacing);
  if (numSpaces > maxSpaces) {
    spacing = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aH"])(numSpaces * spacing / maxSpaces / unit) * unit;
  }
  if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(precision)) {
    factor = Math.pow(10, precision);
    spacing = Math.ceil(spacing * factor) / factor;
  }
  if (bounds === 'ticks') {
    niceMin = Math.floor(rmin / spacing) * spacing;
    niceMax = Math.ceil(rmax / spacing) * spacing;
  } else {
    niceMin = rmin;
    niceMax = rmax;
  }
  if (minDefined && maxDefined && step && Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aI"])((max - min) / step, spacing / 1000)) {
    numSpaces = Math.round(Math.min((max - min) / spacing, maxTicks));
    spacing = (max - min) / numSpaces;
    niceMin = min;
    niceMax = max;
  } else if (countDefined) {
    niceMin = minDefined ? min : niceMin;
    niceMax = maxDefined ? max : niceMax;
    numSpaces = count - 1;
    spacing = (niceMax - niceMin) / numSpaces;
  } else {
    numSpaces = (niceMax - niceMin) / spacing;
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aJ"])(numSpaces, Math.round(numSpaces), spacing / 1000)) {
      numSpaces = Math.round(numSpaces);
    } else {
      numSpaces = Math.ceil(numSpaces);
    }
  }
  var decimalPlaces = Math.max(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aK"])(spacing), Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aK"])(niceMin));
  factor = Math.pow(10, Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(precision) ? decimalPlaces : precision);
  niceMin = Math.round(niceMin * factor) / factor;
  niceMax = Math.round(niceMax * factor) / factor;
  var j = 0;
  if (minDefined) {
    if (includeBounds && niceMin !== min) {
      ticks.push({
        value: min
      });
      if (niceMin < min) {
        j++;
      }
      if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aJ"])(Math.round((niceMin + j * spacing) * factor) / factor, min, relativeLabelSize(min, minSpacing, generationOptions))) {
        j++;
      }
    } else if (niceMin < min) {
      j++;
    }
  }
  for (; j < numSpaces; ++j) {
    var tickValue = Math.round((niceMin + j * spacing) * factor) / factor;
    if (maxDefined && tickValue > max) {
      break;
    }
    ticks.push({
      value: tickValue
    });
  }
  if (maxDefined && includeBounds && niceMax !== max) {
    if (ticks.length && Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aJ"])(ticks[ticks.length - 1].value, max, relativeLabelSize(max, minSpacing, generationOptions))) {
      ticks[ticks.length - 1].value = max;
    } else {
      ticks.push({
        value: max
      });
    }
  } else if (!maxDefined || niceMax === max) {
    ticks.push({
      value: niceMax
    });
  }
  return ticks;
}
function relativeLabelSize(value, minSpacing, _ref12) {
  var horizontal = _ref12.horizontal,
    minRotation = _ref12.minRotation;
  var rad = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["t"])(minRotation);
  var ratio = (horizontal ? Math.sin(rad) : Math.cos(rad)) || 0.001;
  var length = 0.75 * minSpacing * ('' + value).length;
  return Math.min(minSpacing / ratio, length);
}
var LinearScaleBase = /*#__PURE__*/function (_Scale2) {
  function LinearScaleBase(cfg) {
    var _this37;
    _this37 = _Scale2.call(this, cfg) || this;
    _this37.start = undefined;
    _this37.end = undefined;
    _this37._startValue = undefined;
    _this37._endValue = undefined;
    _this37._valueRange = 0;
    return _this37;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(LinearScaleBase, _Scale2);
  var _proto32 = LinearScaleBase.prototype;
  _proto32.parse = function parse(raw, index) {
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(raw)) {
      return null;
    }
    if ((typeof raw === 'number' || raw instanceof Number) && !isFinite(+raw)) {
      return null;
    }
    return +raw;
  };
  _proto32.handleTickRangeOptions = function handleTickRangeOptions() {
    var beginAtZero = this.options.beginAtZero;
    var _this$getUserBounds3 = this.getUserBounds(),
      minDefined = _this$getUserBounds3.minDefined,
      maxDefined = _this$getUserBounds3.maxDefined;
    var min = this.min,
      max = this.max;
    var setMin = function setMin(v) {
      return min = minDefined ? min : v;
    };
    var setMax = function setMax(v) {
      return max = maxDefined ? max : v;
    };
    if (beginAtZero) {
      var minSign = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["s"])(min);
      var maxSign = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["s"])(max);
      if (minSign < 0 && maxSign < 0) {
        setMax(0);
      } else if (minSign > 0 && maxSign > 0) {
        setMin(0);
      }
    }
    if (min === max) {
      var offset = max === 0 ? 1 : Math.abs(max * 0.05);
      setMax(max + offset);
      if (!beginAtZero) {
        setMin(min - offset);
      }
    }
    this.min = min;
    this.max = max;
  };
  _proto32.getTickLimit = function getTickLimit() {
    var tickOpts = this.options.ticks;
    var maxTicksLimit = tickOpts.maxTicksLimit,
      stepSize = tickOpts.stepSize;
    var maxTicks;
    if (stepSize) {
      maxTicks = Math.ceil(this.max / stepSize) - Math.floor(this.min / stepSize) + 1;
      if (maxTicks > 1000) {
        console.warn("scales." + this.id + ".ticks.stepSize: " + stepSize + " would result generating up to " + maxTicks + " ticks. Limiting to 1000.");
        maxTicks = 1000;
      }
    } else {
      maxTicks = this.computeTickLimit();
      maxTicksLimit = maxTicksLimit || 11;
    }
    if (maxTicksLimit) {
      maxTicks = Math.min(maxTicksLimit, maxTicks);
    }
    return maxTicks;
  };
  _proto32.computeTickLimit = function computeTickLimit() {
    return Number.POSITIVE_INFINITY;
  };
  _proto32.buildTicks = function buildTicks() {
    var opts = this.options;
    var tickOpts = opts.ticks;
    var maxTicks = this.getTickLimit();
    maxTicks = Math.max(2, maxTicks);
    var numericGeneratorOptions = {
      maxTicks: maxTicks,
      bounds: opts.bounds,
      min: opts.min,
      max: opts.max,
      precision: tickOpts.precision,
      step: tickOpts.stepSize,
      count: tickOpts.count,
      maxDigits: this._maxDigits(),
      horizontal: this.isHorizontal(),
      minRotation: tickOpts.minRotation || 0,
      includeBounds: tickOpts.includeBounds !== false
    };
    var dataRange = this._range || this;
    var ticks = generateTicks$1(numericGeneratorOptions, dataRange);
    if (opts.bounds === 'ticks') {
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aG"])(ticks, this, 'value');
    }
    if (opts.reverse) {
      ticks.reverse();
      this.start = this.max;
      this.end = this.min;
    } else {
      this.start = this.min;
      this.end = this.max;
    }
    return ticks;
  };
  _proto32.configure = function configure() {
    var ticks = this.ticks;
    var start = this.min;
    var end = this.max;
    _Scale2.prototype.configure.call(this);
    if (this.options.offset && ticks.length) {
      var offset = (end - start) / Math.max(ticks.length - 1, 1) / 2;
      start -= offset;
      end += offset;
    }
    this._startValue = start;
    this._endValue = end;
    this._valueRange = end - start;
  };
  _proto32.getLabelForValue = function getLabelForValue(value) {
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["o"])(value, this.chart.options.locale, this.options.ticks.format);
  };
  return LinearScaleBase;
}(Scale);
var LinearScale = /*#__PURE__*/function (_LinearScaleBase) {
  function LinearScale() {
    return _LinearScaleBase.apply(this, arguments) || this;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(LinearScale, _LinearScaleBase);
  var _proto33 = LinearScale.prototype;
  _proto33.determineDataLimits = function determineDataLimits() {
    var _this$getMinMax2 = this.getMinMax(true),
      min = _this$getMinMax2.min,
      max = _this$getMinMax2.max;
    this.min = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(min) ? min : 0;
    this.max = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(max) ? max : 1;
    this.handleTickRangeOptions();
  };
  _proto33.computeTickLimit = function computeTickLimit() {
    var horizontal = this.isHorizontal();
    var length = horizontal ? this.width : this.height;
    var minRotation = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["t"])(this.options.ticks.minRotation);
    var ratio = (horizontal ? Math.sin(minRotation) : Math.cos(minRotation)) || 0.001;
    var tickFont = this._resolveTickFontOptions(0);
    return Math.ceil(length / Math.min(40, tickFont.lineHeight / ratio));
  };
  _proto33.getPixelForValue = function getPixelForValue(value) {
    return value === null ? NaN : this.getPixelForDecimal((value - this._startValue) / this._valueRange);
  };
  _proto33.getValueForPixel = function getValueForPixel(pixel) {
    return this._startValue + this.getDecimalForPixel(pixel) * this._valueRange;
  };
  return LinearScale;
}(LinearScaleBase);
LinearScale.id = 'linear';
LinearScale.defaults = {
  ticks: {
    callback: _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aL"].formatters.numeric
  }
};
var log10Floor = function log10Floor(v) {
  return Math.floor(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aM"])(v));
};
var changeExponent = function changeExponent(v, m) {
  return Math.pow(10, log10Floor(v) + m);
};
function isMajor(tickVal) {
  var remain = tickVal / Math.pow(10, log10Floor(tickVal));
  return remain === 1;
}
function steps(min, max, rangeExp) {
  var rangeStep = Math.pow(10, rangeExp);
  var start = Math.floor(min / rangeStep);
  var end = Math.ceil(max / rangeStep);
  return end - start;
}
function startExp(min, max) {
  var range = max - min;
  var rangeExp = log10Floor(range);
  while (steps(min, max, rangeExp) > 10) {
    rangeExp++;
  }
  while (steps(min, max, rangeExp) < 10) {
    rangeExp--;
  }
  return Math.min(rangeExp, log10Floor(min));
}
function generateTicks(generationOptions, _ref13) {
  var min = _ref13.min,
    max = _ref13.max;
  min = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["O"])(generationOptions.min, min);
  var ticks = [];
  var minExp = log10Floor(min);
  var exp = startExp(min, max);
  var precision = exp < 0 ? Math.pow(10, Math.abs(exp)) : 1;
  var stepSize = Math.pow(10, exp);
  var base = minExp > exp ? Math.pow(10, minExp) : 0;
  var start = Math.round((min - base) * precision) / precision;
  var offset = Math.floor((min - base) / stepSize / 10) * stepSize * 10;
  var significand = Math.floor((start - offset) / Math.pow(10, exp));
  var value = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["O"])(generationOptions.min, Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision);
  while (value < max) {
    ticks.push({
      value: value,
      major: isMajor(value),
      significand: significand
    });
    if (significand >= 10) {
      significand = significand < 15 ? 15 : 20;
    } else {
      significand++;
    }
    if (significand >= 20) {
      exp++;
      significand = 2;
      precision = exp >= 0 ? 1 : precision;
    }
    value = Math.round((base + offset + significand * Math.pow(10, exp)) * precision) / precision;
  }
  var lastTick = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["O"])(generationOptions.max, value);
  ticks.push({
    value: lastTick,
    major: isMajor(lastTick),
    significand: significand
  });
  return ticks;
}
var LogarithmicScale = /*#__PURE__*/function (_Scale3) {
  function LogarithmicScale(cfg) {
    var _this38;
    _this38 = _Scale3.call(this, cfg) || this;
    _this38.start = undefined;
    _this38.end = undefined;
    _this38._startValue = undefined;
    _this38._valueRange = 0;
    return _this38;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(LogarithmicScale, _Scale3);
  var _proto34 = LogarithmicScale.prototype;
  _proto34.parse = function parse(raw, index) {
    var value = LinearScaleBase.prototype.parse.apply(this, [raw, index]);
    if (value === 0) {
      this._zero = true;
      return undefined;
    }
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(value) && value > 0 ? value : null;
  };
  _proto34.determineDataLimits = function determineDataLimits() {
    var _this$getMinMax3 = this.getMinMax(true),
      min = _this$getMinMax3.min,
      max = _this$getMinMax3.max;
    this.min = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(min) ? Math.max(0, min) : null;
    this.max = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(max) ? Math.max(0, max) : null;
    if (this.options.beginAtZero) {
      this._zero = true;
    }
    if (this._zero && this.min !== this._suggestedMin && !Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(this._userMin)) {
      this.min = min === changeExponent(this.min, 0) ? changeExponent(this.min, -1) : changeExponent(this.min, 0);
    }
    this.handleTickRangeOptions();
  };
  _proto34.handleTickRangeOptions = function handleTickRangeOptions() {
    var _this$getUserBounds4 = this.getUserBounds(),
      minDefined = _this$getUserBounds4.minDefined,
      maxDefined = _this$getUserBounds4.maxDefined;
    var min = this.min;
    var max = this.max;
    var setMin = function setMin(v) {
      return min = minDefined ? min : v;
    };
    var setMax = function setMax(v) {
      return max = maxDefined ? max : v;
    };
    if (min === max) {
      if (min <= 0) {
        setMin(1);
        setMax(10);
      } else {
        setMin(changeExponent(min, -1));
        setMax(changeExponent(max, +1));
      }
    }
    if (min <= 0) {
      setMin(changeExponent(max, -1));
    }
    if (max <= 0) {
      setMax(changeExponent(min, +1));
    }
    this.min = min;
    this.max = max;
  };
  _proto34.buildTicks = function buildTicks() {
    var opts = this.options;
    var generationOptions = {
      min: this._userMin,
      max: this._userMax
    };
    var ticks = generateTicks(generationOptions, this);
    if (opts.bounds === 'ticks') {
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aG"])(ticks, this, 'value');
    }
    if (opts.reverse) {
      ticks.reverse();
      this.start = this.max;
      this.end = this.min;
    } else {
      this.start = this.min;
      this.end = this.max;
    }
    return ticks;
  };
  _proto34.getLabelForValue = function getLabelForValue(value) {
    return value === undefined ? '0' : Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["o"])(value, this.chart.options.locale, this.options.ticks.format);
  };
  _proto34.configure = function configure() {
    var start = this.min;
    _Scale3.prototype.configure.call(this);
    this._startValue = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aM"])(start);
    this._valueRange = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aM"])(this.max) - Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aM"])(start);
  };
  _proto34.getPixelForValue = function getPixelForValue(value) {
    if (value === undefined || value === 0) {
      value = this.min;
    }
    if (value === null || isNaN(value)) {
      return NaN;
    }
    return this.getPixelForDecimal(value === this.min ? 0 : (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aM"])(value) - this._startValue) / this._valueRange);
  };
  _proto34.getValueForPixel = function getValueForPixel(pixel) {
    var decimal = this.getDecimalForPixel(pixel);
    return Math.pow(10, this._startValue + decimal * this._valueRange);
  };
  return LogarithmicScale;
}(Scale);
LogarithmicScale.id = 'logarithmic';
LogarithmicScale.defaults = {
  ticks: {
    callback: _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aL"].formatters.logarithmic,
    major: {
      enabled: true
    }
  }
};
function getTickBackdropHeight(opts) {
  var tickOpts = opts.ticks;
  if (tickOpts.display && opts.display) {
    var padding = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(tickOpts.backdropPadding);
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(tickOpts.font && tickOpts.font.size, _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["d"].font.size) + padding.height;
  }
  return 0;
}
function measureLabelSize(ctx, font, label) {
  label = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["b"])(label) ? label : [label];
  return {
    w: Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aN"])(ctx, font.string, label),
    h: label.length * font.lineHeight
  };
}
function determineLimits(angle, pos, size, min, max) {
  if (angle === min || angle === max) {
    return {
      start: pos - size / 2,
      end: pos + size / 2
    };
  } else if (angle < min || angle > max) {
    return {
      start: pos - size,
      end: pos
    };
  }
  return {
    start: pos,
    end: pos + size
  };
}
function fitWithPointLabels(scale) {
  var orig = {
    l: scale.left + scale._padding.left,
    r: scale.right - scale._padding.right,
    t: scale.top + scale._padding.top,
    b: scale.bottom - scale._padding.bottom
  };
  var limits = Object.assign({}, orig);
  var labelSizes = [];
  var padding = [];
  var valueCount = scale._pointLabels.length;
  var pointLabelOpts = scale.options.pointLabels;
  var additionalAngle = pointLabelOpts.centerPointLabels ? _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["P"] / valueCount : 0;
  for (var i = 0; i < valueCount; i++) {
    var opts = pointLabelOpts.setContext(scale.getPointLabelContext(i));
    padding[i] = opts.padding;
    var pointPosition = scale.getPointPosition(i, scale.drawingArea + padding[i], additionalAngle);
    var plFont = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(opts.font);
    var textSize = measureLabelSize(scale.ctx, plFont, scale._pointLabels[i]);
    labelSizes[i] = textSize;
    var angleRadians = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ay"])(scale.getIndexAngle(i) + additionalAngle);
    var angle = Math.round(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["U"])(angleRadians));
    var hLimits = determineLimits(angle, pointPosition.x, textSize.w, 0, 180);
    var vLimits = determineLimits(angle, pointPosition.y, textSize.h, 90, 270);
    updateLimits(limits, orig, angleRadians, hLimits, vLimits);
  }
  scale.setCenterPoint(orig.l - limits.l, limits.r - orig.r, orig.t - limits.t, limits.b - orig.b);
  scale._pointLabelItems = buildPointLabelItems(scale, labelSizes, padding);
}
function updateLimits(limits, orig, angle, hLimits, vLimits) {
  var sin = Math.abs(Math.sin(angle));
  var cos = Math.abs(Math.cos(angle));
  var x = 0;
  var y = 0;
  if (hLimits.start < orig.l) {
    x = (orig.l - hLimits.start) / sin;
    limits.l = Math.min(limits.l, orig.l - x);
  } else if (hLimits.end > orig.r) {
    x = (hLimits.end - orig.r) / sin;
    limits.r = Math.max(limits.r, orig.r + x);
  }
  if (vLimits.start < orig.t) {
    y = (orig.t - vLimits.start) / cos;
    limits.t = Math.min(limits.t, orig.t - y);
  } else if (vLimits.end > orig.b) {
    y = (vLimits.end - orig.b) / cos;
    limits.b = Math.max(limits.b, orig.b + y);
  }
}
function createPointLabelItem(scale, index, itemOpts) {
  var outerDistance = scale.drawingArea;
  var extra = itemOpts.extra,
    additionalAngle = itemOpts.additionalAngle,
    padding = itemOpts.padding,
    size = itemOpts.size;
  var pointLabelPosition = scale.getPointPosition(index, outerDistance + extra + padding, additionalAngle);
  var angle = Math.round(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["U"])(Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ay"])(pointLabelPosition.angle + _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["H"])));
  var y = yForAngle(pointLabelPosition.y, size.h, angle);
  var textAlign = getTextAlignForAngle(angle);
  var left = leftForTextAlign(pointLabelPosition.x, size.w, textAlign);
  return {
    visible: true,
    x: pointLabelPosition.x,
    y: y,
    textAlign: textAlign,
    left: left,
    top: y,
    right: left + size.w,
    bottom: y + size.h
  };
}
function isNotOverlapped(item, area) {
  if (!area) {
    return true;
  }
  var left = item.left,
    top = item.top,
    right = item.right,
    bottom = item.bottom;
  var apexesInArea = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["C"])({
    x: left,
    y: top
  }, area) || Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["C"])({
    x: left,
    y: bottom
  }, area) || Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["C"])({
    x: right,
    y: top
  }, area) || Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["C"])({
    x: right,
    y: bottom
  }, area);
  return !apexesInArea;
}
function buildPointLabelItems(scale, labelSizes, padding) {
  var items = [];
  var valueCount = scale._pointLabels.length;
  var opts = scale.options;
  var _opts$pointLabels = opts.pointLabels,
    centerPointLabels = _opts$pointLabels.centerPointLabels,
    display = _opts$pointLabels.display;
  var itemOpts = {
    extra: getTickBackdropHeight(opts) / 2,
    additionalAngle: centerPointLabels ? _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["P"] / valueCount : 0
  };
  var area;
  for (var i = 0; i < valueCount; i++) {
    itemOpts.padding = padding[i];
    itemOpts.size = labelSizes[i];
    var item = createPointLabelItem(scale, i, itemOpts);
    items.push(item);
    if (display === 'auto') {
      item.visible = isNotOverlapped(item, area);
      if (item.visible) {
        area = item;
      }
    }
  }
  return items;
}
function getTextAlignForAngle(angle) {
  if (angle === 0 || angle === 180) {
    return 'center';
  } else if (angle < 180) {
    return 'left';
  }
  return 'right';
}
function leftForTextAlign(x, w, align) {
  if (align === 'right') {
    x -= w;
  } else if (align === 'center') {
    x -= w / 2;
  }
  return x;
}
function yForAngle(y, h, angle) {
  if (angle === 90 || angle === 270) {
    y -= h / 2;
  } else if (angle > 270 || angle < 90) {
    y -= h;
  }
  return y;
}
function drawPointLabelBox(ctx, opts, item) {
  var left = item.left,
    top = item.top,
    right = item.right,
    bottom = item.bottom;
  var backdropColor = opts.backdropColor;
  if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(backdropColor)) {
    var borderRadius = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aw"])(opts.borderRadius);
    var padding = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(opts.backdropPadding);
    ctx.fillStyle = backdropColor;
    var backdropLeft = left - padding.left;
    var backdropTop = top - padding.top;
    var backdropWidth = right - left + padding.width;
    var backdropHeight = bottom - top + padding.height;
    if (Object.values(borderRadius).some(function (v) {
      return v !== 0;
    })) {
      ctx.beginPath();
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["au"])(ctx, {
        x: backdropLeft,
        y: backdropTop,
        w: backdropWidth,
        h: backdropHeight,
        radius: borderRadius
      });
      ctx.fill();
    } else {
      ctx.fillRect(backdropLeft, backdropTop, backdropWidth, backdropHeight);
    }
  }
}
function drawPointLabels(scale, labelCount) {
  var ctx = scale.ctx,
    pointLabels = scale.options.pointLabels;
  for (var i = labelCount - 1; i >= 0; i--) {
    var item = scale._pointLabelItems[i];
    if (!item.visible) {
      continue;
    }
    var optsAtIndex = pointLabels.setContext(scale.getPointLabelContext(i));
    drawPointLabelBox(ctx, optsAtIndex, item);
    var plFont = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(optsAtIndex.font);
    var x = item.x,
      y = item.y,
      textAlign = item.textAlign;
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Z"])(ctx, scale._pointLabels[i], x, y + plFont.lineHeight / 2, plFont, {
      color: optsAtIndex.color,
      textAlign: textAlign,
      textBaseline: 'middle'
    });
  }
}
function pathRadiusLine(scale, radius, circular, labelCount) {
  var ctx = scale.ctx;
  if (circular) {
    ctx.arc(scale.xCenter, scale.yCenter, radius, 0, _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"]);
  } else {
    var pointPosition = scale.getPointPosition(0, radius);
    ctx.moveTo(pointPosition.x, pointPosition.y);
    for (var i = 1; i < labelCount; i++) {
      pointPosition = scale.getPointPosition(i, radius);
      ctx.lineTo(pointPosition.x, pointPosition.y);
    }
  }
}
function drawRadiusLine(scale, gridLineOpts, radius, labelCount, borderOpts) {
  var ctx = scale.ctx;
  var circular = gridLineOpts.circular;
  var color = gridLineOpts.color,
    lineWidth = gridLineOpts.lineWidth;
  if (!circular && !labelCount || !color || !lineWidth || radius < 0) {
    return;
  }
  ctx.save();
  ctx.strokeStyle = color;
  ctx.lineWidth = lineWidth;
  ctx.setLineDash(borderOpts.dash || []);
  ctx.lineDashOffset = borderOpts.dashOffset;
  ctx.beginPath();
  pathRadiusLine(scale, radius, circular, labelCount);
  ctx.closePath();
  ctx.stroke();
  ctx.restore();
}
function createPointLabelContext(parent, index, label) {
  return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["j"])(parent, {
    label: label,
    index: index,
    type: 'pointLabel'
  });
}
var RadialLinearScale = /*#__PURE__*/function (_LinearScaleBase2) {
  function RadialLinearScale(cfg) {
    var _this39;
    _this39 = _LinearScaleBase2.call(this, cfg) || this;
    _this39.xCenter = undefined;
    _this39.yCenter = undefined;
    _this39.drawingArea = undefined;
    _this39._pointLabels = [];
    _this39._pointLabelItems = [];
    return _this39;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(RadialLinearScale, _LinearScaleBase2);
  var _proto35 = RadialLinearScale.prototype;
  _proto35.setDimensions = function setDimensions() {
    var padding = this._padding = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(getTickBackdropHeight(this.options) / 2);
    var w = this.width = this.maxWidth - padding.width;
    var h = this.height = this.maxHeight - padding.height;
    this.xCenter = Math.floor(this.left + w / 2 + padding.left);
    this.yCenter = Math.floor(this.top + h / 2 + padding.top);
    this.drawingArea = Math.floor(Math.min(w, h) / 2);
  };
  _proto35.determineDataLimits = function determineDataLimits() {
    var _this$getMinMax4 = this.getMinMax(false),
      min = _this$getMinMax4.min,
      max = _this$getMinMax4.max;
    this.min = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(min) && !isNaN(min) ? min : 0;
    this.max = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(max) && !isNaN(max) ? max : 0;
    this.handleTickRangeOptions();
  };
  _proto35.computeTickLimit = function computeTickLimit() {
    return Math.ceil(this.drawingArea / getTickBackdropHeight(this.options));
  };
  _proto35.generateTickLabels = function generateTickLabels(ticks) {
    var _this40 = this;
    LinearScaleBase.prototype.generateTickLabels.call(this, ticks);
    this._pointLabels = this.getLabels().map(function (value, index) {
      var label = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(_this40.options.pointLabels.callback, [value, index], _this40);
      return label || label === 0 ? label : '';
    }).filter(function (v, i) {
      return _this40.chart.getDataVisibility(i);
    });
  };
  _proto35.fit = function fit() {
    var opts = this.options;
    if (opts.display && opts.pointLabels.display) {
      fitWithPointLabels(this);
    } else {
      this.setCenterPoint(0, 0, 0, 0);
    }
  };
  _proto35.setCenterPoint = function setCenterPoint(leftMovement, rightMovement, topMovement, bottomMovement) {
    this.xCenter += Math.floor((leftMovement - rightMovement) / 2);
    this.yCenter += Math.floor((topMovement - bottomMovement) / 2);
    this.drawingArea -= Math.min(this.drawingArea / 2, Math.max(leftMovement, rightMovement, topMovement, bottomMovement));
  };
  _proto35.getIndexAngle = function getIndexAngle(index) {
    var angleMultiplier = _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["T"] / (this._pointLabels.length || 1);
    var startAngle = this.options.startAngle || 0;
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ay"])(index * angleMultiplier + Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["t"])(startAngle));
  };
  _proto35.getDistanceFromCenterForValue = function getDistanceFromCenterForValue(value) {
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(value)) {
      return NaN;
    }
    var scalingFactor = this.drawingArea / (this.max - this.min);
    if (this.options.reverse) {
      return (this.max - value) * scalingFactor;
    }
    return (value - this.min) * scalingFactor;
  };
  _proto35.getValueForDistanceFromCenter = function getValueForDistanceFromCenter(distance) {
    if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(distance)) {
      return NaN;
    }
    var scaledDistance = distance / (this.drawingArea / (this.max - this.min));
    return this.options.reverse ? this.max - scaledDistance : this.min + scaledDistance;
  };
  _proto35.getPointLabelContext = function getPointLabelContext(index) {
    var pointLabels = this._pointLabels || [];
    if (index >= 0 && index < pointLabels.length) {
      var pointLabel = pointLabels[index];
      return createPointLabelContext(this.getContext(), index, pointLabel);
    }
  };
  _proto35.getPointPosition = function getPointPosition(index, distanceFromCenter, additionalAngle) {
    if (additionalAngle === void 0) {
      additionalAngle = 0;
    }
    var angle = this.getIndexAngle(index) - _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["H"] + additionalAngle;
    return {
      x: Math.cos(angle) * distanceFromCenter + this.xCenter,
      y: Math.sin(angle) * distanceFromCenter + this.yCenter,
      angle: angle
    };
  };
  _proto35.getPointPositionForValue = function getPointPositionForValue(index, value) {
    return this.getPointPosition(index, this.getDistanceFromCenterForValue(value));
  };
  _proto35.getBasePosition = function getBasePosition(index) {
    return this.getPointPositionForValue(index || 0, this.getBaseValue());
  };
  _proto35.getPointLabelPosition = function getPointLabelPosition(index) {
    var _this$_pointLabelItem = this._pointLabelItems[index],
      left = _this$_pointLabelItem.left,
      top = _this$_pointLabelItem.top,
      right = _this$_pointLabelItem.right,
      bottom = _this$_pointLabelItem.bottom;
    return {
      left: left,
      top: top,
      right: right,
      bottom: bottom
    };
  };
  _proto35.drawBackground = function drawBackground() {
    var _this$options16 = this.options,
      backgroundColor = _this$options16.backgroundColor,
      circular = _this$options16.grid.circular;
    if (backgroundColor) {
      var ctx = this.ctx;
      ctx.save();
      ctx.beginPath();
      pathRadiusLine(this, this.getDistanceFromCenterForValue(this._endValue), circular, this._pointLabels.length);
      ctx.closePath();
      ctx.fillStyle = backgroundColor;
      ctx.fill();
      ctx.restore();
    }
  };
  _proto35.drawGrid = function drawGrid() {
    var _this41 = this;
    var ctx = this.ctx;
    var opts = this.options;
    var angleLines = opts.angleLines,
      grid = opts.grid,
      border = opts.border;
    var labelCount = this._pointLabels.length;
    var i, offset, position;
    if (opts.pointLabels.display) {
      drawPointLabels(this, labelCount);
    }
    if (grid.display) {
      this.ticks.forEach(function (tick, index) {
        if (index !== 0 || index === 0 && _this41.min < 0) {
          offset = _this41.getDistanceFromCenterForValue(tick.value);
          var context = _this41.getContext(index);
          var optsAtIndex = grid.setContext(context);
          var optsAtIndexBorder = border.setContext(context);
          drawRadiusLine(_this41, optsAtIndex, offset, labelCount, optsAtIndexBorder);
        }
      });
    }
    if (angleLines.display) {
      ctx.save();
      for (i = labelCount - 1; i >= 0; i--) {
        var optsAtIndex = angleLines.setContext(this.getPointLabelContext(i));
        var color = optsAtIndex.color,
          lineWidth = optsAtIndex.lineWidth;
        if (!lineWidth || !color) {
          continue;
        }
        ctx.lineWidth = lineWidth;
        ctx.strokeStyle = color;
        ctx.setLineDash(optsAtIndex.borderDash);
        ctx.lineDashOffset = optsAtIndex.borderDashOffset;
        offset = this.getDistanceFromCenterForValue(opts.reverse ? this.min : this.max);
        position = this.getPointPosition(i, offset);
        ctx.beginPath();
        ctx.moveTo(this.xCenter, this.yCenter);
        ctx.lineTo(position.x, position.y);
        ctx.stroke();
      }
      ctx.restore();
    }
  };
  _proto35.drawBorder = function drawBorder() {};
  _proto35.drawLabels = function drawLabels() {
    var _this42 = this;
    var ctx = this.ctx;
    var opts = this.options;
    var tickOpts = opts.ticks;
    if (!tickOpts.display) {
      return;
    }
    var startAngle = this.getIndexAngle(0);
    var offset, width;
    ctx.save();
    ctx.translate(this.xCenter, this.yCenter);
    ctx.rotate(startAngle);
    ctx.textAlign = 'center';
    ctx.textBaseline = 'middle';
    this.ticks.forEach(function (tick, index) {
      if (index === 0 && _this42.min >= 0 && !opts.reverse) {
        return;
      }
      var optsAtIndex = tickOpts.setContext(_this42.getContext(index));
      var tickFont = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["a0"])(optsAtIndex.font);
      offset = _this42.getDistanceFromCenterForValue(_this42.ticks[index].value);
      if (optsAtIndex.showLabelBackdrop) {
        ctx.font = tickFont.string;
        width = ctx.measureText(tick.label).width;
        ctx.fillStyle = optsAtIndex.backdropColor;
        var padding = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["E"])(optsAtIndex.backdropPadding);
        ctx.fillRect(-width / 2 - padding.left, -offset - tickFont.size / 2 - padding.top, width + padding.width, tickFont.size + padding.height);
      }
      Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Z"])(ctx, tick.label, 0, -offset, tickFont, {
        color: optsAtIndex.color,
        strokeColor: optsAtIndex.textStrokeColor,
        strokeWidth: optsAtIndex.textStrokeWidth
      });
    });
    ctx.restore();
  };
  _proto35.drawTitle = function drawTitle() {};
  return RadialLinearScale;
}(LinearScaleBase);
RadialLinearScale.id = 'radialLinear';
RadialLinearScale.defaults = {
  display: true,
  animate: true,
  position: 'chartArea',
  angleLines: {
    display: true,
    lineWidth: 1,
    borderDash: [],
    borderDashOffset: 0.0
  },
  grid: {
    circular: false
  },
  startAngle: 0,
  ticks: {
    showLabelBackdrop: true,
    callback: _chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aL"].formatters.numeric
  },
  pointLabels: {
    backdropColor: undefined,
    backdropPadding: 2,
    display: true,
    font: {
      size: 10
    },
    callback: function callback(label) {
      return label;
    },
    padding: 5,
    centerPointLabels: false
  }
};
RadialLinearScale.defaultRoutes = {
  'angleLines.color': 'borderColor',
  'pointLabels.color': 'color',
  'ticks.color': 'color'
};
RadialLinearScale.descriptors = {
  angleLines: {
    _fallback: 'grid'
  }
};
var INTERVALS = {
  millisecond: {
    common: true,
    size: 1,
    steps: 1000
  },
  second: {
    common: true,
    size: 1000,
    steps: 60
  },
  minute: {
    common: true,
    size: 60000,
    steps: 60
  },
  hour: {
    common: true,
    size: 3600000,
    steps: 24
  },
  day: {
    common: true,
    size: 86400000,
    steps: 30
  },
  week: {
    common: false,
    size: 604800000,
    steps: 4
  },
  month: {
    common: true,
    size: 2.628e9,
    steps: 12
  },
  quarter: {
    common: false,
    size: 7.884e9,
    steps: 4
  },
  year: {
    common: true,
    size: 3.154e10
  }
};
var UNITS = /* #__PURE__ */Object.keys(INTERVALS);
function sorter(a, b) {
  return a - b;
}
function _parse(scale, input) {
  if (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["k"])(input)) {
    return null;
  }
  var adapter = scale._adapter;
  var _scale$_parseOpts = scale._parseOpts,
    parser = _scale$_parseOpts.parser,
    round = _scale$_parseOpts.round,
    isoWeekday = _scale$_parseOpts.isoWeekday;
  var value = input;
  if (typeof parser === 'function') {
    value = parser(value);
  }
  if (!Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(value)) {
    value = typeof parser === 'string' ? adapter.parse(value, parser) : adapter.parse(value);
  }
  if (value === null) {
    return null;
  }
  if (round) {
    value = round === 'week' && (Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["x"])(isoWeekday) || isoWeekday === true) ? adapter.startOf(value, 'isoWeek', isoWeekday) : adapter.startOf(value, round);
  }
  return +value;
}
function determineUnitForAutoTicks(minUnit, min, max, capacity) {
  var ilen = UNITS.length;
  for (var i = UNITS.indexOf(minUnit); i < ilen - 1; ++i) {
    var interval = INTERVALS[UNITS[i]];
    var factor = interval.steps ? interval.steps : Number.MAX_SAFE_INTEGER;
    if (interval.common && Math.ceil((max - min) / (factor * interval.size)) <= capacity) {
      return UNITS[i];
    }
  }
  return UNITS[ilen - 1];
}
function determineUnitForFormatting(scale, numTicks, minUnit, min, max) {
  for (var i = UNITS.length - 1; i >= UNITS.indexOf(minUnit); i--) {
    var unit = UNITS[i];
    if (INTERVALS[unit].common && scale._adapter.diff(max, min, unit) >= numTicks - 1) {
      return unit;
    }
  }
  return UNITS[minUnit ? UNITS.indexOf(minUnit) : 0];
}
function determineMajorUnit(unit) {
  for (var i = UNITS.indexOf(unit) + 1, ilen = UNITS.length; i < ilen; ++i) {
    if (INTERVALS[UNITS[i]].common) {
      return UNITS[i];
    }
  }
}
function addTick(ticks, time, timestamps) {
  if (!timestamps) {
    ticks[time] = true;
  } else if (timestamps.length) {
    var _lookup2 = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aP"])(timestamps, time),
      lo = _lookup2.lo,
      hi = _lookup2.hi;
    var timestamp = timestamps[lo] >= time ? timestamps[lo] : timestamps[hi];
    ticks[timestamp] = true;
  }
}
function setMajorTicks(scale, ticks, map, majorUnit) {
  var adapter = scale._adapter;
  var first = +adapter.startOf(ticks[0].value, majorUnit);
  var last = ticks[ticks.length - 1].value;
  var major, index;
  for (major = first; major <= last; major = +adapter.add(major, 1, majorUnit)) {
    index = map[major];
    if (index >= 0) {
      ticks[index].major = true;
    }
  }
  return ticks;
}
function ticksFromTimestamps(scale, values, majorUnit) {
  var ticks = [];
  var map = {};
  var ilen = values.length;
  var i, value;
  for (i = 0; i < ilen; ++i) {
    value = values[i];
    map[value] = i;
    ticks.push({
      value: value,
      major: false
    });
  }
  return ilen === 0 || !majorUnit ? ticks : setMajorTicks(scale, ticks, map, majorUnit);
}
var TimeScale = /*#__PURE__*/function (_Scale4) {
  function TimeScale(props) {
    var _this43;
    _this43 = _Scale4.call(this, props) || this;
    _this43._cache = {
      data: [],
      labels: [],
      all: []
    };
    _this43._unit = 'day';
    _this43._majorUnit = undefined;
    _this43._offsets = {};
    _this43._normalized = false;
    _this43._parseOpts = undefined;
    return _this43;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(TimeScale, _Scale4);
  var _proto36 = TimeScale.prototype;
  _proto36.init = function init(scaleOpts, opts) {
    if (opts === void 0) {
      opts = {};
    }
    var time = scaleOpts.time || (scaleOpts.time = {});
    var adapter = this._adapter = new adapters._date(scaleOpts.adapters.date);
    adapter.init(opts);
    Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["ab"])(time.displayFormats, adapter.formats());
    this._parseOpts = {
      parser: time.parser,
      round: time.round,
      isoWeekday: time.isoWeekday
    };
    _Scale4.prototype.init.call(this, scaleOpts);
    this._normalized = opts.normalized;
  };
  _proto36.parse = function parse(raw, index) {
    if (raw === undefined) {
      return null;
    }
    return _parse(this, raw);
  };
  _proto36.beforeLayout = function beforeLayout() {
    _Scale4.prototype.beforeLayout.call(this);
    this._cache = {
      data: [],
      labels: [],
      all: []
    };
  };
  _proto36.determineDataLimits = function determineDataLimits() {
    var options = this.options;
    var adapter = this._adapter;
    var unit = options.time.unit || 'day';
    var _this$getUserBounds5 = this.getUserBounds(),
      min = _this$getUserBounds5.min,
      max = _this$getUserBounds5.max,
      minDefined = _this$getUserBounds5.minDefined,
      maxDefined = _this$getUserBounds5.maxDefined;
    function _applyBounds(bounds) {
      if (!minDefined && !isNaN(bounds.min)) {
        min = Math.min(min, bounds.min);
      }
      if (!maxDefined && !isNaN(bounds.max)) {
        max = Math.max(max, bounds.max);
      }
    }
    if (!minDefined || !maxDefined) {
      _applyBounds(this._getLabelBounds());
      if (options.bounds !== 'ticks' || options.ticks.source !== 'labels') {
        _applyBounds(this.getMinMax(false));
      }
    }
    min = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(min) && !isNaN(min) ? min : +adapter.startOf(Date.now(), unit);
    max = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["g"])(max) && !isNaN(max) ? max : +adapter.endOf(Date.now(), unit) + 1;
    this.min = Math.min(min, max - 1);
    this.max = Math.max(min + 1, max);
  };
  _proto36._getLabelBounds = function _getLabelBounds() {
    var arr = this.getLabelTimestamps();
    var min = Number.POSITIVE_INFINITY;
    var max = Number.NEGATIVE_INFINITY;
    if (arr.length) {
      min = arr[0];
      max = arr[arr.length - 1];
    }
    return {
      min: min,
      max: max
    };
  };
  _proto36.buildTicks = function buildTicks() {
    var options = this.options;
    var timeOpts = options.time;
    var tickOpts = options.ticks;
    var timestamps = tickOpts.source === 'labels' ? this.getLabelTimestamps() : this._generate();
    if (options.bounds === 'ticks' && timestamps.length) {
      this.min = this._userMin || timestamps[0];
      this.max = this._userMax || timestamps[timestamps.length - 1];
    }
    var min = this.min;
    var max = this.max;
    var ticks = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["aO"])(timestamps, min, max);
    this._unit = timeOpts.unit || (tickOpts.autoSkip ? determineUnitForAutoTicks(timeOpts.minUnit, this.min, this.max, this._getLabelCapacity(min)) : determineUnitForFormatting(this, ticks.length, timeOpts.minUnit, this.min, this.max));
    this._majorUnit = !tickOpts.major.enabled || this._unit === 'year' ? undefined : determineMajorUnit(this._unit);
    this.initOffsets(timestamps);
    if (options.reverse) {
      ticks.reverse();
    }
    return ticksFromTimestamps(this, ticks, this._majorUnit);
  };
  _proto36.afterAutoSkip = function afterAutoSkip() {
    if (this.options.offsetAfterAutoskip) {
      this.initOffsets(this.ticks.map(function (tick) {
        return +tick.value;
      }));
    }
  };
  _proto36.initOffsets = function initOffsets(timestamps) {
    if (timestamps === void 0) {
      timestamps = [];
    }
    var start = 0;
    var end = 0;
    var first, last;
    if (this.options.offset && timestamps.length) {
      first = this.getDecimalForValue(timestamps[0]);
      if (timestamps.length === 1) {
        start = 1 - first;
      } else {
        start = (this.getDecimalForValue(timestamps[1]) - first) / 2;
      }
      last = this.getDecimalForValue(timestamps[timestamps.length - 1]);
      if (timestamps.length === 1) {
        end = last;
      } else {
        end = (last - this.getDecimalForValue(timestamps[timestamps.length - 2])) / 2;
      }
    }
    var limit = timestamps.length < 3 ? 0.5 : 0.25;
    start = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])(start, 0, limit);
    end = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["S"])(end, 0, limit);
    this._offsets = {
      start: start,
      end: end,
      factor: 1 / (start + 1 + end)
    };
  };
  _proto36._generate = function _generate() {
    var adapter = this._adapter;
    var min = this.min;
    var max = this.max;
    var options = this.options;
    var timeOpts = options.time;
    var minor = timeOpts.unit || determineUnitForAutoTicks(timeOpts.minUnit, min, max, this._getLabelCapacity(min));
    var stepSize = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["v"])(options.ticks.stepSize, 1);
    var weekday = minor === 'week' ? timeOpts.isoWeekday : false;
    var hasWeekday = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["x"])(weekday) || weekday === true;
    var ticks = {};
    var first = min;
    var time, count;
    if (hasWeekday) {
      first = +adapter.startOf(first, 'isoWeek', weekday);
    }
    first = +adapter.startOf(first, hasWeekday ? 'day' : minor);
    if (adapter.diff(max, min, minor) > 100000 * stepSize) {
      throw new Error(min + ' and ' + max + ' are too far apart with stepSize of ' + stepSize + ' ' + minor);
    }
    var timestamps = options.ticks.source === 'data' && this.getDataTimestamps();
    for (time = first, count = 0; time < max; time = +adapter.add(time, stepSize, minor), count++) {
      addTick(ticks, time, timestamps);
    }
    if (time === max || options.bounds === 'ticks' || count === 1) {
      addTick(ticks, time, timestamps);
    }
    return Object.keys(ticks).sort(sorter).map(function (x) {
      return +x;
    });
  };
  _proto36.getLabelForValue = function getLabelForValue(value) {
    var adapter = this._adapter;
    var timeOpts = this.options.time;
    if (timeOpts.tooltipFormat) {
      return adapter.format(value, timeOpts.tooltipFormat);
    }
    return adapter.format(value, timeOpts.displayFormats.datetime);
  };
  _proto36.format = function format(value, _format) {
    var options = this.options;
    var formats = options.time.displayFormats;
    var unit = this._unit;
    var fmt = _format || formats[unit];
    return this._adapter.format(value, fmt);
  };
  _proto36._tickFormatFunction = function _tickFormatFunction(time, index, ticks, format) {
    var options = this.options;
    var formatter = options.ticks.callback;
    if (formatter) {
      return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["Q"])(formatter, [time, index, ticks], this);
    }
    var formats = options.time.displayFormats;
    var unit = this._unit;
    var majorUnit = this._majorUnit;
    var minorFormat = unit && formats[unit];
    var majorFormat = majorUnit && formats[majorUnit];
    var tick = ticks[index];
    var major = majorUnit && majorFormat && tick && tick.major;
    return this._adapter.format(time, format || (major ? majorFormat : minorFormat));
  };
  _proto36.generateTickLabels = function generateTickLabels(ticks) {
    var i, ilen, tick;
    for (i = 0, ilen = ticks.length; i < ilen; ++i) {
      tick = ticks[i];
      tick.label = this._tickFormatFunction(tick.value, i, ticks);
    }
  };
  _proto36.getDecimalForValue = function getDecimalForValue(value) {
    return value === null ? NaN : (value - this.min) / (this.max - this.min);
  };
  _proto36.getPixelForValue = function getPixelForValue(value) {
    var offsets = this._offsets;
    var pos = this.getDecimalForValue(value);
    return this.getPixelForDecimal((offsets.start + pos) * offsets.factor);
  };
  _proto36.getValueForPixel = function getValueForPixel(pixel) {
    var offsets = this._offsets;
    var pos = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;
    return this.min + pos * (this.max - this.min);
  };
  _proto36._getLabelSize = function _getLabelSize(label) {
    var ticksOpts = this.options.ticks;
    var tickLabelWidth = this.ctx.measureText(label).width;
    var angle = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["t"])(this.isHorizontal() ? ticksOpts.maxRotation : ticksOpts.minRotation);
    var cosRotation = Math.cos(angle);
    var sinRotation = Math.sin(angle);
    var tickFontSize = this._resolveTickFontOptions(0).size;
    return {
      w: tickLabelWidth * cosRotation + tickFontSize * sinRotation,
      h: tickLabelWidth * sinRotation + tickFontSize * cosRotation
    };
  };
  _proto36._getLabelCapacity = function _getLabelCapacity(exampleTime) {
    var timeOpts = this.options.time;
    var displayFormats = timeOpts.displayFormats;
    var format = displayFormats[timeOpts.unit] || displayFormats.millisecond;
    var exampleLabel = this._tickFormatFunction(exampleTime, 0, ticksFromTimestamps(this, [exampleTime], this._majorUnit), format);
    var size = this._getLabelSize(exampleLabel);
    var capacity = Math.floor(this.isHorizontal() ? this.width / size.w : this.height / size.h) - 1;
    return capacity > 0 ? capacity : 1;
  };
  _proto36.getDataTimestamps = function getDataTimestamps() {
    var timestamps = this._cache.data || [];
    var i, ilen;
    if (timestamps.length) {
      return timestamps;
    }
    var metas = this.getMatchingVisibleMetas();
    if (this._normalized && metas.length) {
      return this._cache.data = metas[0].controller.getAllParsedValues(this);
    }
    for (i = 0, ilen = metas.length; i < ilen; ++i) {
      timestamps = timestamps.concat(metas[i].controller.getAllParsedValues(this));
    }
    return this._cache.data = this.normalize(timestamps);
  };
  _proto36.getLabelTimestamps = function getLabelTimestamps() {
    var timestamps = this._cache.labels || [];
    var i, ilen;
    if (timestamps.length) {
      return timestamps;
    }
    var labels = this.getLabels();
    for (i = 0, ilen = labels.length; i < ilen; ++i) {
      timestamps.push(_parse(this, labels[i]));
    }
    return this._cache.labels = this._normalized ? timestamps : this.normalize(timestamps);
  };
  _proto36.normalize = function normalize(values) {
    return Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["_"])(values.sort(sorter));
  };
  return TimeScale;
}(Scale);
TimeScale.id = 'time';
TimeScale.defaults = {
  bounds: 'data',
  adapters: {},
  time: {
    parser: false,
    unit: false,
    round: false,
    isoWeekday: false,
    minUnit: 'millisecond',
    displayFormats: {}
  },
  ticks: {
    source: 'auto',
    callback: false,
    major: {
      enabled: false
    }
  }
};
function interpolate(table, val, reverse) {
  var lo = 0;
  var hi = table.length - 1;
  var prevSource, nextSource, prevTarget, nextTarget;
  if (reverse) {
    if (val >= table[lo].pos && val <= table[hi].pos) {
      var _lookupByKey2 = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["B"])(table, 'pos', val);
      lo = _lookupByKey2.lo;
      hi = _lookupByKey2.hi;
    }
    var _table$lo = table[lo];
    prevSource = _table$lo.pos;
    prevTarget = _table$lo.time;
    var _table$hi = table[hi];
    nextSource = _table$hi.pos;
    nextTarget = _table$hi.time;
  } else {
    if (val >= table[lo].time && val <= table[hi].time) {
      var _lookupByKey3 = Object(_chunks_helpers_segment_js__WEBPACK_IMPORTED_MODULE_3__["B"])(table, 'time', val);
      lo = _lookupByKey3.lo;
      hi = _lookupByKey3.hi;
    }
    var _table$lo2 = table[lo];
    prevSource = _table$lo2.time;
    prevTarget = _table$lo2.pos;
    var _table$hi2 = table[hi];
    nextSource = _table$hi2.time;
    nextTarget = _table$hi2.pos;
  }
  var span = nextSource - prevSource;
  return span ? prevTarget + (nextTarget - prevTarget) * (val - prevSource) / span : prevTarget;
}
var TimeSeriesScale = /*#__PURE__*/function (_TimeScale2) {
  function TimeSeriesScale(props) {
    var _this44;
    _this44 = _TimeScale2.call(this, props) || this;
    _this44._table = [];
    _this44._minPos = undefined;
    _this44._tableRange = undefined;
    return _this44;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_2__["default"])(TimeSeriesScale, _TimeScale2);
  var _proto37 = TimeSeriesScale.prototype;
  _proto37.initOffsets = function initOffsets() {
    var timestamps = this._getTimestampsForTable();
    var table = this._table = this.buildLookupTable(timestamps);
    this._minPos = interpolate(table, this.min);
    this._tableRange = interpolate(table, this.max) - this._minPos;
    _TimeScale2.prototype.initOffsets.call(this, timestamps);
  };
  _proto37.buildLookupTable = function buildLookupTable(timestamps) {
    var min = this.min,
      max = this.max;
    var items = [];
    var table = [];
    var i, ilen, prev, curr, next;
    for (i = 0, ilen = timestamps.length; i < ilen; ++i) {
      curr = timestamps[i];
      if (curr >= min && curr <= max) {
        items.push(curr);
      }
    }
    if (items.length < 2) {
      return [{
        time: min,
        pos: 0
      }, {
        time: max,
        pos: 1
      }];
    }
    for (i = 0, ilen = items.length; i < ilen; ++i) {
      next = items[i + 1];
      prev = items[i - 1];
      curr = items[i];
      if (Math.round((next + prev) / 2) !== curr) {
        table.push({
          time: curr,
          pos: i / (ilen - 1)
        });
      }
    }
    return table;
  };
  _proto37._generate = function _generate() {
    var min = this.min;
    var max = this.max;
    var timestamps = _TimeScale2.prototype.getDataTimestamps.call(this);
    if (!timestamps.includes(min) || !timestamps.length) {
      timestamps.splice(0, 0, min);
    }
    if (!timestamps.includes(max) || timestamps.length === 1) {
      timestamps.push(max);
    }
    return timestamps.sort(function (a, b) {
      return a - b;
    });
  };
  _proto37._getTimestampsForTable = function _getTimestampsForTable() {
    var timestamps = this._cache.all || [];
    if (timestamps.length) {
      return timestamps;
    }
    var data = this.getDataTimestamps();
    var label = this.getLabelTimestamps();
    if (data.length && label.length) {
      timestamps = this.normalize(data.concat(label));
    } else {
      timestamps = data.length ? data : label;
    }
    timestamps = this._cache.all = timestamps;
    return timestamps;
  };
  _proto37.getDecimalForValue = function getDecimalForValue(value) {
    return (interpolate(this._table, value) - this._minPos) / this._tableRange;
  };
  _proto37.getValueForPixel = function getValueForPixel(pixel) {
    var offsets = this._offsets;
    var decimal = this.getDecimalForPixel(pixel) / offsets.factor - offsets.end;
    return interpolate(this._table, decimal * this._tableRange + this._minPos, true);
  };
  return TimeSeriesScale;
}(TimeScale);
TimeSeriesScale.id = 'timeseries';
TimeSeriesScale.defaults = TimeScale.defaults;
var scales = /*#__PURE__*/Object.freeze({
  __proto__: null,
  CategoryScale: CategoryScale,
  LinearScale: LinearScale,
  LogarithmicScale: LogarithmicScale,
  RadialLinearScale: RadialLinearScale,
  TimeScale: TimeScale,
  TimeSeriesScale: TimeSeriesScale
});
var registerables = [controllers, elements, plugins, scales];


/***/ }),

/***/ "./node_modules/chart.js/dist/chunks/helpers.segment.js":
/*!**************************************************************!*\
  !*** ./node_modules/chart.js/dist/chunks/helpers.segment.js ***!
  \**************************************************************/
/*! exports provided: $, A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, _, a, a$, a0, a1, a2, a3, a4, a5, a6, a7, a8, a9, aA, aB, aC, aD, aE, aF, aG, aH, aI, aJ, aK, aL, aM, aN, aO, aP, aQ, aR, aS, aT, aU, aV, aW, aX, aY, aZ, a_, aa, ab, ac, ad, ae, af, ag, ah, ai, aj, ak, al, am, an, ao, ap, aq, ar, as, at, au, av, aw, ax, ay, az, b, b0, b1, b2, b3, b4, b5, b6, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "$", function() { return unclipArea; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "A", function() { return _rlookupByKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "B", function() { return _lookupByKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "C", function() { return _isPointInArea; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "D", function() { return getAngleFromPoint; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "E", function() { return toPadding; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "F", function() { return each; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "G", function() { return getMaximumSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "H", function() { return HALF_PI; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "I", function() { return _getParentNode; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "J", function() { return readUsedSize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "K", function() { return supportsEventListenerOptions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "L", function() { return throttled; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "M", function() { return _isDomSupported; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "N", function() { return _factorize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "O", function() { return finiteOrDefault; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "P", function() { return PI; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Q", function() { return callback; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "R", function() { return _addGrace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "S", function() { return _limitValue; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "T", function() { return TAU; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "U", function() { return toDegrees; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "V", function() { return _measureText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "W", function() { return _int16Range; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "X", function() { return _alignPixel; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Y", function() { return clipArea; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Z", function() { return renderText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "_", function() { return _arrayUnique; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return resolve; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a$", function() { return fontString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a0", function() { return toFont; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a1", function() { return _toLeftRightCenter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a2", function() { return _alignStartEnd; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a3", function() { return overrides; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a4", function() { return merge; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a5", function() { return _capitalize; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a6", function() { return descriptors; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a7", function() { return isFunction; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a8", function() { return _attachContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a9", function() { return _createResolver; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aA", function() { return overrideTextDirection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aB", function() { return _textX; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aC", function() { return restoreTextDirection; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aD", function() { return drawPointLegend; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aE", function() { return distanceBetweenPoints; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aF", function() { return noop; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aG", function() { return _setMinAndMaxByKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aH", function() { return niceNum; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aI", function() { return almostWhole; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aJ", function() { return almostEquals; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aK", function() { return _decimalPlaces; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aL", function() { return Ticks; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aM", function() { return log10; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aN", function() { return _longestText; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aO", function() { return _filterBetween; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aP", function() { return _lookup; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aQ", function() { return isPatternOrGradient; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aR", function() { return getHoverColor; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aS", function() { return clone; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aT", function() { return _merger; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aU", function() { return _mergerIf; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aV", function() { return _deprecated; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aW", function() { return _splitKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aX", function() { return toFontString; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aY", function() { return splineCurve; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aZ", function() { return splineCurveMonotone; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a_", function() { return getStyle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aa", function() { return _descriptors; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ab", function() { return mergeIf; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ac", function() { return uid; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ad", function() { return debounce; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ae", function() { return retinaScale; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "af", function() { return clearCanvas; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ag", function() { return setsEqual; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ah", function() { return _elementsEqual; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ai", function() { return _isClickEvent; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aj", function() { return _isBetween; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ak", function() { return _readValueToProps; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "al", function() { return _updateBezierControlPoints; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "am", function() { return _computeSegments; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "an", function() { return _boundSegments; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ao", function() { return _steppedInterpolation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ap", function() { return _bezierInterpolation; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aq", function() { return _pointInLine; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ar", function() { return _steppedLineTo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "as", function() { return _bezierCurveTo; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "at", function() { return drawPoint; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "au", function() { return addRoundedRectPath; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "av", function() { return toTRBL; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "aw", function() { return toTRBLCorners; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ax", function() { return _boundSegment; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "ay", function() { return _normalizeAngle; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "az", function() { return getRtlAdapter; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return isArray; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b0", function() { return toLineHeight; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b1", function() { return PITAU; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b2", function() { return INFINITY; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b3", function() { return RAD_PER_DEG; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b4", function() { return QUARTER_PI; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b5", function() { return TWO_THIRDS_PI; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b6", function() { return _angleDiff; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return color; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return defaults; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return effects; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return resolveObjectKey; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return isNumberFinite; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return defined; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return isObject; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return createContext; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "k", function() { return isNullOrUndef; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "l", function() { return listenArrayEvents; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "m", function() { return toPercentage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "n", function() { return toDimension; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "o", function() { return formatNumber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "p", function() { return _angleBetween; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "q", function() { return _getStartAndCountOfVisiblePoints; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "r", function() { return requestAnimFrame; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "s", function() { return sign; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "t", function() { return toRadians; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "u", function() { return unlistenArrayEvents; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "v", function() { return valueOrDefault; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "w", function() { return _scaleRangesChanged; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "x", function() { return isNumber; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "y", function() { return _parseObjectDataRadialScale; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "z", function() { return getRelativePosition; });
/* harmony import */ var _kurkle_color__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @kurkle/color */ "./node_modules/@kurkle/color/dist/color.esm.js");
function _createForOfIteratorHelperLoose(r, e) { var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"]; if (t) return (t = t.call(r)).next.bind(t); if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) { t && (r = t); var o = 0; return function () { return o >= r.length ? { done: !0 } : { done: !1, value: r[o++] }; }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); }
function _unsupportedIterableToArray(r, a) { if (r) { if ("string" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }
function _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }
/*!
 * Chart.js v4.4.7
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */


/**
 * @namespace Chart.helpers
 */ /**
    * An empty function that can be used, for example, for optional callback.
    */
function noop() {
  /* noop */}
/**
 * Returns a unique id, sequentially generated from a global variable.
 */
var uid = function () {
  var id = 0;
  return function () {
    return id++;
  };
}();
/**
 * Returns true if `value` is neither null nor undefined, else returns false.
 * @param value - The value to test.
 * @since 2.7.0
 */
function isNullOrUndef(value) {
  return value === null || value === undefined;
}
/**
 * Returns true if `value` is an array (including typed arrays), else returns false.
 * @param value - The value to test.
 * @function
 */
function isArray(value) {
  if (Array.isArray && Array.isArray(value)) {
    return true;
  }
  var type = Object.prototype.toString.call(value);
  if (type.slice(0, 7) === '[object' && type.slice(-6) === 'Array]') {
    return true;
  }
  return false;
}
/**
 * Returns true if `value` is an object (excluding null), else returns false.
 * @param value - The value to test.
 * @since 2.7.0
 */
function isObject(value) {
  return value !== null && Object.prototype.toString.call(value) === '[object Object]';
}
/**
 * Returns true if `value` is a finite number, else returns false
 * @param value  - The value to test.
 */
function isNumberFinite(value) {
  return (typeof value === 'number' || value instanceof Number) && isFinite(+value);
}
/**
 * Returns `value` if finite, else returns `defaultValue`.
 * @param value - The value to return if defined.
 * @param defaultValue - The value to return if `value` is not finite.
 */
function finiteOrDefault(value, defaultValue) {
  return isNumberFinite(value) ? value : defaultValue;
}
/**
 * Returns `value` if defined, else returns `defaultValue`.
 * @param value - The value to return if defined.
 * @param defaultValue - The value to return if `value` is undefined.
 */
function valueOrDefault(value, defaultValue) {
  return typeof value === 'undefined' ? defaultValue : value;
}
var toPercentage = function toPercentage(value, dimension) {
  return typeof value === 'string' && value.endsWith('%') ? parseFloat(value) / 100 : +value / dimension;
};
var toDimension = function toDimension(value, dimension) {
  return typeof value === 'string' && value.endsWith('%') ? parseFloat(value) / 100 * dimension : +value;
};
/**
 * Calls `fn` with the given `args` in the scope defined by `thisArg` and returns the
 * value returned by `fn`. If `fn` is not a function, this method returns undefined.
 * @param fn - The function to call.
 * @param args - The arguments with which `fn` should be called.
 * @param [thisArg] - The value of `this` provided for the call to `fn`.
 */
function callback(fn, args, thisArg) {
  if (fn && typeof fn.call === 'function') {
    return fn.apply(thisArg, args);
  }
}
function each(loopable, fn, thisArg, reverse) {
  var i, len, keys;
  if (isArray(loopable)) {
    len = loopable.length;
    if (reverse) {
      for (i = len - 1; i >= 0; i--) {
        fn.call(thisArg, loopable[i], i);
      }
    } else {
      for (i = 0; i < len; i++) {
        fn.call(thisArg, loopable[i], i);
      }
    }
  } else if (isObject(loopable)) {
    keys = Object.keys(loopable);
    len = keys.length;
    for (i = 0; i < len; i++) {
      fn.call(thisArg, loopable[keys[i]], keys[i]);
    }
  }
}
/**
 * Returns true if the `a0` and `a1` arrays have the same content, else returns false.
 * @param a0 - The array to compare
 * @param a1 - The array to compare
 * @private
 */
function _elementsEqual(a0, a1) {
  var i, ilen, v0, v1;
  if (!a0 || !a1 || a0.length !== a1.length) {
    return false;
  }
  for (i = 0, ilen = a0.length; i < ilen; ++i) {
    v0 = a0[i];
    v1 = a1[i];
    if (v0.datasetIndex !== v1.datasetIndex || v0.index !== v1.index) {
      return false;
    }
  }
  return true;
}
/**
 * Returns a deep copy of `source` without keeping references on objects and arrays.
 * @param source - The value to clone.
 */
function clone(source) {
  if (isArray(source)) {
    return source.map(clone);
  }
  if (isObject(source)) {
    var target = Object.create(null);
    var keys = Object.keys(source);
    var klen = keys.length;
    var k = 0;
    for (; k < klen; ++k) {
      target[keys[k]] = clone(source[keys[k]]);
    }
    return target;
  }
  return source;
}
function isValidKey(key) {
  return ['__proto__', 'prototype', 'constructor'].indexOf(key) === -1;
}
/**
 * The default merger when Chart.helpers.merge is called without merger option.
 * Note(SB): also used by mergeConfig and mergeScaleConfig as fallback.
 * @private
 */
function _merger(key, target, source, options) {
  if (!isValidKey(key)) {
    return;
  }
  var tval = target[key];
  var sval = source[key];
  if (isObject(tval) && isObject(sval)) {
    // eslint-disable-next-line @typescript-eslint/no-use-before-define
    merge(tval, sval, options);
  } else {
    target[key] = clone(sval);
  }
}
function merge(target, source, options) {
  var sources = isArray(source) ? source : [source];
  var ilen = sources.length;
  if (!isObject(target)) {
    return target;
  }
  options = options || {};
  var merger = options.merger || _merger;
  var current;
  for (var i = 0; i < ilen; ++i) {
    current = sources[i];
    if (!isObject(current)) {
      continue;
    }
    var keys = Object.keys(current);
    for (var k = 0, klen = keys.length; k < klen; ++k) {
      merger(keys[k], target, current, options);
    }
  }
  return target;
}
function mergeIf(target, source) {
  // eslint-disable-next-line @typescript-eslint/no-use-before-define
  return merge(target, source, {
    merger: _mergerIf
  });
}
/**
 * Merges source[key] in target[key] only if target[key] is undefined.
 * @private
 */
function _mergerIf(key, target, source) {
  if (!isValidKey(key)) {
    return;
  }
  var tval = target[key];
  var sval = source[key];
  if (isObject(tval) && isObject(sval)) {
    mergeIf(tval, sval);
  } else if (!Object.prototype.hasOwnProperty.call(target, key)) {
    target[key] = clone(sval);
  }
}
/**
 * @private
 */
function _deprecated(scope, value, previous, current) {
  if (value !== undefined) {
    console.warn(scope + ': "' + previous + '" is deprecated. Please use "' + current + '" instead');
  }
}
// resolveObjectKey resolver cache
var keyResolvers = {
  // Chart.helpers.core resolveObjectKey should resolve empty key to root object
  '': function _(v) {
    return v;
  },
  // default resolvers
  x: function x(o) {
    return o.x;
  },
  y: function y(o) {
    return o.y;
  }
};
/**
 * @private
 */
function _splitKey(key) {
  var parts = key.split('.');
  var keys = [];
  var tmp = '';
  for (var _iterator = _createForOfIteratorHelperLoose(parts), _step; !(_step = _iterator()).done;) {
    var part = _step.value;
    tmp += part;
    if (tmp.endsWith('\\')) {
      tmp = tmp.slice(0, -1) + '.';
    } else {
      keys.push(tmp);
      tmp = '';
    }
  }
  return keys;
}
function _getKeyResolver(key) {
  var keys = _splitKey(key);
  return function (obj) {
    for (var _iterator2 = _createForOfIteratorHelperLoose(keys), _step2; !(_step2 = _iterator2()).done;) {
      var k = _step2.value;
      if (k === '') {
        break;
      }
      obj = obj && obj[k];
    }
    return obj;
  };
}
function resolveObjectKey(obj, key) {
  var resolver = keyResolvers[key] || (keyResolvers[key] = _getKeyResolver(key));
  return resolver(obj);
}
/**
 * @private
 */
function _capitalize(str) {
  return str.charAt(0).toUpperCase() + str.slice(1);
}
var defined = function defined(value) {
  return typeof value !== 'undefined';
};
var isFunction = function isFunction(value) {
  return typeof value === 'function';
};
// Adapted from https://stackoverflow.com/questions/31128855/comparing-ecma6-sets-for-equality#31129384
var setsEqual = function setsEqual(a, b) {
  if (a.size !== b.size) {
    return false;
  }
  for (var _iterator3 = _createForOfIteratorHelperLoose(a), _step3; !(_step3 = _iterator3()).done;) {
    var item = _step3.value;
    if (!b.has(item)) {
      return false;
    }
  }
  return true;
};
/**
 * @param e - The event
 * @private
 */
function _isClickEvent(e) {
  return e.type === 'mouseup' || e.type === 'click' || e.type === 'contextmenu';
}

/**
 * @alias Chart.helpers.math
 * @namespace
 */
var PI = Math.PI;
var TAU = 2 * PI;
var PITAU = TAU + PI;
var INFINITY = Number.POSITIVE_INFINITY;
var RAD_PER_DEG = PI / 180;
var HALF_PI = PI / 2;
var QUARTER_PI = PI / 4;
var TWO_THIRDS_PI = PI * 2 / 3;
var log10 = Math.log10;
var sign = Math.sign;
function almostEquals(x, y, epsilon) {
  return Math.abs(x - y) < epsilon;
}
/**
 * Implementation of the nice number algorithm used in determining where axis labels will go
 */
function niceNum(range) {
  var roundedRange = Math.round(range);
  range = almostEquals(range, roundedRange, range / 1000) ? roundedRange : range;
  var niceRange = Math.pow(10, Math.floor(log10(range)));
  var fraction = range / niceRange;
  var niceFraction = fraction <= 1 ? 1 : fraction <= 2 ? 2 : fraction <= 5 ? 5 : 10;
  return niceFraction * niceRange;
}
/**
 * Returns an array of factors sorted from 1 to sqrt(value)
 * @private
 */
function _factorize(value) {
  var result = [];
  var sqrt = Math.sqrt(value);
  var i;
  for (i = 1; i < sqrt; i++) {
    if (value % i === 0) {
      result.push(i);
      result.push(value / i);
    }
  }
  if (sqrt === (sqrt | 0)) {
    result.push(sqrt);
  }
  result.sort(function (a, b) {
    return a - b;
  }).pop();
  return result;
}
function isNumber(n) {
  return !isNaN(parseFloat(n)) && isFinite(n);
}
function almostWhole(x, epsilon) {
  var rounded = Math.round(x);
  return rounded - epsilon <= x && rounded + epsilon >= x;
}
/**
 * @private
 */
function _setMinAndMaxByKey(array, target, property) {
  var i, ilen, value;
  for (i = 0, ilen = array.length; i < ilen; i++) {
    value = array[i][property];
    if (!isNaN(value)) {
      target.min = Math.min(target.min, value);
      target.max = Math.max(target.max, value);
    }
  }
}
function toRadians(degrees) {
  return degrees * (PI / 180);
}
function toDegrees(radians) {
  return radians * (180 / PI);
}
/**
 * Returns the number of decimal places
 * i.e. the number of digits after the decimal point, of the value of this Number.
 * @param x - A number.
 * @returns The number of decimal places.
 * @private
 */
function _decimalPlaces(x) {
  if (!isNumberFinite(x)) {
    return;
  }
  var e = 1;
  var p = 0;
  while (Math.round(x * e) / e !== x) {
    e *= 10;
    p++;
  }
  return p;
}
// Gets the angle from vertical upright to the point about a centre.
function getAngleFromPoint(centrePoint, anglePoint) {
  var distanceFromXCenter = anglePoint.x - centrePoint.x;
  var distanceFromYCenter = anglePoint.y - centrePoint.y;
  var radialDistanceFromCenter = Math.sqrt(distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);
  var angle = Math.atan2(distanceFromYCenter, distanceFromXCenter);
  if (angle < -0.5 * PI) {
    angle += TAU; // make sure the returned angle is in the range of (-PI/2, 3PI/2]
  }
  return {
    angle: angle,
    distance: radialDistanceFromCenter
  };
}
function distanceBetweenPoints(pt1, pt2) {
  return Math.sqrt(Math.pow(pt2.x - pt1.x, 2) + Math.pow(pt2.y - pt1.y, 2));
}
/**
 * Shortest distance between angles, in either direction.
 * @private
 */
function _angleDiff(a, b) {
  return (a - b + PITAU) % TAU - PI;
}
/**
 * Normalize angle to be between 0 and 2*PI
 * @private
 */
function _normalizeAngle(a) {
  return (a % TAU + TAU) % TAU;
}
/**
 * @private
 */
function _angleBetween(angle, start, end, sameAngleIsFullCircle) {
  var a = _normalizeAngle(angle);
  var s = _normalizeAngle(start);
  var e = _normalizeAngle(end);
  var angleToStart = _normalizeAngle(s - a);
  var angleToEnd = _normalizeAngle(e - a);
  var startToAngle = _normalizeAngle(a - s);
  var endToAngle = _normalizeAngle(a - e);
  return a === s || a === e || sameAngleIsFullCircle && s === e || angleToStart > angleToEnd && startToAngle < endToAngle;
}
/**
 * Limit `value` between `min` and `max`
 * @param value
 * @param min
 * @param max
 * @private
 */
function _limitValue(value, min, max) {
  return Math.max(min, Math.min(max, value));
}
/**
 * @param {number} value
 * @private
 */
function _int16Range(value) {
  return _limitValue(value, -32768, 32767);
}
/**
 * @param value
 * @param start
 * @param end
 * @param [epsilon]
 * @private
 */
function _isBetween(value, start, end, epsilon) {
  if (epsilon === void 0) {
    epsilon = 1e-6;
  }
  return value >= Math.min(start, end) - epsilon && value <= Math.max(start, end) + epsilon;
}
function _lookup(table, value, cmp) {
  cmp = cmp || function (index) {
    return table[index] < value;
  };
  var hi = table.length - 1;
  var lo = 0;
  var mid;
  while (hi - lo > 1) {
    mid = lo + hi >> 1;
    if (cmp(mid)) {
      lo = mid;
    } else {
      hi = mid;
    }
  }
  return {
    lo: lo,
    hi: hi
  };
}
/**
 * Binary search
 * @param table - the table search. must be sorted!
 * @param key - property name for the value in each entry
 * @param value - value to find
 * @param last - lookup last index
 * @private
 */
var _lookupByKey = function _lookupByKey(table, key, value, last) {
  return _lookup(table, value, last ? function (index) {
    var ti = table[index][key];
    return ti < value || ti === value && table[index + 1][key] === value;
  } : function (index) {
    return table[index][key] < value;
  });
};
/**
 * Reverse binary search
 * @param table - the table search. must be sorted!
 * @param key - property name for the value in each entry
 * @param value - value to find
 * @private
 */
var _rlookupByKey = function _rlookupByKey(table, key, value) {
  return _lookup(table, value, function (index) {
    return table[index][key] >= value;
  });
};
/**
 * Return subset of `values` between `min` and `max` inclusive.
 * Values are assumed to be in sorted order.
 * @param values - sorted array of values
 * @param min - min value
 * @param max - max value
 */
function _filterBetween(values, min, max) {
  var start = 0;
  var end = values.length;
  while (start < end && values[start] < min) {
    start++;
  }
  while (end > start && values[end - 1] > max) {
    end--;
  }
  return start > 0 || end < values.length ? values.slice(start, end) : values;
}
var arrayEvents = ['push', 'pop', 'shift', 'splice', 'unshift'];
function listenArrayEvents(array, listener) {
  if (array._chartjs) {
    array._chartjs.listeners.push(listener);
    return;
  }
  Object.defineProperty(array, '_chartjs', {
    configurable: true,
    enumerable: false,
    value: {
      listeners: [listener]
    }
  });
  arrayEvents.forEach(function (key) {
    var method = '_onData' + _capitalize(key);
    var base = array[key];
    Object.defineProperty(array, key, {
      configurable: true,
      enumerable: false,
      value: function value() {
        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {
          args[_key] = arguments[_key];
        }
        var res = base.apply(this, args);
        array._chartjs.listeners.forEach(function (object) {
          if (typeof object[method] === 'function') {
            object[method].apply(object, args);
          }
        });
        return res;
      }
    });
  });
}
function unlistenArrayEvents(array, listener) {
  var stub = array._chartjs;
  if (!stub) {
    return;
  }
  var listeners = stub.listeners;
  var index = listeners.indexOf(listener);
  if (index !== -1) {
    listeners.splice(index, 1);
  }
  if (listeners.length > 0) {
    return;
  }
  arrayEvents.forEach(function (key) {
    delete array[key];
  });
  delete array._chartjs;
}
/**
 * @param items
 */
function _arrayUnique(items) {
  var set = new Set(items);
  if (set.size === items.length) {
    return items;
  }
  return Array.from(set);
}
function fontString(pixelSize, fontStyle, fontFamily) {
  return fontStyle + ' ' + pixelSize + 'px ' + fontFamily;
}
/**
* Request animation polyfill
*/
var requestAnimFrame = function () {
  if (typeof window === 'undefined') {
    return function (callback) {
      return callback();
    };
  }
  return window.requestAnimationFrame;
}();
/**
 * Throttles calling `fn` once per animation frame
 * Latest arguments are used on the actual call
 */
function throttled(fn, thisArg) {
  var argsToUse = [];
  var ticking = false;
  return function () {
    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }
    // Save the args for use later
    argsToUse = args;
    if (!ticking) {
      ticking = true;
      requestAnimFrame.call(window, function () {
        ticking = false;
        fn.apply(thisArg, argsToUse);
      });
    }
  };
}
/**
 * Debounces calling `fn` for `delay` ms
 */
function debounce(fn, delay) {
  var timeout;
  return function () {
    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }
    if (delay) {
      clearTimeout(timeout);
      timeout = setTimeout(fn, delay, args);
    } else {
      fn.apply(this, args);
    }
    return delay;
  };
}
/**
 * Converts 'start' to 'left', 'end' to 'right' and others to 'center'
 * @private
 */
var _toLeftRightCenter = function _toLeftRightCenter(align) {
  return align === 'start' ? 'left' : align === 'end' ? 'right' : 'center';
};
/**
 * Returns `start`, `end` or `(start + end) / 2` depending on `align`. Defaults to `center`
 * @private
 */
var _alignStartEnd = function _alignStartEnd(align, start, end) {
  return align === 'start' ? start : align === 'end' ? end : (start + end) / 2;
};
/**
 * Returns `left`, `right` or `(left + right) / 2` depending on `align`. Defaults to `left`
 * @private
 */
var _textX = function _textX(align, left, right, rtl) {
  var check = rtl ? 'left' : 'right';
  return align === check ? right : align === 'center' ? (left + right) / 2 : left;
};
/**
 * Return start and count of visible points.
 * @private
 */
function _getStartAndCountOfVisiblePoints(meta, points, animationsDisabled) {
  var pointCount = points.length;
  var start = 0;
  var count = pointCount;
  if (meta._sorted) {
    var iScale = meta.iScale,
      _parsed = meta._parsed;
    var axis = iScale.axis;
    var _iScale$getUserBounds = iScale.getUserBounds(),
      min = _iScale$getUserBounds.min,
      max = _iScale$getUserBounds.max,
      minDefined = _iScale$getUserBounds.minDefined,
      maxDefined = _iScale$getUserBounds.maxDefined;
    if (minDefined) {
      start = _limitValue(Math.min(
      // @ts-expect-error Need to type _parsed
      _lookupByKey(_parsed, axis, min).lo,
      // @ts-expect-error Need to fix types on _lookupByKey
      animationsDisabled ? pointCount : _lookupByKey(points, axis, iScale.getPixelForValue(min)).lo), 0, pointCount - 1);
    }
    if (maxDefined) {
      count = _limitValue(Math.max(
      // @ts-expect-error Need to type _parsed
      _lookupByKey(_parsed, iScale.axis, max, true).hi + 1,
      // @ts-expect-error Need to fix types on _lookupByKey
      animationsDisabled ? 0 : _lookupByKey(points, axis, iScale.getPixelForValue(max), true).hi + 1), start, pointCount) - start;
    } else {
      count = pointCount - start;
    }
  }
  return {
    start: start,
    count: count
  };
}
/**
 * Checks if the scale ranges have changed.
 * @param {object} meta - dataset meta.
 * @returns {boolean}
 * @private
 */
function _scaleRangesChanged(meta) {
  var xScale = meta.xScale,
    yScale = meta.yScale,
    _scaleRanges = meta._scaleRanges;
  var newRanges = {
    xmin: xScale.min,
    xmax: xScale.max,
    ymin: yScale.min,
    ymax: yScale.max
  };
  if (!_scaleRanges) {
    meta._scaleRanges = newRanges;
    return true;
  }
  var changed = _scaleRanges.xmin !== xScale.min || _scaleRanges.xmax !== xScale.max || _scaleRanges.ymin !== yScale.min || _scaleRanges.ymax !== yScale.max;
  Object.assign(_scaleRanges, newRanges);
  return changed;
}
var atEdge = function atEdge(t) {
  return t === 0 || t === 1;
};
var elasticIn = function elasticIn(t, s, p) {
  return -(Math.pow(2, 10 * (t -= 1)) * Math.sin((t - s) * TAU / p));
};
var elasticOut = function elasticOut(t, s, p) {
  return Math.pow(2, -10 * t) * Math.sin((t - s) * TAU / p) + 1;
};
/**
 * Easing functions adapted from Robert Penner's easing equations.
 * @namespace Chart.helpers.easing.effects
 * @see http://www.robertpenner.com/easing/
 */
var effects = {
  linear: function linear(t) {
    return t;
  },
  easeInQuad: function easeInQuad(t) {
    return t * t;
  },
  easeOutQuad: function easeOutQuad(t) {
    return -t * (t - 2);
  },
  easeInOutQuad: function easeInOutQuad(t) {
    return (t /= 0.5) < 1 ? 0.5 * t * t : -0.5 * (--t * (t - 2) - 1);
  },
  easeInCubic: function easeInCubic(t) {
    return t * t * t;
  },
  easeOutCubic: function easeOutCubic(t) {
    return (t -= 1) * t * t + 1;
  },
  easeInOutCubic: function easeInOutCubic(t) {
    return (t /= 0.5) < 1 ? 0.5 * t * t * t : 0.5 * ((t -= 2) * t * t + 2);
  },
  easeInQuart: function easeInQuart(t) {
    return t * t * t * t;
  },
  easeOutQuart: function easeOutQuart(t) {
    return -((t -= 1) * t * t * t - 1);
  },
  easeInOutQuart: function easeInOutQuart(t) {
    return (t /= 0.5) < 1 ? 0.5 * t * t * t * t : -0.5 * ((t -= 2) * t * t * t - 2);
  },
  easeInQuint: function easeInQuint(t) {
    return t * t * t * t * t;
  },
  easeOutQuint: function easeOutQuint(t) {
    return (t -= 1) * t * t * t * t + 1;
  },
  easeInOutQuint: function easeInOutQuint(t) {
    return (t /= 0.5) < 1 ? 0.5 * t * t * t * t * t : 0.5 * ((t -= 2) * t * t * t * t + 2);
  },
  easeInSine: function easeInSine(t) {
    return -Math.cos(t * HALF_PI) + 1;
  },
  easeOutSine: function easeOutSine(t) {
    return Math.sin(t * HALF_PI);
  },
  easeInOutSine: function easeInOutSine(t) {
    return -0.5 * (Math.cos(PI * t) - 1);
  },
  easeInExpo: function easeInExpo(t) {
    return t === 0 ? 0 : Math.pow(2, 10 * (t - 1));
  },
  easeOutExpo: function easeOutExpo(t) {
    return t === 1 ? 1 : -Math.pow(2, -10 * t) + 1;
  },
  easeInOutExpo: function easeInOutExpo(t) {
    return atEdge(t) ? t : t < 0.5 ? 0.5 * Math.pow(2, 10 * (t * 2 - 1)) : 0.5 * (-Math.pow(2, -10 * (t * 2 - 1)) + 2);
  },
  easeInCirc: function easeInCirc(t) {
    return t >= 1 ? t : -(Math.sqrt(1 - t * t) - 1);
  },
  easeOutCirc: function easeOutCirc(t) {
    return Math.sqrt(1 - (t -= 1) * t);
  },
  easeInOutCirc: function easeInOutCirc(t) {
    return (t /= 0.5) < 1 ? -0.5 * (Math.sqrt(1 - t * t) - 1) : 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);
  },
  easeInElastic: function easeInElastic(t) {
    return atEdge(t) ? t : elasticIn(t, 0.075, 0.3);
  },
  easeOutElastic: function easeOutElastic(t) {
    return atEdge(t) ? t : elasticOut(t, 0.075, 0.3);
  },
  easeInOutElastic: function easeInOutElastic(t) {
    var s = 0.1125;
    var p = 0.45;
    return atEdge(t) ? t : t < 0.5 ? 0.5 * elasticIn(t * 2, s, p) : 0.5 + 0.5 * elasticOut(t * 2 - 1, s, p);
  },
  easeInBack: function easeInBack(t) {
    var s = 1.70158;
    return t * t * ((s + 1) * t - s);
  },
  easeOutBack: function easeOutBack(t) {
    var s = 1.70158;
    return (t -= 1) * t * ((s + 1) * t + s) + 1;
  },
  easeInOutBack: function easeInOutBack(t) {
    var s = 1.70158;
    if ((t /= 0.5) < 1) {
      return 0.5 * (t * t * (((s *= 1.525) + 1) * t - s));
    }
    return 0.5 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2);
  },
  easeInBounce: function easeInBounce(t) {
    return 1 - effects.easeOutBounce(1 - t);
  },
  easeOutBounce: function easeOutBounce(t) {
    var m = 7.5625;
    var d = 2.75;
    if (t < 1 / d) {
      return m * t * t;
    }
    if (t < 2 / d) {
      return m * (t -= 1.5 / d) * t + 0.75;
    }
    if (t < 2.5 / d) {
      return m * (t -= 2.25 / d) * t + 0.9375;
    }
    return m * (t -= 2.625 / d) * t + 0.984375;
  },
  easeInOutBounce: function easeInOutBounce(t) {
    return t < 0.5 ? effects.easeInBounce(t * 2) * 0.5 : effects.easeOutBounce(t * 2 - 1) * 0.5 + 0.5;
  }
};
function isPatternOrGradient(value) {
  if (value && typeof value === 'object') {
    var type = value.toString();
    return type === '[object CanvasPattern]' || type === '[object CanvasGradient]';
  }
  return false;
}
function color(value) {
  return isPatternOrGradient(value) ? value : new _kurkle_color__WEBPACK_IMPORTED_MODULE_0__["Color"](value);
}
function getHoverColor(value) {
  return isPatternOrGradient(value) ? value : new _kurkle_color__WEBPACK_IMPORTED_MODULE_0__["Color"](value).saturate(0.5).darken(0.1).hexString();
}
var numbers = ['x', 'y', 'borderWidth', 'radius', 'tension'];
var colors = ['color', 'borderColor', 'backgroundColor'];
function applyAnimationsDefaults(defaults) {
  defaults.set('animation', {
    delay: undefined,
    duration: 1000,
    easing: 'easeOutQuart',
    fn: undefined,
    from: undefined,
    loop: undefined,
    to: undefined,
    type: undefined
  });
  defaults.describe('animation', {
    _fallback: false,
    _indexable: false,
    _scriptable: function _scriptable(name) {
      return name !== 'onProgress' && name !== 'onComplete' && name !== 'fn';
    }
  });
  defaults.set('animations', {
    colors: {
      type: 'color',
      properties: colors
    },
    numbers: {
      type: 'number',
      properties: numbers
    }
  });
  defaults.describe('animations', {
    _fallback: 'animation'
  });
  defaults.set('transitions', {
    active: {
      animation: {
        duration: 400
      }
    },
    resize: {
      animation: {
        duration: 0
      }
    },
    show: {
      animations: {
        colors: {
          from: 'transparent'
        },
        visible: {
          type: 'boolean',
          duration: 0
        }
      }
    },
    hide: {
      animations: {
        colors: {
          to: 'transparent'
        },
        visible: {
          type: 'boolean',
          easing: 'linear',
          fn: function fn(v) {
            return v | 0;
          }
        }
      }
    }
  });
}
function applyLayoutsDefaults(defaults) {
  defaults.set('layout', {
    autoPadding: true,
    padding: {
      top: 0,
      right: 0,
      bottom: 0,
      left: 0
    }
  });
}
var intlCache = new Map();
function getNumberFormat(locale, options) {
  options = options || {};
  var cacheKey = locale + JSON.stringify(options);
  var formatter = intlCache.get(cacheKey);
  if (!formatter) {
    formatter = new Intl.NumberFormat(locale, options);
    intlCache.set(cacheKey, formatter);
  }
  return formatter;
}
function formatNumber(num, locale, options) {
  return getNumberFormat(locale, options).format(num);
}
var formatters = {
  values: function values(value) {
    return isArray(value) ? value : '' + value;
  },
  numeric: function numeric(tickValue, index, ticks) {
    if (tickValue === 0) {
      return '0';
    }
    var locale = this.chart.options.locale;
    var notation;
    var delta = tickValue;
    if (ticks.length > 1) {
      var maxTick = Math.max(Math.abs(ticks[0].value), Math.abs(ticks[ticks.length - 1].value));
      if (maxTick < 1e-4 || maxTick > 1e+15) {
        notation = 'scientific';
      }
      delta = calculateDelta(tickValue, ticks);
    }
    var logDelta = log10(Math.abs(delta));
    var numDecimal = isNaN(logDelta) ? 1 : Math.max(Math.min(-1 * Math.floor(logDelta), 20), 0);
    var options = {
      notation: notation,
      minimumFractionDigits: numDecimal,
      maximumFractionDigits: numDecimal
    };
    Object.assign(options, this.options.ticks.format);
    return formatNumber(tickValue, locale, options);
  },
  logarithmic: function logarithmic(tickValue, index, ticks) {
    if (tickValue === 0) {
      return '0';
    }
    var remain = ticks[index].significand || tickValue / Math.pow(10, Math.floor(log10(tickValue)));
    if ([1, 2, 3, 5, 10, 15].includes(remain) || index > 0.8 * ticks.length) {
      return formatters.numeric.call(this, tickValue, index, ticks);
    }
    return '';
  }
};
function calculateDelta(tickValue, ticks) {
  var delta = ticks.length > 3 ? ticks[2].value - ticks[1].value : ticks[1].value - ticks[0].value;
  if (Math.abs(delta) >= 1 && tickValue !== Math.floor(tickValue)) {
    delta = tickValue - Math.floor(tickValue);
  }
  return delta;
}
var Ticks = {
  formatters: formatters
};
function applyScaleDefaults(defaults) {
  defaults.set('scale', {
    display: true,
    offset: false,
    reverse: false,
    beginAtZero: false,
    bounds: 'ticks',
    clip: true,
    grace: 0,
    grid: {
      display: true,
      lineWidth: 1,
      drawOnChartArea: true,
      drawTicks: true,
      tickLength: 8,
      tickWidth: function tickWidth(_ctx, options) {
        return options.lineWidth;
      },
      tickColor: function tickColor(_ctx, options) {
        return options.color;
      },
      offset: false
    },
    border: {
      display: true,
      dash: [],
      dashOffset: 0.0,
      width: 1
    },
    title: {
      display: false,
      text: '',
      padding: {
        top: 4,
        bottom: 4
      }
    },
    ticks: {
      minRotation: 0,
      maxRotation: 50,
      mirror: false,
      textStrokeWidth: 0,
      textStrokeColor: '',
      padding: 3,
      display: true,
      autoSkip: true,
      autoSkipPadding: 3,
      labelOffset: 0,
      callback: Ticks.formatters.values,
      minor: {},
      major: {},
      align: 'center',
      crossAlign: 'near',
      showLabelBackdrop: false,
      backdropColor: 'rgba(255, 255, 255, 0.75)',
      backdropPadding: 2
    }
  });
  defaults.route('scale.ticks', 'color', '', 'color');
  defaults.route('scale.grid', 'color', '', 'borderColor');
  defaults.route('scale.border', 'color', '', 'borderColor');
  defaults.route('scale.title', 'color', '', 'color');
  defaults.describe('scale', {
    _fallback: false,
    _scriptable: function _scriptable(name) {
      return !name.startsWith('before') && !name.startsWith('after') && name !== 'callback' && name !== 'parser';
    },
    _indexable: function _indexable(name) {
      return name !== 'borderDash' && name !== 'tickBorderDash' && name !== 'dash';
    }
  });
  defaults.describe('scales', {
    _fallback: 'scale'
  });
  defaults.describe('scale.ticks', {
    _scriptable: function _scriptable(name) {
      return name !== 'backdropPadding' && name !== 'callback';
    },
    _indexable: function _indexable(name) {
      return name !== 'backdropPadding';
    }
  });
}
var overrides = Object.create(null);
var descriptors = Object.create(null);
function getScope$1(node, key) {
  if (!key) {
    return node;
  }
  var keys = key.split('.');
  for (var i = 0, n = keys.length; i < n; ++i) {
    var k = keys[i];
    node = node[k] || (node[k] = Object.create(null));
  }
  return node;
}
function _set(root, scope, values) {
  if (typeof scope === 'string') {
    return merge(getScope$1(root, scope), values);
  }
  return merge(getScope$1(root, ''), scope);
}
var Defaults = /*#__PURE__*/function () {
  function Defaults(_descriptors, _appliers) {
    this.animation = undefined;
    this.backgroundColor = 'rgba(0,0,0,0.1)';
    this.borderColor = 'rgba(0,0,0,0.1)';
    this.color = '#666';
    this.datasets = {};
    this.devicePixelRatio = function (context) {
      return context.chart.platform.getDevicePixelRatio();
    };
    this.elements = {};
    this.events = ['mousemove', 'mouseout', 'click', 'touchstart', 'touchmove'];
    this.font = {
      family: "'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",
      size: 12,
      style: 'normal',
      lineHeight: 1.2,
      weight: null
    };
    this.hover = {};
    this.hoverBackgroundColor = function (ctx, options) {
      return getHoverColor(options.backgroundColor);
    };
    this.hoverBorderColor = function (ctx, options) {
      return getHoverColor(options.borderColor);
    };
    this.hoverColor = function (ctx, options) {
      return getHoverColor(options.color);
    };
    this.indexAxis = 'x';
    this.interaction = {
      mode: 'nearest',
      intersect: true,
      includeInvisible: false
    };
    this.maintainAspectRatio = true;
    this.onHover = null;
    this.onClick = null;
    this.parsing = true;
    this.plugins = {};
    this.responsive = true;
    this.scale = undefined;
    this.scales = {};
    this.showLine = true;
    this.drawActiveElementsOnTop = true;
    this.describe(_descriptors);
    this.apply(_appliers);
  }
  var _proto = Defaults.prototype;
  _proto.set = function set(scope, values) {
    return _set(this, scope, values);
  };
  _proto.get = function get(scope) {
    return getScope$1(this, scope);
  };
  _proto.describe = function describe(scope, values) {
    return _set(descriptors, scope, values);
  };
  _proto.override = function override(scope, values) {
    return _set(overrides, scope, values);
  };
  _proto.route = function route(scope, name, targetScope, targetName) {
    var _Object$definePropert;
    var scopeObject = getScope$1(this, scope);
    var targetScopeObject = getScope$1(this, targetScope);
    var privateName = '_' + name;
    Object.defineProperties(scopeObject, (_Object$definePropert = {}, _Object$definePropert[privateName] = {
      value: scopeObject[name],
      writable: true
    }, _Object$definePropert[name] = {
      enumerable: true,
      get: function get() {
        var local = this[privateName];
        var target = targetScopeObject[targetName];
        if (isObject(local)) {
          return Object.assign({}, target, local);
        }
        return valueOrDefault(local, target);
      },
      set: function set(value) {
        this[privateName] = value;
      }
    }, _Object$definePropert));
  };
  _proto.apply = function apply(appliers) {
    var _this = this;
    appliers.forEach(function (apply) {
      return apply(_this);
    });
  };
  return Defaults;
}();
var defaults = /* #__PURE__ */new Defaults({
  _scriptable: function _scriptable(name) {
    return !name.startsWith('on');
  },
  _indexable: function _indexable(name) {
    return name !== 'events';
  },
  hover: {
    _fallback: 'interaction'
  },
  interaction: {
    _scriptable: false,
    _indexable: false
  }
}, [applyAnimationsDefaults, applyLayoutsDefaults, applyScaleDefaults]);

/**
 * Converts the given font object into a CSS font string.
 * @param font - A font object.
 * @return The CSS font string. See https://developer.mozilla.org/en-US/docs/Web/CSS/font
 * @private
 */
function toFontString(font) {
  if (!font || isNullOrUndef(font.size) || isNullOrUndef(font.family)) {
    return null;
  }
  return (font.style ? font.style + ' ' : '') + (font.weight ? font.weight + ' ' : '') + font.size + 'px ' + font.family;
}
/**
 * @private
 */
function _measureText(ctx, data, gc, longest, string) {
  var textWidth = data[string];
  if (!textWidth) {
    textWidth = data[string] = ctx.measureText(string).width;
    gc.push(string);
  }
  if (textWidth > longest) {
    longest = textWidth;
  }
  return longest;
}
/**
 * @private
 */ // eslint-disable-next-line complexity
function _longestText(ctx, font, arrayOfThings, cache) {
  cache = cache || {};
  var data = cache.data = cache.data || {};
  var gc = cache.garbageCollect = cache.garbageCollect || [];
  if (cache.font !== font) {
    data = cache.data = {};
    gc = cache.garbageCollect = [];
    cache.font = font;
  }
  ctx.save();
  ctx.font = font;
  var longest = 0;
  var ilen = arrayOfThings.length;
  var i, j, jlen, thing, nestedThing;
  for (i = 0; i < ilen; i++) {
    thing = arrayOfThings[i];
    // Undefined strings and arrays should not be measured
    if (thing !== undefined && thing !== null && !isArray(thing)) {
      longest = _measureText(ctx, data, gc, longest, thing);
    } else if (isArray(thing)) {
      // if it is an array lets measure each element
      // to do maybe simplify this function a bit so we can do this more recursively?
      for (j = 0, jlen = thing.length; j < jlen; j++) {
        nestedThing = thing[j];
        // Undefined strings and arrays should not be measured
        if (nestedThing !== undefined && nestedThing !== null && !isArray(nestedThing)) {
          longest = _measureText(ctx, data, gc, longest, nestedThing);
        }
      }
    }
  }
  ctx.restore();
  var gcLen = gc.length / 2;
  if (gcLen > arrayOfThings.length) {
    for (i = 0; i < gcLen; i++) {
      delete data[gc[i]];
    }
    gc.splice(0, gcLen);
  }
  return longest;
}
/**
 * Returns the aligned pixel value to avoid anti-aliasing blur
 * @param chart - The chart instance.
 * @param pixel - A pixel value.
 * @param width - The width of the element.
 * @returns The aligned pixel value.
 * @private
 */
function _alignPixel(chart, pixel, width) {
  var devicePixelRatio = chart.currentDevicePixelRatio;
  var halfWidth = width !== 0 ? Math.max(width / 2, 0.5) : 0;
  return Math.round((pixel - halfWidth) * devicePixelRatio) / devicePixelRatio + halfWidth;
}
/**
 * Clears the entire canvas.
 */
function clearCanvas(canvas, ctx) {
  if (!ctx && !canvas) {
    return;
  }
  ctx = ctx || canvas.getContext('2d');
  ctx.save();
  // canvas.width and canvas.height do not consider the canvas transform,
  // while clearRect does
  ctx.resetTransform();
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.restore();
}
function drawPoint(ctx, options, x, y) {
  // eslint-disable-next-line @typescript-eslint/no-use-before-define
  drawPointLegend(ctx, options, x, y, null);
}
// eslint-disable-next-line complexity
function drawPointLegend(ctx, options, x, y, w) {
  var type, xOffset, yOffset, size, cornerRadius, width, xOffsetW, yOffsetW;
  var style = options.pointStyle;
  var rotation = options.rotation;
  var radius = options.radius;
  var rad = (rotation || 0) * RAD_PER_DEG;
  if (style && typeof style === 'object') {
    type = style.toString();
    if (type === '[object HTMLImageElement]' || type === '[object HTMLCanvasElement]') {
      ctx.save();
      ctx.translate(x, y);
      ctx.rotate(rad);
      ctx.drawImage(style, -style.width / 2, -style.height / 2, style.width, style.height);
      ctx.restore();
      return;
    }
  }
  if (isNaN(radius) || radius <= 0) {
    return;
  }
  ctx.beginPath();
  switch (style) {
    // Default includes circle
    default:
      if (w) {
        ctx.ellipse(x, y, w / 2, radius, 0, 0, TAU);
      } else {
        ctx.arc(x, y, radius, 0, TAU);
      }
      ctx.closePath();
      break;
    case 'triangle':
      width = w ? w / 2 : radius;
      ctx.moveTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);
      rad += TWO_THIRDS_PI;
      ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);
      rad += TWO_THIRDS_PI;
      ctx.lineTo(x + Math.sin(rad) * width, y - Math.cos(rad) * radius);
      ctx.closePath();
      break;
    case 'rectRounded':
      // NOTE: the rounded rect implementation changed to use `arc` instead of
      // `quadraticCurveTo` since it generates better results when rect is
      // almost a circle. 0.516 (instead of 0.5) produces results with visually
      // closer proportion to the previous impl and it is inscribed in the
      // circle with `radius`. For more details, see the following PRs:
      // https://github.com/chartjs/Chart.js/issues/5597
      // https://github.com/chartjs/Chart.js/issues/5858
      cornerRadius = radius * 0.516;
      size = radius - cornerRadius;
      xOffset = Math.cos(rad + QUARTER_PI) * size;
      xOffsetW = Math.cos(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);
      yOffset = Math.sin(rad + QUARTER_PI) * size;
      yOffsetW = Math.sin(rad + QUARTER_PI) * (w ? w / 2 - cornerRadius : size);
      ctx.arc(x - xOffsetW, y - yOffset, cornerRadius, rad - PI, rad - HALF_PI);
      ctx.arc(x + yOffsetW, y - xOffset, cornerRadius, rad - HALF_PI, rad);
      ctx.arc(x + xOffsetW, y + yOffset, cornerRadius, rad, rad + HALF_PI);
      ctx.arc(x - yOffsetW, y + xOffset, cornerRadius, rad + HALF_PI, rad + PI);
      ctx.closePath();
      break;
    case 'rect':
      if (!rotation) {
        size = Math.SQRT1_2 * radius;
        width = w ? w / 2 : size;
        ctx.rect(x - width, y - size, 2 * width, 2 * size);
        break;
      }
      rad += QUARTER_PI;
    /* falls through */
    case 'rectRot':
      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);
      xOffset = Math.cos(rad) * radius;
      yOffset = Math.sin(rad) * radius;
      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);
      ctx.moveTo(x - xOffsetW, y - yOffset);
      ctx.lineTo(x + yOffsetW, y - xOffset);
      ctx.lineTo(x + xOffsetW, y + yOffset);
      ctx.lineTo(x - yOffsetW, y + xOffset);
      ctx.closePath();
      break;
    case 'crossRot':
      rad += QUARTER_PI;
    /* falls through */
    case 'cross':
      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);
      xOffset = Math.cos(rad) * radius;
      yOffset = Math.sin(rad) * radius;
      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);
      ctx.moveTo(x - xOffsetW, y - yOffset);
      ctx.lineTo(x + xOffsetW, y + yOffset);
      ctx.moveTo(x + yOffsetW, y - xOffset);
      ctx.lineTo(x - yOffsetW, y + xOffset);
      break;
    case 'star':
      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);
      xOffset = Math.cos(rad) * radius;
      yOffset = Math.sin(rad) * radius;
      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);
      ctx.moveTo(x - xOffsetW, y - yOffset);
      ctx.lineTo(x + xOffsetW, y + yOffset);
      ctx.moveTo(x + yOffsetW, y - xOffset);
      ctx.lineTo(x - yOffsetW, y + xOffset);
      rad += QUARTER_PI;
      xOffsetW = Math.cos(rad) * (w ? w / 2 : radius);
      xOffset = Math.cos(rad) * radius;
      yOffset = Math.sin(rad) * radius;
      yOffsetW = Math.sin(rad) * (w ? w / 2 : radius);
      ctx.moveTo(x - xOffsetW, y - yOffset);
      ctx.lineTo(x + xOffsetW, y + yOffset);
      ctx.moveTo(x + yOffsetW, y - xOffset);
      ctx.lineTo(x - yOffsetW, y + xOffset);
      break;
    case 'line':
      xOffset = w ? w / 2 : Math.cos(rad) * radius;
      yOffset = Math.sin(rad) * radius;
      ctx.moveTo(x - xOffset, y - yOffset);
      ctx.lineTo(x + xOffset, y + yOffset);
      break;
    case 'dash':
      ctx.moveTo(x, y);
      ctx.lineTo(x + Math.cos(rad) * (w ? w / 2 : radius), y + Math.sin(rad) * radius);
      break;
    case false:
      ctx.closePath();
      break;
  }
  ctx.fill();
  if (options.borderWidth > 0) {
    ctx.stroke();
  }
}
/**
 * Returns true if the point is inside the rectangle
 * @param point - The point to test
 * @param area - The rectangle
 * @param margin - allowed margin
 * @private
 */
function _isPointInArea(point, area, margin) {
  margin = margin || 0.5; // margin - default is to match rounded decimals
  return !area || point && point.x > area.left - margin && point.x < area.right + margin && point.y > area.top - margin && point.y < area.bottom + margin;
}
function clipArea(ctx, area) {
  ctx.save();
  ctx.beginPath();
  ctx.rect(area.left, area.top, area.right - area.left, area.bottom - area.top);
  ctx.clip();
}
function unclipArea(ctx) {
  ctx.restore();
}
/**
 * @private
 */
function _steppedLineTo(ctx, previous, target, flip, mode) {
  if (!previous) {
    return ctx.lineTo(target.x, target.y);
  }
  if (mode === 'middle') {
    var midpoint = (previous.x + target.x) / 2.0;
    ctx.lineTo(midpoint, previous.y);
    ctx.lineTo(midpoint, target.y);
  } else if (mode === 'after' !== !!flip) {
    ctx.lineTo(previous.x, target.y);
  } else {
    ctx.lineTo(target.x, previous.y);
  }
  ctx.lineTo(target.x, target.y);
}
/**
 * @private
 */
function _bezierCurveTo(ctx, previous, target, flip) {
  if (!previous) {
    return ctx.lineTo(target.x, target.y);
  }
  ctx.bezierCurveTo(flip ? previous.cp1x : previous.cp2x, flip ? previous.cp1y : previous.cp2y, flip ? target.cp2x : target.cp1x, flip ? target.cp2y : target.cp1y, target.x, target.y);
}
function setRenderOpts(ctx, opts) {
  if (opts.translation) {
    ctx.translate(opts.translation[0], opts.translation[1]);
  }
  if (!isNullOrUndef(opts.rotation)) {
    ctx.rotate(opts.rotation);
  }
  if (opts.color) {
    ctx.fillStyle = opts.color;
  }
  if (opts.textAlign) {
    ctx.textAlign = opts.textAlign;
  }
  if (opts.textBaseline) {
    ctx.textBaseline = opts.textBaseline;
  }
}
function decorateText(ctx, x, y, line, opts) {
  if (opts.strikethrough || opts.underline) {
    /**
    * Now that IE11 support has been dropped, we can use more
    * of the TextMetrics object. The actual bounding boxes
    * are unflagged in Chrome, Firefox, Edge, and Safari so they
    * can be safely used.
    * See https://developer.mozilla.org/en-US/docs/Web/API/TextMetrics#Browser_compatibility
    */
    var metrics = ctx.measureText(line);
    var left = x - metrics.actualBoundingBoxLeft;
    var right = x + metrics.actualBoundingBoxRight;
    var top = y - metrics.actualBoundingBoxAscent;
    var bottom = y + metrics.actualBoundingBoxDescent;
    var yDecoration = opts.strikethrough ? (top + bottom) / 2 : bottom;
    ctx.strokeStyle = ctx.fillStyle;
    ctx.beginPath();
    ctx.lineWidth = opts.decorationWidth || 2;
    ctx.moveTo(left, yDecoration);
    ctx.lineTo(right, yDecoration);
    ctx.stroke();
  }
}
function drawBackdrop(ctx, opts) {
  var oldColor = ctx.fillStyle;
  ctx.fillStyle = opts.color;
  ctx.fillRect(opts.left, opts.top, opts.width, opts.height);
  ctx.fillStyle = oldColor;
}
/**
 * Render text onto the canvas
 */
function renderText(ctx, text, x, y, font, opts) {
  if (opts === void 0) {
    opts = {};
  }
  var lines = isArray(text) ? text : [text];
  var stroke = opts.strokeWidth > 0 && opts.strokeColor !== '';
  var i, line;
  ctx.save();
  ctx.font = font.string;
  setRenderOpts(ctx, opts);
  for (i = 0; i < lines.length; ++i) {
    line = lines[i];
    if (opts.backdrop) {
      drawBackdrop(ctx, opts.backdrop);
    }
    if (stroke) {
      if (opts.strokeColor) {
        ctx.strokeStyle = opts.strokeColor;
      }
      if (!isNullOrUndef(opts.strokeWidth)) {
        ctx.lineWidth = opts.strokeWidth;
      }
      ctx.strokeText(line, x, y, opts.maxWidth);
    }
    ctx.fillText(line, x, y, opts.maxWidth);
    decorateText(ctx, x, y, line, opts);
    y += Number(font.lineHeight);
  }
  ctx.restore();
}
/**
 * Add a path of a rectangle with rounded corners to the current sub-path
 * @param ctx - Context
 * @param rect - Bounding rect
 */
function addRoundedRectPath(ctx, rect) {
  var x = rect.x,
    y = rect.y,
    w = rect.w,
    h = rect.h,
    radius = rect.radius;
  // top left arc
  ctx.arc(x + radius.topLeft, y + radius.topLeft, radius.topLeft, 1.5 * PI, PI, true);
  // line from top left to bottom left
  ctx.lineTo(x, y + h - radius.bottomLeft);
  // bottom left arc
  ctx.arc(x + radius.bottomLeft, y + h - radius.bottomLeft, radius.bottomLeft, PI, HALF_PI, true);
  // line from bottom left to bottom right
  ctx.lineTo(x + w - radius.bottomRight, y + h);
  // bottom right arc
  ctx.arc(x + w - radius.bottomRight, y + h - radius.bottomRight, radius.bottomRight, HALF_PI, 0, true);
  // line from bottom right to top right
  ctx.lineTo(x + w, y + radius.topRight);
  // top right arc
  ctx.arc(x + w - radius.topRight, y + radius.topRight, radius.topRight, 0, -HALF_PI, true);
  // line from top right to top left
  ctx.lineTo(x + radius.topLeft, y);
}
var LINE_HEIGHT = /^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/;
var FONT_STYLE = /^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;
/**
 * @alias Chart.helpers.options
 * @namespace
 */ /**
    * Converts the given line height `value` in pixels for a specific font `size`.
    * @param value - The lineHeight to parse (eg. 1.6, '14px', '75%', '1.6em').
    * @param size - The font size (in pixels) used to resolve relative `value`.
    * @returns The effective line height in pixels (size * 1.2 if value is invalid).
    * @see https://developer.mozilla.org/en-US/docs/Web/CSS/line-height
    * @since 2.7.0
    */
function toLineHeight(value, size) {
  var matches = ('' + value).match(LINE_HEIGHT);
  if (!matches || matches[1] === 'normal') {
    return size * 1.2;
  }
  value = +matches[2];
  switch (matches[3]) {
    case 'px':
      return value;
    case '%':
      value /= 100;
      break;
  }
  return size * value;
}
var numberOrZero = function numberOrZero(v) {
  return +v || 0;
};
function _readValueToProps(value, props) {
  var ret = {};
  var objProps = isObject(props);
  var keys = objProps ? Object.keys(props) : props;
  var read = isObject(value) ? objProps ? function (prop) {
    return valueOrDefault(value[prop], value[props[prop]]);
  } : function (prop) {
    return value[prop];
  } : function () {
    return value;
  };
  for (var _iterator4 = _createForOfIteratorHelperLoose(keys), _step4; !(_step4 = _iterator4()).done;) {
    var prop = _step4.value;
    ret[prop] = numberOrZero(read(prop));
  }
  return ret;
}
/**
 * Converts the given value into a TRBL object.
 * @param value - If a number, set the value to all TRBL component,
 *  else, if an object, use defined properties and sets undefined ones to 0.
 *  x / y are shorthands for same value for left/right and top/bottom.
 * @returns The padding values (top, right, bottom, left)
 * @since 3.0.0
 */
function toTRBL(value) {
  return _readValueToProps(value, {
    top: 'y',
    right: 'x',
    bottom: 'y',
    left: 'x'
  });
}
/**
 * Converts the given value into a TRBL corners object (similar with css border-radius).
 * @param value - If a number, set the value to all TRBL corner components,
 *  else, if an object, use defined properties and sets undefined ones to 0.
 * @returns The TRBL corner values (topLeft, topRight, bottomLeft, bottomRight)
 * @since 3.0.0
 */
function toTRBLCorners(value) {
  return _readValueToProps(value, ['topLeft', 'topRight', 'bottomLeft', 'bottomRight']);
}
/**
 * Converts the given value into a padding object with pre-computed width/height.
 * @param value - If a number, set the value to all TRBL component,
 *  else, if an object, use defined properties and sets undefined ones to 0.
 *  x / y are shorthands for same value for left/right and top/bottom.
 * @returns The padding values (top, right, bottom, left, width, height)
 * @since 2.7.0
 */
function toPadding(value) {
  var obj = toTRBL(value);
  obj.width = obj.left + obj.right;
  obj.height = obj.top + obj.bottom;
  return obj;
}
/**
 * Parses font options and returns the font object.
 * @param options - A object that contains font options to be parsed.
 * @param fallback - A object that contains fallback font options.
 * @return The font object.
 * @private
 */
function toFont(options, fallback) {
  options = options || {};
  fallback = fallback || defaults.font;
  var size = valueOrDefault(options.size, fallback.size);
  if (typeof size === 'string') {
    size = parseInt(size, 10);
  }
  var style = valueOrDefault(options.style, fallback.style);
  if (style && !('' + style).match(FONT_STYLE)) {
    console.warn('Invalid font style specified: "' + style + '"');
    style = undefined;
  }
  var font = {
    family: valueOrDefault(options.family, fallback.family),
    lineHeight: toLineHeight(valueOrDefault(options.lineHeight, fallback.lineHeight), size),
    size: size,
    style: style,
    weight: valueOrDefault(options.weight, fallback.weight),
    string: ''
  };
  font.string = toFontString(font);
  return font;
}
/**
 * Evaluates the given `inputs` sequentially and returns the first defined value.
 * @param inputs - An array of values, falling back to the last value.
 * @param context - If defined and the current value is a function, the value
 * is called with `context` as first argument and the result becomes the new input.
 * @param index - If defined and the current value is an array, the value
 * at `index` become the new input.
 * @param info - object to return information about resolution in
 * @param info.cacheable - Will be set to `false` if option is not cacheable.
 * @since 2.7.0
 */
function resolve(inputs, context, index, info) {
  var cacheable = true;
  var i, ilen, value;
  for (i = 0, ilen = inputs.length; i < ilen; ++i) {
    value = inputs[i];
    if (value === undefined) {
      continue;
    }
    if (context !== undefined && typeof value === 'function') {
      value = value(context);
      cacheable = false;
    }
    if (index !== undefined && isArray(value)) {
      value = value[index % value.length];
      cacheable = false;
    }
    if (value !== undefined) {
      if (info && !cacheable) {
        info.cacheable = false;
      }
      return value;
    }
  }
}
/**
 * @param minmax
 * @param grace
 * @param beginAtZero
 * @private
 */
function _addGrace(minmax, grace, beginAtZero) {
  var min = minmax.min,
    max = minmax.max;
  var change = toDimension(grace, (max - min) / 2);
  var keepZero = function keepZero(value, add) {
    return beginAtZero && value === 0 ? 0 : value + add;
  };
  return {
    min: keepZero(min, -Math.abs(change)),
    max: keepZero(max, change)
  };
}
function createContext(parentContext, context) {
  return Object.assign(Object.create(parentContext), context);
}

/**
 * Creates a Proxy for resolving raw values for options.
 * @param scopes - The option scopes to look for values, in resolution order
 * @param prefixes - The prefixes for values, in resolution order.
 * @param rootScopes - The root option scopes
 * @param fallback - Parent scopes fallback
 * @param getTarget - callback for getting the target for changed values
 * @returns Proxy
 * @private
 */
function _createResolver(scopes, prefixes, rootScopes, fallback, getTarget) {
  var _cache;
  if (prefixes === void 0) {
    prefixes = [''];
  }
  if (getTarget === void 0) {
    getTarget = function getTarget() {
      return scopes[0];
    };
  }
  var finalRootScopes = rootScopes || scopes;
  if (typeof fallback === 'undefined') {
    fallback = _resolve('_fallback', scopes);
  }
  var cache = (_cache = {}, _cache[Symbol.toStringTag] = 'Object', _cache._cacheable = true, _cache._scopes = scopes, _cache._rootScopes = finalRootScopes, _cache._fallback = fallback, _cache._getTarget = getTarget, _cache.override = function override(scope) {
    return _createResolver([scope].concat(scopes), prefixes, finalRootScopes, fallback);
  }, _cache);
  return new Proxy(cache, {
    /**
    * A trap for the delete operator.
    */
    deleteProperty: function deleteProperty(target, prop) {
      delete target[prop]; // remove from cache
      delete target._keys; // remove cached keys
      delete scopes[0][prop]; // remove from top level scope
      return true;
    },
    /**
    * A trap for getting property values.
    */
    get: function get(target, prop) {
      return _cached(target, prop, function () {
        return _resolveWithPrefixes(prop, prefixes, scopes, target);
      });
    },
    /**
    * A trap for Object.getOwnPropertyDescriptor.
    * Also used by Object.hasOwnProperty.
    */
    getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, prop) {
      return Reflect.getOwnPropertyDescriptor(target._scopes[0], prop);
    },
    /**
    * A trap for Object.getPrototypeOf.
    */
    getPrototypeOf: function getPrototypeOf() {
      return Reflect.getPrototypeOf(scopes[0]);
    },
    /**
    * A trap for the in operator.
    */
    has: function has(target, prop) {
      return getKeysFromAllScopes(target).includes(prop);
    },
    /**
    * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.
    */
    ownKeys: function ownKeys(target) {
      return getKeysFromAllScopes(target);
    },
    /**
    * A trap for setting property values.
    */
    set: function set(target, prop, value) {
      var storage = target._storage || (target._storage = getTarget());
      target[prop] = storage[prop] = value; // set to top level scope + cache
      delete target._keys; // remove cached keys
      return true;
    }
  });
}
/**
 * Returns an Proxy for resolving option values with context.
 * @param proxy - The Proxy returned by `_createResolver`
 * @param context - Context object for scriptable/indexable options
 * @param subProxy - The proxy provided for scriptable options
 * @param descriptorDefaults - Defaults for descriptors
 * @private
 */
function _attachContext(proxy, context, subProxy, descriptorDefaults) {
  var cache = {
    _cacheable: false,
    _proxy: proxy,
    _context: context,
    _subProxy: subProxy,
    _stack: new Set(),
    _descriptors: _descriptors(proxy, descriptorDefaults),
    setContext: function setContext(ctx) {
      return _attachContext(proxy, ctx, subProxy, descriptorDefaults);
    },
    override: function override(scope) {
      return _attachContext(proxy.override(scope), context, subProxy, descriptorDefaults);
    }
  };
  return new Proxy(cache, {
    /**
    * A trap for the delete operator.
    */
    deleteProperty: function deleteProperty(target, prop) {
      delete target[prop]; // remove from cache
      delete proxy[prop]; // remove from proxy
      return true;
    },
    /**
    * A trap for getting property values.
    */
    get: function get(target, prop, receiver) {
      return _cached(target, prop, function () {
        return _resolveWithContext(target, prop, receiver);
      });
    },
    /**
    * A trap for Object.getOwnPropertyDescriptor.
    * Also used by Object.hasOwnProperty.
    */
    getOwnPropertyDescriptor: function getOwnPropertyDescriptor(target, prop) {
      return target._descriptors.allKeys ? Reflect.has(proxy, prop) ? {
        enumerable: true,
        configurable: true
      } : undefined : Reflect.getOwnPropertyDescriptor(proxy, prop);
    },
    /**
    * A trap for Object.getPrototypeOf.
    */
    getPrototypeOf: function getPrototypeOf() {
      return Reflect.getPrototypeOf(proxy);
    },
    /**
    * A trap for the in operator.
    */
    has: function has(target, prop) {
      return Reflect.has(proxy, prop);
    },
    /**
    * A trap for Object.getOwnPropertyNames and Object.getOwnPropertySymbols.
    */
    ownKeys: function ownKeys() {
      return Reflect.ownKeys(proxy);
    },
    /**
    * A trap for setting property values.
    */
    set: function set(target, prop, value) {
      proxy[prop] = value; // set to proxy
      delete target[prop]; // remove from cache
      return true;
    }
  });
}
/**
 * @private
 */
function _descriptors(proxy, defaults) {
  if (defaults === void 0) {
    defaults = {
      scriptable: true,
      indexable: true
    };
  }
  var _proxy$_scriptable = proxy._scriptable,
    _scriptable = _proxy$_scriptable === void 0 ? defaults.scriptable : _proxy$_scriptable,
    _proxy$_indexable = proxy._indexable,
    _indexable = _proxy$_indexable === void 0 ? defaults.indexable : _proxy$_indexable,
    _proxy$_allKeys = proxy._allKeys,
    _allKeys = _proxy$_allKeys === void 0 ? defaults.allKeys : _proxy$_allKeys;
  return {
    allKeys: _allKeys,
    scriptable: _scriptable,
    indexable: _indexable,
    isScriptable: isFunction(_scriptable) ? _scriptable : function () {
      return _scriptable;
    },
    isIndexable: isFunction(_indexable) ? _indexable : function () {
      return _indexable;
    }
  };
}
var readKey = function readKey(prefix, name) {
  return prefix ? prefix + _capitalize(name) : name;
};
var needsSubResolver = function needsSubResolver(prop, value) {
  return isObject(value) && prop !== 'adapters' && (Object.getPrototypeOf(value) === null || value.constructor === Object);
};
function _cached(target, prop, resolve) {
  if (Object.prototype.hasOwnProperty.call(target, prop) || prop === 'constructor') {
    return target[prop];
  }
  var value = resolve();
  // cache the resolved value
  target[prop] = value;
  return value;
}
function _resolveWithContext(target, prop, receiver) {
  var _proxy = target._proxy,
    _context = target._context,
    _subProxy = target._subProxy,
    descriptors = target._descriptors;
  var value = _proxy[prop]; // resolve from proxy
  // resolve with context
  if (isFunction(value) && descriptors.isScriptable(prop)) {
    value = _resolveScriptable(prop, value, target, receiver);
  }
  if (isArray(value) && value.length) {
    value = _resolveArray(prop, value, target, descriptors.isIndexable);
  }
  if (needsSubResolver(prop, value)) {
    // if the resolved value is an object, create a sub resolver for it
    value = _attachContext(value, _context, _subProxy && _subProxy[prop], descriptors);
  }
  return value;
}
function _resolveScriptable(prop, getValue, target, receiver) {
  var _proxy = target._proxy,
    _context = target._context,
    _subProxy = target._subProxy,
    _stack = target._stack;
  if (_stack.has(prop)) {
    throw new Error('Recursion detected: ' + Array.from(_stack).join('->') + '->' + prop);
  }
  _stack.add(prop);
  var value = getValue(_context, _subProxy || receiver);
  _stack["delete"](prop);
  if (needsSubResolver(prop, value)) {
    // When scriptable option returns an object, create a resolver on that.
    value = createSubResolver(_proxy._scopes, _proxy, prop, value);
  }
  return value;
}
function _resolveArray(prop, value, target, isIndexable) {
  var _proxy = target._proxy,
    _context = target._context,
    _subProxy = target._subProxy,
    descriptors = target._descriptors;
  if (typeof _context.index !== 'undefined' && isIndexable(prop)) {
    return value[_context.index % value.length];
  } else if (isObject(value[0])) {
    // Array of objects, return array or resolvers
    var arr = value;
    var scopes = _proxy._scopes.filter(function (s) {
      return s !== arr;
    });
    value = [];
    for (var _iterator5 = _createForOfIteratorHelperLoose(arr), _step5; !(_step5 = _iterator5()).done;) {
      var item = _step5.value;
      var resolver = createSubResolver(scopes, _proxy, prop, item);
      value.push(_attachContext(resolver, _context, _subProxy && _subProxy[prop], descriptors));
    }
  }
  return value;
}
function resolveFallback(fallback, prop, value) {
  return isFunction(fallback) ? fallback(prop, value) : fallback;
}
var getScope = function getScope(key, parent) {
  return key === true ? parent : typeof key === 'string' ? resolveObjectKey(parent, key) : undefined;
};
function addScopes(set, parentScopes, key, parentFallback, value) {
  for (var _iterator6 = _createForOfIteratorHelperLoose(parentScopes), _step6; !(_step6 = _iterator6()).done;) {
    var parent = _step6.value;
    var scope = getScope(key, parent);
    if (scope) {
      set.add(scope);
      var fallback = resolveFallback(scope._fallback, key, value);
      if (typeof fallback !== 'undefined' && fallback !== key && fallback !== parentFallback) {
        // When we reach the descriptor that defines a new _fallback, return that.
        // The fallback will resume to that new scope.
        return fallback;
      }
    } else if (scope === false && typeof parentFallback !== 'undefined' && key !== parentFallback) {
      // Fallback to `false` results to `false`, when falling back to different key.
      // For example `interaction` from `hover` or `plugins.tooltip` and `animation` from `animations`
      return null;
    }
  }
  return false;
}
function createSubResolver(parentScopes, resolver, prop, value) {
  var rootScopes = resolver._rootScopes;
  var fallback = resolveFallback(resolver._fallback, prop, value);
  var allScopes = [].concat(parentScopes, rootScopes);
  var set = new Set();
  set.add(value);
  var key = addScopesFromKey(set, allScopes, prop, fallback || prop, value);
  if (key === null) {
    return false;
  }
  if (typeof fallback !== 'undefined' && fallback !== prop) {
    key = addScopesFromKey(set, allScopes, fallback, key, value);
    if (key === null) {
      return false;
    }
  }
  return _createResolver(Array.from(set), [''], rootScopes, fallback, function () {
    return subGetTarget(resolver, prop, value);
  });
}
function addScopesFromKey(set, allScopes, key, fallback, item) {
  while (key) {
    key = addScopes(set, allScopes, key, fallback, item);
  }
  return key;
}
function subGetTarget(resolver, prop, value) {
  var parent = resolver._getTarget();
  if (!(prop in parent)) {
    parent[prop] = {};
  }
  var target = parent[prop];
  if (isArray(target) && isObject(value)) {
    // For array of objects, the object is used to store updated values
    return value;
  }
  return target || {};
}
function _resolveWithPrefixes(prop, prefixes, scopes, proxy) {
  var value;
  for (var _iterator7 = _createForOfIteratorHelperLoose(prefixes), _step7; !(_step7 = _iterator7()).done;) {
    var prefix = _step7.value;
    value = _resolve(readKey(prefix, prop), scopes);
    if (typeof value !== 'undefined') {
      return needsSubResolver(prop, value) ? createSubResolver(scopes, proxy, prop, value) : value;
    }
  }
}
function _resolve(key, scopes) {
  for (var _iterator8 = _createForOfIteratorHelperLoose(scopes), _step8; !(_step8 = _iterator8()).done;) {
    var scope = _step8.value;
    if (!scope) {
      continue;
    }
    var value = scope[key];
    if (typeof value !== 'undefined') {
      return value;
    }
  }
}
function getKeysFromAllScopes(target) {
  var keys = target._keys;
  if (!keys) {
    keys = target._keys = resolveKeysFromAllScopes(target._scopes);
  }
  return keys;
}
function resolveKeysFromAllScopes(scopes) {
  var set = new Set();
  for (var _iterator9 = _createForOfIteratorHelperLoose(scopes), _step9; !(_step9 = _iterator9()).done;) {
    var scope = _step9.value;
    for (var _iterator10 = _createForOfIteratorHelperLoose(Object.keys(scope).filter(function (k) {
        return !k.startsWith('_');
      })), _step10; !(_step10 = _iterator10()).done;) {
      var key = _step10.value;
      set.add(key);
    }
  }
  return Array.from(set);
}
function _parseObjectDataRadialScale(meta, data, start, count) {
  var iScale = meta.iScale;
  var _this$_parsing$key = this._parsing.key,
    key = _this$_parsing$key === void 0 ? 'r' : _this$_parsing$key;
  var parsed = new Array(count);
  var i, ilen, index, item;
  for (i = 0, ilen = count; i < ilen; ++i) {
    index = i + start;
    item = data[index];
    parsed[i] = {
      r: iScale.parse(resolveObjectKey(item, key), index)
    };
  }
  return parsed;
}
var EPSILON = Number.EPSILON || 1e-14;
var getPoint = function getPoint(points, i) {
  return i < points.length && !points[i].skip && points[i];
};
var getValueAxis = function getValueAxis(indexAxis) {
  return indexAxis === 'x' ? 'y' : 'x';
};
function splineCurve(firstPoint, middlePoint, afterPoint, t) {
  // Props to Rob Spencer at scaled innovation for his post on splining between points
  // http://scaledinnovation.com/analytics/splines/aboutSplines.html
  // This function must also respect "skipped" points
  var previous = firstPoint.skip ? middlePoint : firstPoint;
  var current = middlePoint;
  var next = afterPoint.skip ? middlePoint : afterPoint;
  var d01 = distanceBetweenPoints(current, previous);
  var d12 = distanceBetweenPoints(next, current);
  var s01 = d01 / (d01 + d12);
  var s12 = d12 / (d01 + d12);
  // If all points are the same, s01 & s02 will be inf
  s01 = isNaN(s01) ? 0 : s01;
  s12 = isNaN(s12) ? 0 : s12;
  var fa = t * s01; // scaling factor for triangle Ta
  var fb = t * s12;
  return {
    previous: {
      x: current.x - fa * (next.x - previous.x),
      y: current.y - fa * (next.y - previous.y)
    },
    next: {
      x: current.x + fb * (next.x - previous.x),
      y: current.y + fb * (next.y - previous.y)
    }
  };
}
/**
 * Adjust tangents to ensure monotonic properties
 */
function monotoneAdjust(points, deltaK, mK) {
  var pointsLen = points.length;
  var alphaK, betaK, tauK, squaredMagnitude, pointCurrent;
  var pointAfter = getPoint(points, 0);
  for (var i = 0; i < pointsLen - 1; ++i) {
    pointCurrent = pointAfter;
    pointAfter = getPoint(points, i + 1);
    if (!pointCurrent || !pointAfter) {
      continue;
    }
    if (almostEquals(deltaK[i], 0, EPSILON)) {
      mK[i] = mK[i + 1] = 0;
      continue;
    }
    alphaK = mK[i] / deltaK[i];
    betaK = mK[i + 1] / deltaK[i];
    squaredMagnitude = Math.pow(alphaK, 2) + Math.pow(betaK, 2);
    if (squaredMagnitude <= 9) {
      continue;
    }
    tauK = 3 / Math.sqrt(squaredMagnitude);
    mK[i] = alphaK * tauK * deltaK[i];
    mK[i + 1] = betaK * tauK * deltaK[i];
  }
}
function monotoneCompute(points, mK, indexAxis) {
  if (indexAxis === void 0) {
    indexAxis = 'x';
  }
  var valueAxis = getValueAxis(indexAxis);
  var pointsLen = points.length;
  var delta, pointBefore, pointCurrent;
  var pointAfter = getPoint(points, 0);
  for (var i = 0; i < pointsLen; ++i) {
    pointBefore = pointCurrent;
    pointCurrent = pointAfter;
    pointAfter = getPoint(points, i + 1);
    if (!pointCurrent) {
      continue;
    }
    var iPixel = pointCurrent[indexAxis];
    var vPixel = pointCurrent[valueAxis];
    if (pointBefore) {
      delta = (iPixel - pointBefore[indexAxis]) / 3;
      pointCurrent["cp1" + indexAxis] = iPixel - delta;
      pointCurrent["cp1" + valueAxis] = vPixel - delta * mK[i];
    }
    if (pointAfter) {
      delta = (pointAfter[indexAxis] - iPixel) / 3;
      pointCurrent["cp2" + indexAxis] = iPixel + delta;
      pointCurrent["cp2" + valueAxis] = vPixel + delta * mK[i];
    }
  }
}
/**
 * This function calculates BÃ©zier control points in a similar way than |splineCurve|,
 * but preserves monotonicity of the provided data and ensures no local extremums are added
 * between the dataset discrete points due to the interpolation.
 * See : https://en.wikipedia.org/wiki/Monotone_cubic_interpolation
 */
function splineCurveMonotone(points, indexAxis) {
  if (indexAxis === void 0) {
    indexAxis = 'x';
  }
  var valueAxis = getValueAxis(indexAxis);
  var pointsLen = points.length;
  var deltaK = Array(pointsLen).fill(0);
  var mK = Array(pointsLen);
  // Calculate slopes (deltaK) and initialize tangents (mK)
  var i, pointBefore, pointCurrent;
  var pointAfter = getPoint(points, 0);
  for (i = 0; i < pointsLen; ++i) {
    pointBefore = pointCurrent;
    pointCurrent = pointAfter;
    pointAfter = getPoint(points, i + 1);
    if (!pointCurrent) {
      continue;
    }
    if (pointAfter) {
      var slopeDelta = pointAfter[indexAxis] - pointCurrent[indexAxis];
      // In the case of two points that appear at the same x pixel, slopeDeltaX is 0
      deltaK[i] = slopeDelta !== 0 ? (pointAfter[valueAxis] - pointCurrent[valueAxis]) / slopeDelta : 0;
    }
    mK[i] = !pointBefore ? deltaK[i] : !pointAfter ? deltaK[i - 1] : sign(deltaK[i - 1]) !== sign(deltaK[i]) ? 0 : (deltaK[i - 1] + deltaK[i]) / 2;
  }
  monotoneAdjust(points, deltaK, mK);
  monotoneCompute(points, mK, indexAxis);
}
function capControlPoint(pt, min, max) {
  return Math.max(Math.min(pt, max), min);
}
function capBezierPoints(points, area) {
  var i, ilen, point, inArea, inAreaPrev;
  var inAreaNext = _isPointInArea(points[0], area);
  for (i = 0, ilen = points.length; i < ilen; ++i) {
    inAreaPrev = inArea;
    inArea = inAreaNext;
    inAreaNext = i < ilen - 1 && _isPointInArea(points[i + 1], area);
    if (!inArea) {
      continue;
    }
    point = points[i];
    if (inAreaPrev) {
      point.cp1x = capControlPoint(point.cp1x, area.left, area.right);
      point.cp1y = capControlPoint(point.cp1y, area.top, area.bottom);
    }
    if (inAreaNext) {
      point.cp2x = capControlPoint(point.cp2x, area.left, area.right);
      point.cp2y = capControlPoint(point.cp2y, area.top, area.bottom);
    }
  }
}
/**
 * @private
 */
function _updateBezierControlPoints(points, options, area, loop, indexAxis) {
  var i, ilen, point, controlPoints;
  // Only consider points that are drawn in case the spanGaps option is used
  if (options.spanGaps) {
    points = points.filter(function (pt) {
      return !pt.skip;
    });
  }
  if (options.cubicInterpolationMode === 'monotone') {
    splineCurveMonotone(points, indexAxis);
  } else {
    var prev = loop ? points[points.length - 1] : points[0];
    for (i = 0, ilen = points.length; i < ilen; ++i) {
      point = points[i];
      controlPoints = splineCurve(prev, point, points[Math.min(i + 1, ilen - (loop ? 0 : 1)) % ilen], options.tension);
      point.cp1x = controlPoints.previous.x;
      point.cp1y = controlPoints.previous.y;
      point.cp2x = controlPoints.next.x;
      point.cp2y = controlPoints.next.y;
      prev = point;
    }
  }
  if (options.capBezierPoints) {
    capBezierPoints(points, area);
  }
}

/**
 * Note: typedefs are auto-exported, so use a made-up `dom` namespace where
 * necessary to avoid duplicates with `export * from './helpers`; see
 * https://github.com/microsoft/TypeScript/issues/46011
 * @typedef { import('../core/core.controller.js').default } dom.Chart
 * @typedef { import('../../types').ChartEvent } ChartEvent
 */ /**
    * @private
    */
function _isDomSupported() {
  return typeof window !== 'undefined' && typeof document !== 'undefined';
}
/**
 * @private
 */
function _getParentNode(domNode) {
  var parent = domNode.parentNode;
  if (parent && parent.toString() === '[object ShadowRoot]') {
    parent = parent.host;
  }
  return parent;
}
/**
 * convert max-width/max-height values that may be percentages into a number
 * @private
 */
function parseMaxStyle(styleValue, node, parentProperty) {
  var valueInPixels;
  if (typeof styleValue === 'string') {
    valueInPixels = parseInt(styleValue, 10);
    if (styleValue.indexOf('%') !== -1) {
      // percentage * size in dimension
      valueInPixels = valueInPixels / 100 * node.parentNode[parentProperty];
    }
  } else {
    valueInPixels = styleValue;
  }
  return valueInPixels;
}
var getComputedStyle = function getComputedStyle(element) {
  return element.ownerDocument.defaultView.getComputedStyle(element, null);
};
function getStyle(el, property) {
  return getComputedStyle(el).getPropertyValue(property);
}
var positions = ['top', 'right', 'bottom', 'left'];
function getPositionedStyle(styles, style, suffix) {
  var result = {};
  suffix = suffix ? '-' + suffix : '';
  for (var i = 0; i < 4; i++) {
    var pos = positions[i];
    result[pos] = parseFloat(styles[style + '-' + pos + suffix]) || 0;
  }
  result.width = result.left + result.right;
  result.height = result.top + result.bottom;
  return result;
}
var useOffsetPos = function useOffsetPos(x, y, target) {
  return (x > 0 || y > 0) && (!target || !target.shadowRoot);
};
/**
 * @param e
 * @param canvas
 * @returns Canvas position
 */
function getCanvasPosition(e, canvas) {
  var touches = e.touches;
  var source = touches && touches.length ? touches[0] : e;
  var offsetX = source.offsetX,
    offsetY = source.offsetY;
  var box = false;
  var x, y;
  if (useOffsetPos(offsetX, offsetY, e.target)) {
    x = offsetX;
    y = offsetY;
  } else {
    var rect = canvas.getBoundingClientRect();
    x = source.clientX - rect.left;
    y = source.clientY - rect.top;
    box = true;
  }
  return {
    x: x,
    y: y,
    box: box
  };
}
/**
 * Gets an event's x, y coordinates, relative to the chart area
 * @param event
 * @param chart
 * @returns x and y coordinates of the event
 */
function getRelativePosition(event, chart) {
  if ('native' in event) {
    return event;
  }
  var canvas = chart.canvas,
    currentDevicePixelRatio = chart.currentDevicePixelRatio;
  var style = getComputedStyle(canvas);
  var borderBox = style.boxSizing === 'border-box';
  var paddings = getPositionedStyle(style, 'padding');
  var borders = getPositionedStyle(style, 'border', 'width');
  var _getCanvasPosition = getCanvasPosition(event, canvas),
    x = _getCanvasPosition.x,
    y = _getCanvasPosition.y,
    box = _getCanvasPosition.box;
  var xOffset = paddings.left + (box && borders.left);
  var yOffset = paddings.top + (box && borders.top);
  var width = chart.width,
    height = chart.height;
  if (borderBox) {
    width -= paddings.width + borders.width;
    height -= paddings.height + borders.height;
  }
  return {
    x: Math.round((x - xOffset) / width * canvas.width / currentDevicePixelRatio),
    y: Math.round((y - yOffset) / height * canvas.height / currentDevicePixelRatio)
  };
}
function getContainerSize(canvas, width, height) {
  var maxWidth, maxHeight;
  if (width === undefined || height === undefined) {
    var container = canvas && _getParentNode(canvas);
    if (!container) {
      width = canvas.clientWidth;
      height = canvas.clientHeight;
    } else {
      var rect = container.getBoundingClientRect(); // this is the border box of the container
      var containerStyle = getComputedStyle(container);
      var containerBorder = getPositionedStyle(containerStyle, 'border', 'width');
      var containerPadding = getPositionedStyle(containerStyle, 'padding');
      width = rect.width - containerPadding.width - containerBorder.width;
      height = rect.height - containerPadding.height - containerBorder.height;
      maxWidth = parseMaxStyle(containerStyle.maxWidth, container, 'clientWidth');
      maxHeight = parseMaxStyle(containerStyle.maxHeight, container, 'clientHeight');
    }
  }
  return {
    width: width,
    height: height,
    maxWidth: maxWidth || INFINITY,
    maxHeight: maxHeight || INFINITY
  };
}
var round1 = function round1(v) {
  return Math.round(v * 10) / 10;
};
// eslint-disable-next-line complexity
function getMaximumSize(canvas, bbWidth, bbHeight, aspectRatio) {
  var style = getComputedStyle(canvas);
  var margins = getPositionedStyle(style, 'margin');
  var maxWidth = parseMaxStyle(style.maxWidth, canvas, 'clientWidth') || INFINITY;
  var maxHeight = parseMaxStyle(style.maxHeight, canvas, 'clientHeight') || INFINITY;
  var containerSize = getContainerSize(canvas, bbWidth, bbHeight);
  var width = containerSize.width,
    height = containerSize.height;
  if (style.boxSizing === 'content-box') {
    var borders = getPositionedStyle(style, 'border', 'width');
    var paddings = getPositionedStyle(style, 'padding');
    width -= paddings.width + borders.width;
    height -= paddings.height + borders.height;
  }
  width = Math.max(0, width - margins.width);
  height = Math.max(0, aspectRatio ? width / aspectRatio : height - margins.height);
  width = round1(Math.min(width, maxWidth, containerSize.maxWidth));
  height = round1(Math.min(height, maxHeight, containerSize.maxHeight));
  if (width && !height) {
    // https://github.com/chartjs/Chart.js/issues/4659
    // If the canvas has width, but no height, default to aspectRatio of 2 (canvas default)
    height = round1(width / 2);
  }
  var maintainHeight = bbWidth !== undefined || bbHeight !== undefined;
  if (maintainHeight && aspectRatio && containerSize.height && height > containerSize.height) {
    height = containerSize.height;
    width = round1(Math.floor(height * aspectRatio));
  }
  return {
    width: width,
    height: height
  };
}
/**
 * @param chart
 * @param forceRatio
 * @param forceStyle
 * @returns True if the canvas context size or transformation has changed.
 */
function retinaScale(chart, forceRatio, forceStyle) {
  var pixelRatio = forceRatio || 1;
  var deviceHeight = Math.floor(chart.height * pixelRatio);
  var deviceWidth = Math.floor(chart.width * pixelRatio);
  chart.height = Math.floor(chart.height);
  chart.width = Math.floor(chart.width);
  var canvas = chart.canvas;
  // If no style has been set on the canvas, the render size is used as display size,
  // making the chart visually bigger, so let's enforce it to the "correct" values.
  // See https://github.com/chartjs/Chart.js/issues/3575
  if (canvas.style && (forceStyle || !canvas.style.height && !canvas.style.width)) {
    canvas.style.height = chart.height + "px";
    canvas.style.width = chart.width + "px";
  }
  if (chart.currentDevicePixelRatio !== pixelRatio || canvas.height !== deviceHeight || canvas.width !== deviceWidth) {
    chart.currentDevicePixelRatio = pixelRatio;
    canvas.height = deviceHeight;
    canvas.width = deviceWidth;
    chart.ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);
    return true;
  }
  return false;
}
/**
 * Detects support for options object argument in addEventListener.
 * https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener#Safely_detecting_option_support
 * @private
 */
var supportsEventListenerOptions = function () {
  var passiveSupported = false;
  try {
    var options = {
      get passive() {
        passiveSupported = true;
        return false;
      }
    };
    if (_isDomSupported()) {
      window.addEventListener('test', null, options);
      window.removeEventListener('test', null, options);
    }
  } catch (e) {
    // continue regardless of error
  }
  return passiveSupported;
}();
/**
 * The "used" size is the final value of a dimension property after all calculations have
 * been performed. This method uses the computed style of `element` but returns undefined
 * if the computed style is not expressed in pixels. That can happen in some cases where
 * `element` has a size relative to its parent and this last one is not yet displayed,
 * for example because of `display: none` on a parent node.
 * @see https://developer.mozilla.org/en-US/docs/Web/CSS/used_value
 * @returns Size in pixels or undefined if unknown.
 */
function readUsedSize(element, property) {
  var value = getStyle(element, property);
  var matches = value && value.match(/^(\d+)(\.\d+)?px$/);
  return matches ? +matches[1] : undefined;
}

/**
 * @private
 */
function _pointInLine(p1, p2, t, mode) {
  return {
    x: p1.x + t * (p2.x - p1.x),
    y: p1.y + t * (p2.y - p1.y)
  };
}
/**
 * @private
 */
function _steppedInterpolation(p1, p2, t, mode) {
  return {
    x: p1.x + t * (p2.x - p1.x),
    y: mode === 'middle' ? t < 0.5 ? p1.y : p2.y : mode === 'after' ? t < 1 ? p1.y : p2.y : t > 0 ? p2.y : p1.y
  };
}
/**
 * @private
 */
function _bezierInterpolation(p1, p2, t, mode) {
  var cp1 = {
    x: p1.cp2x,
    y: p1.cp2y
  };
  var cp2 = {
    x: p2.cp1x,
    y: p2.cp1y
  };
  var a = _pointInLine(p1, cp1, t);
  var b = _pointInLine(cp1, cp2, t);
  var c = _pointInLine(cp2, p2, t);
  var d = _pointInLine(a, b, t);
  var e = _pointInLine(b, c, t);
  return _pointInLine(d, e, t);
}
var getRightToLeftAdapter = function getRightToLeftAdapter(rectX, width) {
  return {
    x: function x(_x) {
      return rectX + rectX + width - _x;
    },
    setWidth: function setWidth(w) {
      width = w;
    },
    textAlign: function textAlign(align) {
      if (align === 'center') {
        return align;
      }
      return align === 'right' ? 'left' : 'right';
    },
    xPlus: function xPlus(x, value) {
      return x - value;
    },
    leftForLtr: function leftForLtr(x, itemWidth) {
      return x - itemWidth;
    }
  };
};
var getLeftToRightAdapter = function getLeftToRightAdapter() {
  return {
    x: function x(_x2) {
      return _x2;
    },
    setWidth: function setWidth(w) {},
    textAlign: function textAlign(align) {
      return align;
    },
    xPlus: function xPlus(x, value) {
      return x + value;
    },
    leftForLtr: function leftForLtr(x, _itemWidth) {
      return x;
    }
  };
};
function getRtlAdapter(rtl, rectX, width) {
  return rtl ? getRightToLeftAdapter(rectX, width) : getLeftToRightAdapter();
}
function overrideTextDirection(ctx, direction) {
  var style, original;
  if (direction === 'ltr' || direction === 'rtl') {
    style = ctx.canvas.style;
    original = [style.getPropertyValue('direction'), style.getPropertyPriority('direction')];
    style.setProperty('direction', direction, 'important');
    ctx.prevTextDirection = original;
  }
}
function restoreTextDirection(ctx, original) {
  if (original !== undefined) {
    delete ctx.prevTextDirection;
    ctx.canvas.style.setProperty('direction', original[0], original[1]);
  }
}
function propertyFn(property) {
  if (property === 'angle') {
    return {
      between: _angleBetween,
      compare: _angleDiff,
      normalize: _normalizeAngle
    };
  }
  return {
    between: _isBetween,
    compare: function compare(a, b) {
      return a - b;
    },
    normalize: function normalize(x) {
      return x;
    }
  };
}
function normalizeSegment(_ref) {
  var start = _ref.start,
    end = _ref.end,
    count = _ref.count,
    loop = _ref.loop,
    style = _ref.style;
  return {
    start: start % count,
    end: end % count,
    loop: loop && (end - start + 1) % count === 0,
    style: style
  };
}
function getSegment(segment, points, bounds) {
  var property = bounds.property,
    startBound = bounds.start,
    endBound = bounds.end;
  var _propertyFn = propertyFn(property),
    between = _propertyFn.between,
    normalize = _propertyFn.normalize;
  var count = points.length;
  var start = segment.start,
    end = segment.end,
    loop = segment.loop;
  var i, ilen;
  if (loop) {
    start += count;
    end += count;
    for (i = 0, ilen = count; i < ilen; ++i) {
      if (!between(normalize(points[start % count][property]), startBound, endBound)) {
        break;
      }
      start--;
      end--;
    }
    start %= count;
    end %= count;
  }
  if (end < start) {
    end += count;
  }
  return {
    start: start,
    end: end,
    loop: loop,
    style: segment.style
  };
}
function _boundSegment(segment, points, bounds) {
  if (!bounds) {
    return [segment];
  }
  var property = bounds.property,
    startBound = bounds.start,
    endBound = bounds.end;
  var count = points.length;
  var _propertyFn2 = propertyFn(property),
    compare = _propertyFn2.compare,
    between = _propertyFn2.between,
    normalize = _propertyFn2.normalize;
  var _getSegment = getSegment(segment, points, bounds),
    start = _getSegment.start,
    end = _getSegment.end,
    loop = _getSegment.loop,
    style = _getSegment.style;
  var result = [];
  var inside = false;
  var subStart = null;
  var value, point, prevValue;
  var startIsBefore = function startIsBefore() {
    return between(startBound, prevValue, value) && compare(startBound, prevValue) !== 0;
  };
  var endIsBefore = function endIsBefore() {
    return compare(endBound, value) === 0 || between(endBound, prevValue, value);
  };
  var shouldStart = function shouldStart() {
    return inside || startIsBefore();
  };
  var shouldStop = function shouldStop() {
    return !inside || endIsBefore();
  };
  for (var i = start, prev = start; i <= end; ++i) {
    point = points[i % count];
    if (point.skip) {
      continue;
    }
    value = normalize(point[property]);
    if (value === prevValue) {
      continue;
    }
    inside = between(value, startBound, endBound);
    if (subStart === null && shouldStart()) {
      subStart = compare(value, startBound) === 0 ? i : prev;
    }
    if (subStart !== null && shouldStop()) {
      result.push(normalizeSegment({
        start: subStart,
        end: i,
        loop: loop,
        count: count,
        style: style
      }));
      subStart = null;
    }
    prev = i;
    prevValue = value;
  }
  if (subStart !== null) {
    result.push(normalizeSegment({
      start: subStart,
      end: end,
      loop: loop,
      count: count,
      style: style
    }));
  }
  return result;
}
function _boundSegments(line, bounds) {
  var result = [];
  var segments = line.segments;
  for (var i = 0; i < segments.length; i++) {
    var sub = _boundSegment(segments[i], line.points, bounds);
    if (sub.length) {
      result.push.apply(result, sub);
    }
  }
  return result;
}
function findStartAndEnd(points, count, loop, spanGaps) {
  var start = 0;
  var end = count - 1;
  if (loop && !spanGaps) {
    while (start < count && !points[start].skip) {
      start++;
    }
  }
  while (start < count && points[start].skip) {
    start++;
  }
  start %= count;
  if (loop) {
    end += start;
  }
  while (end > start && points[end % count].skip) {
    end--;
  }
  end %= count;
  return {
    start: start,
    end: end
  };
}
function solidSegments(points, start, max, loop) {
  var count = points.length;
  var result = [];
  var last = start;
  var prev = points[start];
  var end;
  for (end = start + 1; end <= max; ++end) {
    var cur = points[end % count];
    if (cur.skip || cur.stop) {
      if (!prev.skip) {
        loop = false;
        result.push({
          start: start % count,
          end: (end - 1) % count,
          loop: loop
        });
        start = last = cur.stop ? end : null;
      }
    } else {
      last = end;
      if (prev.skip) {
        start = end;
      }
    }
    prev = cur;
  }
  if (last !== null) {
    result.push({
      start: start % count,
      end: last % count,
      loop: loop
    });
  }
  return result;
}
function _computeSegments(line, segmentOptions) {
  var points = line.points;
  var spanGaps = line.options.spanGaps;
  var count = points.length;
  if (!count) {
    return [];
  }
  var loop = !!line._loop;
  var _findStartAndEnd = findStartAndEnd(points, count, loop, spanGaps),
    start = _findStartAndEnd.start,
    end = _findStartAndEnd.end;
  if (spanGaps === true) {
    return splitByStyles(line, [{
      start: start,
      end: end,
      loop: loop
    }], points, segmentOptions);
  }
  var max = end < start ? end + count : end;
  var completeLoop = !!line._fullLoop && start === 0 && end === count - 1;
  return splitByStyles(line, solidSegments(points, start, max, completeLoop), points, segmentOptions);
}
function splitByStyles(line, segments, points, segmentOptions) {
  if (!segmentOptions || !segmentOptions.setContext || !points) {
    return segments;
  }
  return doSplitByStyles(line, segments, points, segmentOptions);
}
function doSplitByStyles(line, segments, points, segmentOptions) {
  var chartContext = line._chart.getContext();
  var baseStyle = readStyle(line.options);
  var datasetIndex = line._datasetIndex,
    spanGaps = line.options.spanGaps;
  var count = points.length;
  var result = [];
  var prevStyle = baseStyle;
  var start = segments[0].start;
  var i = start;
  function addStyle(s, e, l, st) {
    var dir = spanGaps ? -1 : 1;
    if (s === e) {
      return;
    }
    s += count;
    while (points[s % count].skip) {
      s -= dir;
    }
    while (points[e % count].skip) {
      e += dir;
    }
    if (s % count !== e % count) {
      result.push({
        start: s % count,
        end: e % count,
        loop: l,
        style: st
      });
      prevStyle = st;
      start = e % count;
    }
  }
  for (var _iterator11 = _createForOfIteratorHelperLoose(segments), _step11; !(_step11 = _iterator11()).done;) {
    var segment = _step11.value;
    start = spanGaps ? start : segment.start;
    var prev = points[start % count];
    var style = void 0;
    for (i = start + 1; i <= segment.end; i++) {
      var pt = points[i % count];
      style = readStyle(segmentOptions.setContext(createContext(chartContext, {
        type: 'segment',
        p0: prev,
        p1: pt,
        p0DataIndex: (i - 1) % count,
        p1DataIndex: i % count,
        datasetIndex: datasetIndex
      })));
      if (styleChanged(style, prevStyle)) {
        addStyle(start, i - 1, segment.loop, prevStyle);
      }
      prev = pt;
      prevStyle = style;
    }
    if (start < i - 1) {
      addStyle(start, i - 1, segment.loop, prevStyle);
    }
  }
  return result;
}
function readStyle(options) {
  return {
    backgroundColor: options.backgroundColor,
    borderCapStyle: options.borderCapStyle,
    borderDash: options.borderDash,
    borderDashOffset: options.borderDashOffset,
    borderJoinStyle: options.borderJoinStyle,
    borderWidth: options.borderWidth,
    borderColor: options.borderColor
  };
}
function styleChanged(style, prevStyle) {
  if (!prevStyle) {
    return false;
  }
  var cache = [];
  var replacer = function replacer(key, value) {
    if (!isPatternOrGradient(value)) {
      return value;
    }
    if (!cache.includes(value)) {
      cache.push(value);
    }
    return cache.indexOf(value);
  };
  return JSON.stringify(style, replacer) !== JSON.stringify(prevStyle, replacer);
}


/***/ }),

/***/ "./src/admin/components/LoginLogsPage.js":
/*!***********************************************!*\
  !*** ./src/admin/components/LoginLogsPage.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "default", function() { return LoginLogsPage; });
/* harmony import */ var _babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @babel/runtime/helpers/esm/inheritsLoose */ "./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js");
/* harmony import */ var flarum_admin_components_ExtensionPage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! flarum/admin/components/ExtensionPage */ "flarum/admin/components/ExtensionPage");
/* harmony import */ var flarum_admin_components_ExtensionPage__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(flarum_admin_components_ExtensionPage__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var chart_js_auto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! chart.js/auto */ "./node_modules/chart.js/auto/auto.js");



var LoginLogsPage = /*#__PURE__*/function (_ExtensionPage) {
  function LoginLogsPage() {
    return _ExtensionPage.apply(this, arguments) || this;
  }
  Object(_babel_runtime_helpers_esm_inheritsLoose__WEBPACK_IMPORTED_MODULE_0__["default"])(LoginLogsPage, _ExtensionPage);
  var _proto = LoginLogsPage.prototype;
  _proto.oninit = function oninit(vnode) {
    _ExtensionPage.prototype.oninit.call(this, vnode);
    this.selectedTimeRange = 'day'; // Default: Day
    this.selectedStartDate = null;
    this.selectedEndDate = null;
    this.selectedUser = null;
    this.graphData = null;
    //this.logs = [];
    //this.users = [];
    //this.total = [];
    this.currentPage = 1;
    this.itemsPerPage = 10;

    // Fetch data for the table and graph
    this.fetchData();
  };
  _proto.fetchData = function fetchData() {
    var _this = this;
    // Create filters based on selected options
    var url_stats = app.forum.attribute('apiUrl') + '/loginLogStats';
    var filters = [];
    var offset = (this.currentPage - 1) * this.itemsPerPage;
    if (this.selectedTimeRange) filters.push("timeRange=" + this.selectedTimeRange);
    if (this.selectedStartDate) filters.push("startDate=" + this.selectedStartDate);
    if (this.selectedEndDate) filters.push("endDate=" + this.selectedEndDate);
    if (this.selectedUser) filters.push("user=" + this.selectedUser);
    var url_logs = app.forum.attribute('apiUrl') + '/loginLogs';
    if (filters.length) url_logs += '?' + filters.join('&');
    url_logs += '&offset=' + offset;

    // Fetch logs for the table (implement similar filtering for logs if needed)
    app.request({
      method: 'GET',
      url: url_logs
    }).then(function (response) {
      _this.logs = response.data;
      m.redraw();
    });
    var url_total = app.forum.attribute('apiUrl') + '/loginLogsTotal';
    if (filters.length) url_total += '?' + filters.join('&');
    app.request({
      method: 'GET',
      url: url_total
    }).then(function (response) {
      _this.total = response.data;
      m.redraw();
    });
    app.request({
      method: 'GET',
      url: app.forum.attribute('apiUrl') + '/users'
    }).then(function (response) {
      _this.users = response.data.map(function (user) {
        return {
          id: user.id,
          username: user.attributes.username
        };
      });
      m.redraw();
    });
    if (filters.length) url_stats += '?' + filters.join('&');

    // Fetch data
    app.request({
      method: 'GET',
      url: url_stats
    }).then(function (response) {
      _this.graphData = response.data;
      m.redraw();
      _this.waitForCanvasAndCreateChart();
    });
  };
  _proto.waitForCanvasAndCreateChart = function waitForCanvasAndCreateChart() {
    var _this2 = this;
    var interval = setInterval(function () {
      var chartElement = document.getElementById('loginsChart');
      if (chartElement) {
        clearInterval(interval);
        var ctx = chartElement.getContext('2d');
        if (ctx) {
          _this2.createChart(ctx); // Call your chart creation logic
        }
      }
    }, 100); // Check every 100ms
  };
  _proto.createChart = function createChart(ctx) {
    if (!this.graphData) return;

    // Extract labels and data for the chart
    var labels = this.graphData.map(function (log) {
      return log.attributes.date;
    });
    var data = this.graphData.map(function (log) {
      return log.attributes.logins;
    });
    if (this.chartInstance) {
      this.chartInstance.destroy();
    }
    this.chartInstance = new chart_js_auto__WEBPACK_IMPORTED_MODULE_2__["default"](ctx, {
      type: 'line',
      data: {
        labels: labels,
        datasets: [{
          label: 'Logins per Day',
          data: data,
          backgroundColor: 'rgba(75, 192, 192, 0.2)',
          borderColor: 'rgba(75, 192, 192, 1)',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  };
  _proto.content = function content() {
    var _this3 = this;
    if (!this.users || !this.logs || !this.total) {
      return m("div", null, "Cargando..."); // Show loading while data is being fetched
    }
    console.log(this.users);
    console.log(this.logs);
    console.log(this.total);
    var totalPages = Math.ceil(this.total[0].attributes.total / this.itemsPerPage);
    var start = (this.currentPage - 1) * this.itemsPerPage;
    var end = start + this.itemsPerPage;
    var visibleLogs = this.logs.slice(start, end);
    console.log(totalPages);
    console.log(this.currentPage);
    return m("div", {
      className: "LoginLogsPage"
    }, m("div", {
      className: "container"
    }, m("h2", null, "Login Logs"), m("div", {
      style: "display: flex; gap: 10px; width: 30%; margin-bottom: 5px;"
    }, m("input", {
      type: "date",
      "class": "FormControl FormControl",
      onchange: function onchange(event) {
        _this3.selectedStartDate = event.target.value;
        _this3.fetchData();
      }
    }), m("input", {
      type: "date",
      "class": "FormControl FormControl",
      onchange: function onchange(event) {
        _this3.selectedEndDate = event.target.value;
        _this3.fetchData();
      }
    }), this.users.length > 0 && m("span", {
      "class": "Select"
    }, m("select", {
      "class": "Select-input FormControl",
      onchange: function onchange(event) {
        _this3.selectedUser = event.target.value;
        _this3.fetchData();
      }
    }, m("option", {
      value: ""
    }, "Todos los usuarios"), this.users.map(function (user) {
      return m("option", {
        value: user.id
      }, user.username);
    })))), m("table", {
      className: "DashboardWidget Widget LoginLogsTable"
    }, m("thead", null, m("tr", null, m("th", null, "Usuario"), m("th", null, "Tiempo de conexi\xF3n"), m("th", null, "Tiempo de desconexi\xF3n"))), m("tbody", null, this.logs.map(function (log) {
      return m("tr", null, m("td", null, log.attributes.username), m("td", null, log.attributes.logged_in_at), m("td", null, log.attributes.logged_out_at || 'N/A'));
    }))), m("div", {
      className: "pagination-controls"
    }, m("nav", {
      "class": "UserListPage-gridPagination"
    }, m("button", {
      onclick: function onclick() {
        _this3.currentPage = 1;
        _this3.tempPage = _this3.currentPage;
        _this3.fetchData();
      },
      disabled: this.currentPage === 1,
      "class": "Button Button--icon UserListPage-firstPageBtn hasIcon",
      type: "button",
      "aria-label": "core.admin.users.pagination.first_page_button"
    }, m("i", {
      "aria-hidden": "true",
      "class": "icon fas fa-step-backward Button-icon"
    }), m("span", {
      "class": "Button-label"
    })), m("button", {
      onclick: function onclick() {
        _this3.currentPage -= 1;
        _this3.tempPage = _this3.currentPage;
        _this3.fetchData();
      },
      disabled: this.currentPage === 1,
      "class": "Button Button--icon UserListPage-backBtn hasIcon",
      type: "button",
      "aria-label": "Previous page"
    }, m("i", {
      "aria-hidden": "true",
      "class": "icon fas fa-chevron-left Button-icon"
    }), m("span", {
      "class": "Button-label"
    })), m("span", {
      "class": "UserListPage-pageNumber"
    }, "P\xE1gina ", m("input", {
      oninput: function oninput(event) {
        _this3.tempPage = event.target.value; // Track the temporary input value
      },
      onkeydown: function onkeydown(event) {
        if (event.key === "Enter") {
          var pageNumber = parseInt(_this3.tempPage, 10); // Use the temporary value
          if (!isNaN(pageNumber)) {
            _this3.currentPage = pageNumber;
            _this3.fetchData();
          } else if (_this3.tempPage === "") {
            _this3.tempPage = null; // Allow empty input without triggering
          }
        }
      },
      type: "text",
      inputmode: "numeric",
      pattern: "[0-9]*",
      "aria-label": "Go directly to page number",
      autocomplete: "off",
      "class": "FormControl UserListPage-pageNumberInput",
      value: this.tempPage !== undefined ? this.tempPage : this.currentPage
    }), " de ", totalPages), m("button", {
      onclick: function onclick() {
        _this3.currentPage += 1;
        _this3.tempPage = _this3.currentPage;
        _this3.fetchData();
      },
      disabled: this.currentPage === totalPages,
      "class": "Button Button--icon UserListPage-nextBtn hasIcon",
      type: "button",
      "aria-label": "Next page"
    }, m("i", {
      "aria-hidden": "true",
      "class": "icon fas fa-chevron-right Button-icon"
    }), m("span", {
      "class": "Button-label"
    })), m("button", {
      onclick: function onclick() {
        _this3.currentPage = totalPages;
        _this3.tempPage = _this3.currentPage;
        _this3.fetchData();
      },
      disabled: "",
      "class": "Button Button--icon UserListPage-lastPageBtn hasIcon",
      type: "button",
      "aria-label": "core.admin.users.pagination.last_page_button"
    }, m("i", {
      "aria-hidden": "true",
      "class": "icon fas fa-step-forward Button-icon"
    }), m("span", {
      "class": "Button-label"
    })))), m("h2", null, "Logins Chart"), m("div", null, m("canvas", {
      id: "loginsChart"
    }))));
  };
  return LoginLogsPage;
}(flarum_admin_components_ExtensionPage__WEBPACK_IMPORTED_MODULE_1___default.a);


/***/ }),

/***/ "./src/admin/index.js":
/*!****************************!*\
  !*** ./src/admin/index.js ***!
  \****************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var flarum_admin_app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! flarum/admin/app */ "flarum/admin/app");
/* harmony import */ var flarum_admin_app__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(flarum_admin_app__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var flarum_admin_components_StatisticsPage__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! flarum/admin/components/StatisticsPage */ "flarum/admin/components/StatisticsPage");
/* harmony import */ var flarum_admin_components_StatisticsPage__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(flarum_admin_components_StatisticsPage__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _components_LoginLogsPage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./components/LoginLogsPage */ "./src/admin/components/LoginLogsPage.js");



flarum_admin_app__WEBPACK_IMPORTED_MODULE_0___default.a.initializers.add('hospital-clinico-puq-login-logs', function () {
  flarum_admin_app__WEBPACK_IMPORTED_MODULE_0___default.a.extensionData["for"]('hospital-clinico-puq-login-logs').registerPage(_components_LoginLogsPage__WEBPACK_IMPORTED_MODULE_2__["default"]);
  console.log('Login Logs admin extension asdinitialized');
});

/***/ }),

/***/ "flarum/admin/app":
/*!**************************************************!*\
  !*** external "flarum.core.compat['admin/app']" ***!
  \**************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = flarum.core.compat['admin/app'];

/***/ }),

/***/ "flarum/admin/components/ExtensionPage":
/*!***********************************************************************!*\
  !*** external "flarum.core.compat['admin/components/ExtensionPage']" ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = flarum.core.compat['admin/components/ExtensionPage'];

/***/ }),

/***/ "flarum/admin/components/StatisticsPage":
/*!************************************************************************!*\
  !*** external "flarum.core.compat['admin/components/StatisticsPage']" ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

module.exports = flarum.core.compat['admin/components/StatisticsPage'];

/***/ })

/******/ });


flarum.extensions['hospital-clinico-puq-login-logs']=module.exports;

var module={};

module.exports=function(e){var n={};function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}return o.m=e,o.c=n,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)o.d(t,r,function(n){return e[n]}.bind(null,r));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="",o(o.s=3)}([function(e,n){e.exports=flarum.core.compat["common/extend"]},function(e,n){e.exports=flarum.core.compat["admin/components/ExtensionPage"]},function(e,n){e.exports=flarum.core.compat["admin/components/AdminNav"]},function(e,n,o){"use strict";o.r(n);var t=o(0),r=o(1),i=o.n(r),s=o(2),a=o.n(s);app.initializers.add("hospital-clinico-puq-customizations",(function(){console.log("EXTENSION NAMEasd is working!"),Object(t.extend)(i.a.prototype,"oncreate",(function(){var e=this.element;try{var n=e.children[0].children[0].childNodes[2].children[1];n&&n.classList.contains("ExtensionInfo")&&(n.remove(),console.log("ExtensionInfo removed successfully!"))}catch(e){console.error("Failed to remove ExtensionInfo:",e)}})),Object(t.extend)(a.a.prototype,"extensionItems",(function(e){console.log(e);var n=["extension-flarum-approval","extension-flarum-bbcode","extension-flarum-emoji","extension-flarum-flags","extension-fof-pages","extension-fof-upload","extension-fof-user-directory","extension-justoverclock-newsletter","extension-afrux-forum-widgets-core","extension-flarum-likes","extension-flarum-lock","extension-flarum-markdown","extension-flarum-mentions","extension-flarum-nicknames","extension-flarum-pusher","extension-flamarkt-signup-page","extension-flarum-sticky","extension-flarum-subscriptions","extension-flarum-suspend","extension-isaced-email-verification-switch","extension-hospital-clinico-puq-user-views","extension-clarkwinkelmann-who-read","category-theme","extension-blomstra-welcome-login","category-language","extension-flarum-lang-english","extension-flarum-lang-spanish"];for(var o in n)console.log(n[o]),e.remove(n[o])}))}))}]);


flarum.extensions['hospital-clinico-puq-customizations']=module.exports;

var module={};

(()=>{var e={n:r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return e.d(t,{a:t}),t},d:(r,t)=>{for(var s in t)e.o(t,s)&&!e.o(r,s)&&Object.defineProperty(r,s,{enumerable:!0,get:t[s]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};(()=>{"use strict";e.r(r),e.d(r,{SortMap:()=>o});const t=flarum.core.compat["admin/app"];var s=e.n(t),o=function(){function e(){}return e.prototype.sortMap=function(){return{username_az:"username",username_za:"-username",newest:"-joinedAt",oldest:"joinedAt",most_discussions:"-discussionCount",least_discussions:"discussionCount"}},e}();s().initializers.add("fof-user-directory",(function(e){var r={"":e.translator.trans("fof-user-directory.lib.sort.not_specified")};Object.keys((new o).sortMap()).forEach((function(t){r[t]=e.translator.trans("fof-user-directory.lib.sort."+t)})),e.extensionData.for("fof-user-directory").registerSetting({setting:"fof-user-directory-link",label:e.translator.trans("fof-user-directory.admin.settings.link"),type:"boolean"}).registerSetting({setting:"fof-user-directory.use-small-cards",label:e.translator.trans("fof-user-directory.admin.settings.use-small-cards"),type:"boolean"}).registerSetting({setting:"fof-user-directory.disable-global-search-source",label:e.translator.trans("fof-user-directory.admin.settings.disable-global-search-source"),type:"boolean"}).registerSetting({setting:"fof-user-directory.link-group-mentions",label:e.translator.trans("fof-user-directory.admin.settings.link-group-mentions"),type:"boolean"}).registerSetting({setting:"fof-user-directory.default-sort",label:e.translator.trans("fof-user-directory.admin.settings.default-sort"),options:r,type:"select",default:""}).registerPermission({icon:"far fa-address-book",label:e.translator.trans("fof-user-directory.admin.permissions.view_user_directory"),permission:"fof.user-directory.view",allowGuest:!0},"view")}))})(),module.exports=r})();


flarum.extensions['fof-user-directory']=module.exports;

var module={};

/*! For license information please see admin.js.LICENSE.txt */
(()=>{var t={24:(t,e,i)=>{var a=i(735).default;function n(){"use strict";t.exports=n=function(){return i},t.exports.__esModule=!0,t.exports.default=t.exports;var e,i={},o=Object.prototype,r=o.hasOwnProperty,s=Object.defineProperty||function(t,e,i){t[e]=i.value},l="function"==typeof Symbol?Symbol:{},u=l.iterator||"@@iterator",f=l.asyncIterator||"@@asyncIterator",d=l.toStringTag||"@@toStringTag";function c(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(e){c=function(t,e,i){return t[e]=i}}function p(t,e,i,a){var n=e&&e.prototype instanceof w?e:w,o=Object.create(n.prototype),r=new U(a||[]);return s(o,"_invoke",{value:P(t,i,r)}),o}function m(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}i.wrap=p;var h="suspendedStart",v="suspendedYield",g="executing",b="completed",y={};function w(){}function x(){}function _(){}var S={};c(S,u,(function(){return this}));var k=Object.getPrototypeOf,F=k&&k(k(B([])));F&&F!==o&&r.call(F,u)&&(S=F);var T=_.prototype=w.prototype=Object.create(S);function N(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function i(n,o,s,l){var u=m(t[n],t,o);if("throw"!==u.type){var f=u.arg,d=f.value;return d&&"object"==a(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){i("next",t,s,l)}),(function(t){i("throw",t,s,l)})):e.resolve(d).then((function(t){f.value=t,s(f)}),(function(t){return i("throw",t,s,l)}))}l(u.arg)}var n;s(this,"_invoke",{value:function(t,a){function o(){return new e((function(e,n){i(t,a,e,n)}))}return n=n?n.then(o,o):o()}})}function P(t,i,a){var n=h;return function(o,r){if(n===g)throw Error("Generator is already running");if(n===b){if("throw"===o)throw r;return{value:e,done:!0}}for(a.method=o,a.arg=r;;){var s=a.delegate;if(s){var l=L(s,a);if(l){if(l===y)continue;return l}}if("next"===a.method)a.sent=a._sent=a.arg;else if("throw"===a.method){if(n===h)throw n=b,a.arg;a.dispatchException(a.arg)}else"return"===a.method&&a.abrupt("return",a.arg);n=g;var u=m(t,i,a);if("normal"===u.type){if(n=a.done?b:v,u.arg===y)continue;return{value:u.arg,done:a.done}}"throw"===u.type&&(n=b,a.method="throw",a.arg=u.arg)}}}function L(t,i){var a=i.method,n=t.iterator[a];if(n===e)return i.delegate=null,"throw"===a&&t.iterator.return&&(i.method="return",i.arg=e,L(t,i),"throw"===i.method)||"return"!==a&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+a+"' method")),y;var o=m(n,t.iterator,i.arg);if("throw"===o.type)return i.method="throw",i.arg=o.arg,i.delegate=null,y;var r=o.arg;return r?r.done?(i[t.resultName]=r.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,y):r:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,y)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function C(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function U(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function B(t){if(t||""===t){var i=t[u];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function i(){for(;++n<t.length;)if(r.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=e,i.done=!0,i};return o.next=o}}throw new TypeError(a(t)+" is not iterable")}return x.prototype=_,s(T,"constructor",{value:_,configurable:!0}),s(_,"constructor",{value:x,configurable:!0}),x.displayName=c(_,d,"GeneratorFunction"),i.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,_):(t.__proto__=_,c(t,d,"GeneratorFunction")),t.prototype=Object.create(T),t},i.awrap=function(t){return{__await:t}},N(M.prototype),c(M.prototype,f,(function(){return this})),i.AsyncIterator=M,i.async=function(t,e,a,n,o){void 0===o&&(o=Promise);var r=new M(p(t,e,a,n),o);return i.isGeneratorFunction(e)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},N(T),c(T,d,"Generator"),c(T,u,(function(){return this})),c(T,"toString",(function(){return"[object Generator]"})),i.keys=function(t){var e=Object(t),i=[];for(var a in e)i.push(a);return i.reverse(),function t(){for(;i.length;){var a=i.pop();if(a in e)return t.value=a,t.done=!1,t}return t.done=!0,t}},i.values=B,U.prototype={constructor:U,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function a(a,n){return s.type="throw",s.arg=t,i.next=a,n&&(i.method="next",i.arg=e),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var n=a;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var o=n?n.completion:{};return o.type=t,o.arg=e,n?(this.method="next",this.next=n.finallyLoc,y):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),C(i),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var n=a.arg;C(i)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,i,a){return this.delegate={iterator:B(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=e),y}},i}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports},735:t=>{function e(i){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},183:(t,e,i)=>{var a=i(24)();t.exports=a;try{regeneratorRuntime=a}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}}},e={};function i(a){var n=e[a];if(void 0!==n)return n.exports;var o=e[a]={exports:{}};return t[a](o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var a in e)i.o(e,a)&&!i.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var a={};(()=>{"use strict";i.r(a),i.d(a,{components:()=>ut,extend:()=>xt});const t=flarum.core.compat["admin/app"];var e=i.n(t);function n(t,e){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},n(t,e)}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)}const r=flarum.core.compat["common/components/Button"];var s=i.n(r);const l=flarum.core.compat["admin/utils/saveSettings"];var u=i.n(l);const f=flarum.core.compat["common/components/Alert"];var d=i.n(f);const c=flarum.core.compat["common/components/Select"];var p=i.n(c);const h=flarum.core.compat["common/components/Switch"];var v=i.n(h);const g=flarum.core.compat["admin/components/UploadImageButton"];var b=function(t){function i(){return t.apply(this,arguments)||this}return o(i,t),i.prototype.resourceUrl=function(){return e().forum.attribute("apiUrl")+"/"+this.attrs.path},i}(i.n(g)());const y=flarum.core.compat["common/utils/withAttr"];var w=i.n(y);const x=flarum.core.compat["common/utils/Stream"];var _=i.n(x);const S=flarum.core.compat["admin/components/ExtensionPage"];var k=i.n(S);const F=flarum.core.compat["common/utils/ItemList"];var T=i.n(F);const N=flarum.core.compat["common/components/Modal"];var M=i.n(N);const P=flarum.core.compat["common/components/LoadingIndicator"];var L=i.n(P),O=function(t){function i(){return t.apply(this,arguments)||this}o(i,t);var a=i.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.uploading=!1,this.inspection={}},a.className=function(){return"Modal--small fof-upload-inspect-mime-modal"},a.title=function(){return e().translator.trans("fof-upload.admin.inspect-mime.title")},a.content=function(){return m("div",{className:"Modal-body"},m("p",null,e().translator.trans("fof-upload.admin.inspect-mime.description",{a:m("a",{href:"https://github.com/SoftCreatR/php-mime-detector"})})),m("p",null,e().translator.trans("fof-upload.admin.inspect-mime.select")),m("div",null,m("input",{type:"file",onchange:this.onupload.bind(this),disabled:this.uploading}),this.uploading?L().component():null),m("dl",null,m("dt",null,e().translator.trans("fof-upload.admin.inspect-mime.laravel-validation")),m("dd",null,void 0===this.inspection.laravel_validation?m("em",null,e().translator.trans("fof-upload.admin.inspect-mime.no-file-selected")):this.inspection.laravel_validation?e().translator.trans("fof-upload.admin.inspect-mime.validation-passed"):e().translator.trans("fof-upload.admin.inspect-mime.validation-failed",{error:this.inspection.laravel_validation_error||"?"}))),m("dl",null,m("dt",null,e().translator.trans("fof-upload.admin.inspect-mime.mime-detector")),m("dd",null,this.inspection.mime_detector?m("code",null,this.inspection.mime_detector):m("em",null,e().translator.trans("fof-upload.admin.inspect-mime.not-available")))),m("dl",null,m("dt",null,e().translator.trans("fof-upload.admin.inspect-mime.mime-fileinfo")),m("dd",null,this.inspection.php_mime?m("code",null,this.inspection.php_mime):m("em",null,e().translator.trans("fof-upload.admin.inspect-mime.not-available")))),m("dl",null,m("dt",null,e().translator.trans("fof-upload.admin.inspect-mime.guessed-extension")),m("dd",null,this.inspection.guessed_extension?m("code",null,this.inspection.guessed_extension):m("em",null,e().translator.trans("fof-upload.admin.inspect-mime.not-available")))))},a.onupload=function(t){for(var i=this,a=new FormData,n=0;n<t.target.files.length;n++)a.append("files[]",t.target.files[n]);return this.uploading=!0,e().request({method:"POST",url:e().forum.attribute("apiUrl")+"/fof/upload/inspect-mime",serialize:function(t){return t},body:a}).then((function(t){i.uploading=!1,i.inspection=t,m.redraw()})).catch((function(t){throw i.uploading=!1,i.inspection={},m.redraw(),t}))},i}(M());const C=flarum.core.compat["common/helpers/icon"];var U=i.n(C);const B=flarum.core.compat["common/components/Link"];var E=i.n(B),I=function(t){function i(){return t.apply(this,arguments)||this}o(i,t);var a=i.prototype;return a.oninit=function(i){var a=this;t.prototype.oninit.call(this,i),this.loading=!1,this.fields=["resizeMaxWidth","cdnUrl","maxFileSize","whitelistedClientExtensions","composerButtonVisiblity","watermark","watermarkPosition","imgurClientId","awsS3Key","awsS3Secret","awsS3Bucket","awsS3Region","awsS3Endpoint","awsS3ACL","awsS3CustomUrl","qiniuKey","qiniuSecret","qiniuBucket"],this.checkboxes=["mustResize","addsWatermarks","disableHotlinkProtection","disableDownloadLogging","awsS3UsePathStyleEndpoint"],this.objects=["mimeTypes"],this.watermarkPositions={"top-left":"top-left","top-right":"top-right","bottom-left":"bottom-left","bottom-right":"bottom-right",center:"center",left:"left",top:"top",right:"right",bottom:"bottom"},this.composerButtonVisiblityOptions={both:e().translator.trans("fof-upload.admin.labels.composer_buttons.options.both"),"upload-btn":e().translator.trans("fof-upload.admin.labels.composer_buttons.options.upload-btn"),"media-btn":e().translator.trans("fof-upload.admin.labels.composer_buttons.options.media-btn")};var n=e().data.settings;this.settingsPrefix="fof-upload",this.uploadMethodOptions=n[this.addPrefix("availableUploadMethods")]||{},this.templateOptions=n[this.addPrefix("availableTemplates")]||{},this.values={},this.fields.forEach((function(t){return a.values[t]=_()(n[a.addPrefix(t)])})),this.checkboxes.forEach((function(t){return a.values[t]=_()("1"===n[a.addPrefix(t)])})),this.objects.forEach((function(t){return a.values[t]=n[a.addPrefix(t)]?_()(JSON.parse(n[a.addPrefix(t)])):_()()})),this.defaultAdap=Object.keys(this.uploadMethodOptions)[Object.keys(this.uploadMethodOptions).length-1],this.values.mimeTypes()||(this.values.mimeTypes=_()({"^image\\/.*":{adapter:this.defaultAdap,template:"image-preview"}})),this.newMimeType={regex:_()(""),adapter:_()(this.defaultAdap),template:_()("file")}},a.content=function(){var t=this,i=e().data.settings[this.addPrefix("php_ini.post_max_size")],a=e().data.settings[this.addPrefix("php_ini.upload_max_filesize")];return[m(".UploadPage",[m(".container",[m("form",{onsubmit:this.onsubmit.bind(this)},[m("fieldset",[m("legend",e().translator.trans("fof-upload.admin.labels.preferences.title")),m("label",e().translator.trans("fof-upload.admin.labels.preferences.max_file_size")),m("input.FormControl",{value:this.values.maxFileSize(),oninput:w()("value",this.values.maxFileSize),type:"number",min:"0"}),m(".helpText",e().translator.trans("fof-upload.admin.labels.preferences.php_ini_values",{post:i,upload:a})),m("label",e().translator.trans("fof-upload.admin.labels.preferences.mime_types")),m(".MimeTypes--Container",Object.keys(this.values.mimeTypes()).map((function(e){var i=t.values.mimeTypes()[e];return"object"!=typeof i&&(i={adapter:i,template:"file"}),m("div",[m("input.FormControl.MimeTypes",{value:e,oninput:w()("value",t.updateMimeTypeKey.bind(t,e))}),p().component({options:t.uploadMethodOptions,onchange:t.updateMimeTypeAdapter.bind(t,e,i),value:i.adapter||"local"}),p().component({options:t.getTemplateOptionsForInput(),onchange:t.updateMimeTypeTemplate.bind(t,e,i),value:i.template||"local"}),s().component({type:"button",className:"Button Button--warning",onclick:t.deleteMimeType.bind(t,e)},"x")])})),m("br"),m("div",[m("input.FormControl.MimeTypes.add-MimeType-key",{value:this.newMimeType.regex(),oninput:w()("value",this.newMimeType.regex)}),p().component({options:this.uploadMethodOptions,className:"add-MimeType-value",oninput:w()("value",this.newMimeType.adapter),value:this.newMimeType.adapter()}),p().component({options:this.getTemplateOptionsForInput(),className:"add-MimeType-value",oninput:w()("value",this.newMimeType.template),value:this.newMimeType.template()}),s().component({type:"button",className:"Button Button--warning",onclick:this.addMimeType.bind(this)},"+")])),m(".helpText",e().translator.trans("fof-upload.admin.help_texts.mime_types")),s().component({className:"Button",onclick:function(){e().modal.show(O)}},e().translator.trans("fof-upload.admin.labels.inspect-mime")),m(".helpText",e().translator.trans("fof-upload.admin.help_texts.download_templates")),this.templateOptionsDescriptions()]),m("fieldset.composerButtons",[m("legend",e().translator.trans("fof-upload.admin.labels.composer_buttons.title")),m(".helpText",e().translator.trans("fof-upload.admin.help_texts.composer_buttons")),m("div",[p().component({options:this.composerButtonVisiblityOptions,onchange:this.values.composerButtonVisiblity,value:this.values.composerButtonVisiblity()||"both"})])]),m("fieldset",[m("legend",e().translator.trans("fof-upload.admin.labels.resize.title")),m(".helpText",e().translator.trans("fof-upload.admin.help_texts.resize")),v().component({state:this.values.mustResize()||!1,onchange:this.values.mustResize},e().translator.trans("fof-upload.admin.labels.resize.toggle")),m("label",e().translator.trans("fof-upload.admin.labels.resize.max_width")),m("input",{className:"FormControl",value:this.values.resizeMaxWidth()||100,oninput:w()("value",this.values.resizeMaxWidth),disabled:!this.values.mustResize(),type:"number",min:"0"})]),m("fieldset",[m("legend",e().translator.trans("fof-upload.admin.labels.client_extension.title")),m(".helpText",e().translator.trans("fof-upload.admin.help_texts.client_extension")),m("input",{className:"FormControl",value:this.values.whitelistedClientExtensions()||"",oninput:w()("value",this.values.whitelistedClientExtensions)})]),m("fieldset",[m("legend",e().translator.trans("fof-upload.admin.labels.watermark.title")),m(".helpText",e().translator.trans("fof-upload.admin.help_texts.watermark")),v().component({state:this.values.addsWatermarks()||!1,onchange:this.values.addsWatermarks},e().translator.trans("fof-upload.admin.labels.watermark.toggle")),m("label",e().translator.trans("fof-upload.admin.labels.watermark.position")),m("div",[p().component({options:this.watermarkPositions,onchange:this.values.watermarkPosition,value:this.values.watermarkPosition()||"bottom-right"})]),m("label",{},e().translator.trans("fof-upload.admin.labels.watermark.file")),b.component({name:"fof-watermark",path:"fof/watermark"})]),m("fieldset",[m("legend",e().translator.trans("fof-upload.admin.labels.disable-hotlink-protection.title")),m(".helpText",e().translator.trans("fof-upload.admin.help_texts.disable-hotlink-protection")),v().component({state:this.values.disableHotlinkProtection()||!1,onchange:this.values.disableHotlinkProtection},e().translator.trans("fof-upload.admin.labels.disable-hotlink-protection.toggle")),m("legend",e().translator.trans("fof-upload.admin.labels.disable-download-logging.title")),m(".helpText",e().translator.trans("fof-upload.admin.help_texts.disable-download-logging")),v().component({state:this.values.disableDownloadLogging()||!1,onchange:this.values.disableDownloadLogging},e().translator.trans("fof-upload.admin.labels.disable-download-logging.toggle"))]),m("fieldset",[m("legend",e().translator.trans("fof-upload.admin.labels.local.title")),m("label",e().translator.trans("fof-upload.admin.labels.local.cdn_url")),m("input.FormControl",{value:this.values.cdnUrl()||"",oninput:w()("value",this.values.cdnUrl)})]),this.adaptorItems().toArray(),s().component({type:"submit",className:"Button Button--primary",loading:this.loading,disabled:!this.changed()},e().translator.trans("core.admin.settings.submit_button"))])])])]},a.adaptorItems=function(){var t=new(T());return void 0!==this.uploadMethodOptions.imgur&&t.add("imgur",m("div",{className:"imgur"},m("fieldset",null,m("legend",null,e().translator.trans("fof-upload.admin.labels.imgur.title")),m("p",null,U()("fas fa-exclamation-circle")," ",e().translator.trans("fof-upload.admin.labels.imgur.tos",{a:m(E(),{href:"https://imgur.com/tos",external:!0,target:"_blank"})})),m("label",null,e().translator.trans("fof-upload.admin.labels.imgur.client_id")),m("input",{className:"FormControl",value:this.values.imgurClientId()||"",oninput:w()("value",this.values.imgurClientId)}))),100),void 0!==this.uploadMethodOptions.qiniu&&t.add("qiniu",m(".qiniu",[m("fieldset",[m("legend",e().translator.trans("fof-upload.admin.labels.qiniu.title")),m("label",e().translator.trans("fof-upload.admin.labels.qiniu.key")),m("input.FormControl",{value:this.values.qiniuKey()||"",oninput:w()("value",this.values.qiniuKey)}),m("label",{},e().translator.trans("fof-upload.admin.labels.qiniu.secret")),m("input.FormControl",{value:this.values.qiniuSecret()||"",oninput:w()("value",this.values.qiniuSecret)}),m("label",{},e().translator.trans("fof-upload.admin.labels.qiniu.bucket")),m("input.FormControl",{value:this.values.qiniuBucket()||"",oninput:w()("value",this.values.qiniuBucket)})])]),80),void 0!==this.uploadMethodOptions["aws-s3"]&&t.add("aws-s3",m(".aws",[m("fieldset",[m("legend",e().translator.trans("fof-upload.admin.labels.aws-s3.title")),m(".helpText",e().translator.trans("fof-upload.admin.help_texts.s3_instance_profile")),m("label",e().translator.trans("fof-upload.admin.labels.aws-s3.key")),m("input.FormControl",{value:this.values.awsS3Key()||"",oninput:w()("value",this.values.awsS3Key)}),m("label",e().translator.trans("fof-upload.admin.labels.aws-s3.secret")),m("input.FormControl",{value:this.values.awsS3Secret()||"",oninput:w()("value",this.values.awsS3Secret)}),m("label",e().translator.trans("fof-upload.admin.labels.aws-s3.bucket")),m("input.FormControl",{value:this.values.awsS3Bucket()||"",oninput:w()("value",this.values.awsS3Bucket)}),m("label",e().translator.trans("fof-upload.admin.labels.aws-s3.region")),m("input.FormControl",{value:this.values.awsS3Region()||"",oninput:w()("value",this.values.awsS3Region)})]),m("fieldset",[m("legend",e().translator.trans("fof-upload.admin.labels.aws-s3.advanced_title")),m(".helpText",e().translator.trans("fof-upload.admin.help_texts.s3_compatible_storage")),m("label",e().translator.trans("fof-upload.admin.labels.aws-s3.endpoint")),m("input.FormControl",{value:this.values.awsS3Endpoint()||"",oninput:w()("value",this.values.awsS3Endpoint)}),v().component({state:this.values.awsS3UsePathStyleEndpoint()||!1,onchange:this.values.awsS3UsePathStyleEndpoint},e().translator.trans("fof-upload.admin.labels.aws-s3.use_path_style_endpoint")),m("label",e().translator.trans("fof-upload.admin.labels.aws-s3.acl")),m("input.FormControl",{value:this.values.awsS3ACL()||"",oninput:w()("value",this.values.awsS3ACL)}),m(".helpText",e().translator.trans("fof-upload.admin.help_texts.s3_acl")),m("label",e().translator.trans("fof-upload.admin.labels.aws-s3.custom_url")),m("input.FormControl",{value:this.values.awsS3CustomUrl()||"",oninput:w()("value",this.values.awsS3CustomUrl)}),m(".helpText",e().translator.trans("fof-upload.admin.help_texts.custom_s3_url"))])]),60),t},a.getTemplateOptionsForInput=function(){var t={};for(var e in this.templateOptions)this.templateOptions.hasOwnProperty(e)&&(t[e]=this.templateOptions[e].name);return t},a.updateMimeTypeKey=function(t,e){this.values.mimeTypes()[e]=this.values.mimeTypes()[t],this.deleteMimeType(t)},a.updateMimeTypeAdapter=function(t,e,i){e.adapter=i,this.values.mimeTypes()[t]=e},a.updateMimeTypeTemplate=function(t,e,i){e.template=i,this.values.mimeTypes()[t]=e},a.deleteMimeType=function(t){delete this.values.mimeTypes()[t]},a.templateOptionsDescriptions=function(){var t=[];for(var e in this.templateOptions)this.templateOptions.hasOwnProperty(e)&&t.push(m("li",null,this.templateOptions[e].name,": ",m.trust(this.templateOptions[e].description)));return m("ul",t)},a.addMimeType=function(){this.values.mimeTypes()[this.newMimeType.regex()]={adapter:this.newMimeType.adapter(),template:this.newMimeType.template()},this.newMimeType.regex(""),this.newMimeType.adapter("local"),this.newMimeType.template("file")},a.changed=function(){var t=this,i=this.fields.some((function(i){return t.values[i]()!==e().data.settings[t.addPrefix(i)]})),a=this.checkboxes.some((function(i){return t.values[i]()!==("1"===e().data.settings[t.addPrefix(i)])})),n=this.objects.some((function(i){return JSON.stringify(t.values[i]())!==e().data.settings[t.addPrefix(i)]}));return i||a||n},a.onsubmit=function(t){var i=this;if(t.preventDefault(),!this.loading){this.loading=!0,e().alerts.dismiss(this.successAlert);var a={};this.fields.forEach((function(t){return a[i.addPrefix(t)]=i.values[t]()})),this.checkboxes.forEach((function(t){return a[i.addPrefix(t)]=i.values[t]()})),this.objects.forEach((function(t){return a[i.addPrefix(t)]=JSON.stringify(i.values[t]())})),u()(a).then((function(){i.successAlert=e().alerts.show(d(),{type:"success"},e().translator.trans("core.admin.settings.saved_message"))})).catch((function(){})).then((function(){i.loading=!1,m.redraw()}))}},a.addPrefix=function(t){return this.settingsPrefix+"."+t},i}(k());const A=flarum.core.compat["common/extend"],j=flarum.core.compat["admin/components/AdminNav"];var D=i.n(j);const z=flarum.core.compat["common/components/LinkButton"];var R=i.n(z);function H(){return H=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)({}).hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},H.apply(null,arguments)}function q(t,e,i,a,n,o,r){try{var s=t[o](r),l=s.value}catch(t){return void i(t)}s.done?e(l):Promise.resolve(l).then(a,n)}function W(t){return function(){var e=this,i=arguments;return new Promise((function(a,n){var o=t.apply(e,i);function r(t){q(o,a,n,r,s,"next",t)}function s(t){q(o,a,n,r,s,"throw",t)}r(void 0)}))}}var G=i(183),K=i.n(G);const V=flarum.core.compat["common/app"];var J=i.n(V),Y=new Map([["image/png","far fa-file-image"],["image/jpg","far fa-file-image"],["image/jpeg","far fa-file-image"],["image/svg+xml","far fa-file-image"],["image/gif","far fa-file-image"],["image/bmp","far fa-file-image"],["image/webp","far fa-file-image"],["application/zip","far fa-file-archive"],["application/x-7z-compressed","far fa-file-archive"],["application/gzip","far fa-file-archive"],["application/vnd.rar","far fa-file-archive"],["application/x-rar-compressed","far fa-file-archive"],["application/x-tar","far fa-file-archive"],["application/x-iso9660-image","far fa-file-archive"],["text/plain","far fa-file-alt"],["text/csv","far fa-file-csv"],["text/xml","far fa-file-code"],["text/html","far fa-file-code"],["text/css","far fa-file-code"],["text/javascript","far fa-file-code"],["application/json","far fa-file-code"],["application/ld+json","far fa-file-code"],["application/x-httpd-php","far fa-file-code"],["application/xml","far fa-file-code"],["text/xml","far fa-file-code"],["application/x-abiword","far fa-file-word"],["application/msword","far fa-file-word"],["application/vnd.openxmlformats-officedocument.wordprocessingml.document","far fa-file-word"],["application/vnd.oasis.opendocument.text","far fa-file-word"],["application/vnd.ms-excel","far fa-file-excel"],["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","far fa-file-excel"],["application/vnd.oasis.opendocument.spreadsheet","far fa-file-excel"],["application/vnd.ms-powerpoint","far fa-file-powerpoint"],["application/vnd.openxmlformats-officedocument.presentationml.presentation","far fa-file-powerpoint"],["application/vnd.oasis.opendocument.presentation","far fa-file-powerpoint"],["application/pdf","far fa-file-pdf"],["application/rtf","far fa-file-alt"],["application/epub+zip","far fa-book"],["application/x-mobipocket-ebook","far fa-book"],["application/vnd.amazon.ebook","far fa-book"],["audio/mpeg","far fa-file-audio"],["audio/wav","far fa-file-audio"],["audio/x-wav","far fa-file-audio"],["audio/aac","far fa-file-audio"],["audio/ogg","far fa-file-audio"],["audio/flac","far fa-file-audio"],["audio/aiff","far fa-file-audio"],["audio/x-aiff","far fa-file-audio"],["video/x-msvideo","far fa-file-video"],["video/mp4","far fa-file-video"],["video/quicktime","far fa-file-video"]]);function Q(t){return Y.get(t)||(t.startsWith("image/")?"far fa-file-image":t.startsWith("video/")?"far fa-file-video":t.startsWith("audio/")?"far fa-file-audio":"far fa-file")}var X=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).files=[],e.fileInput=null,e.options={shared:!0,hidden:!1},e.loading=!1,e}o(e,t);var i=e.prototype;return i.oninit=function(e){t.prototype.oninit.call(this,e)},i.className=function(){return"UploadSharedFileModal Modal--medium"},i.title=function(){return J().translator.trans("fof-upload.lib.upload-shared-file-modal.title")},i.onFileChange=function(t){this.addFiles(Array.from(t.target.files))},i.addFiles=function(t){var e;(e=this.files).push.apply(e,t),m.redraw()},i.onDragOver=function(t){t.preventDefault(),t.stopPropagation()},i.onDrop=function(t){t.preventDefault(),t.stopPropagation(),t.dataTransfer&&t.dataTransfer.files&&this.addFiles(Array.from(t.dataTransfer.files))},i.onDropzoneClick=function(){this.fileInput&&this.fileInput.click()},i.content=function(){var t=this;return m("div",{className:"Modal-body"},m("div",{className:"UploadSharedFileModal-dropzone",onclick:function(){return t.onDropzoneClick()},ondragover:this.onDragOver.bind(this),ondrop:this.onDrop.bind(this)},J().translator.trans("fof-upload.lib.upload-shared-file-modal.dropzone"),m("input",{type:"file",multiple:!0,onchange:this.onFileChange.bind(this),style:{opacity:0,position:"absolute",left:"-9999px"},oncreate:function(e){t.fileInput=e.dom}})),m("div",{className:"UploadSharedFileModal-files"},this.files.map((function(e){var i=e.type.startsWith("image/");return m("div",{className:"UploadedFile"},i?m("img",{src:URL.createObjectURL(e),alt:e.name}):m("i",{className:Q(e.type)}),m("div",{className:"UploadedFile-name"},e.name),m(s(),{className:"Button Button--icon Button--link UploadedFile-remove",icon:"fas fa-times",onclick:function(){t.files=t.files.filter((function(t){return t!==e}))}}))}))),m("div",{className:"UploadSharedFileModal-options Form-group"},m(v(),{state:this.options.hidden,onchange:function(e){return t.options.hidden=e}},J().translator.trans("fof-upload.lib.upload-shared-file-modal.hide-from-media-gallery"))),m("div",{className:"UploadSharedFileModal-submit App-primaryControl"},m(s(),{className:"Button Button--primary",loading:this.loading,onclick:this.upload.bind(this),disabled:!this.files.length||this.loading},J().translator.trans("fof-upload.lib.upload-shared-file-modal.upload"))))},i.upload=function(){var t=W(K().mark((function t(){var e,i,a,n=this;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,m.redraw(),e=new FormData,this.files.forEach((function(t){e.append("files[]",t)})),Object.keys(this.options).forEach((function(t){e.append("options["+t+"]",n.options[t])})),t.next=7,J().request({method:"POST",url:J().forum.attribute("apiUrl")+"/fof/upload",serialize:function(t){return t},body:e});case 7:i=t.sent,a=J().store.pushPayload(i),this.attrs.onUploadComplete(a),this.files=[],this.hide(),this.loading=!1,m.redraw();case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e}(M());const Z=flarum.core.compat["common/Component"];var $=i.n(Z),tt=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).file=void 0,e.callback=void 0,e.imageLoaded=!0,e.handleImageError=function(){e.imageLoaded=!1,m.redraw()},e.handleImageLoad=function(){e.imageLoaded=!0,m.redraw()},e}o(e,t);var i=e.prototype;return i.oninit=function(e){t.prototype.oninit.call(this,e),this.file=this.attrs.file},i.view=function(){var t=this,e=this.file.type().startsWith("image/"),i=Q(this.file.type()),a=this.file.isPrivateShared()?"fas fa-lock":"fas fa-unlock";return m("div",{className:"UploadedFile",key:this.file.uuid()},m("div",{className:"UploadedFile--sharestatus"},m("span",null,U()(a),this.file.baseName())),m("div",{className:"UploadedFile--preview",onclick:function(){return t.onFileClick(t.file)}},e?this.imageLoaded?m("img",{className:this.attrs.fileClassNames,src:this.file.url(),loading:"lazy",onerror:this.handleImageError,onload:this.handleImageLoad,alt:this.file.baseName()}):U()("fas fa-exclamation-triangle",{className:"icon-fallback"}):U()(i,{className:"icon-fallback"})),m("div",{className:"UploadedFile--actions"},this.actionItems().toArray()))},i.actionItems=function(){var t=this,e=new(T());e.add("view-info",m(s(),{className:"Button Button--icon",icon:"fas fa-info-circle",onclick:function(){return t.viewFileInfo()},"aria-label":"info"})),e.add("download",m(s(),{className:"Button Button--icon",icon:"fas fa-download",onclick:function(){return window.open(t.file.url())},"aria-label":"download"}));var i=this.file.isPrivateShared()?"fas fa-lock":this.file.hidden()?"fas fa-eye":"fas fa-eye-slash";return e.add("hide-file",m(s(),{className:"Button Button--icon",icon:i,onclick:function(){return t.hideFile()},"aria-label":"hide"})),e.add("delete",m(s(),{className:"Button Button--icon",icon:"fas fa-trash",onclick:function(){return t.confirmDelete()},"aria-label":"delete"})),e},i.confirmDelete=function(){var t=W(K().mark((function t(){var e;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!confirm("Are you sure you want to delete this file?")){t.next=6;break}return e=this.file.uuid(),t.next=5,J().request({method:"DELETE",url:J().forum.attribute("apiUrl")+"/fof/upload/delete/"+e});case 5:this.attrs.onDelete&&this.attrs.onDelete(this.file);case 6:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),i.viewFileInfo=function(){console.log("view file info")},i.hideFile=function(){console.log("hide file")},i.onFileClick=function(t){this.attrs.onFileSelect&&this.attrs.onFileSelect(t)},e}($());const et=flarum.core.compat["common/utils/classList"];var it=i.n(et);const at=flarum.core.compat["common/components/Tooltip"];var nt=i.n(at);const ot=flarum.core.compat["common/utils/extractText"];var rt=i.n(ot),st=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).isFileHiding=void 0,e.imageLoaded=!0,e.file=void 0,e.fileIcon=void 0,e.isSelected=void 0,e.isSelectable=void 0,e.handleImageError=function(){e.imageLoaded=!1,e.fileIcon="fas fa-exclamation-triangle",e.isSelectable=!1,m.redraw()},e.handleImageLoad=function(){e.imageLoaded=!0,m.redraw()},e}o(e,t);var i=e.prototype;return i.oninit=function(e){t.prototype.oninit.call(this,e),this.file=this.attrs.file,this.isFileHiding=void 0!==this.attrs.isFileHiding&&this.attrs.isFileHiding,this.fileIcon=Q(this.file.type()),this.isSelected=void 0!==this.attrs.isSelected&&this.attrs.isSelected,this.isSelectable=void 0===this.attrs.fileSelectable||this.attrs.fileSelectable},i.onbeforeupdate=function(e){t.prototype.onbeforeupdate.call(this,e),this.isSelected=void 0!==this.attrs.isSelected&&this.attrs.isSelected},i.view=function(){var t=this,e=this.file.type().startsWith("image/"),i=this.isSelected?"selected":"";return m("div",{className:"UploadedFile "+i,key:this.file.uuid(),onclick:function(){t.isSelectable&&!t.isFileHiding&&(t.isSelected=!t.isSelected,t.attrs.onFileClick(t.file))},disabled:!this.isSelectable||this.isFileHiding},this.imageLoaded&&e?m("img",{src:this.file.url(),className:"fof-file-image-preview",draggable:!1,onerror:this.handleImageError,onload:this.handleImageLoad,alt:this.file.baseName()}):this.displayIcon(this.fileIcon),m("div",{className:"fof-file-actions"},this.actionItems(this.file).toArray()),m("div",{className:"fof-file-name"},m(nt(),{text:this.file.baseName()},m("span",null,this.file.baseName()))),this.isFileHiding&&m("div",{class:"fof-file-loading",role:"status","aria-label":J().translator.trans("fof-upload.lib.file_list.hide_file.loading")},m(L(),null)))},i.displayIcon=function(t){return m("span",{className:"fof-file-icon",role:"presentation",style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}},U()("fa-fw "+t))},i.actionItems=function(t){var e=this,i=new(T());t.canViewInfo()&&i.add("view-info",m(s(),{className:"Button Button--icon fof-file-action",icon:"fas fa-info-circle","aria-label":"info",onclick:function(){return e.viewFileInfo()}}),100);var a=t.isShared()?"fof-upload.lib.file_list.hide_shared_file":"fof-upload.lib.file_list.hide_file",n=J().translator.trans(this.file.hidden()?a+".btn_a11y_label_show":a+".btn_a11y_label_hide",{fileName:t.baseName()});t.canHide()&&i.add("hide-file",m(nt(),{text:n,position:"bottom"},m(s(),{className:"Button Button--icon fof-file-action",icon:this.file.hidden()?"fas fa-eye":"fas fa-eye-slash","aria-label":n,disabled:this.isFileHiding,onclick:function(t){return e.hide(t)}})),80);var o=J().translator.trans("fof-upload.lib.file_list.delete_file_a11y_label",{fileName:t.baseName()});return t.canDelete()&&i.add("delete-file",m(nt(),{text:o,position:"bottom"},m(s(),{className:"Button Button--icon fof-file-action",icon:"fas fa-trash","aria-label":o,disabled:this.isFileHiding,onclick:function(t){return e.confirmDelete(t)}})),60),i},i.viewFileInfo=function(){console.log("view file info")},i.hide=function(t){t.stopPropagation(),this.attrs.onHide&&this.attrs.onHide(this.file)},i.confirmDelete=function(){var t=W(K().mark((function t(e){var i;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.stopPropagation(),!confirm(rt()(J().translator.trans("fof-upload.lib.file_list.delete_confirmation",{fileName:this.file.baseName()})))){t.next=6;break}return i=this.file.uuid(),t.next=5,J().request({method:"DELETE",url:J().forum.attribute("apiUrl")+"/fof/upload/delete/"+i});case 5:this.attrs.onDelete&&this.attrs.onDelete(this.file);case 6:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e}($()),lt=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).user=null,e.inModal=void 0,e.restrictFileType=void 0,e.downloadOnClick=void 0,e.filesBeingHidden=void 0,e.fileState=void 0,e}o(e,t);var i=e.prototype;return i.oninit=function(e){t.prototype.oninit.call(this,e),this.inModal=this.attrs.selectable,this.restrictFileType=this.attrs.restrictFileType||null,this.downloadOnClick=this.attrs.downloadOnClick||!1,this.filesBeingHidden=[],this.fileState=this.attrs.fileState,this.loadFileList()},i.view=function(){var t=this;return m("div",{className:"SharedFileList fof-upload-file-list","aria-live":"polite"},this.isLoading()&&0===this.fileCollection().length&&m("div",{className:"fof-upload-loading"},J().translator.trans("fof-upload.lib.file_list.loading"),m(L(),null)),!this.isLoading()&&0===this.fileCollection().length&&m("div",{className:"Placeholder"},m("p",{className:"fof-upload-empty"},J().translator.trans("fof-upload.lib.file_list.empty"))),m("ul",null,this.fileCollection().map((function(e){var i,a,n=Q(e.type()),o=!t.restrictFileType||t.isSelectable(e),r=it()(["fof-file","far fa-file-image"===n&&"fof-file-type-image",t.attrs.selectedFiles&&t.attrs.selectedFiles.indexOf(null!=(i=e.id())?i:"")>=0&&"fof-file-selected"]),s=t.filesBeingHidden.includes(e.uuid());return m("li",{"aria-busy":s,key:e.uuid()},m(st,{file:e,fileSelectable:o,isSelected:t.attrs.selectedFiles&&t.attrs.selectedFiles.indexOf(null!=(a=e.id())?a:"")>=0,fileClassNames:r,isFileHiding:s,onHide:t.hideFile.bind(t),onFileClick:t.onFileClick.bind(t),user:t.attrs.user,onDelete:t.onDelete.bind(t)}))}))),this.hasMoreResults()&&m("div",{className:"fof-load-more-files"},m(s(),{className:"Button Button--primary",disabled:this.isLoading(),loading:this.isLoading(),onclick:function(){return t.loadMore()}},J().translator.trans("fof-upload.lib.file_list.load_more_files_btn"))))},i.onDelete=function(t){this.attrs.onDelete&&this.attrs.onDelete(t)},i.onFileClick=function(t){this.attrs.onFileSelect?this.attrs.onFileSelect(t):this.attrs.downloadOnClick&&window.open(t.url())},i.isSelectable=function(t){var e=t.type();return Array.isArray(this.restrictFileType)?this.restrictFileType.indexOf(e)>=0:"image"===this.restrictFileType?e.includes("image/"):"audio"===this.restrictFileType?e.includes("audio/"):"video"===this.restrictFileType&&e.includes("video/")},i.hideFile=function(){var t=W(K().mark((function t(e){var i,a,n,o,r;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.uuid(),!this.filesBeingHidden.includes(i)){t.next=3;break}return t.abrupt("return");case 3:if(this.filesBeingHidden.push(i),a=e.isShared()?"fof-upload.lib.file_list.hide_shared_file":"fof-upload.lib.file_list.hide_file",!confirm(rt()(J().translator.trans(e.hidden()?a+".show_confirmation":a+".hide_confirmation",{fileName:e.baseName()})))){t.next=24;break}return t.prev=7,t.next=10,J().request({method:"PATCH",url:J().forum.attribute("apiUrl")+"/fof/upload/hide",body:{uuid:i}});case 10:n=t.sent,J().store.pushPayload(n),m.redraw(),J().alerts.show(d(),{type:"success"},[U()(e.hidden()?"fas fa-eye-slash":"fas fa-eye")," ",J().translator.trans(null!=e&&e.hidden()?a+".hide_success":a+".show_success")]),this.fileState.user&&(o=this.fileState.files.findIndex((function(t){return i===t.uuid()})),this.fileState.files.splice(o,1)),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(7),J().alerts.show(d(),{type:"error"},J().translator.trans(null!=e&&e.hidden()?a+".hide_fail":a+".show_fail",{fileName:e.baseName()}));case 20:return t.prev=20,r=this.filesBeingHidden.indexOf(i),this.filesBeingHidden.splice(r,1),t.finish(20);case 24:case"end":return t.stop()}}),t,this,[[7,17,20,24]])})));return function(e){return t.apply(this,arguments)}}(),e}($()),ut=H({},{UploadedFile:tt,UploadSharedFileModal:X,UserFileList:function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var i=e.prototype;return i.loadFileList=function(){this.fileState.setUser(this.attrs.user||J().session.user),this.user=this.fileState.user},i.hasMoreResults=function(){return this.fileState.hasMoreResults()},i.loadMore=function(){this.fileState.loadMore()},i.isLoading=function(){return this.fileState.isLoading()},i.fileCollection=function(){return this.fileState.files},e}(lt)},{UploadPage:I});const ft=flarum.core.compat["common/extenders"];var dt=i.n(ft);const ct=flarum.core.compat["common/Model"];var pt=i.n(ct),mt=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var i=e.prototype;return i.baseName=function(){return pt().attribute("baseName").call(this)},i.path=function(){return pt().attribute("path").call(this)},i.url=function(){return pt().attribute("url").call(this)},i.size=function(){return pt().attribute("size").call(this)},i.type=function(){return pt().attribute("type").call(this)},i.humanSize=function(){return pt().attribute("humanSize").call(this)},i.createdAt=function(){return pt().attribute("createdAt",pt().transformDate).call(this)},i.uuid=function(){return pt().attribute("uuid").call(this)},i.tag=function(){return pt().attribute("tag").call(this)},i.hidden=function(){return pt().attribute("hidden").call(this)},i.bbcode=function(){return pt().attribute("bbcode").call(this)},i.isShared=function(){return pt().attribute("shared").call(this)},i.isPrivateShared=function(){return pt().attribute("isPrivateShared").call(this)},i.canViewInfo=function(){return pt().attribute("canViewInfo").call(this)},i.canHide=function(){return pt().attribute("canHide").call(this)},i.canDelete=function(){return pt().attribute("canDelete").call(this)},i.apiEndpoint=function(){return"/fof/uploads"+(this.exists?"/"+this.id():"")},e}(pt());const ht=[(new(dt().Store)).add("files",mt).add("shared-files",mt)],vt=flarum.core.compat["admin/components/AdminPage"];var gt=i.n(vt),bt=function(t){function e(){return t.apply(this,arguments)||this}o(e,t);var i=e.prototype;return i.loadFileList=function(){this.fileState.loadResults()},i.hasMoreResults=function(){return this.fileState.hasMoreResults()},i.loadMore=function(){this.fileState.loadMore()},i.isLoading=function(){return this.fileState.isLoading()},i.fileCollection=function(){return this.fileState.files},e}(lt),yt=function(){function t(t){void 0===t&&(t=!1),this.user=void 0,this.files=void 0,this.moreResults=void 0,this.loading=void 0,this.sharedFiles=void 0,this.user=null,this.files=[],this.moreResults=!1,this.loading=!1,this.sharedFiles=t}var e=t.prototype;return e.setUser=function(t){t!==this.user&&(this.user=t,this.files=[],this.loadResults())},e.refresh=function(){this.files=[],this.loadResults(),m.redraw()},e.loadResults=function(){var t=W(K().mark((function t(e){var i,a,n;return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(void 0===e&&(e=0),this.sharedFiles||this.user){t.next=3;break}return t.abrupt("return",Promise.reject("User not set"));case 3:return this.loading=!0,i="fof/uploads",a={},!this.sharedFiles&&this.user?a={filter:{user:this.user.id()},page:{offset:e}}:(i="fof/upload/shared-files",a={page:{offset:e}}),t.next=9,J().store.find(i,a);case 9:return n=t.sent,t.abrupt("return",this.parseResults(n));case 11:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.loadMore=function(){var t=W(K().mark((function t(){return K().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,t.abrupt("return",this.loadResults(this.files.length));case 2:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.parseResults=function(t){var e;return this.files=this.files.concat(t),this.loading=!1,this.moreResults=!(null==(e=t.payload)||null==(e=e.links)||!e.next),m.redraw(),t},e.addToList=function(t){var e;Array.isArray(t)?(e=this.files).unshift.apply(e,t):this.files.unshift(t),m.redraw()},e.removeFromList=function(t){Array.isArray(t)?this.files=this.files.filter((function(e){return!t.includes(e)})):this.files=this.files.filter((function(e){return e!==t})),m.redraw()},e.hasFiles=function(){return this.files.length>0},e.isLoading=function(){return this.loading},e.hasMoreResults=function(){return this.moreResults},e.empty=function(){return!this.hasFiles()&&!this.isLoading()},t}(),wt=function(t){function i(){for(var e,i=arguments.length,a=new Array(i),n=0;n<i;n++)a[n]=arguments[n];return(e=t.call.apply(t,[this].concat(a))||this).sharedUploads=[],e.currentPage=1,e.fileState=void 0,e}o(i,t);var a=i.prototype;return a.oninit=function(e){t.prototype.oninit.call(this,e),this.fileState=new yt(!0)},a.headerInfo=function(){return{className:"SharedUploadPage--header",icon:"fas fa-file-upload",title:e().translator.trans("fof-upload.admin.shared-uploads.title"),description:e().translator.trans("fof-upload.admin.shared-uploads.description")}},a.content=function(){return m("div",{className:"SharedUploadPage--content"},m("p",{className:"helpText"},e().translator.trans("fof-upload.admin.shared-uploads.introduction")),m("hr",null),m("div",{className:"SharedUploadPage--main-actions"},this.mainActionItems().toArray()),m("hr",null),m("div",{className:"SharedUploadPage--uploads"},m(bt,{user:e().session.user,selectable:!1,fileState:this.fileState,onDelete:this.onDelete.bind(this)})))},a.showUploadModal=function(){var t=this;e().modal.show(X,{onUploadComplete:function(e){t.uploadComplete(e)}})},a.mainActionItems=function(){var t=this,i=new(T());return i.add("refresh",m(s(),{className:"Button Button--icon",icon:"fas fa-sync",onclick:function(){return t.refresh()}})),i.add("upload-new",m(s(),{className:"Button",icon:"fas fa-upload",onclick:function(){return t.showUploadModal()}},e().translator.trans("fof-upload.admin.shared-uploads.upload-new-button"))),i},a.fileActionItems=function(t){return new(T())},a.uploadComplete=function(t){console.log("upload complete",t),this.fileState.addToList(t)},a.refresh=function(){this.fileState.refresh()},a.onDelete=function(t){this.fileState.removeFromList(t)},i}(gt());const xt=[].concat(ht,[(new(dt().Routes)).add("adminUploads","/uploads",wt)]);e().initializers.add("fof-upload",(function(){e().extensionData.for("fof-upload").registerPage(I).registerPermission({icon:"far fa-file",label:e().translator.trans("fof-upload.admin.permissions.upload_label"),permission:"fof-upload.upload"},"start",50).registerPermission({icon:"fas fa-download",label:e().translator.trans("fof-upload.admin.permissions.download_label"),permission:"fof-upload.download",allowGuest:!0},"view",50).registerPermission({icon:"fas fa-eye",label:e().translator.trans("fof-upload.admin.permissions.view_user_uploads_label"),permission:"fof-upload.viewUserUploads"},"moderate",50).registerPermission({icon:"fas fa-trash",label:e().translator.trans("fof-upload.admin.permissions.delete_uploads_of_others_label"),permission:"fof-upload.deleteUserUploads"},"moderate",50).registerPermission({icon:"far fa-file-alt",label:e().translator.trans("fof-upload.admin.permissions.upload_shared_label"),permission:"fof-upload.upload-shared-files"},"start").registerPermission({icon:"far fa-file-alt",label:e().translator.trans("fof-upload.admin.permissions.access_shared_label"),permission:"fof-upload.access-shared-files"},"start"),(0,A.extend)(D().prototype,"items",(function(t){t.add("shared-uploads",m(R(),{href:e().route("adminUploads"),icon:"fas fa-file-upload",title:e().translator.trans("fof-upload.admin.shared-uploads.title")},e().translator.trans("fof-upload.admin.nav.shared-uploads-button")),49)}))}))})(),module.exports=a})();


flarum.extensions['fof-upload']=module.exports;

var module={};

(()=>{var e={n:t=>{var n=t&&t.__esModule?()=>t.default:()=>t;return e.d(n,{a:n}),n},d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t),e.d(t,{components:()=>Te,extend:()=>Ee});const n=flarum.core.compat["admin/app"];var r=e.n(n);function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}function i(e,t,n){if(void 0===n)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n}var s=function(e,t){if(!(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof t?Array.from(e):Array.from(e).filter((function(e){return 1===e.nodeType&&e.matches(t)}))},l=new Map,d=function(){function e(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(e.prototype,"config",{get:function(){var e={};return this._config.forEach((function(t,n){e[n]=t})),e},set:function(e){if("object"!=typeof e)throw new Error("You must provide a valid configuration object to the config setter.");var t=Object.assign({},e);this._config=new Map(Object.entries(t))},enumerable:!1,configurable:!0}),e.prototype.setConfig=function(e,t){if(!this._config.has(e))throw new Error("Trying to set invalid configuration item: "+e);this._config.set(e,t)},e.prototype.getConfig=function(e){if(!this._config.has(e))throw new Error("Invalid configuration item requested: "+e);return this._config.get(e)},Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){if(!(e instanceof HTMLElement)&&null!==e)throw new Error("A placeholder must be an html element or null.");this._placeholder=e},enumerable:!1,configurable:!0}),e.prototype.setData=function(e,t){if("string"!=typeof e)throw new Error("The key must be a string.");this._data.set(e,t)},e.prototype.getData=function(e){if("string"!=typeof e)throw new Error("The key must be a string.");return this._data.get(e)},e.prototype.deleteData=function(e){if("string"!=typeof e)throw new Error("The key must be a string.");return this._data.delete(e)},e}(),u=function(e){if(!(e instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return l.has(e)||l.set(e,new d),l.get(e)};function c(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)c(e[r],t,n);else e.addEventListener(t,n),u(e).setData("event"+t,n)}function f(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)f(e[n],t);else e.removeEventListener(t,u(e).getData("event"+t)),u(e).deleteData("event"+t)}function p(e,t,n){if(e instanceof Array)for(var r=0;r<e.length;++r)p(e[r],t,n);else e.setAttribute(t,n)}function h(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)h(e[n],t);else e.removeAttribute(t)}var g,v,b,y,w,E,T,x,C,q=function(e){if(!e.parentElement||0===e.getClientRects().length)throw new Error("target element must be part of the dom");var t=e.getClientRects()[0];return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,bottom:t.bottom+window.pageYOffset}},F=function(e,t){if(!(e instanceof HTMLElement&&(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(t).indexOf(e)},L=function(e){if(!(e instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==e.parentNode},O=function(e,t,n){if(!(e instanceof HTMLElement&&e.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");e.parentElement.insertBefore(t,"before"===n?e:e.nextElementSibling)},_=function(e,t){return O(e,t,"after")},S=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return"border-box"===t.getPropertyValue("box-sizing")?parseInt(t.getPropertyValue("height"),10):["height","padding-top","padding-bottom"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))},I=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return["width","padding-left","padding-right"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))},N=function(e,t){if(!(e instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof t?e:e.filter((function(e){return e.querySelector(t)instanceof HTMLElement||e.shadowRoot&&e.shadowRoot.querySelector(t)instanceof HTMLElement})).map((function(e){return e.querySelector(t)||e.shadowRoot&&e.shadowRoot.querySelector(t)}))},M=function(e){return e.composedPath&&e.composedPath()[0]||e.target},P=function(e,t,n){return{element:e,posX:n.pageX-t.left,posY:n.pageY-t.top}},A=function(e,t){if(!0===e.isSortable){var n=u(e).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!=typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&n.split(",").filter((function(e){return e.length>0&&t.matches(e)})).length>0;if(e===t)return!0;if(void 0!==u(e).getConfig("connectWith")&&null!==u(e).getConfig("connectWith"))return u(e).getConfig("connectWith")===u(t).getConfig("connectWith")}return!1},D={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,dropTargetContainerClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,orientation:"vertical"},H=function(e){f(e,"dragstart"),f(e,"dragend"),f(e,"dragover"),f(e,"dragenter"),f(e,"drop"),f(e,"mouseenter"),f(e,"mouseleave")},B=function(e,t){e&&f(e,"dragleave"),t&&t!==e&&f(t,"dragleave")},Y=function(e){var t;(t=e).h5s&&delete t.h5s.data,h(e,"aria-dropeffect")},j=function(e){h(e,"aria-grabbed"),h(e,"aria-copied"),h(e,"draggable"),h(e,"role")};function k(e,t){if(t.composedPath)return t.composedPath().find((function(e){return e.isSortable}));for(;!0!==e.isSortable;)e=e.parentElement;return e}function R(e,t){var n=i(e,"opts"),r=s(e.children,n.items).filter((function(e){return e.contains(t)||e.shadowRoot&&e.shadowRoot.contains(t)}));return r.length>0?r[0]:t}var z=function(e){var t=i(e,"opts"),n=s(e.children,t.items),r=N(n,t.handle);p(e,"aria-dropeffect","move"),i(e,"_disabled","false"),p(r,"draggable","true"),!1===t.disableIEFix&&"function"==typeof(document||window.document).createElement("span").dragDrop&&c(r,"mousedown",(function(){if(-1!==n.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===n.indexOf(e);)e=e.parentElement;e.dragDrop()}}))};function U(e,t){var n=String(t);return t=t||{},"string"==typeof e&&(e=document.querySelectorAll(e)),e instanceof HTMLElement&&(e=[e]),e=Array.prototype.slice.call(e),/serialize/.test(n)?e.map((function(e){var t=i(e,"opts");return function(e,t,n){if(void 0===t&&(t=function(e,t){return e}),void 0===n&&(n=function(e){return e}),!(e instanceof HTMLElement)||1==!e.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof t||"function"!=typeof n)throw new Error("You need to provide a valid serializer for items and the container.");var r=i(e,"opts").items,o=s(e.children,r),a=o.map((function(t){return{parent:e,node:t,html:t.outerHTML,index:F(t,o)}}));return{container:n({node:e,itemCount:a.length}),items:a.map((function(n){return t(n,e)}))}}(e,t.itemSerializer,t.containerSerializer)})):(e.forEach((function(e){if(/enable|disable|destroy/.test(n))return U[n](e);["connectWith","disableIEFix"].forEach((function(e){Object.prototype.hasOwnProperty.call(t,e)&&null!==t[e]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+e+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),t=Object.assign({},D,u(e).config,t),u(e).config=t,i(e,"opts",t),e.isSortable=!0,function(e){var t=i(e,"opts"),n=s(e.children,t.items),r=N(n,t.handle);i(e,"_disabled","false"),H(n),B(y,x),f(r,"mousedown"),f(e,"dragover"),f(e,"dragenter"),f(e,"drop")}(e);var r,o=s(e.children,t.items);if(null!==t.placeholder&&void 0!==t.placeholder){var a=document.createElement(e.tagName);t.placeholder instanceof HTMLElement?a.appendChild(t.placeholder):a.innerHTML=t.placeholder,r=a.children[0]}u(e).placeholder=function(e,t,n){var r;if(void 0===n&&(n="sortable-placeholder"),!(e instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(t instanceof HTMLElement)&&void 0!==t)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===t&&(["UL","OL"].includes(e.tagName)?t=document.createElement("li"):["TABLE","TBODY"].includes(e.tagName)?(t=document.createElement("tr")).innerHTML='<td colspan="100"></td>':t=document.createElement("div")),"string"==typeof n&&(r=t.classList).add.apply(r,n.split(" ")),t}(e,r,t.placeholderClass),i(e,"items",t.items),t.acceptFrom?i(e,"acceptFrom",t.acceptFrom):t.connectWith&&i(e,"connectWith",t.connectWith),z(e),p(o,"role","option"),p(o,"aria-grabbed","false"),function(e,t){if("string"==typeof u(e).getConfig("hoverClass")){var n=u(e).getConfig("hoverClass").split(" ");!0===t?(c(e,"mousemove",function(e,t){var n=this;if(void 0===t&&(t=250),"number"!=typeof t)throw new Error("You must provide a number as the second argument for throttle.");var r=null;return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var i=Date.now();(null===r||i-r>=t)&&(r=i,e.apply(n,o))}}((function(t){0===t.buttons&&s(e.children,u(e).getConfig("items")).forEach((function(e){var r,o;e!==t.target?(r=e.classList).remove.apply(r,n):(o=e.classList).add.apply(o,n)}))}),u(e).getConfig("throttleTime"))),c(e,"mouseleave",(function(){s(e.children,u(e).getConfig("items")).forEach((function(e){var t;(t=e.classList).remove.apply(t,n)}))}))):(f(e,"mousemove"),f(e,"mouseleave"))}}(e,!0),c(e,"dragstart",(function(e){var n=M(e);if(!0!==n.isSortable&&(e.stopImmediatePropagation(),(!t.handle||n.matches(t.handle))&&"false"!==n.getAttribute("draggable"))){var r=k(n,e),o=R(r,n);T=s(r.children,t.items),w=T.indexOf(o),E=F(o,r.children),y=r,function(e,t,n){if(!(e instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(t instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=P),e.dataTransfer&&e.dataTransfer.setDragImage){var r=n(t,q(t),e);if(!(r.element instanceof HTMLElement)||"number"!=typeof r.posX||"number"!=typeof r.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text/plain",M(e).id),e.dataTransfer.setDragImage(r.element,r.posX,r.posY)}}(e,o,t.customDragImage),v=S(o),b=I(o),o.classList.add(t.draggingClass),g=function(e,t){var n=e;return!0===u(t).getConfig("copy")&&(p(n=e.cloneNode(!0),"aria-copied","true"),e.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=e.style.display),n}(o,r),p(g,"aria-grabbed","true"),r.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:E,index:w,container:y},item:g,originalTarget:n}}))}})),c(e,"dragenter",(function(n){var r=M(n),o=k(r,n);o&&o!==x&&(C=s(o.children,i(o,"items")).filter((function(t){return t!==u(e).placeholder})),t.dropTargetContainerClass&&o.classList.add(t.dropTargetContainerClass),o.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:E,index:w,container:y},destination:{container:o,itemsBeforeUpdate:C},item:g,originalTarget:r}})),c(o,"dragleave",(function(e){var n=e.relatedTarget||e.fromElement;e.currentTarget.contains(n)||(t.dropTargetContainerClass&&o.classList.remove(t.dropTargetContainerClass),o.dispatchEvent(new CustomEvent("sortleave",{detail:{origin:{elementIndex:E,index:w,container:o},item:g,originalTarget:r}})))}))),x=o})),c(e,"dragend",(function(n){if(g){g.classList.remove(t.draggingClass),p(g,"aria-grabbed","false"),"true"===g.getAttribute("aria-copied")&&"true"!==i(g,"dropped")&&g.remove(),g.style.display=g.oldDisplay,delete g.oldDisplay;var r=Array.from(l.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(L)[0];r&&r.remove(),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:E,index:w,container:y},item:g}})),x=null,g=null,v=null,b=null}})),c(e,"drop",(function(n){if(A(e,g.parentElement)){n.preventDefault(),n.stopPropagation(),i(g,"dropped","true");var r=Array.from(l.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(L)[0];_(r,g),r.remove(),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:E,index:w,container:y},item:g}}));var o=u(e).placeholder,a=s(y.children,t.items).filter((function(e){return e!==o})),d=!0===this.isSortable?this:this.parentElement,c=s(d.children,i(d,"items")).filter((function(e){return e!==o})),f=F(g,Array.from(g.parentElement.children).filter((function(e){return e!==o}))),m=F(g,c);t.dropTargetContainerClass&&d.classList.remove(t.dropTargetContainerClass),E===f&&y===d||e.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:E,index:w,container:y,itemsBeforeUpdate:T,items:a},destination:{index:m,elementIndex:f,container:d,itemsBeforeUpdate:C,items:c},item:g}}))}}));var d,m,h,Y=(d=function(e,n,r,o){if(g)if(t.forcePlaceholderSize&&(u(e).placeholder.style.height=v+"px",u(e).placeholder.style.width=b+"px"),Array.from(e.children).indexOf(n)>-1){var a=S(n),i=I(n),d=F(u(e).placeholder,n.parentElement.children),c=F(n,n.parentElement.children);if(a>v||i>b){var f=a-v,m=i-b,p=q(n).top,h=q(n).left;if(d<c&&("vertical"===t.orientation&&o<p||"horizontal"===t.orientation&&r<h))return;if(d>c&&("vertical"===t.orientation&&o>p+a-f||"horizontal"===t.orientation&&r>h+i-m))return}void 0===g.oldDisplay&&(g.oldDisplay=g.style.display),"none"!==g.style.display&&(g.style.display="none");var y=!1;try{var w=q(n).top+n.offsetHeight/2,E=q(n).left+n.offsetWidth/2;y="vertical"===t.orientation&&o>=w||"horizontal"===t.orientation&&r>=E}catch(e){y=d<c}y?_(n,u(e).placeholder):function(e,t){O(e,t,"before")}(n,u(e).placeholder),Array.from(l.values()).filter((function(e){return void 0!==e.placeholder})).forEach((function(t){t.placeholder!==u(e).placeholder&&t.placeholder.remove()}))}else{var T=Array.from(l.values()).filter((function(e){return void 0!==e.placeholder})).map((function(e){return e.placeholder}));-1!==T.indexOf(n)||e!==n||s(n.children,t.items).length||(T.forEach((function(e){return e.remove()})),n.appendChild(u(e).placeholder))}},void 0===(m=t.debounce)&&(m=0),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(h),h=setTimeout((function(){d.apply(void 0,e)}),m)}),j=function(e){var t=e.target,n=!0===t.isSortable?t:k(t,e);if(t=R(n,t),g&&A(n,g.parentElement)&&"true"!==i(n,"_disabled")){var r=i(n,"opts");parseInt(r.maxItems)&&s(n.children,i(n,"items")).length>=parseInt(r.maxItems)&&g.parentElement!==n||(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect=!0===u(n).getConfig("copy")?"copy":"move",Y(n,t,e.pageX,e.pageY))}};c(o.concat(e),"dragover",j),c(o.concat(e),"dragenter",j)})),e)}U.destroy=function(e){!function(e){var t=i(e,"opts")||{},n=s(e.children,t.items),r=N(n,t.handle);f(e,"dragover"),f(e,"dragenter"),f(e,"dragstart"),f(e,"dragend"),f(e,"drop"),Y(e),f(r,"mousedown"),H(n),j(n),B(y,x),e.isSortable=!1}(e)},U.enable=function(e){z(e)},U.disable=function(e){!function(e){var t=i(e,"opts"),n=s(e.children,t.items),r=N(n,t.handle);p(e,"aria-dropeffect","none"),i(e,"_disabled","true"),p(r,"draggable","false"),f(r,"mousedown")}(e)},U.__testing={_data:i,_removeItemEvents:H,_removeItemData:j,_removeSortableData:Y,_removeContainerEvents:B};const W=U,X=flarum.core.compat["admin/components/ExtensionPage"];var V=e.n(X);const G=flarum.core.compat["common/components/Switch"];var J=e.n(G);const K=flarum.core.compat["common/components/Button"];var Q=e.n(K);const Z=flarum.core.compat["common/components/Select"];var ee=e.n(Z);const te=flarum.core.compat["common/utils/withAttr"];var ne=e.n(te);const re=flarum.core.compat["common/Component"];var oe=e.n(re);const ae=flarum.core.compat["common/helpers/icon"];var ie=e.n(ae),se=function(e){function t(){return e.apply(this,arguments)||this}a(t,e);var n=t.prototype;return n.oninit=function(t){e.prototype.oninit.call(this,t),this.newOption=""},n.view=function(){var e=this;return m(".Form-group",[m("label",r().translator.trans("fof-masquerade.admin.fields.options")),m("table",m("tbody",this.options().map((function(t,n){return m("tr",[m("td",m("input[type=text].FormControl",{oninput:function(t){e.updateOption(n,t.target.value)},value:t})),m("td",m("button.Button",{onclick:function(){e.moveOption(n,-1)}},ie()("fas fa-chevron-up"))),m("td",m("button.Button",{onclick:function(){e.moveOption(n,1)}},ie()("fas fa-chevron-down"))),m("td",m("button.Button.Button--danger",{onclick:function(){e.deleteOption(n)}},ie()("fas fa-times")))])})))),m(".helpText",r().translator.trans("fof-masquerade.admin.fields.option-comma-warning")),m("table",m("tbody"),m("tr",[m("td",m("input[type=text].FormControl",{onchange:function(t){e.newOption=t.target.value},value:this.newOption,placeholder:r().translator.trans("fof-masquerade.admin.fields.option-new")})),m("td",m("button.Button.Button--primary",{onclick:function(){e.addOption()}},ie()("fas fa-plus")))]))])},n.updateRules=function(e){this.attrs.onchange("in:"+e.join(","))},n.options=function(){var e=this.attrs.value.split("|"),t=[];return e.forEach((function(e){var n=e.split(":",2);"in"===n[0]&&(t=n[1].split(","))})),t},n.updateOption=function(e,t){var n=this.options();n[e]=t,this.updateRules(n)},n.moveOption=function(e,t){var n=this.options(),r=e+t;if(!(r<0||r>n.length-1)){var o=n.splice(e,1);n.splice(r,0,o[0]),this.updateRules(n)}},n.deleteOption=function(e){var t=this.options();t.splice(e,1),this.updateRules(t)},n.addOption=function(){if(""!==this.newOption){var e=this.options();e.push(this.newOption),this.newOption="",this.updateRules(e)}},t}(oe());const le=flarum.core.compat["common/utils/ItemList"];var de=e.n(le),ue=function(){function e(){}var t=e.prototype;return t.view=function(e){var t=this,n=e.attrs,o=n.field,a=(n.loading,n.onUpdate),i=o.id();return m("fieldset",{className:"Field","data-id":o.id(),key:o.id()},m("legend",null,i?m(Q(),{className:"Button Button--icon Button--danger",icon:"fas fa-trash",onclick:function(){return t.deleteField(o,a)}}):null,m("span",{className:"Field-toggle",onclick:function(e){return t.toggleField(e)}},r().translator.trans("fof-masquerade.admin.fields."+(i?"edit":"add"),{field:o.name()}),ie()("fas fa-caret-down"))),m("div",{className:"Field-body"},this.fieldItems(o,a).toArray()))},t.fieldItems=function(e,t){var n=this,o=new(de());return o.add("name",m("div",{className:"Form-group"},m("label",null,r().translator.trans("fof-masquerade.admin.fields.name")),m("input",{className:"FormControl",value:e.name(),oninput:ne()("value",this.updateExistingFieldInput.bind(this,"name",e))}),m("span",{className:"helpText"},r().translator.trans("fof-masquerade.admin.fields.name-help"))),100),o.add("description",m("div",{className:"Form-group"},m("label",null,r().translator.trans("fof-masquerade.admin.fields.description")),m("input",{className:"FormControl",value:e.description(),oninput:ne()("value",this.updateExistingFieldInput.bind(this,"description",e))}),m("span",{className:"helpText"},r().translator.trans("fof-masquerade.admin.fields.description-help"))),90),o.add("icon",m("div",{className:"Form-group"},m("label",null,r().translator.trans("fof-masquerade.admin.fields.icon")),m("input",{className:"FormControl",value:e.icon(),oninput:ne()("value",this.updateExistingFieldInput.bind(this,"icon",e))}),m("span",{className:"helpText"},r().translator.trans("fof-masquerade.admin.fields.icon-help",{a:m("a",{href:"https://fontawesome.com/icons?m=free",target:"_blank"})}))),80),o.add("on_bio",m("div",{className:"Form-group"},m(J(),{state:e.on_bio(),onchange:this.updateExistingFieldInput.bind(this,"on_bio",e)},r().translator.trans("fof-masquerade.admin.fields.on_bio"))),70),o.add("required",m("div",{className:"Form-group"},m(J(),{state:e.required(),onchange:this.updateExistingFieldInput.bind(this,"required",e)},r().translator.trans("fof-masquerade.admin.fields.required"))),60),o.add("type",m("div",{className:"Form-group"},m("label",null,r().translator.trans("fof-masquerade.admin.fields.type")),m(ee(),{onchange:function(t){"null"===t&&(t=null),n.updateExistingFieldInput("type",e,t)},options:this.availableTypes(),value:e.type()})),50),"select"===e.type()&&o.add("select_options",m(se,{onchange:function(t){n.updateExistingFieldInput("validation",e,t)},value:e.validation()}),40),null===e.type()&&o.add("validation",m("div",{className:"Form-group"},m("label",null,r().translator.trans("fof-masquerade.admin.fields.validation")),m("input",{className:"FormControl",value:e.validation(),oninput:ne()("value",this.updateExistingFieldInput.bind(this,"validation",e))}),m("span",{className:"helpText"},r().translator.trans("fof-masquerade.admin.fields.validation-help",{a:m("a",{href:"https://laravel.com/docs/5.2/validation#available-validation-rules",target:"_blank"})}))),30),o.add("actions",m("div",{className:"Form-group"},m("div",{className:"ButtonGroup"},m(Q(),{className:"Button Button--primary",loading:this.loading,disabled:!this.readyToAdd(e),onclick:e.id()?this.updateExistingField.bind(this,e,t):this.submitAddField.bind(this,e,t)},r().translator.trans("fof-masquerade.admin.buttons."+(e.id()?"edit":"add")+"-field")),e.id()?m(Q(),{className:"Button Button--danger",loading:this.loading,onclick:this.deleteField.bind(this,e,t)},r().translator.trans("fof-masquerade.admin.buttons.delete-field")):null)),20),o},t.updateExistingFieldInput=function(e,t,n){var r;t.pushAttributes(((r={})[e]=n,r))},t.deleteField=function(e,t){e.delete().then(t)},t.toggleField=function(e){$(e.target).parents(".Field").toggleClass("active")},t.submitAddField=function(e,t,n){var r=this;n.preventDefault(),e.save(e.data.attributes).then((function(){t(),r.resetNewField()})),m.redraw()},t.updateExistingField=function(e,t){e.id()&&e.save(e.data.attributes).then(t)},t.resetNewField=function(){this.newField=r().store.createRecord("masquerade-field",{attributes:{name:"",description:"",prefix:"",icon:"",required:!1,on_bio:!1,type:null,validation:""}}),m.redraw()},t.readyToAdd=function(e){return!!e.name()},t.availableTypes=function(){return{url:r().translator.trans("fof-masquerade.admin.types.url"),email:r().translator.trans("fof-masquerade.admin.types.email"),boolean:r().translator.trans("fof-masquerade.admin.types.boolean"),select:r().translator.trans("fof-masquerade.admin.types.select"),null:r().translator.trans("fof-masquerade.admin.types.advanced")}},e}(),ce=function(){function e(){}return e.prototype.view=function(e){var t=e.attrs,n=t.existing,r=t.new,o=t.loading,a=t.onUpdate;return m("form.js-sortable-fields",n.map((function(e){return m(ue,{field:e,loading:o,onUpdate:a})})),m(ue,{field:r,loading:o,onUpdate:a}))},e}();const fe=flarum.core.compat["admin/utils/saveSettings"];var me=e.n(fe),pe=function(e){function t(){return e.apply(this,arguments)||this}a(t,e);var n=t.prototype;return n.oninit=function(t){e.prototype.oninit.call(this,t),this.resetNew(),this.loading=!1,this.existing=[],this.loadExisting(),this.enforceProfileCompletion="1"===r().data.settings["masquerade.force-profile-completion"]},n.config=function(){var e=this;W(this.element.querySelector(".js-sortable-fields"),{handle:"legend"})[0].addEventListener("sortupdate",(function(){var t=e.$(".js-sortable-fields > .Field").map((function(){return $(this).data("id")})).get();e.updateSort(t)}))},n.oncreate=function(t){e.prototype.oncreate.call(this,t),this.config()},n.onupdate=function(){this.config()},n.content=function(){var e=this;return m(".ExtensionPage-settings.ProfileConfigurePane",m(".container",[m("h2",r().translator.trans("fof-masquerade.admin.general-options")),m(".Form-group",J().component({state:this.enforceProfileCompletion,onchange:function(t){var n=t?"1":"0";me()({"masquerade.force-profile-completion":n}),e.enforceProfileCompletion=n}},r().translator.trans("fof-masquerade.admin.fields.force-user-to-completion"))),m("h2",r().translator.trans("fof-masquerade.admin.fields.title")),m(ce,{existing:this.existing,new:this.newField,loading:this.loading,onUpdate:this.requestSuccess.bind(this)})]))},n.updateSort=function(e){r().request({method:"POST",url:r().forum.attribute("apiUrl")+"/masquerade/fields/order",body:{sort:e}}).then(this.requestSuccess.bind(this))},n.requestSuccess=function(){this.loadExisting(),this.resetNew(),m.redraw()},n.loadExisting=function(){var e=this;return this.loading=!0,r().request({method:"GET",url:r().forum.attribute("apiUrl")+"/masquerade/fields"}).then((function(t){r().store.pushPayload(t),e.existing=r().store.all("masquerade-field"),e.existing.sort((function(e,t){return e.sort()-t.sort()})),e.loading=!1,m.redraw()}))},n.resetNew=function(){this.newField=r().store.createRecord("masquerade-field",{attributes:{name:"",description:"",prefix:"",icon:"",required:!1,on_bio:!1,type:null,validation:""}})},t}(V());const he=flarum.core.compat["common/extenders"];var ge=e.n(he);const ve=flarum.core.compat["common/Model"];var be=e.n(ve),ye=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).name=be().attribute("name"),t.description=be().attribute("description"),t.type=be().attribute("type"),t.validation=be().attribute("validation"),t.required=be().attribute("required"),t.prefix=be().attribute("prefix"),t.icon=be().attribute("icon"),t.sort=be().attribute("sort"),t.deleted_at=be().attribute("deleted_at",be().transformDate),t.answer=be().hasOne("answer"),t.on_bio=be().attribute("on_bio"),t}return a(t,e),t.prototype.apiEndpoint=function(){return"/masquerade/fields"+(this.exists?"/"+this.data.id:"")},t}(be());const we=[(new(ge().Store)).add("masquerade-field",ye)],Ee=[].concat(we);var Te={FieldList:ce,FieldEdit:ue,MasqueradePage:pe,SelectFieldOptionEditor:se};r().initializers.add("fof-masquerade",(function(){r().extensionData.for("fof-masquerade").registerPage(pe).registerPermission({icon:"far fa-id-card",label:r().translator.trans("fof-masquerade.admin.permissions.view-profile"),permission:"fof.masquerade.view-profile",allowGuest:!0},"view").registerPermission({icon:"far fa-id-card",label:r().translator.trans("fof-masquerade.admin.permissions.have-profile"),permission:"fof.masquerade.have-profile"},"start").registerPermission({icon:"far fa-id-card",label:r().translator.trans("fof-masquerade.admin.permissions.edit-others-profile"),permission:"fof.masquerade.edit-others-profile"},"moderate")}))})(),module.exports=t})();


flarum.extensions['fof-masquerade']=module.exports;

var module={};

(()=>{var e={n:r=>{var t=r&&r.__esModule?()=>r.default:()=>r;return e.d(t,{a:t}),t},d:(r,t)=>{for(var o in t)e.o(t,o)&&!e.o(r,o)&&Object.defineProperty(r,o,{enumerable:!0,get:t[o]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},r={};(()=>{"use strict";e.r(r);const t=flarum.core.compat["admin/app"];var o=e.n(t);o().initializers.add("flarum-sticky",(function(){o().extensionData.for("flarum-sticky").registerPermission({icon:"fas fa-thumbtack",label:o().translator.trans("flarum-sticky.admin.permissions.sticky_discussions_label"),permission:"discussion.sticky"},"moderate",95)}))})(),module.exports=r})();


flarum.extensions['flarum-sticky']=module.exports;

var module={};

/*! For license information please see admin.js.LICENSE.txt */
(()=>{var t={757:function(t){t.exports=function(){"use strict";var t=6e4,e=36e5,i="millisecond",n="second",a="minute",r="hour",s="day",o="week",l="month",u="quarter",c="year",h="date",d="Invalid Date",f=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],i=t%100;return"["+t+(e[(i-20)%10]||e[i]||e[0])+"]"}},v=function(t,e,i){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(i)+t},g={s:v,z:function(t){var e=-t.utcOffset(),i=Math.abs(e),n=Math.floor(i/60),a=i%60;return(e<=0?"+":"-")+v(n,2,"0")+":"+v(a,2,"0")},m:function t(e,i){if(e.date()<i.date())return-t(i,e);var n=12*(i.year()-e.year())+(i.month()-e.month()),a=e.clone().add(n,l),r=i-a<0,s=e.clone().add(n+(r?-1:1),l);return+(-(n+(i-a)/(r?a-s:s-a))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:c,w:o,d:s,D:h,h:r,m:a,s:n,ms:i,Q:u}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},y="en",b={};b[y]=m;var x=function(t){return t instanceof M},w=function t(e,i,n){var a;if(!e)return y;if("string"==typeof e){var r=e.toLowerCase();b[r]&&(a=r),i&&(b[r]=i,a=r);var s=e.split("-");if(!a&&s.length>1)return t(s[0])}else{var o=e.name;b[o]=e,a=o}return!n&&a&&(y=a),a||!n&&y},k=function(t,e){if(x(t))return t.clone();var i="object"==typeof e?e:{};return i.date=t,i.args=arguments,new M(i)},D=g;D.l=w,D.i=x,D.w=function(t,e){return k(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var M=function(){function m(t){this.$L=w(t.locale,null,!0),this.parse(t)}var v=m.prototype;return v.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if(D.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(f);if(n){var a=n[2]-1||0,r=(n[7]||"0").substring(0,3);return i?new Date(Date.UTC(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)):new Date(n[1],a,n[3]||1,n[4]||0,n[5]||0,n[6]||0,r)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},v.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},v.$utils=function(){return D},v.isValid=function(){return!(this.$d.toString()===d)},v.isSame=function(t,e){var i=k(t);return this.startOf(e)<=i&&i<=this.endOf(e)},v.isAfter=function(t,e){return k(t)<this.startOf(e)},v.isBefore=function(t,e){return this.endOf(e)<k(t)},v.$g=function(t,e,i){return D.u(t)?this[e]:this.set(i,t)},v.unix=function(){return Math.floor(this.valueOf()/1e3)},v.valueOf=function(){return this.$d.getTime()},v.startOf=function(t,e){var i=this,u=!!D.u(e)||e,d=D.p(t),f=function(t,e){var n=D.w(i.$u?Date.UTC(i.$y,e,t):new Date(i.$y,e,t),i);return u?n:n.endOf(s)},p=function(t,e){return D.w(i.toDate()[t].apply(i.toDate("s"),(u?[0,0,0,0]:[23,59,59,999]).slice(e)),i)},m=this.$W,v=this.$M,g=this.$D,y="set"+(this.$u?"UTC":"");switch(d){case c:return u?f(1,0):f(31,11);case l:return u?f(1,v):f(0,v+1);case o:var b=this.$locale().weekStart||0,x=(m<b?m+7:m)-b;return f(u?g-x:g+(6-x),v);case s:case h:return p(y+"Hours",0);case r:return p(y+"Minutes",1);case a:return p(y+"Seconds",2);case n:return p(y+"Milliseconds",3);default:return this.clone()}},v.endOf=function(t){return this.startOf(t,!1)},v.$set=function(t,e){var o,u=D.p(t),d="set"+(this.$u?"UTC":""),f=(o={},o[s]=d+"Date",o[h]=d+"Date",o[l]=d+"Month",o[c]=d+"FullYear",o[r]=d+"Hours",o[a]=d+"Minutes",o[n]=d+"Seconds",o[i]=d+"Milliseconds",o)[u],p=u===s?this.$D+(e-this.$W):e;if(u===l||u===c){var m=this.clone().set(h,1);m.$d[f](p),m.init(),this.$d=m.set(h,Math.min(this.$D,m.daysInMonth())).$d}else f&&this.$d[f](p);return this.init(),this},v.set=function(t,e){return this.clone().$set(t,e)},v.get=function(t){return this[D.p(t)]()},v.add=function(i,u){var h,d=this;i=Number(i);var f=D.p(u),p=function(t){var e=k(d);return D.w(e.date(e.date()+Math.round(t*i)),d)};if(f===l)return this.set(l,this.$M+i);if(f===c)return this.set(c,this.$y+i);if(f===s)return p(1);if(f===o)return p(7);var m=(h={},h[a]=t,h[r]=e,h[n]=1e3,h)[f]||1,v=this.$d.getTime()+i*m;return D.w(v,this)},v.subtract=function(t,e){return this.add(-1*t,e)},v.format=function(t){var e=this,i=this.$locale();if(!this.isValid())return i.invalidDate||d;var n=t||"YYYY-MM-DDTHH:mm:ssZ",a=D.z(this),r=this.$H,s=this.$m,o=this.$M,l=i.weekdays,u=i.months,c=function(t,i,a,r){return t&&(t[i]||t(e,n))||a[i].slice(0,r)},h=function(t){return D.s(r%12||12,t,"0")},f=i.meridiem||function(t,e,i){var n=t<12?"AM":"PM";return i?n.toLowerCase():n},m={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:D.s(o+1,2,"0"),MMM:c(i.monthsShort,o,u,3),MMMM:c(u,o),D:this.$D,DD:D.s(this.$D,2,"0"),d:String(this.$W),dd:c(i.weekdaysMin,this.$W,l,2),ddd:c(i.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(r),HH:D.s(r,2,"0"),h:h(1),hh:h(2),a:f(r,s,!0),A:f(r,s,!1),m:String(s),mm:D.s(s,2,"0"),s:String(this.$s),ss:D.s(this.$s,2,"0"),SSS:D.s(this.$ms,3,"0"),Z:a};return n.replace(p,(function(t,e){return e||m[t]||a.replace(":","")}))},v.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},v.diff=function(i,h,d){var f,p=D.p(h),m=k(i),v=(m.utcOffset()-this.utcOffset())*t,g=this-m,y=D.m(this,m);return y=(f={},f[c]=y/12,f[l]=y,f[u]=y/3,f[o]=(g-v)/6048e5,f[s]=(g-v)/864e5,f[r]=g/e,f[a]=g/t,f[n]=g/1e3,f)[p]||g,d?y:D.a(y)},v.daysInMonth=function(){return this.endOf(l).$D},v.$locale=function(){return b[this.$L]},v.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),n=w(t,e,!0);return n&&(i.$L=n),i},v.clone=function(){return D.w(this.$d,this)},v.toDate=function(){return new Date(this.valueOf())},v.toJSON=function(){return this.isValid()?this.toISOString():null},v.toISOString=function(){return this.$d.toISOString()},v.toString=function(){return this.$d.toUTCString()},m}(),P=M.prototype;return k.prototype=P,[["$ms",i],["$s",n],["$m",a],["$H",r],["$W",s],["$M",l],["$y",c],["$D",h]].forEach((function(t){P[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),k.extend=function(t,e){return t.$i||(t(e,M,k),t.$i=!0),k},k.locale=w,k.isDayjs=x,k.unix=function(t){return k(1e3*t)},k.en=b[y],k.Ls=b,k.p={},k}()},982:function(t){t.exports=function(){"use strict";var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(e,i,n){var a=i.prototype,r=a.format;n.en.formats=t,a.format=function(e){void 0===e&&(e="YYYY-MM-DDTHH:mm:ssZ");var i=this.$locale().formats,n=function(e,i){return e.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(e,n,a){var r=a&&a.toUpperCase();return n||i[a]||t[a]||i[r].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,i){return e||i.slice(1)}))}))}(e,void 0===i?{}:i);return r.call(this,n)}}}()},221:function(t){t.exports=function(){"use strict";var t="minute",e=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(n,a,r){var s=a.prototype;r.utc=function(t){return new a({date:t,utc:!0,args:arguments})},s.utc=function(e){var i=r(this.toDate(),{locale:this.$L,utc:!0});return e?i.add(this.utcOffset(),t):i},s.local=function(){return r(this.toDate(),{locale:this.$L,utc:!1})};var o=s.parse;s.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),o.call(this,t)};var l=s.init;s.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else l.call(this)};var u=s.utcOffset;s.utcOffset=function(n,a){var r=this.$utils().u;if(r(n))return this.$u?0:r(this.$offset)?u.call(this):this.$offset;if("string"==typeof n&&(n=function(t){void 0===t&&(t="");var n=t.match(e);if(!n)return null;var a=(""+n[0]).match(i)||["-",0,0],r=a[0],s=60*+a[1]+ +a[2];return 0===s?0:"+"===r?s:-s}(n),null===n))return this;var s=Math.abs(n)<=16?60*n:n,o=this;if(a)return o.$offset=s,o.$u=0===n,o;if(0!==n){var l=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(o=this.local().add(s+l,t)).$offset=s,o.$x.$localOffset=l}else o=this.utc();return o};var c=s.format;s.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,e)},s.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*t},s.isUTC=function(){return!!this.$u},s.toISOString=function(){return this.toDate().toISOString()},s.toString=function(){return this.toDate().toUTCString()};var h=s.toDate;s.toDate=function(t){return"s"===t&&this.$offset?r(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var d=s.diff;s.diff=function(t,e,i){if(t&&this.$u===t.$u)return d.call(this,t,e,i);var n=this.local(),a=r(t).local();return d.call(n,a,e,i)}}}()},23:function(t){t.exports=function(){"use strict";function t(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function e(t){var e=t.getBoundingClientRect();return{top:e.top+(document.documentElement.scrollTop||document.body.scrollTop),left:e.left+(document.documentElement.scrollLeft||document.body.scrollLeft)}}function i(t){return null===t.offsetParent}function n(t){var e=t.getBoundingClientRect();return e.top>=0&&e.left>=0&&e.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}function a(t){return t.titleHeight+t.margins.top+t.paddings.top}function r(t){return t.margins.left+t.paddings.left}function s(t){return t.margins.top+t.margins.bottom+t.paddings.top+t.paddings.bottom+t.titleHeight+t.legendHeight}function o(t){return t.margins.left+t.margins.right+t.paddings.left+t.paddings.right}function l(t){return parseFloat(t.toFixed(2))}function u(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];i||(i=n?t[0]:t[t.length-1]);var a=new Array(Math.abs(e)).fill(i);return n?a.concat(t):t.concat(a)}function c(t,e){return(t+"").length*e}function h(t,e){return{x:Math.sin(t*kt)*e,y:Math.cos(t*kt)*e}}function d(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(Number.isNaN(t)||void 0===t||!Number.isFinite(t)||e&&t<0)}function f(t){var e=void 0,i=void 0,n=void 0;if(t instanceof Date)return new Date(t.getTime());if("object"!==(void 0===t?"undefined":lt(t))||null===t)return t;for(n in e=Array.isArray(t)?[]:{},t)i=t[n],e[n]=f(i);return e}function p(t,e){var i=void 0,n=void 0;return t<=e?(i=e-t,n=t):(i=t-e,n=e),[i,n]}function m(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length-t.length;return i>0?t=u(t,i):e=u(e,i),[t,e]}function v(t,e){if(t)return t.length>e?t.slice(0,e-3)+"...":t}function g(t){var e=void 0;if("number"==typeof t)e=t;else if("string"==typeof t&&(e=Number(t),Number.isNaN(e)))return t;var i=Math.floor(Math.log10(Math.abs(e)));if(i<=2)return e;var n=Math.floor(i/3),a=Math.pow(10,i-3*n)*+(e/Math.pow(10,i)).toFixed(1);return Math.round(100*a)/100+" "+["","K","M","B","T"][n]}function y(t,e){for(var i=[],n=0;n<t.length;n++)i.push([t[n],e[n]]);var a=function(t,e,i,n){var a=function(t,e){var i=e[0]-t[0],n=e[1]-t[1];return{length:Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),angle:Math.atan2(n,i)}}(e||t,i||t),r=a.angle+(n?Math.PI:0),s=.2*a.length;return[t[0]+Math.cos(r)*s,t[1]+Math.sin(r)*s]};return function(t,e){return t.reduce((function(t,e,i,n){return 0===i?e[0]+","+e[1]:t+" "+function(t,e,i){var n=a(i[e-1],i[e-2],t),r=a(t,i[e-1],i[e+1],!0);return"C "+n[0]+","+n[1]+" "+r[0]+","+r[1]+" "+t[0]+","+t[1]}(e,i,n)}),"")}(i)}function b(t){return t>255?255:t<0?0:t}function x(t,e){var i=Pt(t),n=!1;"#"==i[0]&&(i=i.slice(1),n=!0);var a=parseInt(i,16),r=b((a>>16)+e),s=b((a>>8&255)+e);return(n?"#":"")+(b((255&a)+e)|s<<8|r<<16).toString(16)}function w(t,e){return"string"==typeof t?(e||document).querySelector(t):t||null}function k(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in e){var a=e[n];if("inside"===n)w(a).appendChild(i);else if("around"===n){var r=w(a);r.parentNode.insertBefore(i,r),i.appendChild(r)}else"styles"===n?"object"===(void 0===a?"undefined":lt(a))&&Object.keys(a).map((function(t){i.style[t]=a[t]})):("className"===n&&(n="class"),"innerHTML"===n?i.textContent=a:i.setAttribute(n,a))}return i}function D(t,e){return k("linearGradient",{inside:t,id:e,x1:0,x2:0,y1:0,y2:1})}function M(t,e,i,n){return k("stop",{inside:t,style:"stop-color: "+i,offset:e,"stop-opacity":n})}function P(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i={className:t,transform:arguments.length>1&&void 0!==arguments[1]?arguments[1]:""};return e&&(i.inside=e),k("g",i)}function S(t){return k("path",{className:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",d:t,styles:{stroke:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none",fill:arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none","stroke-width":arguments.length>4&&void 0!==arguments[4]?arguments[4]:2}})}function L(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n="path-fill-gradient-"+e+"-"+(i?"lighter":"default"),a=D(t,n),r=[1,.6,.2];return i&&(r=[.4,.2,0]),M(a,"0%",e,r[0]),M(a,"50%",e,r[1]),M(a,"100%",e,r[2]),n}function O(t,e,i,n,a){var r=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},s={className:t,x:e,y:i,width:n,height:n,rx:a,fill:arguments.length>5&&void 0!==arguments[5]?arguments[5]:"none"};return Object.keys(r).map((function(t){s[t]=r[t]})),k("rect",s)}function T(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=a.fontSize||Tt;return k("text",{className:t,x:e,y:i,dy:(void 0!==a.dy?a.dy:r/2)+"px","font-size":r+"px",fill:a.fill||Ct,"text-anchor":a.textAnchor||"start",innerHTML:n})}function A(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};a.stroke||(a.stroke=At);var r=k("line",{className:"line-vertical "+a.className,x1:0,x2:0,y1:i,y2:n,styles:{stroke:a.stroke}}),s=k("text",{x:0,y:i>n?i+Lt:i-Lt-Tt,dy:Tt+"px","font-size":Tt+"px","text-anchor":"middle",innerHTML:e+""}),o=k("g",{transform:"translate("+t+", 0)"});return o.appendChild(r),o.appendChild(s),o}function C(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};a.stroke||(a.stroke=At),a.lineType||(a.lineType=""),a.shortenNumbers&&(e=g(e));var r=k("line",{className:"line-horizontal "+a.className+("dashed"===a.lineType?"dashed":""),x1:i,x2:n,y1:0,y2:0,styles:{stroke:a.stroke}}),s=k("text",{x:i<n?i-Lt:i+Lt,y:0,dy:Tt/2-2+"px","font-size":Tt+"px","text-anchor":i<n?"end":"start",innerHTML:e+""}),o=k("g",{transform:"translate(0, "+t+")","stroke-opacity":1});return 0!==s&&"0"!==s||(o.style.stroke="rgba(27, 31, 35, 0.6)"),o.appendChild(r),o.appendChild(s),o}function N(t,e,i,n){var a="string"==typeof e?e:e.join(", ");return[t,{transform:i.join(", ")},n,jt,"translate",{transform:a}]}function _(t,e,i){return N(t,[0,i],[0,e],Yt)}function E(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=p(i,(arguments.length>5&&void 0!==arguments[5]?arguments[5]:{}).zeroLine),s=pt(r,2),o=s[0],l=s[1];return l-=a,"rect"!==t.nodeName?[[t.childNodes[0],{width:n,height:o},Et,jt],N(t,t.getAttribute("transform").split("(")[1].slice(0,-1),[e,l],Yt)]:[[t,{width:n,height:o,x:e,y:l},Et,jt]]}function $(t,e){return[t,{d:e},Et,jt]}function Y(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"linear",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=t.cloneNode(!0),o=t.cloneNode(!0);for(var l in e){var u=void 0;u="transform"===l?document.createElementNS("http://www.w3.org/2000/svg","animateTransform"):document.createElementNS("http://www.w3.org/2000/svg","animate");var c=r[l]||t.getAttribute(l),h=e[l],d={attributeName:l,from:c,to:h,begin:"0s",dur:i/1e3+"s",values:c+";"+h,keySplines:zt[n],keyTimes:"0;1",calcMode:"spline",fill:"freeze"};for(var f in a&&(d.type=a),d)u.setAttribute(f,d[f]);s.appendChild(u),a?o.setAttribute(l,"translate("+h+")"):o.setAttribute(l,h)}return[s,o]}function W(t,e){t.style.transform=e,t.style.webkitTransform=e,t.style.msTransform=e,t.style.mozTransform=e,t.style.oTransform=e}function j(t,e){var i=[],n=[];e.map((function(t){var e,a,r=t[0],s=r.parentNode;t[0]=r;var o=Y.apply(void 0,mt(t)),l=pt(o,2);e=l[0],a=l[1],i.push(a),n.push([e,s]),s&&s.replaceChild(e,r)}));var a=t.cloneNode(!0);return n.map((function(t,n){t[1]&&(t[1].replaceChild(i[n],t[0]),e[n][0]=i[n])})),a}function z(t,e,i){if(0!==i.length){var n=j(e,i);e.parentNode==t&&(t.removeChild(e),t.appendChild(n)),setTimeout((function(){n.parentNode==t&&(t.removeChild(n),t.appendChild(e))}),Wt)}}function H(e){var i=e.cloneNode(!0);i.classList.add("chart-container"),i.setAttribute("xmlns","http://www.w3.org/2000/svg"),i.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink");var n=t.create("style",{innerHTML:Ht});i.insertBefore(n,i.firstChild);var a=t.create("div");return a.appendChild(i),a.innerHTML}function F(t){var e=new Date(t);return e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),e}function I(t){var e=t.getDate(),i=t.getMonth()+1;return[t.getFullYear(),(i>9?"":"0")+i,(e>9?"":"0")+e].join("-")}function R(t){return new Date(t.getTime())}function U(t,e){var i=q(t);return Math.ceil(function(t,e){var i=Vt*Ut;return(F(e)-F(t))/i}(i,e)/Rt)}function V(t,e){return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}function B(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=Bt[t];return e?i.slice(0,3):i}function G(t,e){return new Date(e,t+1,0)}function q(t){var e=R(t),i=e.getDay();return 0!==i&&J(e,-1*i),e}function J(t,e){t.setDate(t.getDate()+e)}function X(t,e,i){var n=Object.keys(Jt).filter((function(e){return t.includes(e)})),a=Jt[n[0]];return Object.assign(a,{constants:e,getData:i}),new qt(a)}function Z(t){if(0===t)return[0,0];if(isNaN(t))return{mantissa:-6755399441055744,exponent:972};var e=t>0?1:-1;if(!isFinite(t))return{mantissa:4503599627370496*e,exponent:972};t=Math.abs(t);var i=Math.floor(Math.log10(t));return[e*(t/Math.pow(10,i)),i]}function K(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=Math.ceil(t),n=Math.floor(e),a=i-n,r=a,s=1;a>5&&(a%2!=0&&(a=++i-n),r=a/2,s=2),a<=2&&(s=a/(r=4)),0===a&&(r=5,s=1);for(var o=[],l=0;l<=r;l++)o.push(n+s*l);return o}function Q(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=Z(t),n=pt(i,2),a=n[0],r=n[1],s=e?e/Math.pow(10,r):0,o=K(a=a.toFixed(6),s);return o.map((function(t){return t*Math.pow(10,r)}))}function tt(t){function e(t,e){for(var i=Q(t),n=i[1]-i[0],a=0,r=1;a<e;r++)a+=n,i.unshift(-1*a);return i}var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Math.max.apply(Math,mt(t)),a=Math.min.apply(Math,mt(t)),r=[];if(n>=0&&a>=0)Z(n)[1],r=i?Q(n,a):Q(n);else if(n>0&&a<0){var s=Math.abs(a);n>=s?(Z(n)[1],r=e(n,s)):(Z(s)[1],r=e(s,n).reverse().map((function(t){return-1*t})))}else if(n<=0&&a<=0){var o=Math.abs(a),l=Math.abs(n);Z(o)[1],r=(r=i?Q(o,l):Q(o)).reverse().map((function(t){return-1*t}))}return r}function et(t){var e=it(t);return t.indexOf(0)>=0?t.indexOf(0):t[0]>0?-1*t[0]/e:-1*t[t.length-1]/e+(t.length-1)}function it(t){return t[1]-t[0]}function nt(t){return t[t.length-1]-t[0]}function at(t,e){return l(e.zeroLine-t*e.scaleMultiplier)}function rt(t,e){return e.filter((function(e){return e<t})).length}function st(t,e){t.labels=t.labels||[];var i=t.labels.length,n=t.datasets,a=new Array(i).fill(0);return n||(n=[{values:a}]),n.map((function(t){if(t.values){var n=t.values;n=(n=n.map((function(t){return isNaN(t)?0:t}))).length>i?n.slice(0,i):u(n,i-n.length,0),t.values=n}else t.values=a;t.chartType||(gt.includes(e),t.chartType=e)})),t.yRegions&&t.yRegions.map((function(t){if(t.end<t.start){var e=[t.end,t.start];t.start=e[0],t.end=e[1]}})),t}function ot(t){var e=t.labels.length,i=new Array(e).fill(0),n={labels:t.labels.slice(0,-1),datasets:t.datasets.map((function(t){return{name:"",values:i.slice(0,-1),chartType:t.chartType}}))};return t.yMarkers&&(n.yMarkers=[{value:0,label:""}]),t.yRegions&&(n.yRegions=[{start:0,end:0,label:""}]),n}!function(t,e){void 0===e&&(e={});var i=e.insertAt;if("undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===i&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}}('.chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Fira Sans,Droid Sans,Helvetica Neue,sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ol,.graph-svg-tip ul{padding-left:0;display:-webkit-box;display:-ms-flexbox;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;-webkit-box-flex:1;-ms-flex:1;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:" ";border:5px solid transparent;border-top-color:rgba(0,0,0,.8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}');var lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ut=(function(){function t(t){this.value=t}function e(e){function i(a,r){try{var s=e[a](r),o=s.value;o instanceof t?Promise.resolve(o.value).then((function(t){i("next",t)}),(function(t){i("throw",t)})):n(s.done?"return":"normal",s.value)}catch(t){n("throw",t)}}function n(t,e){switch(t){case"return":a.resolve({value:e,done:!0});break;case"throw":a.reject(e);break;default:a.resolve({value:e,done:!1})}(a=a.next)?i(a.key,a.arg):r=null}var a,r;this._invoke=function(t,e){return new Promise((function(n,s){var o={key:t,arg:e,resolve:n,reject:s,next:null};r?r=r.next=o:(a=r=o,i(t,e))}))},"function"!=typeof e.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(e.prototype[Symbol.asyncIterator]=function(){return this}),e.prototype.next=function(t){return this._invoke("next",t)},e.prototype.throw=function(t){return this._invoke("throw",t)},e.prototype.return=function(t){return this._invoke("return",t)}}(),function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}),ct=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),ht=function t(e,i,n){null===e&&(e=Function.prototype);var a=Object.getOwnPropertyDescriptor(e,i);if(void 0===a){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,i,n)}if("value"in a)return a.value;var s=a.get;return void 0!==s?s.call(n):void 0},dt=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},ft=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},pt=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var i=[],n=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(i.push(s.value),!e||i.length!==e);n=!0);}catch(t){a=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}return i}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},mt=function(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)};t.create=function(e,i){var n=document.createElement(e);for(var a in i){var r=i[a];if("inside"===a)t(r).appendChild(n);else if("around"===a){var s=t(r);s.parentNode.insertBefore(n,s),n.appendChild(s)}else"styles"===a?"object"===(void 0===r?"undefined":lt(r))&&Object.keys(r).map((function(t){n.style[t]=r[t]})):a in n?n[a]=r:n.setAttribute(a,r)}return n};var vt={margins:{top:10,bottom:10,left:20,right:20},paddings:{top:20,bottom:40,left:30,right:10},baseHeight:240,titleHeight:20,legendHeight:30,titleFontSize:12},gt=["line","bar"],yt=2,bt=7,xt=["light-blue","blue","violet","red","orange","yellow","green","light-green","purple","magenta","light-grey","dark-grey"],wt={bar:xt,line:xt,pie:xt,percentage:xt,heatmap:["#ebedf0","#c6e48b","#7bc96f","#239a3b","#196127"],donut:xt},kt=Math.PI/180,Dt=function(){function e(t){var i=t.parent,n=void 0===i?null:i,a=t.colors,r=void 0===a?[]:a;ut(this,e),this.parent=n,this.colors=r,this.titleName="",this.titleValue="",this.listValues=[],this.titleValueFirst=0,this.x=0,this.y=0,this.top=0,this.left=0,this.setup()}return ct(e,[{key:"setup",value:function(){this.makeTooltip()}},{key:"refresh",value:function(){this.fill(),this.calcPosition()}},{key:"makeTooltip",value:function(){var e=this;this.container=t.create("div",{inside:this.parent,className:"graph-svg-tip comparison",innerHTML:'<span class="title"></span>\n\t\t\t\t<ul class="data-point-list"></ul>\n\t\t\t\t<div class="svg-pointer"></div>'}),this.hideTip(),this.title=this.container.querySelector(".title"),this.dataPointList=this.container.querySelector(".data-point-list"),this.parent.addEventListener("mouseleave",(function(){e.hideTip()}))}},{key:"fill",value:function(){var e,i=this;this.index&&this.container.setAttribute("data-point-index",this.index),e=this.titleValueFirst?"<strong>"+this.titleValue+"</strong>"+this.titleName:this.titleName+"<strong>"+this.titleValue+"</strong>",this.title.innerHTML=e,this.dataPointList.innerHTML="",this.listValues.map((function(e,n){var a=i.colors[n]||"black",r=0===e.formatted||e.formatted?e.formatted:e.value,s=t.create("li",{styles:{"border-top":"3px solid "+a},innerHTML:'<strong style="display: block;">'+(0===r||r?r:"")+"</strong>\n\t\t\t\t\t"+(e.title?e.title:"")});i.dataPointList.appendChild(s)}))}},{key:"calcPosition",value:function(){var t=this.container.offsetWidth;this.top=this.y-this.container.offsetHeight-5,this.left=this.x-t/2;var e=this.parent.offsetWidth-t,i=this.container.querySelector(".svg-pointer");if(this.left<0)i.style.left="calc(50% - "+-1*this.left+"px)",this.left=0;else if(this.left>e){var n="calc(50% + "+(this.left-e)+"px)";i.style.left=n,this.left=e}else i.style.left="50%"}},{key:"setValues",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1;this.titleName=i.name,this.titleValue=i.value,this.listValues=n,this.x=t,this.y=e,this.titleValueFirst=i.valueFirst||0,this.index=a,this.refresh()}},{key:"hideTip",value:function(){this.container.style.top="0px",this.container.style.left="0px",this.container.style.opacity="0"}},{key:"showTip",value:function(){this.container.style.top=this.top+"px",this.container.style.left=this.left+"px",this.container.style.opacity="1"}}]),e}(),Mt={"light-blue":"#7cd6fd",blue:"#5e64ff",violet:"#743ee2",red:"#ff5858",orange:"#ffa00a",yellow:"#feef72",green:"#28a745","light-green":"#98d85b",purple:"#b554ff",magenta:"#ffa3ef",black:"#36114C",grey:"#bdd3e6","light-grey":"#f0f4f7","dark-grey":"#b8c2cc"},Pt=function(t){return/rgb[a]{0,1}\([\d, ]+\)/gim.test(t)?/\D+(\d*)\D+(\d*)\D+(\d*)/gim.exec(t).map((function(t,e){return 0!==e?Number(t).toString(16):"#"})).reduce((function(t,e){return""+t+e})):Mt[t]||t},St=6,Lt=4,Ot=15,Tt=10,At="#dadada",Ct="#555b51",Nt={bar:function(t){var e=void 0;"rect"!==t.nodeName&&(e=t.getAttribute("transform"),t=t.childNodes[0]);var i=t.cloneNode();return i.style.fill="#000000",i.style.opacity="0.4",e&&i.setAttribute("transform",e),i},dot:function(t){var e=void 0;"circle"!==t.nodeName&&(e=t.getAttribute("transform"),t=t.childNodes[0]);var i=t.cloneNode(),n=t.getAttribute("r"),a=t.getAttribute("fill");return i.setAttribute("r",parseInt(n)+4),i.setAttribute("fill",a),i.style.opacity="0.6",e&&i.setAttribute("transform",e),i},heat_square:function(t){var e=void 0;"circle"!==t.nodeName&&(e=t.getAttribute("transform"),t=t.childNodes[0]);var i=t.cloneNode(),n=t.getAttribute("r"),a=t.getAttribute("fill");return i.setAttribute("r",parseInt(n)+4),i.setAttribute("fill",a),i.style.opacity="0.6",e&&i.setAttribute("transform",e),i}},_t={bar:function(t,e){var i=void 0;"rect"!==t.nodeName&&(i=t.getAttribute("transform"),t=t.childNodes[0]);var n=["x","y","width","height"];Object.values(t.attributes).filter((function(t){return n.includes(t.name)&&t.specified})).map((function(t){e.setAttribute(t.name,t.nodeValue)})),i&&e.setAttribute("transform",i)},dot:function(t,e){var i=void 0;"circle"!==t.nodeName&&(i=t.getAttribute("transform"),t=t.childNodes[0]);var n=["cx","cy"];Object.values(t.attributes).filter((function(t){return n.includes(t.name)&&t.specified})).map((function(t){e.setAttribute(t.name,t.nodeValue)})),i&&e.setAttribute("transform",i)},heat_square:function(t,e){var i=void 0;"circle"!==t.nodeName&&(i=t.getAttribute("transform"),t=t.childNodes[0]);var n=["cx","cy"];Object.values(t.attributes).filter((function(t){return n.includes(t.name)&&t.specified})).map((function(t){e.setAttribute(t.name,t.nodeValue)})),i&&e.setAttribute("transform",i)}},Et=350,$t=350,Yt=Et,Wt=250,jt="easein",zt={ease:"0.25 0.1 0.25 1",linear:"0 0 1 1",easein:"0.1 0.8 0.2 1",easeout:"0 0 0.58 1",easeinout:"0.42 0 0.58 1"},Ht=".chart-container{position:relative;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI','Roboto','Oxygen','Ubuntu','Cantarell','Fira Sans','Droid Sans','Helvetica Neue',sans-serif}.chart-container .axis,.chart-container .chart-label{fill:#555b51}.chart-container .axis line,.chart-container .chart-label line{stroke:#dadada}.chart-container .dataset-units circle{stroke:#fff;stroke-width:2}.chart-container .dataset-units path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container .dataset-path{stroke-width:2px}.chart-container .path-group path{fill:none;stroke-opacity:1;stroke-width:2px}.chart-container line.dashed{stroke-dasharray:5,3}.chart-container .axis-line .specific-value{text-anchor:start}.chart-container .axis-line .y-line{text-anchor:end}.chart-container .axis-line .x-line{text-anchor:middle}.chart-container .legend-dataset-text{fill:#6c7680;font-weight:600}.graph-svg-tip{position:absolute;z-index:99999;padding:10px;font-size:12px;color:#959da5;text-align:center;background:rgba(0,0,0,.8);border-radius:3px}.graph-svg-tip ul{padding-left:0;display:flex}.graph-svg-tip ol{padding-left:0;display:flex}.graph-svg-tip ul.data-point-list li{min-width:90px;flex:1;font-weight:600}.graph-svg-tip strong{color:#dfe2e5;font-weight:600}.graph-svg-tip .svg-pointer{position:absolute;height:5px;margin:0 0 0 -5px;content:' ';border:5px solid transparent;border-top-color:rgba(0,0,0,.8)}.graph-svg-tip.comparison{padding:0;text-align:left;pointer-events:none}.graph-svg-tip.comparison .title{display:block;padding:10px;margin:0;font-weight:600;line-height:1;pointer-events:none}.graph-svg-tip.comparison ul{margin:0;white-space:nowrap;list-style:none}.graph-svg-tip.comparison li{display:inline-block;padding:5px 10px}",Ft=function(){function e(t,i){if(ut(this,e),i=f(i),this.parent="string"==typeof t?document.querySelector(t):t,!(this.parent instanceof HTMLElement))throw new Error("No `parent` element to render on was provided.");this.rawChartArgs=i,this.title=i.title||"",this.type=i.type||"",this.realData=this.prepareData(i.data),this.data=this.prepareFirstData(this.realData),this.colors=this.validateColors(i.colors,this.type),this.config={showTooltip:1,showLegend:1,isNavigable:i.isNavigable||0,animate:void 0!==i.animate?i.animate:1,truncateLegends:i.truncateLegends||1},this.measures=JSON.parse(JSON.stringify(vt));var n=this.measures;this.setMeasures(i),this.title.length||(n.titleHeight=0),this.config.showLegend||(n.legendHeight=0),this.argHeight=i.height||n.baseHeight,this.state={},this.options={},this.initTimeout=700,this.config.isNavigable&&(this.overlays=[]),this.configure(i)}return ct(e,[{key:"prepareData",value:function(t){return t}},{key:"prepareFirstData",value:function(t){return t}},{key:"validateColors",value:function(t,e){var i=[];return(t=(t||[]).concat(wt[e])).forEach((function(t){var e=Pt(t);!function(t){return/(^\s*)(#)((?:[A-Fa-f0-9]{3}){1,2})$/i.test(t)||/(^\s*)(rgb|hsl)(a?)[(]\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*,\s*([\d.]+\s*%?)\s*(?:,\s*([\d.]+)\s*)?[)]$/i.test(t)}(e)?console.warn('"'+t+'" is not a valid color.'):i.push(e)})),i}},{key:"setMeasures",value:function(){}},{key:"configure",value:function(){var t=this,e=this.argHeight;this.baseHeight=e,this.height=e-s(this.measures),this.boundDrawFn=function(){return t.draw(!0)},ResizeObserver&&(this.resizeObserver=new ResizeObserver(this.boundDrawFn),this.resizeObserver.observe(this.parent)),window.addEventListener("resize",this.boundDrawFn),window.addEventListener("orientationchange",this.boundDrawFn)}},{key:"destroy",value:function(){this.resizeObserver&&this.resizeObserver.disconnect(),window.removeEventListener("resize",this.boundDrawFn),window.removeEventListener("orientationchange",this.boundDrawFn)}},{key:"setup",value:function(){this.makeContainer(),this.updateWidth(),this.makeTooltip(),this.draw(!1,!0)}},{key:"makeContainer",value:function(){this.parent.innerHTML="";var e={inside:this.parent,className:"chart-container"};this.independentWidth&&(e.styles={width:this.independentWidth+"px"}),this.container=t.create("div",e)}},{key:"makeTooltip",value:function(){this.tip=new Dt({parent:this.container,colors:this.colors}),this.bindTooltip()}},{key:"bindTooltip",value:function(){}},{key:"draw",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&i(this.parent)||(this.updateWidth(),this.calc(e),this.makeChartArea(),this.setupComponents(),this.components.forEach((function(e){return e.setup(t.drawArea)})),this.render(this.components,!1),n&&(this.data=this.realData,setTimeout((function(){t.update(t.data)}),this.initTimeout)),this.renderLegend(),this.setupNavigation(n))}},{key:"calc",value:function(){}},{key:"updateWidth",value:function(){this.baseWidth=function(t){var e=window.getComputedStyle(t),i=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight);return t.clientWidth-i}(this.parent),this.width=this.baseWidth-o(this.measures)}},{key:"makeChartArea",value:function(){this.svg&&this.container.removeChild(this.svg);var t=this.measures;this.svg=function(t,e,i,n){return k("svg",{className:e,inside:t,width:i,height:n})}(this.container,"frappe-chart chart",this.baseWidth,this.baseHeight),this.svgDefs=function(t){return k("defs",{inside:t})}(this.svg),this.title.length&&(this.titleEL=T("title",t.margins.left,t.margins.top,this.title,{fontSize:t.titleFontSize,fill:"#666666",dy:t.titleFontSize}));var e=a(t);this.drawArea=P(this.type+"-chart chart-draw-area","translate("+r(t)+", "+e+")"),this.config.showLegend&&(e+=this.height+t.paddings.bottom,this.legendArea=P("chart-legend","translate("+r(t)+", "+e+")")),this.title.length&&this.svg.appendChild(this.titleEL),this.svg.appendChild(this.drawArea),this.config.showLegend&&this.svg.appendChild(this.legendArea),this.updateTipOffset(r(t),a(t))}},{key:"updateTipOffset",value:function(t,e){this.tip.offset={x:t,y:e}}},{key:"setupComponents",value:function(){this.components=new Map}},{key:"update",value:function(t){t||console.error("No data to update."),this.data=this.prepareData(t),this.calc(),this.render(this.components,this.config.animate),this.renderLegend()}},{key:"render",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.components,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.config.isNavigable&&this.overlays.map((function(t){return t.parentNode.removeChild(t)}));var n=[];e.forEach((function(t){n=n.concat(t.update(i))})),n.length>0?(z(this.container,this.svg,n),setTimeout((function(){e.forEach((function(t){return t.make()})),t.updateNav()}),400)):(e.forEach((function(t){return t.make()})),this.updateNav())}},{key:"updateNav",value:function(){this.config.isNavigable&&(this.makeOverlay(),this.bindUnits())}},{key:"renderLegend",value:function(){}},{key:"setupNavigation",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.config.isNavigable&&e&&(this.bindOverlay(),this.keyActions={13:this.onEnterKey.bind(this),37:this.onLeftArrow.bind(this),38:this.onUpArrow.bind(this),39:this.onRightArrow.bind(this),40:this.onDownArrow.bind(this)},document.addEventListener("keydown",(function(e){n(t.container)&&(e=e||window.event,t.keyActions[e.keyCode]&&t.keyActions[e.keyCode]())})))}},{key:"makeOverlay",value:function(){}},{key:"updateOverlay",value:function(){}},{key:"bindOverlay",value:function(){}},{key:"bindUnits",value:function(){}},{key:"onLeftArrow",value:function(){}},{key:"onRightArrow",value:function(){}},{key:"onUpArrow",value:function(){}},{key:"onDownArrow",value:function(){}},{key:"onEnterKey",value:function(){}},{key:"addDataPoint",value:function(){}},{key:"removeDataPoint",value:function(){}},{key:"getDataPoint",value:function(){}},{key:"setCurrentDataPoint",value:function(){}},{key:"updateDataset",value:function(){}},{key:"export",value:function(){var t=H(this.svg);!function(t,e){var i=document.createElement("a");i.style="display: none";var n=new Blob(e,{type:"image/svg+xml; charset=utf-8"}),a=window.URL.createObjectURL(n);i.href=a,i.download=t,document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(a)}),300)}(this.title||"Chart",[t])}}]),e}(),It=function(t){function e(t,i){return ut(this,e),ft(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i))}return dt(e,t),ct(e,[{key:"configure",value:function(t){ht(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"configure",this).call(this,t),this.config.formatTooltipY=(t.tooltipOptions||{}).formatTooltipY,this.config.maxSlices=t.maxSlices||20,this.config.maxLegendPoints=t.maxLegendPoints||20}},{key:"calc",value:function(){var t=this,e=this.state,i=this.config.maxSlices;e.sliceTotals=[];var n=this.data.labels.map((function(e,i){var n=0;return t.data.datasets.map((function(t){n+=t.values[i]})),[n,e]})).filter((function(t){return t[0]>=0})),a=n;if(n.length>i){n.sort((function(t,e){return e[0]-t[0]})),a=n.slice(0,i-1);var r=0;n.slice(i-1).map((function(t){r+=t[0]})),a.push([r,"Rest"]),this.colors[i-1]="grey"}e.labels=[],a.map((function(t){e.sliceTotals.push(function(t){return Number(Math.round(t+"e4")+"e-4")}(t[0])),e.labels.push(t[1])})),e.grandTotal=e.sliceTotals.reduce((function(t,e){return t+e}),0),this.center={x:this.width/2,y:this.height/2}}},{key:"renderLegend",value:function(){var t=this,e=this.state;this.legendArea.textContent="",this.legendTotals=e.sliceTotals.slice(0,this.config.maxLegendPoints);var i=0,n=0;this.legendTotals.map((function(a,r){var s=150,l=Math.floor((t.width-o(t.measures))/s);t.legendTotals.length<l&&(s=t.width/t.legendTotals.length),i>l&&(i=0,n+=20);var u=s*i+5,c=t.config.truncateLegends?v(e.labels[r],s/10):e.labels[r],h=t.config.formatTooltipY?t.config.formatTooltipY(a):a,d=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",a=arguments[4];a=arguments.length>5&&void 0!==arguments[5]&&arguments[5]?v(a,Ot):a;var r={className:"legend-dot",cx:0,cy:0,r:i,fill:n},s=k("text",{className:"legend-dataset-text",x:0,y:0,dx:Tt+"px",dy:Tt/3+"px","font-size":1.2*Tt+"px","text-anchor":"start",fill:Ct,innerHTML:a}),o=k("g",{transform:"translate("+t+", "+e+")"});return o.appendChild(k("circle",r)),o.appendChild(s),o}(u,n,5,t.colors[r],c+": "+h,!1);t.legendArea.appendChild(d),i++}))}}]),e}(Ft),Rt=7,Ut=1e3,Vt=86400,Bt=["January","February","March","April","May","June","July","August","September","October","November","December"],Gt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],qt=function(){function t(e){var i=e.layerClass,n=void 0===i?"":i,a=e.layerTransform,r=void 0===a?"":a,s=e.constants,o=e.getData,l=e.makeElements,u=e.animateElements;ut(this,t),this.layerTransform=r,this.constants=s,this.makeElements=l,this.getData=o,this.animateElements=u,this.store=[],this.labels=[],this.layerClass=n,this.layerClass="function"==typeof this.layerClass?this.layerClass():this.layerClass,this.refresh()}return ct(t,[{key:"refresh",value:function(t){this.data=t||this.getData()}},{key:"setup",value:function(t){this.layer=P(this.layerClass,this.layerTransform,t)}},{key:"make",value:function(){this.render(this.data),this.oldData=this.data}},{key:"render",value:function(t){var e=this;this.store=this.makeElements(t),this.layer.textContent="",this.store.forEach((function(t){e.layer.appendChild(t)})),this.labels.forEach((function(t){e.layer.appendChild(t)}))}},{key:"update",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.refresh();var e=[];return t&&(e=this.animateElements(this.data)||[]),e}}]),t}(),Jt={donutSlices:{layerClass:"donut-slices",makeElements:function(t){return t.sliceStrings.map((function(e,i){var n=S(e,"donut-path",t.colors[i],"none",t.strokeWidth);return n.style.transition="transform .3s;",n}))},animateElements:function(t){return this.store.map((function(e,i){return $(e,t.sliceStrings[i])}))}},pieSlices:{layerClass:"pie-slices",makeElements:function(t){return t.sliceStrings.map((function(e,i){var n=S(e,"pie-path","none",t.colors[i]);return n.style.transition="transform .3s;",n}))},animateElements:function(t){return this.store.map((function(e,i){return $(e,t.sliceStrings[i])}))}},percentageBars:{layerClass:"percentage-bars",makeElements:function(t){var e=this;return t.xPositions.map((function(i,n){return function(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:yt,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"none";return k("rect",{className:"percentage-bar",x:t,y:e,width:i,height:n,fill:r,styles:{stroke:x(r,-25),"stroke-dasharray":"0, "+(n+i)+", "+i+", "+n,"stroke-width":a}})}(i,0,t.widths[n],e.constants.barHeight,e.constants.barDepth,t.colors[n])}))},animateElements:function(t){if(t)return[]}},yAxis:{layerClass:"y axis",makeElements:function(t){var e=this;return t.positions.map((function(i,n){return function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};d(t)||(t=0),n.pos||(n.pos="left"),n.offset||(n.offset=0),n.mode||(n.mode="span"),n.stroke||(n.stroke=At),n.className||(n.className="");var a=-1*St,r="span"===n.mode?i+St:0;return"tick"===n.mode&&"right"===n.pos&&(a=i+St,r=i),C(t,e,a+=n.offset,r+=n.offset,{stroke:n.stroke,className:n.className,lineType:n.lineType,shortenNumbers:n.shortenNumbers})}(i,t.labels[n],e.constants.width,{mode:e.constants.mode,pos:e.constants.pos,shortenNumbers:e.constants.shortenNumbers})}))},animateElements:function(t){var e=t.positions,i=t.labels,n=this.oldData.positions,a=this.oldData.labels,r=m(n,e),s=pt(r,2);n=s[0],e=s[1];var o=m(a,i),l=pt(o,2);return a=l[0],i=l[1],this.render({positions:n,labels:i}),this.store.map((function(t,i){return _(t,e[i],n[i])}))}},xAxis:{layerClass:"x axis",makeElements:function(t){var e=this;return t.positions.map((function(i,n){return function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};d(t)||(t=0),n.pos||(n.pos="bottom"),n.offset||(n.offset=0),n.mode||(n.mode="span"),n.stroke||(n.stroke=At),n.className||(n.className="");var a=i+St,r="span"===n.mode?-1*St:i;return"tick"===n.mode&&"top"===n.pos&&(a=-1*St,r=0),A(t,e,a,r,{stroke:n.stroke,className:n.className,lineType:n.lineType})}(i,t.calcLabels[n],e.constants.height,{mode:e.constants.mode,pos:e.constants.pos})}))},animateElements:function(t){var e=t.positions,i=t.calcLabels,n=this.oldData.positions,a=this.oldData.calcLabels,r=m(n,e),s=pt(r,2);n=s[0],e=s[1];var o=m(a,i),l=pt(o,2);return a=l[0],i=l[1],this.render({positions:n,calcLabels:i}),this.store.map((function(t,i){return function(t,e,i){return N(t,[i,0],[e,0],Yt)}(t,e[i],n[i])}))}},yMarkers:{layerClass:"y-markers",makeElements:function(t){var e=this;return t.map((function(t){return function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};n.labelPos||(n.labelPos="right");var a=k("text",{className:"chart-label",x:"left"===n.labelPos?Lt:i-c(e,5)-Lt,y:0,dy:Tt/-2+"px","font-size":Tt+"px","text-anchor":"start",innerHTML:e+""}),r=C(t,"",0,i,{stroke:n.stroke||At,className:n.className||"",lineType:n.lineType});return r.appendChild(a),r}(t.position,t.label,e.constants.width,{labelPos:t.options.labelPos,mode:"span",lineType:"dashed"})}))},animateElements:function(t){var e=m(this.oldData,t),i=pt(e,2);this.oldData=i[0];var n=(t=i[1]).map((function(t){return t.position})),a=t.map((function(t){return t.label})),r=t.map((function(t){return t.options})),s=this.oldData.map((function(t){return t.position}));return this.render(s.map((function(t,e){return{position:s[e],label:a[e],options:r[e]}}))),this.store.map((function(t,e){return _(t,n[e],s[e])}))}},yRegions:{layerClass:"y-regions",makeElements:function(t){var e=this;return t.map((function(t){return function(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=t-e,s=k("rect",{className:"bar mini",styles:{fill:"rgba(228, 234, 239, 0.49)",stroke:At,"stroke-dasharray":i+", "+r},x:0,y:0,width:i,height:r});a.labelPos||(a.labelPos="right");var o=k("text",{className:"chart-label",x:"left"===a.labelPos?Lt:i-c(n+"",4.5)-Lt,y:0,dy:Tt/-2+"px","font-size":Tt+"px","text-anchor":"start",innerHTML:n+""}),l=k("g",{transform:"translate(0, "+e+")"});return l.appendChild(s),l.appendChild(o),l}(t.startPos,t.endPos,e.constants.width,t.label,{labelPos:t.options.labelPos})}))},animateElements:function(t){var e=m(this.oldData,t),i=pt(e,2);this.oldData=i[0];var n=(t=i[1]).map((function(t){return t.endPos})),a=t.map((function(t){return t.label})),r=t.map((function(t){return t.startPos})),s=t.map((function(t){return t.options})),o=this.oldData.map((function(t){return t.endPos})),l=this.oldData.map((function(t){return t.startPos}));this.render(o.map((function(t,e){return{startPos:l[e],endPos:o[e],label:a[e],options:s[e]}})));var u=[];return this.store.map((function(t,e){u=u.concat(function(t,e,i,n){var a=e-i,r=t.childNodes[0];return[[r,{height:a,"stroke-dasharray":r.getAttribute("width")+", "+a},Yt,jt],N(t,[0,n],[0,i],Yt)]}(t,r[e],n[e],o[e]))})),u}},heatDomain:{layerClass:function(){return"heat-domain domain-"+this.constants.index},makeElements:function(t){var e=this,i=this.constants,n=i.index,a=i.colWidth,r=i.rowHeight,s=i.squareSize,o=i.radius,l=i.xTranslate,u=0;return this.serializedSubDomains=[],t.cols.map((function(t,i){1===i&&e.labels.push(T("domain-name",l,-12,B(n,!0).toUpperCase(),{fontSize:9})),t.map((function(t,i){if(t.fill){var n={"data-date":t.yyyyMmDd,"data-value":t.dataValue,"data-day":i},a=O("day",l,u,s,o,t.fill,n);e.serializedSubDomains.push(a)}u+=r})),u=0,l+=a})),this.serializedSubDomains},animateElements:function(t){if(t)return[]}},barGraph:{layerClass:function(){return"dataset-units dataset-bars dataset-"+this.constants.index},makeElements:function(t){var e=this.constants;return this.unitType="bar",this.units=t.yPositions.map((function(i,n){return function(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},l=p(e,o.zeroLine),u=pt(l,2),c=u[0],h=u[1];h-=s,0===c&&(c=o.minHeight,h-=o.minHeight),d(t)||(t=0),d(h)||(h=0),d(c,!0)||(c=0),d(i,!0)||(i=0);var f=k("rect",{className:"bar mini",style:"fill: "+n,"data-point-index":r,x:t,y:h,width:i,height:c});if((a+="")||a.length){f.setAttribute("y",0),f.setAttribute("x",0);var m=k("text",{className:"data-point-value",x:i/2,y:0,dy:Tt/2*-1+"px","font-size":Tt+"px","text-anchor":"middle",innerHTML:a}),v=k("g",{"data-point-index":r,transform:"translate("+t+", "+h+")"});return v.appendChild(f),v.appendChild(m),v}return f}(t.xPositions[n],i,t.barWidth,e.color,t.labels[n],n,t.offsets[n],{zeroLine:t.zeroLine,barsWidth:t.barsWidth,minHeight:e.minHeight})})),this.units},animateElements:function(t){var e=t.xPositions,i=t.yPositions,n=t.offsets,a=t.labels,r=this.oldData.xPositions,s=this.oldData.yPositions,o=this.oldData.offsets,l=this.oldData.labels,u=m(r,e),c=pt(u,2);r=c[0],e=c[1];var h=m(s,i),d=pt(h,2);s=d[0],i=d[1];var f=m(o,n),p=pt(f,2);o=p[0],n=p[1];var v=m(l,a),g=pt(v,2);l=g[0],a=g[1],this.render({xPositions:r,yPositions:s,offsets:o,labels:a,zeroLine:this.oldData.zeroLine,barsWidth:this.oldData.barsWidth,barWidth:this.oldData.barWidth});var y=[];return this.store.map((function(a,r){y=y.concat(E(a,e[r],i[r],t.barWidth,n[r],{zeroLine:t.zeroLine}))})),y}},lineGraph:{layerClass:function(){return"dataset-units dataset-line dataset-"+this.constants.index},makeElements:function(t){var e=this.constants;return this.unitType="dot",this.paths={},e.hideLine||(this.paths=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},r=e.map((function(e,i){return t[i]+","+e})).join("L");n.spline&&(r=y(t,e));var s=S("M"+r,"line-graph-path",i);if(n.heatline){var o=L(a.svgDefs,i);s.style.stroke="url(#"+o+")"}var l={path:s};if(n.regionFill){var u=L(a.svgDefs,i,!0),c="M"+t[0]+","+a.zeroLine+"L"+r+"L"+t.slice(-1)[0]+","+a.zeroLine;l.region=S(c,"region-fill","none","url(#"+u+")")}return l}(t.xPositions,t.yPositions,e.color,{heatline:e.heatline,regionFill:e.regionFill,spline:e.spline},{svgDefs:e.svgDefs,zeroLine:t.zeroLine})),this.units=[],e.hideDots||(this.units=t.yPositions.map((function(i,n){return function(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=k("circle",{style:"fill: "+n,"data-point-index":r,cx:t,cy:e,r:i});if((a+="")||a.length){s.setAttribute("cy",0),s.setAttribute("cx",0);var o=k("text",{className:"data-point-value",x:0,y:0,dy:Tt/2*-1-i+"px","font-size":Tt+"px","text-anchor":"middle",innerHTML:a}),l=k("g",{"data-point-index":r,transform:"translate("+t+", "+e+")"});return l.appendChild(s),l.appendChild(o),l}return s}(t.xPositions[n],i,t.radius,e.color,e.valuesOverPoints?t.values[n]:"",n)}))),Object.values(this.paths).concat(this.units)},animateElements:function(t){var e=t.xPositions,i=t.yPositions,n=t.values,a=this.oldData.xPositions,r=this.oldData.yPositions,s=this.oldData.values,o=m(a,e),l=pt(o,2);a=l[0],e=l[1];var u=m(r,i),c=pt(u,2);r=c[0],i=c[1];var h=m(s,n),d=pt(h,2);s=d[0],n=d[1],this.render({xPositions:a,yPositions:r,values:n,zeroLine:this.oldData.zeroLine,radius:this.oldData.radius});var f=[];return Object.keys(this.paths).length&&(f=f.concat(function(t,e,i,n,a){var r=[],s=i.map((function(t,i){return e[i]+","+t})).join("L");a&&(s=y(e,i));var o=[t.path,{d:"M"+s},$t,jt];if(r.push(o),t.region){var l=e[0]+","+n+"L",u="L"+e.slice(-1)[0]+", "+n,c=[t.region,{d:"M"+l+s+u},$t,jt];r.push(c)}return r}(this.paths,e,i,t.zeroLine,this.constants.spline))),this.units.length&&this.units.map((function(t,n){f=f.concat(function(t,e,i){return"circle"!==t.nodeName?[N(t,t.getAttribute("transform").split("(")[1].slice(0,-1),[e,i],Yt)]:[[t,{cx:e,cy:i},Et,jt]]}(t,e[n],i[n]))})),f}}},Xt=function(t){function i(t,e){ut(this,i);var n=ft(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return n.type="percentage",n.setup(),n}return dt(i,t),ct(i,[{key:"setMeasures",value:function(t){var e=this.measures;this.barOptions=t.barOptions||{};var i=this.barOptions;i.height=i.height||20,i.depth=i.depth||yt,e.paddings.right=30,e.legendHeight=60,e.baseHeight=8*(i.height+.5*i.depth)}},{key:"setupComponents",value:function(){var t=this.state,e=[["percentageBars",{barHeight:this.barOptions.height,barDepth:this.barOptions.depth},function(){return{xPositions:t.xPositions,widths:t.widths,colors:this.colors}}.bind(this)]];this.components=new Map(e.map((function(t){var e=X.apply(void 0,mt(t));return[t[0],e]})))}},{key:"calc",value:function(){var t=this;ht(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"calc",this).call(this);var e=this.state;e.xPositions=[],e.widths=[];var n=0;e.sliceTotals.map((function(i){var a=t.width*i/e.grandTotal;e.widths.push(a),e.xPositions.push(n),n+=a}))}},{key:"makeDataByIndex",value:function(){}},{key:"bindTooltip",value:function(){var t=this,i=this.state;this.container.addEventListener("mousemove",(function(n){var a=t.components.get("percentageBars").store,r=n.target;if(a.includes(r)){var s=a.indexOf(r),o=e(t.container),l=e(r),u=l.left-o.left+parseInt(r.getAttribute("width"))/2,c=l.top-o.top,h=(t.formattedLabels&&t.formattedLabels.length>0?t.formattedLabels[s]:t.state.labels[s])+": ",d=i.sliceTotals[s]/i.grandTotal;t.tip.setValues(u,c,{name:h,value:(100*d).toFixed(1)+"%"}),t.tip.showTip()}}))}}]),i}(It),Zt=function(t){function i(t,e){ut(this,i);var n=ft(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return n.type="pie",n.initTimeout=0,n.init=1,n.setup(),n}return dt(i,t),ct(i,[{key:"configure",value:function(t){ht(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"configure",this).call(this,t),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=t.hoverRadio||.1,this.config.startAngle=t.startAngle||0,this.clockWise=t.clockWise||!1}},{key:"calc",value:function(){var t=this;ht(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"calc",this).call(this);var e=this.state;this.radius=this.height>this.width?this.center.x:this.center.y;var n=this.radius,a=this.clockWise,r=e.slicesProperties||[];e.sliceStrings=[],e.slicesProperties=[];var s=180-this.config.startAngle;e.sliceTotals.map((function(i,o){var l=s,u=i/e.grandTotal*360,c=u>180?1:0,d=a?-u:u,f=s+=d,p=h(l,n),m=h(f,n),v=t.init&&r[o],g=void 0,y=void 0;t.init?(g=v?v.startPosition:p,y=v?v.endPosition:p):(g=p,y=m);var b=360===u?function(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=i.x+t.x,o=i.y+t.y,l=i.x+e.x,u=2*i.y,c=i.y+e.y;return"M"+i.x+" "+i.y+"\n\t\tL"+s+" "+o+"\n\t\tA "+n+" "+n+" 0 "+r+" "+(a?1:0)+"\n\t\t"+l+" "+u+" z\n\t\tL"+s+" "+u+"\n\t\tA "+n+" "+n+" 0 "+r+" "+(a?1:0)+"\n\t\t"+l+" "+c+" z"}(g,y,t.center,t.radius,a,c):function(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=i.x+t.x,o=i.y+t.y,l=i.x+e.x,u=i.y+e.y;return"M"+i.x+" "+i.y+"\n\t\tL"+s+" "+o+"\n\t\tA "+n+" "+n+" 0 "+r+" "+(a?1:0)+"\n\t\t"+l+" "+u+" z"}(g,y,t.center,t.radius,a,c);e.sliceStrings.push(b),e.slicesProperties.push({startPosition:p,endPosition:m,value:i,total:e.grandTotal,startAngle:l,endAngle:f,angle:d})})),this.init=0}},{key:"setupComponents",value:function(){var t=this.state,e=[["pieSlices",{},function(){return{sliceStrings:t.sliceStrings,colors:this.colors}}.bind(this)]];this.components=new Map(e.map((function(t){var e=X.apply(void 0,mt(t));return[t[0],e]})))}},{key:"calTranslateByAngle",value:function(t){var e=this.radius,i=this.hoverRadio,n=h(t.startAngle+t.angle/2,e);return"translate3d("+n.x*i+"px,"+n.y*i+"px,0)"}},{key:"hoverSlice",value:function(t,i,n,a){if(t){var r=this.colors[i];if(n){W(t,this.calTranslateByAngle(this.state.slicesProperties[i])),t.style.fill=x(r,50);var s=e(this.svg),o=a.pageX-s.left+10,l=a.pageY-s.top-10,u=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[i]:this.state.labels[i])+": ",c=(100*this.state.sliceTotals[i]/this.state.grandTotal).toFixed(1);this.tip.setValues(o,l,{name:u,value:c+"%"}),this.tip.showTip()}else W(t,"translate3d(0,0,0)"),this.tip.hideTip(),t.style.fill=r}}},{key:"bindTooltip",value:function(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}},{key:"mouseMove",value:function(t){var e=t.target,i=this.components.get("pieSlices").store,n=this.curActiveSliceIndex,a=this.curActiveSlice;if(i.includes(e)){var r=i.indexOf(e);this.hoverSlice(a,n,!1),this.curActiveSlice=e,this.curActiveSliceIndex=r,this.hoverSlice(e,r,!0,t)}else this.mouseLeave()}},{key:"mouseLeave",value:function(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}}]),i}(It),Kt=function(t){function e(t,i){ut(this,e);var n=ft(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,i));n.type="heatmap",n.countLabel=i.countLabel||"";var a=["Sunday","Monday"],r=a.includes(i.startSubDomain)?i.startSubDomain:"Sunday";return n.startSubDomainIndex=a.indexOf(r),n.setup(),n}return dt(e,t),ct(e,[{key:"setMeasures",value:function(t){var e=this.measures;this.discreteDomains=0===t.discreteDomains?0:1,e.paddings.top=36,e.paddings.bottom=0,e.legendHeight=24,e.baseHeight=12*Rt+s(e);var i=this.data,n=this.discreteDomains?12:0;this.independentWidth=12*(U(i.start,i.end)+n)+o(e)}},{key:"updateWidth",value:function(){var t=this.discreteDomains?12:0,e=this.state.noOfWeeks?this.state.noOfWeeks:52;this.baseWidth=12*(e+t)+o(this.measures)}},{key:"prepareData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data;if(t.start&&t.end&&t.start>t.end)throw new Error("Start date cannot be greater than end date.");if(t.start||(t.start=new Date,t.start.setFullYear(t.start.getFullYear()-1)),t.end||(t.end=new Date),t.dataPoints=t.dataPoints||{},parseInt(Object.keys(t.dataPoints)[0])>1e5){var e={};Object.keys(t.dataPoints).forEach((function(i){var n=new Date(i*Ut);e[I(n)]=t.dataPoints[i]})),t.dataPoints=e}return t}},{key:"calc",value:function(){var t=this.state;t.start=R(this.data.start),t.end=R(this.data.end),t.firstWeekStart=R(t.start),t.noOfWeeks=U(t.start,t.end),t.distribution=function(t,e){for(var i=Math.max.apply(Math,mt(t)),n=1/(e-1),a=[],r=0;r<e;r++){var s=i*(n*r);a.push(s)}return a}(Object.values(this.data.dataPoints),5),t.domainConfigs=this.getDomains()}},{key:"setupComponents",value:function(){var t=this,e=this.state,i=this.discreteDomains?0:1,n=e.domainConfigs.map((function(n,a){return["heatDomain",{index:n.index,colWidth:12,rowHeight:12,squareSize:10,radius:t.rawChartArgs.radius||0,xTranslate:12*e.domainConfigs.filter((function(t,e){return e<a})).map((function(t){return t.cols.length-i})).reduce((function(t,e){return t+e}),0)},function(){return e.domainConfigs[a]}.bind(t)]}));this.components=new Map(n.map((function(t,e){var i=X.apply(void 0,mt(t));return[t[0]+"-"+e,i]})));var a=0;Gt.forEach((function(e,i){if([1,3,5].includes(i)){var n=T("subdomain-name",-6,a,e,{fontSize:10,dy:8,textAnchor:"end"});t.drawArea.appendChild(n)}a+=12}))}},{key:"update",value:function(t){t||console.error("No data to update."),this.data=this.prepareData(t),this.draw(),this.bindTooltip()}},{key:"bindTooltip",value:function(){var t=this;this.container.addEventListener("mousemove",(function(e){t.components.forEach((function(i){var n=i.store,a=e.target;if(n.includes(a)){var r=a.getAttribute("data-value"),s=a.getAttribute("data-date").split("-"),o=B(parseInt(s[1])-1,!0),l=t.container.getBoundingClientRect(),u=a.getBoundingClientRect(),c=parseInt(e.target.getAttribute("width")),h=u.left-l.left+c/2,d=u.top-l.top,f=r+" "+t.countLabel,p=" on "+o+" "+s[0]+", "+s[2];t.tip.setValues(h,d,{name:p,value:f,valueFirst:1},[]),t.tip.showTip()}}))}))}},{key:"renderLegend",value:function(){var t=this;this.legendArea.textContent="";var e=0,i=this.rawChartArgs.radius||0,n=T("subdomain-name",e,12,"Less",{fontSize:11,dy:9});e=30,this.legendArea.appendChild(n),this.colors.slice(0,5).map((function(n,a){var r=O("heatmap-legend-unit",e+15*a,12,10,i,n);t.legendArea.appendChild(r)}));var a=T("subdomain-name",e+75+3,12,"More",{fontSize:11,dy:9});this.legendArea.appendChild(a)}},{key:"getDomains",value:function(){for(var t=this.state,e=[t.start.getMonth(),t.start.getFullYear()],i=e[0],n=e[1],a=[t.end.getMonth(),t.end.getFullYear()],r=a[0]-i+1+12*(a[1]-n),s=[],o=R(t.start),l=0;l<r;l++){var u=t.end;if(!V(o,t.end)){var c=[o.getMonth(),o.getFullYear()];u=G(c[0],c[1])}s.push(this.getDomainConfig(o,u)),J(u,1),o=u}return s}},{key:"getDomainConfig",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=[t.getMonth(),t.getFullYear()],n=i[0],a=i[1],r=q(t),s={index:n,cols:[]};J(e=R(e)||G(n,a),1);for(var o=U(r,e),l=[],u=void 0,c=0;c<o;c++)u=this.getCol(r,n),l.push(u),J(r=new Date(u[Rt-1].yyyyMmDd),1);return void 0!==u[Rt-1].dataValue&&(J(r,1),l.push(this.getCol(r,n,!0))),s.cols=l,s}},{key:"getCol",value:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this.state,a=R(t),r=[],s=0;s<Rt;s++,J(a,1)){var o={},l=a>=n.start&&a<=n.end;i||a.getMonth()!==e||!l?o.yyyyMmDd=I(a):o=this.getSubDomainConfig(a),r.push(o)}return r}},{key:"getSubDomainConfig",value:function(t){var e=I(t),i=this.data.dataPoints[e];return{yyyyMmDd:e,dataValue:i||0,fill:this.colors[rt(i,this.state.distribution)]}}}]),e}(Ft),Qt=function(t){function i(t,e){ut(this,i);var n=ft(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return n.barOptions=e.barOptions||{},n.lineOptions=e.lineOptions||{},n.type=e.type||"line",n.init=1,n.setup(),n}return dt(i,t),ct(i,[{key:"setMeasures",value:function(){this.data.datasets.length<=1&&(this.config.showLegend=0,this.measures.paddings.bottom=30)}},{key:"configure",value:function(t){ht(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"configure",this).call(this,t),t.axisOptions=t.axisOptions||{},t.tooltipOptions=t.tooltipOptions||{},this.config.xAxisMode=t.axisOptions.xAxisMode||"span",this.config.yAxisMode=t.axisOptions.yAxisMode||"span",this.config.xIsSeries=t.axisOptions.xIsSeries||0,this.config.shortenYAxisNumbers=t.axisOptions.shortenYAxisNumbers||0,this.config.formatTooltipX=t.tooltipOptions.formatTooltipX,this.config.formatTooltipY=t.tooltipOptions.formatTooltipY,this.config.valuesOverPoints=t.valuesOverPoints}},{key:"prepareData",value:function(){return st(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data,this.type)}},{key:"prepareFirstData",value:function(){return ot(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data)}},{key:"calc",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.calcXPositions(),t||this.calcYAxisParameters(this.getAllYValues(),"line"===this.type),this.makeDataByIndex()}},{key:"calcXPositions",value:function(){var t=this.state,e=this.data.labels;t.datasetLength=e.length,t.unitWidth=this.width/t.datasetLength,t.xOffset=t.unitWidth/2,t.xAxis={labels:e,positions:e.map((function(e,i){return l(t.xOffset+i*t.unitWidth)}))}}},{key:"calcYAxisParameters",value:function(t){var e=tt(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:"false"),i=this.height/nt(e),n=it(e)*i,a=this.height-et(e)*n;this.state.yAxis={labels:e,positions:e.map((function(t){return a-t*i})),scaleMultiplier:i,zeroLine:a},this.calcDatasetPoints(),this.calcYExtremes(),this.calcYRegions()}},{key:"calcDatasetPoints",value:function(){var t=this.state,e=function(e){return e.map((function(e){return at(e,t.yAxis)}))};t.datasets=this.data.datasets.map((function(t,i){var n=t.values,a=t.cumulativeYs||[];return{name:t.name&&t.name.replace(/<|>|&/g,(function(t){return"&"==t?"&amp;":"<"==t?"&lt;":"&gt;"})),index:i,chartType:t.chartType,values:n,yPositions:e(n),cumulativeYs:a,cumulativeYPos:e(a)}}))}},{key:"calcYExtremes",value:function(){var t=this.state;this.barOptions.stacked?t.yExtremes=t.datasets[t.datasets.length-1].cumulativeYPos:(t.yExtremes=new Array(t.datasetLength).fill(9999),t.datasets.map((function(e){e.yPositions.map((function(e,i){e<t.yExtremes[i]&&(t.yExtremes[i]=e)}))})))}},{key:"calcYRegions",value:function(){var t=this.state;this.data.yMarkers&&(this.state.yMarkers=this.data.yMarkers.map((function(e){return e.position=at(e.value,t.yAxis),e.options||(e.options={}),e}))),this.data.yRegions&&(this.state.yRegions=this.data.yRegions.map((function(e){return e.startPos=at(e.start,t.yAxis),e.endPos=at(e.end,t.yAxis),e.options||(e.options={}),e})))}},{key:"getAllYValues",value:function(){var t,e=this,i="values";if(this.barOptions.stacked){i="cumulativeYs";var n=new Array(this.state.datasetLength).fill(0);this.data.datasets.map((function(t,a){var r=e.data.datasets[a].values;t[i]=n=n.map((function(t,e){return t+r[e]}))}))}var a=this.data.datasets.map((function(t){return t[i]}));return this.data.yMarkers&&a.push(this.data.yMarkers.map((function(t){return t.value}))),this.data.yRegions&&this.data.yRegions.map((function(t){a.push([t.end,t.start])})),(t=[]).concat.apply(t,mt(a))}},{key:"setupComponents",value:function(){var t=this,e=[["yAxis",{mode:this.config.yAxisMode,width:this.width,shortenNumbers:this.config.shortenYAxisNumbers},function(){return this.state.yAxis}.bind(this)],["xAxis",{mode:this.config.xAxisMode,height:this.height},function(){var t=this.state;return t.xAxis.calcLabels=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=t/e.length;n<=0&&(n=1);var a=n/bt,r=void 0;if(i){var s=Math.max.apply(Math,mt(e.map((function(t){return t.length}))));r=Math.ceil(s/a)}return e.map((function(t,e){return(t+="").length>a&&(i?e%r!=0&&(t=""):t=a-3>0?t.slice(0,a-3)+" ...":t.slice(0,a)+".."),t}))}(this.width,t.xAxis.labels,this.config.xIsSeries),t.xAxis}.bind(this)],["yRegions",{width:this.width,pos:"right"},function(){return this.state.yRegions}.bind(this)]],i=this.state.datasets.filter((function(t){return"bar"===t.chartType})),n=this.state.datasets.filter((function(t){return"line"===t.chartType})),a=i.map((function(e){var n=e.index;return["barGraph-"+e.index,{index:n,color:t.colors[n],stacked:t.barOptions.stacked,valuesOverPoints:t.config.valuesOverPoints,minHeight:0*t.height},function(){var t=this.state,e=t.datasets[n],a=this.barOptions.stacked,r=this.barOptions.spaceRatio||.5,s=t.unitWidth*(1-r),o=s/(a?1:i.length),l=t.xAxis.positions.map((function(t){return t-s/2}));a||(l=l.map((function(t){return t+o*n})));var u=new Array(t.datasetLength).fill("");this.config.valuesOverPoints&&(u=a&&e.index===t.datasets.length-1?e.cumulativeYs:e.values);var c=new Array(t.datasetLength).fill(0);return a&&(c=e.yPositions.map((function(t,i){return t-e.cumulativeYPos[i]}))),{xPositions:l,yPositions:e.yPositions,offsets:c,labels:u,zeroLine:t.yAxis.zeroLine,barsWidth:s,barWidth:o}}.bind(t)]})),r=n.map((function(e){var i=e.index;return["lineGraph-"+e.index,{index:i,color:t.colors[i],svgDefs:t.svgDefs,heatline:t.lineOptions.heatline,regionFill:t.lineOptions.regionFill,spline:t.lineOptions.spline,hideDots:t.lineOptions.hideDots,hideLine:t.lineOptions.hideLine,valuesOverPoints:t.config.valuesOverPoints},function(){var t=this.state,e=t.datasets[i],n=t.yAxis.positions[0]<t.yAxis.zeroLine?t.yAxis.positions[0]:t.yAxis.zeroLine;return{xPositions:t.xAxis.positions,yPositions:e.yPositions,values:e.values,zeroLine:n,radius:this.lineOptions.dotSize||4}}.bind(t)]})),s=[["yMarkers",{width:this.width,pos:"right"},function(){return this.state.yMarkers}.bind(this)]];e=e.concat(a,r,s);var o=["yMarkers","yRegions"];this.dataUnitComponents=[],this.components=new Map(e.filter((function(e){return!o.includes(e[0])||t.state[e[0]]})).map((function(e){var i=X.apply(void 0,mt(e));return(e[0].includes("lineGraph")||e[0].includes("barGraph"))&&t.dataUnitComponents.push(i),[e[0],i]})))}},{key:"makeDataByIndex",value:function(){var t=this;this.dataByIndex={};var e=this.state,i=this.config.formatTooltipX,n=this.config.formatTooltipY;e.xAxis.labels.map((function(a,r){var s=t.state.datasets.map((function(e,i){var a=e.values[r];return{title:e.name,value:a,yPos:e.yPositions[r],color:t.colors[i],formatted:n?n(a):a}}));t.dataByIndex[r]={label:a,formattedLabel:i?i(a):a,xPos:e.xAxis.positions[r],values:s,yExtreme:e.yExtremes[r]}}))}},{key:"bindTooltip",value:function(){var t=this;this.container.addEventListener("mousemove",(function(i){var n=t.measures,s=e(t.container),o=i.pageX-s.left-r(n),l=i.pageY-s.top;l<t.height+a(n)&&l>a(n)?t.mapTooltipXPosition(o):t.tip.hideTip()}))}},{key:"mapTooltipXPosition",value:function(t){var e=this.state;if(e.yExtremes){var i=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.reduce((function(e,i){return Math.abs(i-t)<Math.abs(e-t)?i:e}),[]);return i?e.indexOf(n):n}(t,e.xAxis.positions,!0);if(i>=0){var n=this.dataByIndex[i];this.tip.setValues(n.xPos+this.tip.offset.x,n.yExtreme+this.tip.offset.y,{name:n.formattedLabel,value:""},n.values,i),this.tip.showTip()}}}},{key:"renderLegend",value:function(){var t=this,e=this.data;e.datasets.length>1&&(this.legendArea.textContent="",e.datasets.map((function(e,i){var n=function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none",a=arguments[4];a=arguments.length>5&&void 0!==arguments[5]&&arguments[5]?v(a,Ot):a;var r={className:"legend-bar",x:0,y:0,width:i,height:"2px",fill:n},s=k("text",{className:"legend-dataset-text",x:0,y:0,dy:2*Tt+"px","font-size":1.2*Tt+"px","text-anchor":"start",fill:Ct,innerHTML:a}),o=k("g",{transform:"translate("+t+", "+e+")"});return o.appendChild(k("rect",r)),o.appendChild(s),o}(100*i,"0",100,t.colors[i],e.name,t.config.truncateLegends);t.legendArea.appendChild(n)})))}},{key:"makeOverlay",value:function(){var t=this;this.init?this.init=0:(this.overlayGuides&&this.overlayGuides.forEach((function(t){var e=t.overlay;e.parentNode.removeChild(e)})),this.overlayGuides=this.dataUnitComponents.map((function(t){return{type:t.unitType,overlay:void 0,units:t.units}})),void 0===this.state.currentIndex&&(this.state.currentIndex=this.state.datasetLength-1),this.overlayGuides.map((function(e){var i=e.units[t.state.currentIndex];e.overlay=Nt[e.type](i),t.drawArea.appendChild(e.overlay)})))}},{key:"updateOverlayGuides",value:function(){this.overlayGuides&&this.overlayGuides.forEach((function(t){var e=t.overlay;e.parentNode.removeChild(e)}))}},{key:"bindOverlay",value:function(){var t=this;this.parent.addEventListener("data-select",(function(){t.updateOverlay()}))}},{key:"bindUnits",value:function(){var t=this;this.dataUnitComponents.map((function(e){e.units.map((function(e){e.addEventListener("click",(function(){var i=e.getAttribute("data-point-index");t.setCurrentDataPoint(i)}))}))})),this.tip.container.addEventListener("click",(function(){var e=t.tip.container.getAttribute("data-point-index");t.setCurrentDataPoint(e)}))}},{key:"updateOverlay",value:function(){var t=this;this.overlayGuides.map((function(e){var i=e.units[t.state.currentIndex];_t[e.type](i,e.overlay)}))}},{key:"onLeftArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex-1)}},{key:"onRightArrow",value:function(){this.setCurrentDataPoint(this.state.currentIndex+1)}},{key:"getDataPoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.currentIndex,e=this.state;return{index:t,label:e.xAxis.labels[t],values:e.datasets.map((function(e){return e.values[t]}))}}},{key:"setCurrentDataPoint",value:function(t){var e=this.state;(t=parseInt(t))<0&&(t=0),t>=e.xAxis.labels.length&&(t=e.xAxis.labels.length-1),t!==e.currentIndex&&(e.currentIndex=t,function(t,e,i){var n=document.createEvent("HTMLEvents");for(var a in n.initEvent(e,!0,!0),i)n[a]=i[a];t.dispatchEvent(n)}(this.parent,"data-select",this.getDataPoint()))}},{key:"addDataPoint",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.datasetLength;ht(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"addDataPoint",this).call(this,t,e,n),this.data.labels.splice(n,0,t),this.data.datasets.map((function(t,i){t.values.splice(n,0,e[i])})),this.update(this.data)}},{key:"removeDataPoint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.datasetLength-1;this.data.labels.length<=1||(ht(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"removeDataPoint",this).call(this,t),this.data.labels.splice(t,1),this.data.datasets.map((function(e){e.values.splice(t,1)})),this.update(this.data))}},{key:"updateDataset",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.data.datasets[e].values=t,this.update(this.data)}},{key:"updateDatasets",value:function(t){this.data.datasets.map((function(e,i){t[i]&&(e.values=t[i])})),this.update(this.data)}}]),i}(Ft),te=function(t){function i(t,e){ut(this,i);var n=ft(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,t,e));return n.type="donut",n.initTimeout=0,n.init=1,n.setup(),n}return dt(i,t),ct(i,[{key:"configure",value:function(t){ht(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"configure",this).call(this,t),this.mouseMove=this.mouseMove.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.hoverRadio=t.hoverRadio||.1,this.config.startAngle=t.startAngle||0,this.clockWise=t.clockWise||!1,this.strokeWidth=t.strokeWidth||30}},{key:"calc",value:function(){var t=this;ht(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"calc",this).call(this);var e=this.state;this.radius=this.height>this.width?this.center.x-this.strokeWidth/2:this.center.y-this.strokeWidth/2;var n=this.radius,a=this.clockWise,r=e.slicesProperties||[];e.sliceStrings=[],e.slicesProperties=[];var s=180-this.config.startAngle;e.sliceTotals.map((function(i,o){var l=s,u=i/e.grandTotal*360,c=u>180?1:0,d=a?-u:u,f=s+=d,p=h(l,n),m=h(f,n),v=t.init&&r[o],g=void 0,y=void 0;t.init?(g=v?v.startPosition:p,y=v?v.endPosition:p):(g=p,y=m);var b=360===u?function(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=i.x+t.x,o=i.y+t.y,l=i.x+e.x,u=2*n+o;return"M"+s+" "+o+"\n\t\tA "+n+" "+n+" 0 "+r+" "+(a?1:0)+"\n\t\t"+l+" "+u+"\n\t\tM"+s+" "+u+"\n\t\tA "+n+" "+n+" 0 "+r+" "+(a?1:0)+"\n\t\t"+l+" "+(i.y+t.y)}(g,y,t.center,t.radius,t.clockWise,c):function(t,e,i,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return"M"+(i.x+t.x)+" "+(i.y+t.y)+"\n\t\tA "+n+" "+n+" 0 "+r+" "+(a?1:0)+"\n\t\t"+(i.x+e.x)+" "+(i.y+e.y)}(g,y,t.center,t.radius,t.clockWise,c);e.sliceStrings.push(b),e.slicesProperties.push({startPosition:p,endPosition:m,value:i,total:e.grandTotal,startAngle:l,endAngle:f,angle:d})})),this.init=0}},{key:"setupComponents",value:function(){var t=this.state,e=[["donutSlices",{},function(){return{sliceStrings:t.sliceStrings,colors:this.colors,strokeWidth:this.strokeWidth}}.bind(this)]];this.components=new Map(e.map((function(t){var e=X.apply(void 0,mt(t));return[t[0],e]})))}},{key:"calTranslateByAngle",value:function(t){var e=this.radius,i=this.hoverRadio,n=h(t.startAngle+t.angle/2,e);return"translate3d("+n.x*i+"px,"+n.y*i+"px,0)"}},{key:"hoverSlice",value:function(t,i,n,a){if(t){var r=this.colors[i];if(n){W(t,this.calTranslateByAngle(this.state.slicesProperties[i])),t.style.stroke=x(r,50);var s=e(this.svg),o=a.pageX-s.left+10,l=a.pageY-s.top-10,u=(this.formatted_labels&&this.formatted_labels.length>0?this.formatted_labels[i]:this.state.labels[i])+": ",c=(100*this.state.sliceTotals[i]/this.state.grandTotal).toFixed(1);this.tip.setValues(o,l,{name:u,value:c+"%"}),this.tip.showTip()}else W(t,"translate3d(0,0,0)"),this.tip.hideTip(),t.style.stroke=r}}},{key:"bindTooltip",value:function(){this.container.addEventListener("mousemove",this.mouseMove),this.container.addEventListener("mouseleave",this.mouseLeave)}},{key:"mouseMove",value:function(t){var e=t.target,i=this.components.get("donutSlices").store,n=this.curActiveSliceIndex,a=this.curActiveSlice;if(i.includes(e)){var r=i.indexOf(e);this.hoverSlice(a,n,!1),this.curActiveSlice=e,this.curActiveSliceIndex=r,this.hoverSlice(e,r,!0,t)}else this.mouseLeave()}},{key:"mouseLeave",value:function(){this.hoverSlice(this.curActiveSlice,this.curActiveSliceIndex,!1)}}]),i}(It),ee={bar:Qt,line:Qt,percentage:Xt,heatmap:Kt,pie:Zt,donut:te},ie=Object.freeze({Chart:function t(e,i){return ut(this,t),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"line",e=arguments[1],i=arguments[2];return"axis-mixed"===t?(i.type="line",new Qt(e,i)):ee[t]?new ee[t](e,i):void console.error("Undefined chart type: "+t)}(i.type,e,i)},PercentageChart:Xt,PieChart:Zt,Heatmap:Kt,AxisChart:Qt});return Object.assign({},{NAME:"Frappe Charts",VERSION:"1.6.2"},ie)}()},440:(t,e,i)=>{var n=i(75).default;function a(){"use strict";t.exports=a=function(){return e},t.exports.__esModule=!0,t.exports.default=t.exports;var e={},i=Object.prototype,r=i.hasOwnProperty,s=Object.defineProperty||function(t,e,i){t[e]=i.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",u=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function h(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(t){h=function(t,e,i){return t[e]=i}}function d(t,e,i,n){var a=e&&e.prototype instanceof m?e:m,r=Object.create(a.prototype),o=new O(n||[]);return s(r,"_invoke",{value:M(t,i,o)}),r}function f(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}e.wrap=d;var p={};function m(){}function v(){}function g(){}var y={};h(y,l,(function(){return this}));var b=Object.getPrototypeOf,x=b&&b(b(T([])));x&&x!==i&&r.call(x,l)&&(y=x);var w=g.prototype=m.prototype=Object.create(y);function k(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function D(t,e){function i(a,s,o,l){var u=f(t[a],t,s);if("throw"!==u.type){var c=u.arg,h=c.value;return h&&"object"==n(h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,o,l)}),(function(t){i("throw",t,o,l)})):e.resolve(h).then((function(t){c.value=t,o(c)}),(function(t){return i("throw",t,o,l)}))}l(u.arg)}var a;s(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,a){i(t,n,e,a)}))}return a=a?a.then(r,r):r()}})}function M(t,e,i){var n="suspendedStart";return function(a,r){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw r;return{value:void 0,done:!0}}for(i.method=a,i.arg=r;;){var s=i.delegate;if(s){var o=P(s,i);if(o){if(o===p)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===n)throw n="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n="executing";var l=f(t,e,i);if("normal"===l.type){if(n=i.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n="completed",i.method="throw",i.arg=l.arg)}}}function P(t,e){var i=t.iterator[e.method];if(void 0===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,P(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=f(i,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var a=n.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[l];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:A}}function A(){return{value:void 0,done:!0}}return v.prototype=g,s(w,"constructor",{value:g,configurable:!0}),s(g,"constructor",{value:v,configurable:!0}),v.displayName=h(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,h(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},e.awrap=function(t){return{__await:t}},k(D.prototype),h(D.prototype,u,(function(){return this})),e.AsyncIterator=D,e.async=function(t,i,n,a,r){void 0===r&&(r=Promise);var s=new D(d(t,i,n,a),r);return e.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},k(w),h(w,c,"Generator"),h(w,l,(function(){return this})),h(w,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),i=[];for(var n in e)i.push(n);return i.reverse(),function t(){for(;i.length;){var n=i.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,n){return s.type="throw",s.arg=t,e.next=i,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var o=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(o&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),L(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var a=n.arg;L(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:T(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=void 0),p}},e}t.exports=a,t.exports.__esModule=!0,t.exports.default=t.exports},75:t=>{function e(i){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(i)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},507:(t,e,i)=>{var n=i(440)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},e={};function i(n){var a=e[n];if(void 0!==a)return a.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var n={};(()=>{"use strict";i.r(n);const t=flarum.core.compat["admin/app"];var e=i.n(t);const a=flarum.core.compat["common/extend"],r=flarum.core.compat["admin/components/DashboardPage"];var s=i.n(r);function o(t,e,i,n,a,r,s){try{var o=t[r](s),l=o.value}catch(t){return void i(t)}o.done?e(l):Promise.resolve(l).then(n,a)}function l(t){return function(){var e=this,i=arguments;return new Promise((function(n,a){var r=t.apply(e,i);function s(t){o(r,n,a,s,l,"next",t)}function l(t){o(r,n,a,s,l,"throw",t)}s(void 0)}))}}function u(t,e){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u(t,e)}function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,u(t,e)}var h=i(507),d=i.n(h);const f=flarum.core.compat["admin/components/DashboardWidget"];var p=i.n(f);const v=flarum.core.compat["common/components/LoadingIndicator"];var g=i.n(v);const y=flarum.core.compat["common/components/Link"];var b=i.n(y);const x=flarum.core.compat["common/utils/abbreviateNumber"];var w=i.n(x),k=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).entities=["users","discussions","posts"],e.lifetimeData=void 0,e.loadingLifetime=!0,e}c(i,t);var n=i.prototype;return n.oncreate=function(e){t.prototype.oncreate.call(this,e),this.loadLifetimeData()},n.loadLifetimeData=function(){var t=l(d().mark((function t(){var i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadingLifetime=!0,m.redraw(),t.next=4,e().request({method:"GET",url:e().forum.attribute("apiUrl")+"/statistics",params:{period:"lifetime"}});case 4:i=t.sent,this.lifetimeData=i,this.loadingLifetime=!1,m.redraw();case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.className=function(){return"StatisticsWidget StatisticsWidget--mini"},n.content=function(){var t=this;return m("div",{className:"StatisticsWidget-table"},m("h4",{className:"StatisticsWidget-title"},e().translator.trans("flarum-statistics.admin.statistics.mini_heading")),m("div",{className:"StatisticsWidget-entities"},m("div",{className:"StatisticsWidget-labels"},m("div",{className:"StatisticsWidget-label"},e().translator.trans("flarum-statistics.admin.statistics.total_label"))),this.entities.map((function(i){var n=t.loadingLifetime?e().translator.trans("flarum-statistics.admin.statistics.loading"):t.getTotalCount(i);return m("div",{className:"StatisticsWidget-entity"},m("h3",{className:"StatisticsWidget-heading"},e().translator.trans("flarum-statistics.admin.statistics."+i+"_heading")),m("div",{className:"StatisticsWidget-total",title:n},t.loadingLifetime?m(g(),{display:"inline"}):w()(n)))}))),m("div",{className:"StatisticsWidget-viewFull"},m(b(),{href:e().route("extension",{id:"flarum-statistics"})},e().translator.trans("flarum-statistics.admin.statistics.view_full"))))},n.getTotalCount=function(t){return this.lifetimeData[t]},i}(p());const D=flarum.core.compat["admin/components/ExtensionPage"];var M=i.n(D);function P(){return P=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},P.apply(this,arguments)}const S=flarum.core.compat["common/components/SelectDropdown"];var L=i.n(S);const O=flarum.core.compat["common/components/Button"];var T=i.n(O);const A=flarum.core.compat["common/utils/extractText"];var C=i.n(A);const N=flarum.core.compat["common/components/Placeholder"];var _=i.n(N);const E=flarum.core.compat["common/helpers/icon"];var $=i.n(E);const Y=flarum.core.compat["common/utils/classList"];var W=i.n(Y);const j=flarum.core.compat["common/utils/ItemList"];var z=i.n(j);const H=flarum.core.compat["admin/utils/generateElementId"];var F=i.n(H);const I=flarum.core.compat["common/components/Modal"];var R=i.n(I),U=i(757),V=i.n(U),B=i(221),G=i.n(B);V().extend(G());var q=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).state={inputs:{startDateVal:V()().format("YYYY-MM-DD"),endDateVal:V()().format("YYYY-MM-DD")},ids:{startDate:F()(),endDate:F()()}},e}c(i,t);var n=i.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.attrs.value&&(this.state.inputs={startDateVal:V().utc(1e3*this.attrs.value.start).format("YYYY-MM-DD"),endDateVal:V().utc(1e3*this.attrs.value.end).format("YYYY-MM-DD")})},n.className=function(){return"StatisticsWidgetDateSelectionModal Modal--small"},n.title=function(){return e().translator.trans("flarum-statistics.admin.date_selection_modal.title")},n.content=function(){return m("div",{className:"Modal-body"},this.items().toArray())},n.items=function(){var t=new(z());return t.add("intro",m("p",null,e().translator.trans("flarum-statistics.admin.date_selection_modal.description")),100),t.add("date_start",m("div",{className:"Form-group"},m("label",{htmlFor:this.state.ids.startDate},e().translator.trans("flarum-statistics.admin.date_selection_modal.start_date")),m("input",{type:"date",id:this.state.ids.startDate,value:this.state.inputs.startDateVal,onchange:this.updateState("startDateVal"),className:"FormControl"})),90),t.add("date_end",m("div",{className:"Form-group"},m("label",{htmlFor:this.state.ids.endDate},e().translator.trans("flarum-statistics.admin.date_selection_modal.end_date")),m("input",{type:"date",id:this.state.ids.endDate,value:this.state.inputs.endDateVal,onchange:this.updateState("endDateVal"),className:"FormControl"})),80),t.add("submit",m(T(),{className:"Button Button--primary",type:"submit"},e().translator.trans("flarum-statistics.admin.date_selection_modal.submit_button")),0),t},n.updateState=function(t){var e=this;return function(i){e.state.inputs[t]=i.currentTarget.value}},n.submitData=function(){return{start:Math.floor(+V().utc(this.state.inputs.startDateVal+"Z")/1e3),end:Math.floor(+V().utc(this.state.inputs.endDateVal+"Z").hour(23).minute(59).second(59).millisecond(999)/1e3)}},n.onsubmit=function(t){t.preventDefault();var i=this.submitData();i.end<i.start?this.alertAttrs={type:"error",controls:e().translator.trans("flarum-statistics.admin.date_selection_modal.errors.end_before_start")}:(this.attrs.onModalSubmit(i),this.hide())},i}(R()),J=i(982),X=i.n(J),Z=i(23);V().extend(G()),V().extend(X());var K=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),a=0;a<i;a++)n[a]=arguments[a];return(e=t.call.apply(t,[this].concat(n))||this).entities=["users","discussions","posts"],e.periods=void 0,e.chart=void 0,e.customPeriod=null,e.timedData={},e.lifetimeData=void 0,e.customPeriodData={},e.noData=!1,e.loadingLifetime=!0,e.loadingTimed=e.entities.reduce((function(t,e){return t[e]="unloaded",t}),{}),e.loadingCustom=e.entities.reduce((function(t,e){return t[e]="unloaded",t}),{}),e.selectedEntity="users",e.selectedPeriod=void 0,e.chartEntity=void 0,e.chartPeriod=void 0,e}c(i,t);var n=i.prototype;return n.oncreate=function(e){t.prototype.oncreate.call(this,e),this.loadLifetimeData()},n.loadLifetimeData=function(){var t=l(d().mark((function t(){var i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadingLifetime=!0,m.redraw(),t.next=4,e().request({method:"GET",url:e().forum.attribute("apiUrl")+"/statistics",params:{period:"lifetime"}});case 4:i=t.sent,this.lifetimeData=i,this.loadingLifetime=!1,m.redraw();case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),n.loadTimedData=function(){var t=l(d().mark((function t(i){var n,a,r;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadingTimed[i]="loading",m.redraw(),t.prev=2,t.next=5,e().request({method:"GET",url:e().forum.attribute("apiUrl")+"/statistics",params:{period:"timed",model:i}});case 5:n=t.sent,this.timedData[i]=n,this.loadingTimed[i]="loaded",(a=new Date).setUTCHours(0,0,0,0),r=a.getTime()/1e3,this.periods={today:{start:r,end:r+86400,step:3600},last_7_days:{start:r-604800,end:r,step:86400},previous_7_days:{start:r-1209600,end:r-604800,step:86400},last_28_days:{start:r-2419200,end:r,step:86400},previous_28_days:{start:r-4838400,end:r-2419200,step:86400},last_12_months:{start:r-31449600,end:r,step:604800}},this.selectedPeriod="last_7_days",t.next=19;break;case 15:t.prev=15,t.t0=t.catch(2),console.error(t.t0),this.loadingTimed[i]="fail";case 19:m.redraw();case 20:case"end":return t.stop()}}),t,this,[[2,15]])})));return function(e){return t.apply(this,arguments)}}(),n.loadCustomRangeData=function(){var t=l(d().mark((function t(i){var n,a;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.loadingCustom[i]="loading",m.redraw(),n=P({},this.customPeriod),t.prev=3,t.next=6,e().request({method:"GET",url:e().forum.attribute("apiUrl")+"/statistics",params:{period:"custom",model:i,dateRange:{start:n.start,end:n.end}}});case 6:if(a=t.sent,JSON.stringify(n)===JSON.stringify(this.customPeriod)){t.next=9;break}return t.abrupt("return");case 9:this.customPeriodData[i]=a,this.loadingCustom[i]="loaded",m.redraw(),t.next=20;break;case 14:if(t.prev=14,t.t0=t.catch(3),JSON.stringify(n)===JSON.stringify(this.customPeriod)){t.next=18;break}return t.abrupt("return");case 18:console.error(t.t0),this.loadingCustom[i]="fail";case 20:case"end":return t.stop()}}),t,this,[[3,14]])})));return function(e){return t.apply(this,arguments)}}(),n.className=function(){return"StatisticsWidget"},n.content=function(){var t,i,n=this,a="loaded"!==("custom"===this.selectedPeriod?this.loadingCustom:this.loadingTimed)[this.selectedEntity],r=a?null:"custom"===this.selectedPeriod?{start:null==(t=this.customPeriod)?void 0:t.end,end:null==(i=this.customPeriod)?void 0:i.end,step:86400}:this.periods[this.selectedPeriod];return"custom"===this.selectedPeriod?this.customPeriodData[this.selectedEntity]||"unloaded"!==this.loadingCustom[this.selectedEntity]||this.loadCustomRangeData(this.selectedEntity):this.timedData[this.selectedEntity]||"unloaded"!==this.loadingTimed[this.selectedEntity]||this.loadTimedData(this.selectedEntity),m("div",{className:"StatisticsWidget-table"},m("div",{className:"StatisticsWidget-entities"},m("div",{className:"StatisticsWidget-labels"},m("div",{className:"StatisticsWidget-label"},e().translator.trans("flarum-statistics.admin.statistics.total_label")),m("div",{className:"StatisticsWidget-label"},a?m(g(),{size:"small",display:"inline"}):m(L(),{disabled:a,buttonClassName:"Button Button--text",caretIcon:"fas fa-caret-down"},Object.keys(this.periods).map((function(t){return m(T(),{key:t,active:t===n.selectedPeriod,onclick:n.changePeriod.bind(n,t),icon:t!==n.selectedPeriod||"fas fa-check"},e().translator.trans("flarum-statistics.admin.statistics."+t+"_label"))})).concat([m(T(),{key:"custom",active:"custom"===this.selectedPeriod,onclick:function(){var t={onModalSubmit:function(t){JSON.stringify(t)!==JSON.stringify(n.customPeriod)&&(n.customPeriodData={},Object.keys(n.loadingCustom).forEach((function(t){return n.loadingCustom[t]="unloaded"})),n.customPeriod=t,n.changePeriod("custom"))}};n.customPeriod&&(t.value=n.customPeriod),e().modal.show(q,t)},icon:"custom"!==this.selectedPeriod||"fas fa-check"},"custom"===this.selectedPeriod?C()(e().translator.trans("flarum-statistics.admin.statistics.custom_label_specified",{fromDate:V().utc(1e3*this.customPeriod.start).format("ll"),toDate:V().utc(1e3*this.customPeriod.end).format("ll")})):e().translator.trans("flarum-statistics.admin.statistics.custom_label"))])))),this.entities.map((function(t){var i=n.loadingLifetime?e().translator.trans("flarum-statistics.admin.statistics.loading"):n.getTotalCount(t),s=a?e().translator.trans("flarum-statistics.admin.statistics.loading"):n.getPeriodCount(t,r),o="custom"===n.selectedPeriod?null:a?e().translator.trans("flarum-statistics.admin.statistics.loading"):n.getPeriodCount(t,n.getLastPeriod(r)),l=a||0===o||null===o?0:(s-o)/o*100;return m("button",{className:W()("Button--ua-reset StatisticsWidget-entity",{active:n.selectedEntity===t}),onclick:n.changeEntity.bind(n,t)},m("h3",{className:"StatisticsWidget-heading"},e().translator.trans("flarum-statistics.admin.statistics."+t+"_heading")),m("div",{className:"StatisticsWidget-total",title:i},n.loadingLifetime?m(g(),{display:"inline"}):w()(i)),m("div",{className:"StatisticsWidget-period",title:s},a?m(g(),{display:"inline"}):w()(s),0!==l&&m("[",null," ",m("span",{className:"StatisticsWidget-change StatisticsWidget-change--"+(l>0?"up":"down")},$()("fas fa-arrow-"+(l>0?"up":"down")),Math.abs(l).toFixed(1),"%"))))}))),m("[",null,a?m("div",{key:"loading",className:"StatisticsWidget-chart","data-loading":"true"},m(g(),{size:"large"})):m("div",{key:"loaded",className:"StatisticsWidget-chart","data-loading":"false",oncreate:this.drawChart.bind(this),onupdate:this.drawChart.bind(this)})),this.noData&&m(_(),{text:e().translator.trans("flarum-statistics.admin.statistics.no_data")}),!this.noData&&!!this.chart&&m(T(),{className:"StatisticsWidget-chartExport Button",icon:"fas fa-file-export",onclick:function(){n.chart.export()}},e().translator.trans("flarum-statistics.admin.statistics.export_chart_button")))},n.drawChart=function(t){var i,n;if(!this.chart||this.chartEntity!==this.selectedEntity||this.chartPeriod!==this.selectedPeriod){for(var a="custom"===this.selectedPeriod?{start:null==(i=this.customPeriod)?void 0:i.start,end:null==(n=this.customPeriod)?void 0:n.end,step:86400}:this.periods[this.selectedPeriod],r=a.end-a.start,s=[],o=[],l=[],u=a.start;u<a.end;u+=a.step){var c=void 0;a.step<86400?c=V().unix(u).utc().format("h A"):(c=V().unix(u).utc().format("D MMM"),a.step>86400&&(c+=" - "+V().unix(u+a.step-1).utc().format("D MMM"))),s.push(c),o.push(this.getPeriodCount(this.selectedEntity,{start:u,end:u+a.step})),l.push(this.getPeriodCount(this.selectedEntity,{start:u-r,end:u-r}))}if(0===o.length)return this.noData=!0,void m.redraw();this.noData=!1,m.redraw();var h={labels:s,datasets:[{name:C()(e().translator.trans("flarum-statistics.admin.statistics.current_period")),values:o},{name:C()(e().translator.trans("flarum-statistics.admin.statistics.previous_period")),values:l}]};this.chart&&16&document.compareDocumentPosition(this.chart.parent)?this.chart.update(h):this.chart=new Z.Chart(t.dom,{data:h,type:"line",height:280,axisOptions:{xAxisMode:"tick",yAxisMode:"span",xIsSeries:!0},lineOptions:{hideDots:1,regionFill:1},colors:[e().forum.attribute("themePrimaryColor"),"black"]}),this.chartEntity=this.selectedEntity,this.chartPeriod=this.selectedPeriod}},n.changeEntity=function(t){this.selectedEntity=t},n.changePeriod=function(t){this.selectedPeriod=t},n.getTotalCount=function(t){return this.lifetimeData[t]},n.getPeriodCount=function(t,e){var i=("custom"===this.selectedPeriod?this.customPeriodData:this.timedData)[t],n=0;for(var a in i){var r=parseInt(a);r>=e.start&&r<e.end&&(n+=i[r])}return n},n.getLastPeriod=function(t){return{start:t.start-(t.end-t.start),end:t.start}},i}(p()),Q=function(t){function e(){return t.apply(this,arguments)||this}return c(e,t),e.prototype.content=function(){return m("div",{className:"StatisticsPage"},m("div",{className:"container"},m(K,null)))},e}(M());const tt={"statistics/components/MiniStatisticsWidget":k,"statistics/components/StatisticsPage":Q,"statistics/components/StatisticsWidget":K,"statistics/components/StatisticsWidgetDateSelectionModal":q},et=flarum.core;e().initializers.add("flarum-statistics",(function(){(0,a.extend)(s().prototype,"availableWidgets",(function(t){t.add("statistics",m(k,null),20)})),e().extensionData.for("flarum-statistics").registerPage(Q)})),Object.assign(et.compat,tt)})(),module.exports=n})();


flarum.extensions['flarum-statistics']=module.exports;

var module={};

(()=>{var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var a in r)e.o(r,a)&&!e.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:r[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t);const r=flarum.core.compat["admin/app"];var a=e.n(r);a().initializers.add("flarum-mentions",(function(){a().extensionData.for("flarum-mentions").registerSetting({setting:"flarum-mentions.allow_username_format",type:"boolean",label:a().translator.trans("flarum-mentions.admin.settings.allow_username_format_label"),help:a().translator.trans("flarum-mentions.admin.settings.allow_username_format_text")}).registerPermission({permission:"mentionGroups",label:a().translator.trans("flarum-mentions.admin.permissions.mention_groups_label"),icon:"fas fa-at"},"start")}))})(),module.exports=t})();


flarum.extensions['flarum-mentions']=module.exports;

var module={};

(()=>{var t={n:o=>{var e=o&&o.__esModule?()=>o.default:()=>o;return t.d(e,{a:e}),e},d:(o,e)=>{for(var r in e)t.o(e,r)&&!t.o(o,r)&&Object.defineProperty(o,r,{enumerable:!0,get:e[r]})},o:(t,o)=>Object.prototype.hasOwnProperty.call(t,o),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};(()=>{"use strict";t.r(o);const e=flarum.core.compat["admin/app"];var r=t.n(e);const n=flarum.core.compat["common/app"];var i=t.n(n);const a=flarum.core.compat["common/extend"],c=flarum.core.compat["common/components/TextEditor"];var l=t.n(c);const s=flarum.core.compat["common/utils/BasicEditorDriver"];var d=t.n(s);const u=flarum.core.compat["common/utils/styleSelectedText"];var f=t.n(u);function p(t,o){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,o){return t.__proto__=o,t},p(t,o)}function h(t,o){t.prototype=Object.create(o.prototype),t.prototype.constructor=t,p(t,o)}const k=flarum.core.compat["common/Component"];var y=t.n(k),b=function(t){function o(){return t.apply(this,arguments)||this}return h(o,t),o.prototype.view=function(t){return m("div",{className:"MarkdownToolbar"},t.children)},o}(y());const x=flarum.core.compat["common/helpers/icon"];var v=t.n(x);const g=flarum.core.compat["common/components/Tooltip"];var w=t.n(g),_=function(t){function o(){return t.apply(this,arguments)||this}h(o,t);var e=o.prototype;return e.oncreate=function(o){t.prototype.oncreate.call(this,o)},e.view=function(){var t=m("button",{className:"Button Button--icon Button--link",type:"button","data-hotkey":this.attrs.hotkey,onkeydown:this.keydown.bind(this),onclick:this.attrs.onclick},v()(this.attrs.icon));return this.attrs.title?m(w(),{text:this.attrs.title},t):t},e.keydown=function(t){" "!==t.key&&"Enter"!==t.key||(t.preventDefault(),this.element.click())},o}(y());const O=flarum.core.compat["common/utils/ItemList"];var j=t.n(O),T=navigator.userAgent.match(/Macintosh/)?"â":"ctrl",P={header:{prefix:"### "},bold:{prefix:"**",suffix:"**",trimFirst:!0},italic:{prefix:"_",suffix:"_",trimFirst:!0},strikethrough:{prefix:"~~",suffix:"~~",trimFirst:!0},quote:{prefix:"> ",multiline:!0,surroundWithNewlines:!0},code:{prefix:"`",suffix:"`",blockPrefix:"```",blockSuffix:"```"},link:{prefix:"[",suffix:"](https://)",replaceNext:"https://",scanFor:"https?://"},image:{prefix:"![",suffix:"](https://)",replaceNext:"https://",scanFor:"https?://"},unordered_list:{prefix:"- ",multiline:!0,surroundWithNewlines:!0},ordered_list:{prefix:"1. ",multiline:!0,orderedList:!0},spoiler:{prefix:">!",suffix:"!<",blockPrefix:">! ",multiline:!0,trimFirst:!0}},S=function(t,o){f()(o.el,P[t])};function I(t,o,e){return function(r){r.key===o&&(r.metaKey&&"â"===T||r.ctrlKey&&"ctrl"===T)&&(r.preventDefault(),S(t,e))}}function M(t){var o=this,e="function"==typeof t?t():new(j());function r(t,o){return i().translator.trans("flarum-markdown.lib.composer."+t+"_tooltip")+(o?" <"+T+"-"+o+">":"")}var n=function(t){return function(){return S(t,o.attrs.composer.editor)}};return e.add("header",m(_,{title:r("header"),icon:"fas fa-heading",onclick:n("header")}),1e3),e.add("bold",m(_,{title:r("bold","b"),icon:"fas fa-bold",onclick:n("bold")}),900),e.add("italic",m(_,{title:r("italic","i"),icon:"fas fa-italic",onclick:n("italic")}),800),e.add("strikethrough",m(_,{title:r("strikethrough"),icon:"fas fa-strikethrough",onclick:n("strikethrough")}),700),e.add("quote",m(_,{title:r("quote"),icon:"fas fa-quote-left",onclick:n("quote")}),600),e.add("spoiler",m(_,{title:r("spoiler"),icon:"fas fa-exclamation-triangle",onclick:n("spoiler")}),500),e.add("code",m(_,{title:r("code"),icon:"fas fa-code",onclick:n("code")}),400),e.add("link",m(_,{title:r("link"),icon:"fas fa-link",onclick:n("link")}),300),e.add("image",m(_,{title:r("image"),icon:"fas fa-image",onclick:n("image")}),200),e.add("unordered_list",m(_,{title:r("unordered_list"),icon:"fas fa-list-ul",onclick:n("unordered_list")}),100),e.add("ordered_list",m(_,{title:r("ordered_list"),icon:"fas fa-list-ol",onclick:n("ordered_list")}),0),e}function F(){return F=Object.assign?Object.assign.bind():function(t){for(var o=1;o<arguments.length;o++){var e=arguments[o];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},F.apply(this,arguments)}const N=F({},{"markdown/components/MarkdownButton":_,"markdown/components/MarkdownToolbar":b}),q=flarum.core;r().initializers.add("flarum-markdown",(function(t){(0,a.extend)(d().prototype,"keyHandlers",(function(t){t.add("bold",I("bold","b",this)),t.add("italic",I("italic","i",this))})),l().prototype.markdownToolbarItems?(0,a.override)(l().prototype,"markdownToolbarItems",M):l().prototype.markdownToolbarItems=M,(0,a.extend)(l().prototype,"toolbarItems",(function(t){t.add("markdown",m(b,{for:this.textareaId,setShortcutHandler:function(t){return shortcutHandler=t}},this.markdownToolbarItems().toArray()),100)}))})),Object.assign(q.compat,N)})(),module.exports=o})();


flarum.extensions['flarum-markdown']=module.exports;

var module={};

(()=>{var e={n:o=>{var r=o&&o.__esModule?()=>o.default:()=>o;return e.d(r,{a:r}),r},d:(o,r)=>{for(var a in r)e.o(r,a)&&!e.o(o,a)&&Object.defineProperty(o,a,{enumerable:!0,get:r[a]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};(()=>{"use strict";e.r(o);const r=flarum.core.compat["admin/app"];var a=e.n(r);a().initializers.add("lock",(function(){a().extensionData.for("flarum-lock").registerPermission({icon:"fas fa-lock",label:a().translator.trans("flarum-lock.admin.permissions.lock_discussions_label"),permission:"discussion.lock"},"moderate",95)}))})(),module.exports=o})();


flarum.extensions['flarum-lock']=module.exports;

var module={};

(()=>{var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var s in r)e.o(r,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:r[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t);const r=flarum.core.compat["admin/app"];var s=e.n(r);s().initializers.add("flarum-likes",(function(){s().extensionData.for("flarum-likes").registerPermission({icon:"far fa-thumbs-up",label:s().translator.trans("flarum-likes.admin.permissions.like_posts_label"),permission:"discussion.likePosts"},"reply").registerSetting({setting:"flarum-likes.like_own_post",type:"bool",label:s().translator.trans("flarum-likes.admin.settings.like_own_posts_label"),help:s().translator.trans("flarum-likes.admin.settings.like_own_posts_help")})}))})(),module.exports=t})();


flarum.extensions['flarum-likes']=module.exports;

var module={};
(()=>{var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};(()=>{"use strict";e.r(t);const r=flarum.core.compat["admin/app"];var o=e.n(r);o().initializers.add("flarum-lang-spanish-languagePackWithVariants",(function(){o().extensionData.for("flarum-lang-spanish").registerSetting({"setting":"flarum-lang-spanish.variant","type":"select","label":"Preferencia","options":{"informal":"Informal","formal":"Formal"},"default":"informal"})}))})(),module.exports=t})();

flarum.extensions['flarum-lang-spanish-languagePackWithVariants']=module.exports;

var module={};

(()=>{var e={n:n=>{var o=n&&n.__esModule?()=>n.default:()=>n;return e.d(o,{a:o}),o},d:(n,o)=>{for(var r in o)e.o(o,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:o[r]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},n={};(()=>{"use strict";e.r(n);const o=flarum.core.compat["admin/app"];var r=e.n(o);const t=flarum.core.compat["common/components/Switch"];var a=e.n(t);const s=flarum.core.compat["common/models/Group"];var i=e.n(s),l="clarkwinkelmann-who-read.admin.settings.";r().initializers.add("clarkwinkelmann-who-read",(function(){r().extensionData.for("clarkwinkelmann-who-read").registerSetting((function(){var e=this,n=this.setting("who-read.onlyGroups","")().split(",").filter((function(e){return parseInt(e)>0}));return[m(".Form-group",[a().component({state:"1"===this.setting("who-read.showInDiscussionList","1")(),onchange:function(n){e.setting("who-read.showInDiscussionList")(n?"1":"0")}},r().translator.trans(l+"show-in-discussion-list"))]),m(".Form-group",[a().component({state:"1"===this.setting("who-read.showInHero","1")(),onchange:function(n){e.setting("who-read.showInHero")(n?"1":"0")}},r().translator.trans(l+"show-in-hero"))]),m(".Form-group",[a().component({state:"1"===this.setting("who-read.showBetweenPosts","1")(),onchange:function(n){e.setting("who-read.showBetweenPosts")(n?"1":"0")}},r().translator.trans(l+"show-between-posts"))]),m(".Form-group",[a().component({state:"1"===this.setting("who-read.showCountOfReadersWhoStopped")(),onchange:function(n){e.setting("who-read.showCountOfReadersWhoStopped")(n?"1":"0")}},r().translator.trans(l+"show-count-of-readers-who-stopped"))]),m(".Form-group",[m("label",r().translator.trans(l+"hide-when-behind")),m("input.FormControl",{type:"number",bidi:this.setting("who-read.hideWhenBehind"),min:0})]),m(".Form-group",[m("label",r().translator.trans(l+"max-visible")),m("input.FormControl",{type:"number",bidi:this.setting("who-read.maxVisible","10"),min:0})]),m(".Form-group",[m("label",r().translator.trans(l+"unread-icon")),m("input.FormControl",{type:"text",bidi:this.setting("who-read.unreadIcon"),placeholder:"fas fa-eye-dash"})]),m(".Form-group",[m("label",r().translator.trans(l+"only-groups")),r().store.all("groups").filter((function(e){return e.id()!==i().MEMBER_ID&&e.id()!==i().GUEST_ID})).map((function(o){return a().component({state:-1!==n.indexOf(o.id()),onchange:function(r){var t;t=r?[].concat(n,[o.id()]):n.filter((function(e){return e!==o.id()})),e.setting("who-read.onlyGroups")(t.join(","))}},o.nameSingular())}))])]})).registerPermission({icon:"fas fa-book-reader",label:r().translator.trans("clarkwinkelmann-who-read.admin.permissions.see-read"),permission:"who-read.seeRead",allowGuest:!0},"view").registerPermission({icon:"fas fa-book-reader",label:r().translator.trans("clarkwinkelmann-who-read.admin.permissions.see-subscription"),permission:"who-read.seeSubscription",allowGuest:!0},"view").registerPermission({icon:"fas fa-book-reader",label:r().translator.trans("clarkwinkelmann-who-read.admin.permissions.see-unread"),permission:"who-read.seeUnread",allowGuest:!0},"view").registerPermission({icon:"fas fa-book-reader",label:r().translator.trans("clarkwinkelmann-who-read.admin.permissions.mark-unread"),permission:"who-read.markUnread"},"reply")}))})(),module.exports=n})();


flarum.extensions['clarkwinkelmann-who-read']=module.exports;

var module={};

(()=>{var e={n:o=>{var t=o&&o.__esModule?()=>o.default:()=>o;return e.d(t,{a:t}),t},d:(o,t)=>{for(var l in t)e.o(t,l)&&!e.o(o,l)&&Object.defineProperty(o,l,{enumerable:!0,get:t[l]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},o={};(()=>{"use strict";e.r(o);const t=flarum.core.compat["admin/app"];var l=e.n(t);l().initializers.add("blomstra/welcome-login",(function(){l().extensionData.for("blomstra-welcome-login").registerSetting({label:l().translator.trans("blomstra-welcome-login.admin.settings.welcome-only-mobile.label"),setting:"blomstra.welcome-login.only-mobile",type:"boolean",help:l().translator.trans("blomstra-welcome-login.admin.settings.welcome-only-mobile.help")})}))})(),module.exports=o})();


flarum.extensions['blomstra-welcome-login']=module.exports;

//# sourceMappingURL=https://www.testhosp.com/assets/admin.js.map